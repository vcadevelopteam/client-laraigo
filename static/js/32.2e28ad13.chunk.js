(this["webpackJsonpclient-laraigo"]=this["webpackJsonpclient-laraigo"]||[]).push([[32],{1247:function(e,t,a){"use strict";var n=a(45),c=a(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(a(0)),s=(0,n(a(62)).default)(i.createElement("path",{d:"M6 6h12v12H6z"}),"Stop");t.default=s},1485:function(e,t,a){"use strict";a.r(t),a.d(t,"Campaign",(function(){return De}));var n=a(1),c=a(20),i=a(0),s=a.n(i),r=a(25),l=a(40),o=a(94),d=a(7),u=a(779),b=a(169),p=a(122),j=a(718),m=a(8),f=a(83),O=a(44),v=a(3),g=a(26),h=a(783),y=function e(){Object(h.a)(this,e),this.primarykey=void 0,this.column=void 0,this.columns=void 0,this.firstname=void 0,this.lastname=void 0,this.primarykey="",this.column=[],this.columns=[],this.firstname="",this.lastname=""},x=a(24),w=a.n(x),k=a(39),S=a(257),C=a(48),D=a(205),E=a(43),N=Object(E.a)(i.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Event"),A=a(1047),T=a(1048),I=a(1146),H=a(1044),L=a(1045),R=a(1049),_=a(786),M=a.n(_),P=a(265),z=a.n(P),F=a(2),W=Object(b.a)((function(e){return{containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},flexgrow1:{flexGrow:1}}})),V={MANUAL:"manual",SCHEDULED:"scheduled"},U={INTERNAL:"datasource_internal",EXTERNAL:"datasource_external",PERSON:"datasource_person",LEAD:"datasource_lead"},B=[{key:"TEXTO",value:"text"},{key:"HSM",value:"hsm",rif:"startsWith",rifvalue:"WHA"},{key:"SMS",value:"sms",rif:"startsWith",rifvalue:"SMS"},{key:"CALL",value:"call",rif:"starsWith",rifvalue:"VOX"},{key:"MAIL",value:"mail",rif:"starsWith",rifvalue:"MAI"}],q=function(e){var t,a,o,u,b,j,v,h,x,E,A,T,I,H,L=e.row,R=e.edit,_=e.auxdata,M=e.detaildata,P=e.setDetaildata,z=e.multiData,q=(e.fetchData,e.frameProps),K=e.setFrameProps,G=e.setPageSelected,J=e.setSave,Q=W(),Y=Object(l.c)(),$=Object(p.a)().t,Z=Object(g.a)(z[0]&&z[0].success?z[0].data:[]),ee=Object(g.a)(z[1]&&z[1].success?(z[1].data||[]).filter((function(e){return(e.type||"").startsWith("WHA")||(e.type||"").startsWith("SMS")||(e.type||"").startsWith("MAI")||(e.type||"").startsWith("VOX")})):[]),te=Object(g.a)(z[2]&&z[2].success?z[2].data:[]),ae=Object(g.a)(z[3]&&z[3].success?z[3].data:[]),ne=Object(r.b)((function(e){return e.login.validateToken.user})),ce=Object(i.useState)(!1),ie=Object(c.a)(ce,2),se=ie[0],re=ie[1],le=Object(D.d)({defaultValues:{isnew:!L,id:L?L.id:0,communicationchannelid:(null===M||void 0===M?void 0:M.communicationchannelid)||((null===_||void 0===_?void 0:_.length)>0?_[0].communicationchannelid:0),communicationchanneltype:"",usergroup:(null===M||void 0===M?void 0:M.usergroup)||((null===_||void 0===_?void 0:_.length)>0?_[0].usergroup:""),type:(null===M||void 0===M?void 0:M.type)||((null===_||void 0===_?void 0:_.length)>0?_[0].type:"TEXTO"),status:(null===M||void 0===M?void 0:M.status)||((null===_||void 0===_?void 0:_.length)>0?_[0].status:"ACTIVO"),title:"",description:"",subject:"",message:"",startdate:"",enddate:"",repeatable:!1,frecuency:0,source:(null===M||void 0===M?void 0:M.source)||((null===_||void 0===_?void 0:_.length)>0?_[0].source:"EXTERNAL"),messagetemplateid:(null===M||void 0===M?void 0:M.messagetemplateid)||((null===_||void 0===_?void 0:_.length)>0?_[0].messagetemplateid:0),messagetemplatename:"",messagetemplatenamespace:"",messagetemplatetype:"STANDARD",messagetemplateheader:{},messagetemplatebuttons:[],messagetemplatefooter:"",messagetemplateattachment:"",messagetemplatelanguage:"",messagetemplatepriority:"",executiontype:(null===M||void 0===M?void 0:M.executiontype)||((null===_||void 0===_?void 0:_.length)>0?_[0].executiontype:"MANUAL"),batchjson:[],fields:new y,operation:L?"UPDATE":"INSERT",sourcechanged:!1}}),oe=le.register,de=le.setValue,ue=le.getValues,be=le.trigger,pe=le.formState.errors;Object(i.useEffect)((function(){oe("title",{validate:function(e){return e&&e.length||$(m.a.field_required)}}),oe("description",{validate:function(e){return e&&e.length||$(m.a.field_required)}}),oe("startdate",{validate:function(e){return e&&e.length||$(m.a.field_required)}}),oe("enddate",{validate:{value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return e&&e.length||$(m.a.field_required)})),afterstart:function(e){return me(e)||$(m.a.field_afterstart)}}}),oe("executiontype",{validate:function(e){return e&&e.length||$(m.a.field_required)}}),oe("communicationchannelid",{validate:function(e){return e&&e>0||$(m.a.field_required)}}),oe("status",{validate:function(e){return e&&e.length||$(m.a.field_required)}}),oe("source",{validate:function(e){return e&&e.length||$(m.a.field_required)}}),oe("type",{validate:function(e){return e&&e.length||$(m.a.field_required)}}),oe("usergroup",{validate:function(e){var t;return"CLARO"!==(null===ne||void 0===ne||null===(t=ne.properties)||void 0===t?void 0:t.environment)||!["Gestor de Campa\xf1as"].includes((null===ne||void 0===ne?void 0:ne.roledesc)||"")||e&&e.length||$(m.a.field_required)}})}),[R,oe]),Object(i.useEffect)((function(){if(null!==L&&0===Object.keys(M).length){if(_.length>0){var e=ae.find((function(e){return e.id===_[0].messagetemplateid}))||{};je(Object(n.a)(Object(n.a)({},_[0]),{},{messagetemplatename:e.name||_[0].messagetemplatename||"",messagetemplatenamespace:e.namespace||_[0].messagetemplatenamespace||"",messagetemplatetype:e.templatetype||"STANDARD"})),be(),Y(Object(f.z)())}}else 0!==Object.keys(M).length&&(je(M),be())}),[_,M]);var je=function(e){var t;de("id",e.id),de("communicationchannelid",e.communicationchannelid),de("communicationchanneltype",null===(t=ee.filter((function(t){return t.communicationchannelid===(null===e||void 0===e?void 0:e.communicationchannelid)}))[0])||void 0===t?void 0:t.type),de("usergroup",e.usergroup),de("type",e.type),de("status",e.status),de("title",e.title),de("description",e.description),de("subject",e.subject),de("message",e.message),de("startdate",e.startdate),de("enddate",e.enddate),de("repeatable",e.repeatable),de("frecuency",e.frecuency),de("source",e.source||"INTERNAL"),de("messagetemplateid",e.messagetemplateid),de("messagetemplatename",e.messagetemplatename),de("messagetemplatenamespace",e.messagetemplatenamespace),de("messagetemplatetype",e.messagetemplatetype),de("messagetemplateheader",e.messagetemplateheader||{}),de("messagetemplatebuttons",e.messagetemplatebuttons||[]),de("messagetemplatefooter",e.messagetemplatefooter||""),de("messagetemplateattachment",e.messagetemplateattachment||""),de("messagetemplatelanguage",e.messagetemplatelanguage||""),de("messagetemplatepriority",e.messagetemplatepriority||""),de("executiontype",e.executiontype),de("batchjson",e.batchjson||[]),de("fields",Object(n.a)(Object(n.a)({},new y),e.fields))};Object(i.useEffect)((function(){q.checkPage&&be().then((function(e){var t=ue();t.messagetemplateheader=t.messagetemplateheader||{},t.messagetemplatebuttons=t.messagetemplatebuttons||[],t.batchjson=t.batchjson||[],t.fields=Object(n.a)(Object(n.a)({},new y),t.fields),P(Object(n.a)(Object(n.a)({},M),t)),K(Object(n.a)(Object(n.a)({},q),{},{executeSave:!1,checkPage:!1,valid:Object(n.a)(Object(n.a)({},q.valid),{},{0:e})})),2!==q.page||q.valid[1]?e&&G(q.page):Y(Object(O.e)({show:!0,severity:"error",message:$(m.a.no_person_selected)})),e&&q.executeSave&&J("VALIDATION")}))}),[q.checkPage]);var me=function(e){return new Date(e)>=new Date(ue("startdate"))},fe=function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de("executiontype",(null===t||void 0===t?void 0:t.key)||""),e.next=3,be("executiontype");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de("communicationchannelid",(null===t||void 0===t?void 0:t.communicationchannelid)||0),n=null===(a=ee.filter((function(e){return e.communicationchannelid===(null===t||void 0===t?void 0:t.communicationchannelid)}))[0])||void 0===a?void 0:a.type,de("communicationchanneltype",n),(null===n||void 0===n?void 0:n.startsWith("WHA"))?ge({key:"HSM"}):(null===n||void 0===n?void 0:n.startsWith("SMS"))?ge({key:"SMS"}):(null===n||void 0===n?void 0:n.startsWith("VOX"))?ge({key:"CALL"}):(null===n||void 0===n?void 0:n.startsWith("MAI"))?ge({key:"MAIL"}):ge({key:"TEXTO"}),e.next=6,be(["communicationchannelid","communicationchanneltype","type"]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e,t,a,n;return(null===(e=ue("communicationchanneltype"))||void 0===e?void 0:e.startsWith("WHA"))?B.filter((function(e){return"HSM"===e.key})):(null===(t=ue("communicationchanneltype"))||void 0===t?void 0:t.startsWith("SMS"))?B.filter((function(e){return"SMS"===e.key})):(null===(a=ue("communicationchanneltype"))||void 0===a?void 0:a.startsWith("VOX"))?B.filter((function(e){return"CALL"===e.key})):(null===(n=ue("communicationchanneltype"))||void 0===n?void 0:n.startsWith("MAI"))?B.filter((function(e){return"MAIL"===e.key})):Object(d.eb)(B)},ge=function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de("type",(null===t||void 0===t?void 0:t.key)||""),de("message",""),de("messagetemplateid",0),de("messagetemplatename",""),de("messagetemplatenamespace",""),de("messagetemplatetype","STANDARD"),de("messagetemplateheader",{}),de("messagetemplatebuttons",[]),de("messagetemplatefooter",""),de("messagetemplateattachment",""),de("messagetemplatelanguage",""),de("messagetemplatepriority",""),e.next=14,be("type");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){if("MAIL"===ue("type")){var e=Object(d.fb)(ae,"type",ue("type")),t=Object(d.fb)(ae,"type","HTML");return[].concat(Object(g.a)(e),Object(g.a)(t))}return Object(d.fb)(ae,"type",ue("type"))},ye=function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de("messagetemplateid",(null===t||void 0===t?void 0:t.id)||0),a=ae.filter((function(e){return e.id===(null===t||void 0===t?void 0:t.id)}))[0],de("message",null===a||void 0===a?void 0:a.body),de("messagetemplatename",null===a||void 0===a?void 0:a.name),de("messagetemplatenamespace",null===a||void 0===a?void 0:a.namespace),de("messagetemplatetype",null===a||void 0===a?void 0:a.templatetype),de("messagetemplatelanguage",null===a||void 0===a?void 0:a.language),de("messagetemplatepriority",null===a||void 0===a?void 0:a.priority),"HSM"===(null===t||void 0===t?void 0:t.type)&&(a.headerenabled?de("messagetemplateheader",{type:null===a||void 0===a?void 0:a.headertype,value:null===a||void 0===a?void 0:a.header}):de("messagetemplateheader",{type:"",value:""}),a.buttonsenabled?de("messagetemplatebuttons",(null===a||void 0===a?void 0:a.buttons)||[]):de("messagetemplatebuttons",[]),a.footerenabled?de("messagetemplatefooter",(null===a||void 0===a?void 0:a.footer)||""):de("messagetemplatefooter","")),"MAIL"!==(null===t||void 0===t?void 0:t.type)&&"HTML"!==(null===t||void 0===t?void 0:t.type)||(a.header?(de("messagetemplateheader",{type:"TEXT",value:null===a||void 0===a?void 0:a.header}),de("subject",null===a||void 0===a?void 0:a.header)):(de("messagetemplateheader",{type:"",value:""}),de("subject","")),a.attachment?de("messagetemplateattachment",(null===a||void 0===a?void 0:a.attachment)||""):de("messagetemplateattachment","")),e.next=12,be(["messagetemplateid","messagetemplatename","messagetemplatenamespace","messagetemplatetype"]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)(s.a.Fragment,{children:[Object(F.jsxs)("div",{className:Q.containerDetail,children:[Object(F.jsxs)("div",{className:"row-zyx",children:[R?Object(F.jsx)(C.l,{label:$(m.a.title),className:"col-6",valueDefault:ue("title"),onChange:function(e){return de("title",e)},error:null===pe||void 0===pe||null===(t=pe.title)||void 0===t?void 0:t.message}):Object(F.jsx)(C.v,{label:$(m.a.title),value:(null===L||void 0===L?void 0:L.title)||"",className:"col-6"}),R?Object(F.jsx)(C.l,{label:$(m.a.description),className:"col-6",valueDefault:ue("description"),onChange:function(e){return de("description",e)},error:null===pe||void 0===pe||null===(a=pe.description)||void 0===a?void 0:a.message}):Object(F.jsx)(C.v,{label:$(m.a.description),value:(null===L||void 0===L?void 0:L.description)||"",className:"col-6"})]}),Object(F.jsxs)("div",{className:"row-zyx",children:[R?Object(F.jsx)(C.l,{type:"date",label:$(m.a.startdate),className:"col-4",valueDefault:ue("startdate"),onChange:function(e){return de("startdate",e)},error:null===pe||void 0===pe||null===(o=pe.startdate)||void 0===o?void 0:o.message}):Object(F.jsx)(C.v,{label:$(m.a.startdate),value:(null===L||void 0===L?void 0:L.startdate)||"",className:"col-4"}),R?Object(F.jsx)(C.l,{type:"date",label:$(m.a.enddate),className:"col-4",valueDefault:ue("enddate"),onChange:function(e){return de("enddate",e)},error:null===pe||void 0===pe||null===(u=pe.enddate)||void 0===u?void 0:u.message}):Object(F.jsx)(C.v,{label:$(m.a.enddate),value:(null===L||void 0===L?void 0:L.enddate)||"",className:"col-4"}),R?Object(F.jsxs)("div",{className:"col-4",style:{display:"flex"},children:[Object(F.jsx)(C.u,{uset:!0,label:$(m.a.executiontype),className:Q.flexgrow1,valueDefault:ue("executiontype"),onChange:fe,error:null===pe||void 0===pe||null===(b=pe.executiontype)||void 0===b?void 0:b.message,data:Object(d.X)(V),optionDesc:"value",optionValue:"key"}),"SCHEDULED"===ue("executiontype")?Object(F.jsx)(S.a,{style:{flexGrow:0},"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",size:"small",onClick:function(e){return re(!0)},children:Object(F.jsx)(N,{style:{color:"#777777"}})}):null]}):Object(F.jsx)(C.v,{label:$(m.a.executiontype),value:$(V[null===L||void 0===L?void 0:L.executiontype])||"",className:"col-4"})]}),Object(F.jsxs)("div",{className:"row-zyx",children:[R?Object(F.jsx)(C.u,{label:$(m.a.channel),className:"col-8",valueDefault:ue("communicationchannelid"),disabled:!ue("isnew"),onChange:Oe,error:null===pe||void 0===pe||null===(j=pe.communicationchannelid)||void 0===j?void 0:j.message,data:ee,optionDesc:"communicationchanneldesc",optionValue:"communicationchannelid"}):Object(F.jsx)(C.v,{label:$(m.a.type),value:ee.filter((function(e){return e.communicationchannelid===(null===L||void 0===L?void 0:L.communicationchannelid)}))[0].communicationchanneldesc||"",className:"col-8"}),R?Object(F.jsx)(C.u,{label:$(m.a.group),className:"col-4",valueDefault:ue("usergroup"),onChange:function(e){de("usergroup",(null===e||void 0===e?void 0:e.domainvalue)||"")},error:null===pe||void 0===pe||null===(v=pe.usergroup)||void 0===v?void 0:v.message,data:te,optionDesc:"domaindesc",optionValue:"domainvalue"}):Object(F.jsx)(C.v,{label:$(m.a.group),value:te.filter((function(e){return e.domainvalue===(null===L||void 0===L?void 0:L.usergroup)}))[0].domaindesc||"",className:"col-4"})]}),Object(F.jsxs)("div",{className:"row-zyx",children:[R?Object(F.jsx)(C.u,{label:$(m.a.status),className:"col-4",valueDefault:ue("status"),onChange:function(e){de("status",(null===e||void 0===e?void 0:e.domainvalue)||"")},error:null===pe||void 0===pe||null===(h=pe.status)||void 0===h?void 0:h.message,data:Z,optionDesc:"domaindesc",optionValue:"domainvalue"}):Object(F.jsx)(C.v,{label:$(m.a.status),value:te.filter((function(e){return e.domainvalue===(null===L||void 0===L?void 0:L.status)}))[0].domaindesc||"",className:"col-4"}),R?Object(F.jsx)(C.u,{uset:!0,label:$(m.a.source),className:"col-4",valueDefault:ue("source"),onChange:function(e){["PERSON","LEAD"].includes(ue("source"))&&de("message",ue("message").replace(new RegExp(/{{field[0-9]+}}/,"g"),"{{???}}")),de("source",(null===e||void 0===e?void 0:e.key)||""),de("sourcechanged",!0),K(Object(n.a)(Object(n.a)({},q),{},{valid:Object(n.a)(Object(n.a)({},q.valid),{},{1:!1})})),Y(Object(f.v)())},error:null===pe||void 0===pe||null===(x=pe.source)||void 0===x?void 0:x.message,data:null!==L?Object(d.X)(U):Object(d.fb)(Object(d.X)(U),"key","INTERNAL","!"),optionDesc:"value",optionValue:"key"}):Object(F.jsx)(C.v,{label:$(m.a.source),value:$(U[null===L||void 0===L?void 0:L.source])||"",className:"col-4"}),R?Object(F.jsx)(C.u,{uset:!0,label:$(m.a.messagetype),className:"col-4",valueDefault:ue("type"),disabled:!ue("isnew"),onChange:ge,error:null===pe||void 0===pe||null===(E=pe.type)||void 0===E?void 0:E.message,data:ve(),optionDesc:"value",optionValue:"key"}):Object(F.jsx)(C.v,{label:$(m.a.messagetype),value:$(null===(A=ve().filter((function(e){return e.key===(null===L||void 0===L?void 0:L.type)}))[0])||void 0===A?void 0:A.value)||"",className:"col-4"})]}),["HSM"].includes(ue("type"))?Object(F.jsxs)("div",{className:"row-zyx",children:[R?Object(F.jsx)(C.u,{fregister:Object(n.a)({},oe("messagetemplateid",{validate:function(e){return e||$(m.a.field_required)}})),label:$(m.a.messagetemplate),className:"col-6",valueDefault:ue("messagetemplateid"),disabled:!ue("isnew"),onChange:ye,error:null===pe||void 0===pe||null===(T=pe.messagetemplateid)||void 0===T?void 0:T.message,data:he(),optionDesc:"name",optionValue:"id"}):Object(F.jsx)(C.v,{label:$(m.a.messagetemplate),value:ae.filter((function(e){return e.id===(null===L||void 0===L?void 0:L.messagetemplateid)}))[0].name||"",className:"col-6"}),R?Object(F.jsx)(C.l,{fregister:Object(n.a)({},oe("messagetemplatenamespace",{validate:function(e){return"HSM"!==ue("type")||e&&e.length||$(m.a.field_required)}})),label:$(m.a.namespace),className:"col-6",valueDefault:ue("messagetemplatenamespace"),onChange:function(e){return de("messagetemplatenamespace",e)},disabled:!ue("isnew")||0!==ue("messagetemplateid"),error:null===pe||void 0===pe||null===(I=pe.messagetemplatenamespace)||void 0===I?void 0:I.message}):Object(F.jsx)(C.v,{label:$(m.a.namespace),value:(null===L||void 0===L?void 0:L.messagetemplatenamespace)||"",className:"col-4"})]}):null,["SMS","MAIL"].includes(ue("type"))?Object(F.jsx)("div",{className:"row-zyx",children:R?Object(F.jsx)(C.u,{fregister:Object(n.a)({},oe("messagetemplateid",{validate:function(e){return e||$(m.a.field_required)}})),label:$(m.a.messagetemplate),className:"col-6",valueDefault:ue("messagetemplateid"),disabled:!ue("isnew"),onChange:ye,error:null===pe||void 0===pe||null===(H=pe.messagetemplateid)||void 0===H?void 0:H.message,data:he(),optionDesc:"name",optionValue:"id"}):Object(F.jsx)(C.v,{label:$(m.a.messagetemplate),value:ae.filter((function(e){return e.id===(null===L||void 0===L?void 0:L.messagetemplateid)}))[0].name||"",className:"col-6"})}):null]}),Object(F.jsx)(X,{openModal:se,setOpenModal:re,data:ue("batchjson"),parentSetValue:de})]})},X=function(e){var t=e.openModal,a=e.setOpenModal,c=e.data,s=void 0===c?[]:c,r=e.parentSetValue,l=Object(p.a)().t,o=Object(D.d)({defaultValues:{batchjson:s}}),d=o.control,u=o.register,b=o.handleSubmit,j=o.setValue,f=o.formState.errors,O=o.clearErrors;Object(i.useEffect)((function(){j("batchjson",s)}),[s]);var v=Object(D.c)({control:d,name:"batchjson"}),g=v.fields,h=v.append,y=v.remove,x=function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({date:"",time:"",quantity:0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=b((function(e){r("batchjson",e.batchjson.map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{batchindex:t+1})}))),a(!1)}));return Object(F.jsx)(C.g,{open:t,title:l(m.a.scheduled),button1Type:"button",buttonText1:l(m.a.cancel),handleClickButton1:function(){a(!1),j("batchjson",s),O()},button2Type:"button",buttonText2:l(m.a.save),handleClickButton2:N,children:Object(F.jsx)(A.a,{children:Object(F.jsxs)(T.a,{children:[Object(F.jsx)(I.a,{children:Object(F.jsxs)(H.a,{children:[Object(F.jsx)(L.a,{children:Object(F.jsx)(S.a,{size:"small",onClick:function(){return x()},children:Object(F.jsx)(M.a,{style:{color:"#7721AD"}})})}),Object(F.jsx)(L.a,{children:l(m.a.date)}),Object(F.jsx)(L.a,{children:l(m.a.hour)}),Object(F.jsx)(L.a,{children:l(m.a.quantity)})]})}),Object(F.jsx)(R.a,{children:g.map((function(e,t){var a,c,i,s,r,o,d,b,p;return Object(F.jsxs)(H.a,{children:[Object(F.jsx)(L.a,{children:Object(F.jsx)(S.a,{size:"small",onClick:function(){return E(t)},children:Object(F.jsx)(z.a,{style:{color:"#777777"}})})}),Object(F.jsx)(L.a,{children:Object(F.jsx)(C.n,{fregister:Object(n.a)({},u("batchjson.".concat(t,".date"),{validate:function(e){return e&&e.length||l(m.a.field_required)}})),type:"date",valueDefault:e.date,error:null===f||void 0===f||null===(a=f.batchjson)||void 0===a||null===(c=a[t])||void 0===c||null===(i=c.date)||void 0===i?void 0:i.message,onChange:function(e){return j("batchjson[".concat(t,"].date"),e)}})}),Object(F.jsx)(L.a,{children:Object(F.jsx)(C.n,{fregister:Object(n.a)({},u("batchjson.".concat(t,".time"),{validate:function(e){return e&&e.length||l(m.a.field_required)}})),type:"time",valueDefault:e.time,error:null===f||void 0===f||null===(s=f.batchjson)||void 0===s||null===(r=s[t])||void 0===r||null===(o=r.time)||void 0===o?void 0:o.message,onChange:function(e){return j("batchjson[".concat(t,"].time"),e)}})}),Object(F.jsx)(L.a,{children:Object(F.jsx)(C.n,{fregister:Object(n.a)({},u("batchjson.".concat(t,".quantity"),{validate:function(e){return e&&e>0||l(m.a.field_required)}})),type:"number",valueDefault:e.quantity,error:null===f||void 0===f||null===(d=f.batchjson)||void 0===d||null===(b=d[t])||void 0===b||null===(p=b.quantity)||void 0===p?void 0:p.message,onChange:function(e){return j("batchjson[".concat(t,"].quantity"),parseInt(e))},inputProps:{min:0,step:1}})})]},e.id)}))})]})})})},K=a(784),G=Object(b.a)((function(e){return{containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},flexgrow1:{flexGrow:1}}})),J=function(e){var t,a=e.row,b=(e.edit,e.auxdata,e.detaildata),h=e.setDetaildata,x=(e.multiData,e.fetchData,e.frameProps),S=e.setFrameProps,C=e.setPageSelected,D=e.setSave,E=G(),N=Object(l.c)(),A=Object(p.a)().t,T=Object(r.b)((function(e){return e.main.mainAux})),I=Object(i.useState)(""),H=Object(c.a)(I,2),L=H[0],R=H[1],_=Object(i.useState)(null),M=Object(c.a)(_,2),P=M[0],z=M[1],W=Object(i.useState)([]),V=Object(c.a)(W,2),U=V[0],B=V[1],q=Object(i.useState)("EXTERNAL"!==b.source||b.sourcechanged?[]:b.headers||[]),X=Object(c.a)(q,2),J=X[0],Y=X[1],$=Object(i.useState)("EXTERNAL"!==b.source||b.sourcechanged?[]:b.jsonData||[]),Z=Object(c.a)($,2),ee=Z[0],te=Z[1],ae=Object(i.useState)([]),ne=Object(c.a)(ae,2),ce=ne[0],ie=ne[1],se=Object(i.useState)(b.selectedColumns?b.selectedColumns:""!==((null===(t=b.fields)||void 0===t?void 0:t.primarykey)||"")?Object(n.a)({},b.fields):new y),re=Object(c.a)(se,2),le=re[0],oe=re[1],de=Object(i.useState)(new y),ue=Object(c.a)(de,2),be=ue[0],pe=ue[1],je=Object(i.useState)("EXTERNAL"===b.source?le.primarykey:"PERSON"===b.source?"personid":"LEAD"===b.source?"leadid":"campaignmemberid"),me=Object(c.a)(je,2),fe=me[0],Oe=me[1],ve=Object(i.useState)(b.sourcechanged?{}:b.selectedRows||{}),ge=Object(c.a)(ve,2),he=ge[0],ye=ge[1],xe=Object(i.useState)(!1),we=Object(c.a)(xe,2),ke=we[0],Se=we[1],Ce=Object(r.b)((function(e){return e.main.mainPaginatedAux})),De=Object(i.useState)(!1),Ee=Object(c.a)(De,2),Ne=Ee[0],Ae=Ee[1],Te=Object(i.useState)({pageSize:20,pageIndex:0,filters:{},sorts:{},daterange:null}),Ie=Object(c.a)(Te,2),He=Ie[0],Le=Ie[1],Re=Object(i.useState)(0),_e=Object(c.a)(Re,2),Me=_e[0],Pe=_e[1],ze=Object(i.useState)(0),Fe=Object(c.a)(ze,2),We=Fe[0],Ve=Fe[1];Object(i.useEffect)((function(){if(x.checkPage){var e=Xe(x.page);S(Object(n.a)(Object(n.a)({},x),{},{executeSave:!1,checkPage:!1,valid:Object(n.a)(Object(n.a)({},x.valid),{},{1:e})})),(x.page<1||e)&&C(x.page),e&&x.executeSave&&D("VALIDATION")}}),[x.checkPage]),Object(i.useEffect)((function(){switch(b.source){case"INTERNAL":Y([{Header:A(m.a.name),accessor:"displayname"},{Header:"PCC",accessor:"personcommunicationchannelowner"},{Header:A(m.a.type),accessor:"type"},{Header:A(m.a.status),accessor:"status"},{Header:"".concat(A(m.a.field)," 1"),accessor:"field1"},{Header:"".concat(A(m.a.field)," 2"),accessor:"field2"},{Header:"".concat(A(m.a.field)," 3"),accessor:"field3"},{Header:"".concat(A(m.a.field)," 4"),accessor:"field4"},{Header:"".concat(A(m.a.field)," 5"),accessor:"field5"},{Header:"".concat(A(m.a.field)," 6"),accessor:"field6"},{Header:"".concat(A(m.a.field)," 7"),accessor:"field7"},{Header:"".concat(A(m.a.field)," 8"),accessor:"field8"},{Header:"".concat(A(m.a.field)," 9"),accessor:"field9"},{Header:"".concat(A(m.a.field)," 10"),accessor:"field10"},{Header:"".concat(A(m.a.field)," 11"),accessor:"field11"},{Header:"".concat(A(m.a.field)," 12"),accessor:"field12"},{Header:"".concat(A(m.a.field)," 13"),accessor:"field13"},{Header:"".concat(A(m.a.field)," 14"),accessor:"field14"},{Header:"".concat(A(m.a.field)," 15"),accessor:"field15"}]),e=null===a||void 0===a?void 0:a.id,N(Object(f.h)(Object(d.bc)(e)));break;case"EXTERNAL":"INSERT"===b.operation&&b.sourcechanged&&Y([]);break;case"PERSON":Y([{Header:A(m.a.firstname),accessor:"firstname"},{Header:A(m.a.lastname),accessor:"lastname"},{Header:A(m.a.documenttype),accessor:"documenttype"},{Header:A(m.a.documentnumber),accessor:"documentnumber"},{Header:A(m.a.personType),accessor:"persontype"},{Header:A(m.a.type),accessor:"type"},{Header:A(m.a.phone),accessor:"phone"},{Header:A(m.a.alternativePhone),accessor:"alternativephone"},{Header:A(m.a.email),accessor:"email"},{Header:A(m.a.alternativeEmail),accessor:"alternativeemail"},{Header:A(m.a.lastContactDate),accessor:"lastcontact",type:"date",Cell:function(e){var t=e.cell.row.original;return Object(d.K)(t.lastcontact).toLocaleString()}},{Header:A(m.a.agent),accessor:"agent"},{Header:A(m.a.opportunity),accessor:"opportunity"},{Header:A(m.a.birthday),accessor:"birthday",type:"date"},{Header:A(m.a.gender),accessor:"gender"},{Header:A(m.a.educationLevel),accessor:"educationlevel"},{Header:A(m.a.comments),accessor:"comments"}]);break;case"LEAD":Y([{Header:A(m.a.opportunity),accessor:"opportunity"},{Header:A(m.a.lastUpdate),accessor:"changedate",type:"date",Cell:function(e){var t=e.cell.row.original;return Object(d.K)(t.changedate).toLocaleString()}},{Header:A(m.a.name),accessor:"name"},{Header:A(m.a.email),accessor:"email"},{Header:A(m.a.phone),accessor:"phone"},{Header:A(m.a.expected_revenue),accessor:"expected_revenue"},{Header:A(m.a.endDate),accessor:"date_deadline",type:"date",Cell:function(e){var t=e.cell.row.original;return Object(d.K)(t.date_deadline).toLocaleString()}},{Header:A(m.a.tags),accessor:"tags"},{Header:A(m.a.agent),accessor:"agent"},{Header:A(m.a.priority),accessor:"priority"},{Header:A(m.a.campaign),accessor:"campaign"},{Header:A(m.a.product_plural),accessor:"products"},{Header:A(m.a.phase),accessor:"phase"},{Header:A(m.a.comments),accessor:"comments"}])}var e;b.sourcechanged&&h(Object(n.a)(Object(n.a)({},b),{},{sourcechanged:!1,selectedRows:{},person:[]}))}),[]),Object(i.useEffect)((function(){if(!T.loading&&!T.error&&T.data.length>0&&"INTERNAL"===b.source){te(T.data);var e={};e=b.selectedRows?Object(n.a)({},b.selectedRows):Object(n.a)({},T.data.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(v.a)({},t.campaignmemberid,!0))}),{})),ye(e),h(Object(n.a)(Object(n.a)({},b),{},{headers:qe(le),jsonData:T.data,selectedColumns:le,selectedRows:e,person:T.data.map((function(t){return Object.keys(e).includes(""+t[fe])?t:Object(n.a)(Object(n.a)({},t),{},{status:"ELIMINADO"})}))})),S(Object(n.a)(Object(n.a)({},x),{},{valid:Object(n.a)(Object(n.a)({},x.valid),{},{1:Object.keys(e).length>0})}))}}),[T]),Object(i.useEffect)((function(){Ne&&(Ce.loading||Ce.error||(Pe(Math.ceil(Ce.count/He.pageSize)),Ve(Ce.count),te(Ce.data),Ae(!1)))}),[Ce]);var Ue=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[0],e.next=3,Object(d.rh)(a);case 3:n=e.sent,R(""),n&&Be(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(e){if(0===e.length)return N(Object(O.e)({show:!0,severity:"error",message:A(m.a.file_without_data)})),null;if(e.length>1e5)return N(Object(O.e)({show:!0,severity:"error",message:A(m.a.too_many_records)})),null;var t=ee.length>0?Object.keys(ee[0]):null,a=Object.keys(e[0]);if(t&&!t.every((function(e){return null===a||void 0===a?void 0:a.includes(e)})))return N(Object(O.e)({show:!0,severity:"error",message:A(m.a.file_incompatbile_with_previous_one)})),null;ie(e.filter((function(e){return-1===ee.findIndex((function(t){return JSON.stringify(t)===JSON.stringify(e)}))})));var c=t||a;B(c),pe(Object(n.a)({},le));var i=Object(n.a)({},le);c.includes(i.primarykey)||(i=Object(n.a)(Object(n.a)({},i),{},{primarykey:""})),0===le.columns.length?i=Object(n.a)(Object(n.a)({},i),{},{column:new Array(c.length).fill(!1)}):"UPDATE"===b.operation&&"EXTERNAL"===b.source&&(i=Object(n.a)(Object(n.a)({},i),{},{column:c.map((function(e){return i.columns.includes(e)})),columns:c.reduce((function(e,t){return i.columns.includes(t)&&e.push(t),e}),[])})),oe(i),z(!0)};Object(i.useEffect)((function(){!1===P&&(qe(le),Se(!0))}),[P]);var qe=function(e){if(!1===P&&""!==le.primarykey){Oe(le.primarykey);var t=[e.primarykey].concat(Object(g.a)(e.columns)).map((function(e){return{Header:e,accessor:e}}));return Y(t),t}},Xe=function(e){if(0===Object.keys(he).length)return 2===e&&N(Object(O.e)({show:!0,severity:"error",message:A(m.a.no_person_selected)})),!1;switch(b.source){case"INTERNAL":h(Object(n.a)(Object(n.a)({},b),{},{headers:qe(le),jsonData:ee,selectedColumns:le,selectedRows:he,person:ee.map((function(e){return Object.keys(he).includes(""+e[fe])?e:Object(n.a)(Object(n.a)({},e),{},{status:"ELIMINADO"})}))}));break;case"EXTERNAL":h(Object(n.a)(Object(n.a)({},b),{},{headers:!1===P?qe(le):b.headers,jsonData:ee,selectedColumns:le,selectedRows:he,person:ee.filter((function(e){return Object.keys(he).includes(""+e[fe])}))}));break;case"PERSON":h(Object(n.a)(Object(n.a)({},b),{},{selectedRows:he,person:Array.from(new Map([].concat(Object(g.a)(b.person||[]),Object(g.a)(ee)).map((function(e){return[e.personid,e]}))).values()).filter((function(e){return Object.keys(he).includes(""+e[fe])}))}));break;case"LEAD":h(Object(n.a)(Object(n.a)({},b),{},{selectedRows:he,person:Array.from(new Map([].concat(Object(g.a)(b.person||[]),Object(g.a)(ee)).map((function(e){return[e.leadid,e]}))).values()).filter((function(e){return Object.keys(he).includes(""+e[fe])}))}))}return!0};return Object(F.jsxs)(s.a.Fragment,{children:[Object(F.jsx)("div",{className:E.containerDetail,children:["PERSON","LEAD"].includes((null===b||void 0===b?void 0:b.source)||"")?Object(F.jsx)(K.b,{columns:J,data:ee,totalrow:We,pageCount:Me,loading:Ce.loading,filterrange:!0,FiltersElement:Object(F.jsx)(F.Fragment,{}),ButtonsElement:function(){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("span",{children:[A(m.a.selected_plural),": "]}),Object(F.jsx)("b",{children:Object.keys(he).length})]})},fetchData:function(e){var t=e.pageSize,a=e.pageIndex,c=e.filters,i=e.sorts,s=e.daterange;Ae(!0),Le({pageSize:t,pageIndex:a,filters:c,sorts:i,daterange:s});var r={startdate:(null===s||void 0===s?void 0:s.startDate)||new Date((new Date).setUTCDate(1)),enddate:(null===s||void 0===s?void 0:s.endDate)||new Date((new Date).getUTCFullYear(),(new Date).getUTCMonth()+1,0),take:t,skip:a*t,sorts:i,filters:Object(n.a)({},c)};switch(b.source){case"PERSON":N(Object(f.l)(Object(d.z)(r)));break;case"LEAD":N(Object(f.l)(Object(d.y)(r)))}},useSelection:!0,selectionKey:fe,initialSelectedRows:he,setSelectedRows:ye,allRowsSelected:ke,setAllRowsSelected:Se}):Object(F.jsx)(u.f,{titlemodule:" ",columns:J,data:ee,download:!1,loading:"INTERNAL"===b.source&&T.loading,filterGeneral:!1,ButtonsElement:function(){return"EXTERNAL"===b.source?Object(F.jsxs)(s.a.Fragment,{children:[Object(F.jsxs)("span",{children:[A(m.a.selected_plural),": "]}),Object(F.jsx)("b",{children:Object.keys(he).length}),Object(F.jsx)("input",{id:"upload-file",name:"file",type:"file",accept:".xls,.xlsx",value:L,style:{display:"none"},onChange:function(e){return Ue(e.target.files)}}),Object(F.jsx)("label",{htmlFor:"upload-file",children:Object(F.jsx)(o.a,{component:"span",className:E.button,variant:"contained",color:"primary",style:{backgroundColor:"#53a6fa"},children:Object(F.jsx)(j.a,{i18nKey:m.a.uploadFile})})}),Object(F.jsx)(o.a,{className:E.button,variant:"contained",color:"primary",onClick:function(){return function(){var e,t;te([]),Y([]),te([]),B([]),"UPDATE"===b.operation&&"EXTERNAL"===b.source&&""!==((null===(e=b.fields)||void 0===e?void 0:e.primarykey)||"")?oe(Object(n.a)({},b.fields)):oe(new y),ye({}),h(Object(n.a)(Object(n.a)({},b),{},{headers:[],jsonData:[],selectedColumns:"UPDATE"===b.operation&&"EXTERNAL"===b.source&&""!==((null===(t=b.fields)||void 0===t?void 0:t.primarykey)||"")?Object(n.a)({},b.fields):new y,selectedRows:{},person:[]}))}()},style:{backgroundColor:"#53a6fa"},children:Object(F.jsx)(j.a,{i18nKey:m.a.clean})})]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("span",{children:[A(m.a.selected_plural),": "]}),Object(F.jsx)("b",{children:Object.keys(he).length})]})},useSelection:!0,selectionKey:fe,initialSelectedRows:he,setSelectedRows:ye,allRowsSelected:ke,setAllRowsSelected:Se})}),Object(F.jsx)(Q,{columnList:U,selectedColumns:le,setSelectedColumns:oe,openModal:P,handleCancelModal:function(){oe(Object(n.a)({},be)),z(!1)},handleSaveModal:function(){if(""!==le.primarykey){var e,t=U.reduce((function(e,t,a){return t!==le.primarykey&&le.column[a]&&e.push(t),e}),[]);oe(Object(n.a)(Object(n.a)({},le),{},{columns:t})),ie(JSON.parse(JSON.stringify(ce,[le.primarykey].concat(Object(g.a)(t)))));var a=[].concat(Object(g.a)(JSON.parse(JSON.stringify(ee,[le.primarykey].concat(Object(g.a)(t))))),Object(g.a)(JSON.parse(JSON.stringify(ce.filter((function(e){return!ee.map((function(e){return e[le.primarykey]})).includes(e[le.primarykey])})),[le.primarykey].concat(Object(g.a)(t))))));te(a);var c,i=b.message||"";if("UPDATE"===b.operation&&"EXTERNAL"===b.source&&""!==((null===(e=b.fields)||void 0===e?void 0:e.primarykey)||""))null===(c=b.fields)||void 0===c||c.columns.forEach((function(e,t){var a,n,c;-1===le.columns.findIndex((function(t){return t===e}))?i=null===(n=i=null===(a=i)||void 0===a?void 0:a.replace("{{".concat(e,"}}"),"{{".concat(t+1,"}}")))||void 0===n?void 0:n.replace("{{field".concat(t+2,"}}"),"{{".concat(t+1,"}}")):i=null===(c=i)||void 0===c?void 0:c.replace("{{field".concat(t+2,"}}"),"{{".concat(e,"}}"))})),h(Object(n.a)(Object(n.a)({},b),{},{message:i}));else if("UPDATE"===b.operation&&"EXTERNAL"===b.source){var s,r;null===(s=i)||void 0===s||null===(r=s.match(/({{)(.*?)(}})/g))||void 0===r||r.forEach((function(e,t){var a;i=null===(a=i)||void 0===a?void 0:a.replace("".concat(e),"{{".concat(t+1,"}}"))})),h(Object(n.a)(Object(n.a)({},b),{},{message:i}))}z(!1)}}})]})},Q=function(e){var t=e.columnList,a=e.selectedColumns,s=e.setSelectedColumns,r=e.openModal,l=e.handleCancelModal,o=e.handleSaveModal,d=Object(p.a)().t,u=Object(i.useState)(!0),b=Object(c.a)(u,2),j=b[0],f=b[1];return Object(i.useEffect)((function(){f(a.column.filter((function(e){return!0===e})).length<14)}),[a]),Object(F.jsx)(C.g,{open:r||!1,title:d(m.a.select_column_plural),button1Type:"button",buttonText1:d(m.a.cancel),handleClickButton1:l,button2Type:"button",buttonText2:d(m.a.save),handleClickButton2:o,children:Object(F.jsx)(A.a,{children:Object(F.jsxs)(T.a,{children:[Object(F.jsx)(I.a,{children:Object(F.jsxs)(H.a,{children:[Object(F.jsx)(L.a,{children:d(m.a.name)}),Object(F.jsx)(L.a,{children:d(m.a.key)}),Object(F.jsx)(L.a,{children:d(m.a.column)})]})}),Object(F.jsx)(R.a,{children:t.map((function(e,t){return Object(F.jsxs)(H.a,{children:[Object(F.jsx)(L.a,{children:e}),Object(F.jsx)(L.a,{children:Object(F.jsx)("input",{type:"radio",value:e,checked:a.primarykey===e||!1,onChange:function(c){s(Object(n.a)(Object(n.a)({},a),{},{primarykey:e||"",column:a.column.map((function(e,a){return a!==t&&e}))||[]}))}})}),Object(F.jsx)(L.a,{children:Object(F.jsx)("input",{type:"checkbox",checked:a.column[t]||!1,disabled:a.primarykey===e||!j&&!1===a.column[t],onChange:function(e){s(Object(n.a)(Object(n.a)({},a),{},{column:a.column.map((function(a,n){return n===t?e.target.checked:a}))||[]}))}})})]},t)}))})]})})})},Y=a(51),$=a(241),Z=a(171),ee=a(923),te=a(850),ae=a(895),ne=Object(b.a)((function(e){return{containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},flexgrow1:{flexGrow:1},mb1:{marginBottom:"0.25rem"}}})),ce=function e(){Object(h.a)(this,e),this.show=void 0,this.item=void 0,this.inputkey=void 0,this.inputvalue=void 0,this.range=void 0,this.top=void 0,this.left=void 0,this.changer=void 0,this.show=!1,this.item=null,this.inputkey="",this.inputvalue="",this.range=[-1,-1],this.changer=function(e){Object.assign({},e);return null},this.top=0,this.left=0},ie=function(e){e.row,e.edit,e.auxdata;var t,a,r,l,o,u,b,j=e.detaildata,f=e.setDetaildata,O=(e.multiData,e.fetchData,e.tablevariable),h=e.frameProps,y=e.setFrameProps,x=e.setPageSelected,w=e.setSave,k=e.messageVariables,S=e.setMessageVariables,D=ne(),E=Object(p.a)().t,N=Object(i.useState)([]),A=Object(c.a)(N,2),T=A[0],I=A[1],H=Object(i.useState)(new ce),L=Object(c.a)(H,2),R=L[0],_=L[1];Object(i.useEffect)((function(){h.checkPage&&(y(Object(n.a)(Object(n.a)({},h),{},{executeSave:!1,checkPage:!1})),x(h.page),h.executeSave&&w("VALIDATION"))}),[h.checkPage]);var M=function(e,t,a,c){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=e.target;if(s){var r,l=s.selectionStart||0,o=(s.value||"").substr(0,l).split("\n"),u=o.length-1,b=3*o[u].length,p=null===(r=(s.value||"").slice(0,l||0))||void 0===r?void 0:r.lastIndexOf("{{"),j="";if(-1!==p)if(-1===s.value.slice(p,l).indexOf(" ")&&-1===s.value.slice(p,l).indexOf("}}")&&"}"!==s.value[l-1]){j=s.value.slice(p+2,l);var m=(s.value||"").slice(l,s.value.length),f=-1!==m.indexOf("}}")?m.indexOf("}}"):0,v=p+j.length+f+4;_({show:!0,item:t,inputkey:a,inputvalue:s.value,range:[p,v],changer:function(e){var t=Object.assign({},e);return c(Object(n.a)({},t))},top:24+21*u,left:b}),I(i?Object(d.fb)(O,"description",j,"%"):O)}else _(new ce);else _(new ce)}};return Object(i.useEffect)((function(){var e;if(null===(e=j.communicationchanneltype)||void 0===e?void 0:e.startsWith("MAI")){var t,a=((null===(t=j.message)||void 0===t?void 0:t.match(/({{)(.*?)(}})/g))||[]).map((function(e){return e.substring(e.indexOf("{{")+2,e.indexOf("}}"))}));S(a.map((function(e,t){var a;return{name:e,text:(null===(a=k[t])||void 0===a?void 0:a.text)||e,type:"text"}})))}else S([])}),[j.message]),Object(F.jsx)(s.a.Fragment,{children:Object(F.jsxs)("div",{className:D.containerDetail,children:[(null===(t=j.communicationchanneltype)||void 0===t?void 0:t.startsWith("MAI"))?Object(F.jsx)("div",{className:"row-zyx",children:Object(F.jsx)(C.l,{label:E(m.a.subject),className:"col-12",valueDefault:null===(a=j.messagetemplateheader)||void 0===a?void 0:a.value,onChange:function(e){return f(Object(n.a)(Object(n.a)({},j),{},{subject:e}))},inputProps:{readOnly:["HSM","SMS","MAIL"].includes(j.type||"")&&0!==j.messagetemplateid}})}):null,"MULTIMEDIA"===j.messagetemplatetype&&""!==((null===j||void 0===j||null===(r=j.messagetemplateheader)||void 0===r?void 0:r.type)||"")?Object(F.jsx)("div",{className:"row-zyx",children:Object(F.jsx)(C.l,{label:E(m.a.header),className:"col-12",valueDefault:null===(l=j.messagetemplateheader)||void 0===l?void 0:l.value,onChange:function(e){return f(Object(n.a)(Object(n.a)({},j),{},{messagetemplateheader:Object(n.a)(Object(n.a)({},j.messagetemplateheader),{},{value:e})}))},inputProps:{readOnly:0!==j.messagetemplateid}})}):null,(null===(o=j.communicationchanneltype)||void 0===o?void 0:o.startsWith("MAI"))&&["MAIL","HTML"].includes(j.type)?Object(F.jsx)("div",{className:"row-zyx",children:Object(F.jsx)(s.a.Fragment,{children:Object(F.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexFlow:"row wrap",gap:"20px"},children:[Object(F.jsxs)("div",{className:"col-8",style:{overflow:"auto",borderStyle:"solid",borderWidth:"1px",borderColor:"#762AA9",borderRadius:"4px",padding:"20px"},children:[Object(F.jsx)(Y.a,{fontWeight:500,lineHeight:"18px",fontSize:14,mb:1,color:"textPrimary",children:E(m.a.body)}),Object(F.jsx)("div",{onClick:function(e){return console.log(e)},dangerouslySetInnerHTML:{__html:(null===j||void 0===j?void 0:j.message)||""}})]}),Object(F.jsxs)("div",{className:"col-4",style:{width:"400px",borderStyle:"solid",borderWidth:"1px",borderColor:"#762AA9",borderRadius:"4px",padding:"20px"},children:[Object(F.jsx)(Y.a,{fontWeight:500,lineHeight:"18px",fontSize:14,mb:1,color:"textPrimary",children:E(m.a.parameters)}),k.map((function(e,t){return Object(F.jsx)(s.a.Fragment,{children:Object(F.jsx)(C.u,{label:"".concat(t+1,". ").concat(E(m.a.variable)," #").concat(e.name),valueDefault:k[t].text,onChange:function(e){var a=Object(g.a)(k);a[t].text=null===e||void 0===e?void 0:e.description,S(a)},data:O,optionDesc:"label",optionValue:"description"},"var_"+t)},"param_"+t)}))]})]})})}):Object(F.jsx)("div",{className:"row-zyx",children:Object(F.jsx)(C.p,{label:E(m.a.body),className:"col-12",rows:10,valueDefault:j.message,onChange:function(e){return f(Object(n.a)(Object(n.a)({},j),{},{message:e}))},inputProps:{readOnly:["HSM","SMS","MAIL"].includes(j.type||"")&&0!==j.messagetemplateid,onClick:function(e){return M(e,j,"message",f,"TEXTO"===j.type)},onInput:function(e){return M(e,j,"message",f,"TEXTO"===j.type)}},show:R.show,data:T,datalabel:"label",datakey:"description",top:R.top,left:R.left,onClickSelection:function(e,t){return function(e,t){var a=R.item,c=R.inputkey,i=R.inputvalue,s=R.range,r=R.changer;-1!==s[1]&&(s[1]>s[0]||-1!==s[0])&&(r(Object(n.a)(Object(n.a)({},a),{},Object(v.a)({},c,i.substring(0,s[0]+2)+t+("}"!==i[s[1]-2]?"}}":"")+i.substring(s[1]-2)))),_(new ce))}(0,t)},onClickAway:function(e){return _(Object(n.a)(Object(n.a)({},e),{},{show:!1}))}})}),"MULTIMEDIA"===j.messagetemplatetype&&""!==((null===j||void 0===j?void 0:j.messagetemplatefooter)||"")?Object(F.jsx)("div",{className:"row-zyx",children:Object(F.jsx)(C.l,{label:E(m.a.footer),className:"col-12",valueDefault:j.messagetemplatefooter,onChange:function(e){return f(Object(n.a)(Object(n.a)({},j),{},{messagetemplatefooter:e}))},inputProps:{readOnly:0!==j.messagetemplateid}})}):null,"MULTIMEDIA"===j.messagetemplatetype&&((null===j||void 0===j?void 0:j.messagetemplatebuttons)||null!==(null===j||void 0===j?void 0:j.messagetemplatebuttons))&&Object(F.jsxs)("div",{className:"row-zyx",children:[Object(F.jsx)(C.v,{label:E(m.a.buttons),className:"col-12",value:""}),Object(F.jsx)(s.a.Fragment,{children:null===j||void 0===j||null===(u=j.messagetemplatebuttons)||void 0===u?void 0:u.map((function(e,t){return Object(F.jsxs)("div",{className:"col-4",children:[Object(F.jsx)(C.v,{label:E(m.a.title),value:(null===e||void 0===e?void 0:e.title)||"",className:D.mb1}),Object(F.jsx)(C.v,{label:E(m.a.type),value:E("messagetemplate_".concat((null===e||void 0===e?void 0:e.type)||"")),className:D.mb1}),Object(F.jsx)(C.v,{label:E(m.a.payload),value:(null===e||void 0===e?void 0:e.payload)||"",className:D.mb1})]},"btn-".concat(t))}))})]}),"MAIL"===j.communicationchanneltype&&(null===j||void 0===j?void 0:j.messagetemplateattachment)&&Object(F.jsxs)("div",{className:"row-zyx",children:[Object(F.jsx)(C.v,{label:E(m.a.messagetemplate_attachment)}),Object(F.jsx)(s.a.Fragment,{children:!!(null===j||void 0===j?void 0:j.messagetemplateattachment)&&(null===j||void 0===j||null===(b=j.messagetemplateattachment)||void 0===b?void 0:b.split(",").map((function(e,t){return Object(F.jsx)(re,{src:e},"attachment-".concat(t))})))})]})]})})},se=Object(b.a)((function(e){return{btnContainer:{color:"lightgrey",display:"flex",flexDirection:"column",justifyContent:"center"},infoContainer:{display:"flex",flexDirection:"column",height:"100%"},root:{alignItems:"center",backgroundColor:"white",borderRadius:4,display:"flex",flexDirection:"row",margin:e.spacing(1),maxHeight:80,maxWidth:300,overflow:"hidden",padding:e.spacing(1),width:"fit-content"}}})),re=function(e){var t=e.src,a=e.onClose,n=se(),c=Object(i.useCallback)((function(){return"string"===typeof t&&t.includes("http")}),[t]),s=Object(i.useCallback)((function(){if(c()){var e=t.match(/.*\/(.+?)\./);return e&&e.length>1?e[1]:""}return t.name}),[c,t]),r=Object(i.useCallback)((function(){var e,a,n;return c()?(null===(n=t.split(".").pop())||void 0===n?void 0:n.toUpperCase())||"-":(null===(e=t.name)||void 0===e||null===(a=e.split(".").pop())||void 0===a?void 0:a.toUpperCase())||"-"}),[c,t]);return Object(F.jsxs)($.a,{className:n.root,elevation:2,children:[Object(F.jsx)(ee.a,{}),Object(F.jsx)("div",{style:{width:"0.5em"}}),Object(F.jsx)("div",{className:n.infoContainer,children:Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{style:{fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",maxWidth:190,whiteSpace:"nowrap"},children:s()}),r()]})}),Object(F.jsx)("div",{style:{width:"0.5em"}}),!c()&&!a&&Object(F.jsx)(Z.a,{color:"primary"}),Object(F.jsxs)("div",{className:n.btnContainer,children:[a&&Object(F.jsx)(S.a,{size:"small",onClick:function(){return a(t)},children:Object(F.jsx)(te.a,{})}),c()&&Object(F.jsx)("div",{style:{height:"10%"}}),c()&&Object(F.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",download:"".concat(s(),".").concat(r()),children:Object(F.jsx)(S.a,{size:"small",children:Object(F.jsx)(ae.a,{})})})]})]})},le=a(776),oe=function(e,t,a){try{switch(e){case"PERSON":switch(a){case"lastcontact":return t[a]?new Date(t[a]).toLocaleString():""}break;case"LEAD":switch(a){case"changedate":case"date_deadline":return t[a]?new Date(t[a]).toLocaleString():""}}return t[a]||""}catch(n){return t[a]||""}},de=Object(b.a)((function(e){return{containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},flexgrow1:{flexGrow:1}}})),ue=function(e){var t=e.data,a=t.row,s=t.edit,u=e.setViewSelected,b=e.fetchData,j=de(),h=Object(p.a)().t,x=Object(l.c)(),w=Object(r.b)((function(e){return e.main})),k=Object(i.useState)(0),S=Object(c.a)(k,2),D=S[0],E=S[1],N=Object(i.useState)([]),A=Object(c.a)(N,2),T=A[0],I=A[1],H=Object(i.useState)({}),L=Object(c.a)(H,2),R=L[0],_=L[1],M=Object(i.useState)(!1),P=Object(c.a)(M,2),z=P[0],W=P[1],V=Object(r.b)((function(e){return e.main.execute})),U=Object(i.useState)(""),B=Object(c.a)(U,2),X=B[0],K=B[1],G=Object(i.useState)([]),Q=Object(c.a)(G,2),Y=Q[0],$=Q[1],Z=Object(i.useState)([]),ee=Object(c.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(i.useState)({}),ce=Object(c.a)(ne,2),se=ce[0],re=ce[1],ue=Object(i.useState)({executeSave:!1,page:0,checkPage:!1,valid:{0:!1,1:!1,2:!1}}),be=Object(c.a)(ue,2),pe=be[0],je=be[1],me=Object(i.useState)([]),fe=Object(c.a)(me,2),Oe=fe[0],ve=fe[1],ge=[{id:"view-1",name:h(m.a.campaign)},{id:"view-2",name:"".concat(h(m.a.campaign)," ").concat(h(m.a.detail))}];Object(i.useEffect)((function(){if(null!==a)return x(Object(f.p)([Object(d.Ke)("ESTADOGENERICO"),Object(d.sc)(),Object(d.Ge)(),Object(d.td)(""),Object(d.fc)(null===a||void 0===a?void 0:a.id),Object(d.bc)(null===a||void 0===a?void 0:a.id)])),x(Object(O.d)(!0)),W(!0),function(){x(Object(f.z)())};x(Object(f.p)([Object(d.Ke)("ESTADOGENERICO"),Object(d.sc)(),Object(d.Ge)(),Object(d.td)("")])),E(0)}),[]),Object(i.useEffect)((function(){if(z&&!w.multiData.loading&&!w.multiData.error&&null!==a){I(w.multiData.data[4].data);var e=w.multiData.data[4].data[0];e&&(_({isnew:!1,id:a.id,communicationchannelid:null===e||void 0===e?void 0:e.communicationchannelid,usergroup:null===e||void 0===e?void 0:e.usergroup,type:null===e||void 0===e?void 0:e.type,status:null===e||void 0===e?void 0:e.status,title:null===e||void 0===e?void 0:e.title,description:null===e||void 0===e?void 0:e.description,subject:null===e||void 0===e?void 0:e.subject,message:null===e||void 0===e?void 0:e.message,startdate:null===e||void 0===e?void 0:e.startdate,enddate:null===e||void 0===e?void 0:e.enddate,repeatable:null===e||void 0===e?void 0:e.repeatable,frecuency:null===e||void 0===e?void 0:e.frecuency,source:(null===e||void 0===e?void 0:e.source)||"INTERNAL",messagetemplateid:null===e||void 0===e?void 0:e.messagetemplateid,messagetemplatename:null===e||void 0===e?void 0:e.messagetemplatename,messagetemplatenamespace:null===e||void 0===e?void 0:e.messagetemplatenamespace,messagetemplatetype:null===e||void 0===e?void 0:e.messagetemplatetype,messagetemplateheader:(null===e||void 0===e?void 0:e.messagetemplateheader)||{},messagetemplatebuttons:(null===e||void 0===e?void 0:e.messagetemplatebuttons)||[],messagetemplatefooter:(null===e||void 0===e?void 0:e.messagetemplatefooter)||"",messagetemplateattachment:(null===e||void 0===e?void 0:e.messagetemplateattachment)||"",messagetemplatelanguage:(null===e||void 0===e?void 0:e.messagetemplatelanguage)||"",messagetemplatepriority:(null===e||void 0===e?void 0:e.messagetemplatepriority)||"",executiontype:null===e||void 0===e?void 0:e.executiontype,batchjson:(null===e||void 0===e?void 0:e.batchjson)||[],fields:Object(n.a)(Object(n.a)({},new y),null===e||void 0===e?void 0:e.fields),operation:"UPDATE",person:w.multiData.data[5]&&w.multiData.data[5].success?w.multiData.data[5].data:[]}),je(Object(n.a)(Object(n.a)({},pe),{},{valid:{0:!!e,1:0!==(w.multiData.data[5]&&w.multiData.data[5].success?w.multiData.data[5].data:[]).length,2:!!e}}))),x(Object(O.d)(!1)),W(!1),E(0)}}),[w,z]);var he=function(){if(pe.valid[0])if(pe.valid[1]){var e,t,a,c=!0;"MULTIMEDIA"===R.messagetemplatetype&&""!==((null===R||void 0===R||null===(e=R.messagetemplateheader)||void 0===e?void 0:e.type)||"")&&""===(null===(t=R.messagetemplateheader)||void 0===t?void 0:t.value)&&(c=!1,x(Object(O.e)({show:!0,severity:"error",message:h(m.a.missing_header)})));var i=function(){var e,t,a,c,i=R.subject||"",s=(null===(e=R.messagetemplateheader)||void 0===e?void 0:e.value)||"",r=R.message||"";if(null===(t=R.communicationchanneltype)||void 0===t?void 0:t.startsWith("MAI")){var l=r.split("{{");Oe.forEach((function(e,t){var a;l[t+1]=null===(a=l[t+1])||void 0===a?void 0:a.replace("".concat(e.name,"}}"),"".concat(e.text||t+1,"}}"))})),r=l.join("{{")}if(["PERSON","LEAD"].includes(R.source||"")){if(R.person&&(null===(a=R.person)||void 0===a?void 0:a.length)>0)if(null===(c=R.communicationchanneltype)||void 0===c?void 0:c.startsWith("MAI"))Array.from(new Map(Oe.map((function(e){return[e.text,e]}))).values()).filter((function(e){return te.map((function(e){return e.description})).includes(e.text)})).forEach((function(e,t){r=r.replace(new RegExp("{{".concat(e.text,"}}"),"g"),"{{field".concat(t+2,"}}"))}));else{var o=Array.from(new Set([].concat(Object(g.a)(i.match(new RegExp("{{.+?}}","g"))||[]),Object(g.a)(s.match(new RegExp("{{.+?}}","g"))||[]),Object(g.a)(r.match(new RegExp("{{.+?}}","g"))||[]))));o=o.map((function(e){return e.slice(2,-2)})).filter((function(e){return te.map((function(e){return e.description})).includes(e)||new RegExp(/field[0-9]+/,"g").test(e)})),Object.keys(se).length>0&&(Object.entries(se).forEach((function(e){i=i.replace(new RegExp("{{".concat(e[0],"}}"),"g"),"{{".concat(e[1],"}}")),s=s.replace(new RegExp("{{".concat(e[0],"}}"),"g"),"{{".concat(e[1],"}}")),r=r.replace(new RegExp("{{".concat(e[0],"}}"),"g"),"{{".concat(e[1],"}}"))})),o=o.map((function(e){return se[e]?se[e]:e}))),o=o.reduce((function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},Object(v.a)({},"field".concat(a+2),t))}),{}),re(o),te.filter((function(e){return Object.values(o).includes(e.description)})).forEach((function(e,t){i=i.replace(new RegExp("{{".concat(e.description,"}}"),"g"),"{{field".concat(t+2,"}}")),s=s.replace(new RegExp("{{".concat(e.description,"}}"),"g"),"{{field".concat(t+2,"}}")),r=r.replace(new RegExp("{{".concat(e.description,"}}"),"g"),"{{field".concat(t+2,"}}"))}))}}else["EXTERNAL"].includes(R.source||"")&&te.forEach((function(e,t){i=i.replace(new RegExp("{{".concat(e.description,"}}"),"g"),"{{field".concat(t+1,"}}")),s=s.replace(new RegExp("{{".concat(e.description,"}}"),"g"),"{{field".concat(t+1,"}}")),r=r.replace(new RegExp("{{".concat(e.description,"}}"),"g"),"{{field".concat(t+1,"}}"))}));return{subject:i,header:s,message:r}}(),s=i.subject||"",r=i.header||"",l=i.message||"",o=[],u=null;if(null===(a=R.communicationchanneltype)||void 0===a?void 0:a.startsWith("MAI")){var b=Object(d.cb)(s);-1!==(u=b.findIndex((function(e){return!(e.includes("field")||te.map((function(e){return e.description})).includes(e))})))&&(c=!1,x(Object(O.e)({show:!0,severity:"error",message:"".concat(h(m.a.missing_header)," ").concat(b[u])}))),o=Array.from(new Set([].concat(Object(g.a)(o),Object(g.a)(b||[]))))}if("MULTIMEDIA"===R.messagetemplatetype&&""!==r){var p=Object(d.cb)(r);(-1!==(u=p.findIndex((function(e){return!(e.includes("field")||te.map((function(e){return e.description})).includes(e))})))||r.includes("{{}}"))&&(c=!1,x(Object(O.e)({show:!0,severity:"error",message:"".concat(h(m.a.invalid_parameter)," ").concat(p[u]||"{{}}")}))),o=Array.from(new Set([].concat(Object(g.a)(o),Object(g.a)(p||[]))))}if(""!==l){var j=Object(d.cb)(l);(-1!==(u=j.findIndex((function(e){return!(e.includes("field")||te.map((function(e){return e.description})).includes(e))})))||l.includes("{{}}"))&&(c=!1,x(Object(O.e)({show:!0,severity:"error",message:"".concat(h(m.a.invalid_parameter)," ").concat(j[u]||"{{}}")}))),o=Array.from(new Set([].concat(Object(g.a)(o),Object(g.a)(j||[]))))}_(Object(n.a)(Object(n.a)({},R),{},{variablereplace:o,batchjson:"SCHEDULED"===R.executiontype?R.batchjson:[],subject:i.subject,messagetemplateheader:Object(n.a)(Object(n.a)({},R.messagetemplateheader),{},{value:i.header}),message:i.message})),je(Object(n.a)(Object(n.a)({},pe),{},{valid:Object(n.a)(Object(n.a)({},pe.valid),{},{2:c})}))}else x(Object(O.e)({show:!0,severity:"error",message:h(m.a.missing_people)}));else x(Object(O.e)({show:!0,severity:"error",message:h(m.a.required_fields_missing)}))},ye=function(){x(Object(O.a)({visible:!0,question:h(m.a.confirmation_save),callback:function(){var e;x(Object(O.d)(!0)),K("PARENT"),e=R,x(Object(f.c)(Object(d.If)(e)))}}))};return Object(i.useEffect)((function(){if("VALIDATION"===X&&(he(),K("PREPARING")),!Object.values(pe.valid).includes(!1))if("PREPARING"===X)!function(){var e,t,a,c=[];switch(R.source){case"INTERNAL":c=null===(e=R.person)||void 0===e?void 0:e.reduce((function(e,t){return e.push({id:t.campaignmemberid,personid:t.personid,personcommunicationchannel:t.personcommunicationchannel,personcommunicationchannelowner:t.personcommunicationchannelowner,type:t.type,displayname:t.displayname,status:t.status,field1:t.field1,field2:t.field2,field3:t.field3,field4:t.field4,field5:t.field5,field6:t.field6,field7:t.field7,field8:t.field8,field9:t.field9,field10:t.field10,field11:t.field11,field12:t.field12,field13:t.field13,field14:t.field14,field15:t.field15,batchindex:0,operation:R.operation}),e}),[]);break;case"EXTERNAL":c=null===(t=R.person)||void 0===t?void 0:t.reduce((function(e,t){return e.push({id:0,personid:0,personcommunicationchannel:"",personcommunicationchannelowner:t[Object.keys(t)[0]]||"",type:"EXTERNAL",displayname:"",status:"ACTIVO",field1:t[Object.keys(t)[0]]||"",field2:t[Object.keys(t)[1]]||"",field3:t[Object.keys(t)[2]]||"",field4:t[Object.keys(t)[3]]||"",field5:t[Object.keys(t)[4]]||"",field6:t[Object.keys(t)[5]]||"",field7:t[Object.keys(t)[6]]||"",field8:t[Object.keys(t)[7]]||"",field9:t[Object.keys(t)[8]]||"",field10:t[Object.keys(t)[9]]||"",field11:t[Object.keys(t)[10]]||"",field12:t[Object.keys(t)[11]]||"",field13:t[Object.keys(t)[12]]||"",field14:t[Object.keys(t)[13]]||"",field15:t[Object.keys(t)[14]]||"",batchindex:0,operation:R.operation}),e}),[]);break;case"PERSON":case"LEAD":var i,s;c=(null===(a=R.communicationchanneltype)||void 0===a?void 0:a.startsWith("MAI"))?null===(i=R.person)||void 0===i?void 0:i.reduce((function(e,t){var a,n,c,i,s,r,l,o,d,u,b,p,j,m;return e.push({id:0,personid:t.personid||0,personcommunicationchannel:"",personcommunicationchannelowner:t.email||t.alternativeemail||"",type:R.source||"",displayname:"PERSON"===R.source?"".concat(t.firstname||""," ").concat(t.lastname||"").trim():"LEAD"===R.source?"".concat(t.name||""):"",status:"ACTIVO",field1:t.email||t.alternativeemail||"",field2:oe(R.source,t,null===(a=Oe[0])||void 0===a?void 0:a.text),field3:oe(R.source,t,null===(n=Oe[1])||void 0===n?void 0:n.text),field4:oe(R.source,t,null===(c=Oe[2])||void 0===c?void 0:c.text),field5:oe(R.source,t,null===(i=Oe[3])||void 0===i?void 0:i.text),field6:oe(R.source,t,null===(s=Oe[4])||void 0===s?void 0:s.text),field7:oe(R.source,t,null===(r=Oe[5])||void 0===r?void 0:r.text),field8:oe(R.source,t,null===(l=Oe[6])||void 0===l?void 0:l.text),field9:oe(R.source,t,null===(o=Oe[7])||void 0===o?void 0:o.text),field10:oe(R.source,t,null===(d=Oe[8])||void 0===d?void 0:d.text),field11:oe(R.source,t,null===(u=Oe[9])||void 0===u?void 0:u.text),field12:oe(R.source,t,null===(b=Oe[10])||void 0===b?void 0:b.text),field13:oe(R.source,t,null===(p=Oe[11])||void 0===p?void 0:p.text),field14:oe(R.source,t,null===(j=Oe[12])||void 0===j?void 0:j.text),field15:oe(R.source,t,null===(m=Oe[13])||void 0===m?void 0:m.text),batchindex:0,operation:R.operation}),e}),[]):null===(s=R.person)||void 0===s?void 0:s.reduce((function(e,t){return e.push({id:0,personid:t.personid||0,personcommunicationchannel:"",personcommunicationchannelowner:t.phone||t.alternativephone||"",type:R.source||"",displayname:"PERSON"===R.source?"".concat(t.firstname||""," ").concat(t.lastname||"").trim():"LEAD"===R.source?"".concat(t.name||""):"",status:"ACTIVO",field1:t.phone||t.alternativephone||"",field2:oe(R.source,t,se.field2),field3:oe(R.source,t,se.field3),field4:oe(R.source,t,se.field4),field5:oe(R.source,t,se.field5),field6:oe(R.source,t,se.field6),field7:oe(R.source,t,se.field7),field8:oe(R.source,t,se.field8),field9:oe(R.source,t,se.field9),field10:oe(R.source,t,se.field10),field11:oe(R.source,t,se.field11),field12:oe(R.source,t,se.field12),field13:oe(R.source,t,se.field13),field14:oe(R.source,t,se.field14),field15:oe(R.source,t,se.field15),batchindex:0,operation:R.operation}),e}),[])}if("SCHEDULED"===R.executiontype){var r=Object(g.a)(R.batchjson||[]);r=r.map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{batchindex:t+1})})),_(Object(n.a)(Object(n.a)({},R),{},{batchjson:r})),r.reduce((function(e,t,a){return c.filter((function(a,n){return n>=e&&n<e+parseInt(t.quantity)})).map((function(e){return e.batchindex=t.batchindex})),e+parseInt(t.quantity)}),0)}$(c),K("SUBMIT")}();else if("SUBMIT"===X)ye();else if("PARENT"===X){var e;if(V.loading||V.error){if(V.error){var t=h(V.code||"error_unexpected_error",{module:h(m.a.campaign).toLocaleLowerCase()});x(Object(O.e)({show:!0,severity:"error",message:t})),x(Object(O.d)(!1)),K("")}}else K("MEMBERS"),i=Y,s=null===(e=V.data[0])||void 0===e?void 0:e.p_campaignid,x(Object(f.c)({header:null,detail:Object(g.a)(i.map((function(e){return Object(d.Jf)(Object(n.a)(Object(n.a)({},e),{},{campaignid:s}))})))},!0))}else if("MEMBERS"===X)if(V.loading||V.error){if(V.error){var c=h(V.code||"error_unexpected_error",{module:h(m.a.campaign).toLocaleLowerCase()});x(Object(O.e)({show:!0,severity:"error",message:c})),x(Object(O.d)(!1)),K("")}}else x(Object(O.e)({show:!0,severity:"success",message:h(a?m.a.successful_edit:m.a.successful_register)})),b(),x(Object(O.d)(!1)),u("view-1");var i,s}),[X,V]),Object(i.useEffect)((function(){var e;if(2===D)switch(R.source){case"INTERNAL":ae([{label:h(m.a.name),description:"displayname",persistent:!0},{label:"PCC",description:"personcommunicationchannelowner",persistent:!0},{label:h(m.a.type),description:"type",persistent:!0},{label:h(m.a.status),description:"status",persistent:!0},{label:"".concat(h(m.a.field)," 1"),description:"field1",persistent:!0},{label:"".concat(h(m.a.field)," 2"),description:"field2",persistent:!0},{label:"".concat(h(m.a.field)," 3"),description:"field3",persistent:!0},{label:"".concat(h(m.a.field)," 4"),description:"field4",persistent:!0},{label:"".concat(h(m.a.field)," 5"),description:"field5",persistent:!0},{label:"".concat(h(m.a.field)," 6"),description:"field6",persistent:!0},{label:"".concat(h(m.a.field)," 7"),description:"field7",persistent:!0},{label:"".concat(h(m.a.field)," 8"),description:"field8",persistent:!0},{label:"".concat(h(m.a.field)," 9"),description:"field9",persistent:!0},{label:"".concat(h(m.a.field)," 10"),description:"field10",persistent:!0},{label:"".concat(h(m.a.field)," 11"),description:"field11",persistent:!0},{label:"".concat(h(m.a.field)," 12"),description:"field12",persistent:!0},{label:"".concat(h(m.a.field)," 13"),description:"field13",persistent:!0},{label:"".concat(h(m.a.field)," 14"),description:"field14",persistent:!0},{label:"".concat(h(m.a.field)," 15"),description:"field15",persistent:!0}]);break;case"EXTERNAL":ae(null===(e=R.selectedColumns)||void 0===e?void 0:e.columns.reduce((function(e,t){return e.push({label:t,description:t,persistent:!1}),e}),[{label:R.selectedColumns.primarykey,description:R.selectedColumns.primarykey,persistent:!1}]));break;case"PERSON":ae([{label:h(m.a.firstname),description:"firstname",persistent:!1},{label:h(m.a.lastname),description:"lastname",persistent:!1},{label:h(m.a.documenttype),description:"documenttype",persistent:!1},{label:h(m.a.documentnumber),description:"documentnumber",persistent:!1},{label:h(m.a.personType),description:"persontype",persistent:!1},{label:h(m.a.type),description:"type",persistent:!1},{label:h(m.a.phone),description:"phone",persistent:!1},{label:h(m.a.alternativePhone),description:"alternativephone",persistent:!1},{label:h(m.a.email),description:"email",persistent:!1},{label:h(m.a.alternativeEmail),description:"alternativeemail",persistent:!1},{label:h(m.a.lastContactDate),description:"lastcontact",persistent:!1},{label:h(m.a.agent),description:"agent",persistent:!1},{label:h(m.a.opportunity),description:"opportunity",persistent:!1},{label:h(m.a.birthday),description:"birthday",persistent:!1},{label:h(m.a.gender),description:"gender",persistent:!1},{label:h(m.a.educationLevel),description:"educationlevel",persistent:!1},{label:h(m.a.comments),description:"comments",persistent:!1}]);break;case"LEAD":ae([{label:h(m.a.opportunity),description:"opportunity",persistent:!1},{label:h(m.a.lastUpdate),description:"changedate",persistent:!1},{label:h(m.a.name),description:"name",persistent:!1},{label:h(m.a.email),description:"email",persistent:!1},{label:h(m.a.phone),description:"phone",persistent:!1},{label:h(m.a.expected_revenue),description:"expected_revenue",persistent:!1},{label:h(m.a.endDate),description:"date_deadline",persistent:!1},{label:h(m.a.tags),description:"tags",persistent:!1},{label:h(m.a.agent),description:"agent",persistent:!1},{label:h(m.a.priority),description:"priority",persistent:!1},{label:h(m.a.campaign),description:"campaign",persistent:!1},{label:h(m.a.product_plural),description:"products",persistent:!1},{label:h(m.a.phase),description:"phase",persistent:!1},{label:h(m.a.comments),description:"comments",persistent:!1}])}}),[D]),Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(F.jsxs)("div",{children:[Object(F.jsx)(C.L,{breadcrumbs:ge,handleClick:u}),Object(F.jsx)(C.R,{title:a?"".concat(a.title):h(m.a.newcampaign)})]}),Object(F.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(F.jsx)(o.a,{variant:"contained",type:"button",color:"primary",style:{backgroundColor:"#FB5F5F"},onClick:function(){return u("view-1")},children:h(m.a.cancel)}),s&&Object(F.jsx)(o.a,{className:j.button,variant:"contained",color:"primary",type:"button",style:{backgroundColor:"#55BD84"},disabled:!pe.valid[0]||!pe.valid[1],onClick:function(){je(Object(n.a)(Object(n.a)({},pe),{},{executeSave:!0,checkPage:!0}))},children:h(m.a.save)})]})]}),Object(F.jsxs)(le.a,{value:D,indicatorColor:"primary",variant:"fullWidth",style:{borderBottom:"1px solid #EBEAED",backgroundColor:"#FFF",marginTop:8},textColor:"primary",onChange:function(e,t){return je(Object(n.a)(Object(n.a)({},pe),{},{page:t,checkPage:!0}))},children:[Object(F.jsx)(C.b,{label:h(m.a.generalinformation)}),Object(F.jsx)(C.b,{label:h(m.a.person_plural)}),Object(F.jsx)(C.b,{label:h(m.a.message)})]}),0===D?Object(F.jsx)(q,{row:a,edit:s,auxdata:T,detaildata:R,setDetaildata:_,multiData:w.multiData.data,fetchData:b,frameProps:pe,setFrameProps:je,setPageSelected:E,setSave:K}):null,1===D?Object(F.jsx)(J,{row:a,edit:s,auxdata:T,detaildata:R,setDetaildata:_,multiData:w.multiData.data,fetchData:b,frameProps:pe,setFrameProps:je,setPageSelected:E,setSave:K}):null,2===D?Object(F.jsx)(ie,{row:a,edit:s,auxdata:T,detaildata:R,setDetaildata:_,multiData:w.multiData.data,fetchData:b,tablevariable:te,frameProps:pe,setFrameProps:je,setPageSelected:E,setSave:K,messageVariables:Oe,setMessageVariables:ve}):null]})},be=a(1046),pe=[{id:"view-1",name:"Campaign"},{id:"view-2",name:"Campaign blacklist"}],je=Object(b.a)((function(e){return{containerDetail:{},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},flexgrow1:{flexGrow:1}}})),me=function(e){var t=e.setViewSelected,a=je(),u=Object(l.c)(),b=Object(p.a)().t,j=Object(r.b)((function(e){return e.main.mainPaginated})),v=Object(r.b)((function(e){return e.main.exportData})),g=Object(r.b)((function(e){return e.main.execute})),h=Object(i.useState)(0),y=Object(c.a)(h,2),x=y[0],S=y[1],D=Object(i.useState)(0),E=Object(c.a)(D,2),N=E[0],A=E[1],T=Object(i.useState)({pageSize:20,pageIndex:0,filters:{},sorts:{},daterange:null}),I=Object(c.a)(T,2),H=I[0],L=I[1],R=Object(i.useState)(!1),_=Object(c.a)(R,2),M=_[0],P=_[1],z=Object(i.useState)(!1),W=Object(c.a)(z,2),V=W[0],U=W[1],B=Object(i.useState)(!1),q=Object(c.a)(B,2),X=q[0],G=q[1],J=Object(i.useState)(!1),Q=Object(c.a)(J,2),Y=Q[0],$=Q[1],Z=Object(i.useState)({}),ee=Object(c.a)(Z,2),te=ee[0],ae=ee[1],ne=s.a.useMemo((function(){return[{accessor:"id",NoFilter:!0,isComponent:!0,minWidth:60,width:"1%",Cell:function(e){var t=e.cell.row.original;return Object(F.jsx)(C.M,{viewFunction:function(){return re(t)},deleteFunction:function(){return se(t)},editFunction:function(){return re(t)}})}},{Header:b(m.a.phone),accessor:"phone"},{Header:b(m.a.description),accessor:"description"},{Header:b(m.a.creationdate),accessor:"createdate",type:"date",Cell:function(e){var t=e.cell.row.original;return Object(F.jsx)("div",{children:Object(d.K)(t.createdate).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"})})}}]}),[]),ce=function(e){var t=e.pageSize,a=e.pageIndex,c=e.filters,i=e.sorts;L(Object(n.a)(Object(n.a)({},H),{pageSize:t,pageIndex:a,filters:c,sorts:i})),u(Object(f.k)(Object(d.Yb)({sorts:i,filters:c,take:t,skip:a*t})))},ie=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,c,i,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t[0])){e.next=6;break}return e.next=4,Object(d.rh)(a,void 0);case 4:(c=e.sent).length>0&&(i=Object.keys(c[0]).includes("phone"),s=Object.keys(c[0]),u(Object(O.d)(!0)),u(Object(f.c)(Object(d.mg)(c.reduce((function(e,t){return e.push(Object(n.a)(Object(n.a)({},t),{},{id:t.id||0,phone:(i?t.phone:t[s[0]])||"",description:(i?t.description:t[s[1]])||"",type:t.type||"NINGUNO",status:t.status||"ACTIVO",operation:t.operation||"INSERT"})),e}),[])))),U(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e){u(Object(O.a)({visible:!0,question:b(m.a.confirmation_delete),callback:function(){u(Object(f.c)(Object(d.Ff)(Object(n.a)(Object(n.a)({},e),{},{operation:"DELETE",status:"ELIMINADO",id:e.id})))),u(Object(O.d)(!0)),G(!0)}}))},re=function(e){ae(e),$(!0)};return Object(i.useEffect)((function(){return u(Object(f.u)()),ce(H),function(){u(Object(f.u)())}}),[]),Object(i.useEffect)((function(){var e;if(M)if(v.loading||v.error){if(v.error){var t=b(v.code||"error_unexpected_error",{module:b(m.a.blacklist).toLocaleLowerCase()});u(Object(O.e)({show:!0,severity:"error",message:t})),u(Object(O.d)(!1)),P(!1)}}else u(Object(O.d)(!1)),P(!1),null===(e=v.url)||void 0===e||e.split(",").forEach((function(e){return window.open(e,"_blank")}))}),[v,M]),Object(i.useEffect)((function(){if(V)if(g.loading||g.error){if(g.error){var e=b(g.code||"error_unexpected_error",{module:b(m.a.blacklist).toLocaleLowerCase()});u(Object(O.e)({show:!0,severity:"error",message:e})),u(Object(O.d)(!1)),U(!1)}}else u(Object(O.e)({show:!0,severity:"success",message:b(m.a.successful_transaction)})),ce(H),u(Object(O.d)(!1)),U(!1)}),[g,V]),Object(i.useEffect)((function(){if(X)if(g.loading||g.error){if(g.error){var e=b(g.code||"error_unexpected_error",{module:b(m.a.blacklist).toLocaleLowerCase()});u(Object(O.e)({show:!0,severity:"error",message:e})),u(Object(O.d)(!1)),G(!1)}}else ce(H),u(Object(O.d)(!1)),G(!1)}),[g,X]),Object(i.useEffect)((function(){j.loading||j.error||(S(Math.ceil(j.count/H.pageSize)),A(j.count))}),[j]),Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(F.jsxs)("div",{children:[Object(F.jsx)(C.L,{breadcrumbs:pe,handleClick:t}),Object(F.jsx)(C.R,{title:b(m.a.blacklist)})]}),Object(F.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(F.jsx)(o.a,{variant:"contained",type:"button",color:"primary",style:{backgroundColor:"#FB5F5F"},onClick:function(){return t("view-1")},children:b(m.a.back)}),Object(F.jsx)(o.a,{className:a.button,variant:"contained",color:"primary",type:"button",startIcon:Object(F.jsx)(be.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},onClick:function(){return re()},children:b(m.a.register)})]})]}),Object(F.jsx)("div",{className:a.containerDetail,children:Object(F.jsx)(K.b,{columns:ne,data:j.data,totalrow:N,loading:j.loading,pageCount:x,download:!0,importCSV:ie,fetchData:ce,exportPersonalized:function(e){var t=e.filters,a=e.sorts;u(Object(f.d)(Object(d.Xb)({filters:t,sorts:a}))),u(Object(O.d)(!0)),P(!0)},autotrigger:!0})}),Y&&Object(F.jsx)(fe,{openModal:Y,setOpenModal:$,fetchData:function(){return ce(H)},row:te})]})},fe=function(e){var t,a,n=e.openModal,s=e.setOpenModal,o=e.row,u=e.fetchData,b=Object(l.c)(),j=Object(p.a)().t,v=Object(r.b)((function(e){return e.main.execute})),g=Object(i.useState)(!1),h=Object(c.a)(g,2),y=h[0],x=h[1],w=Object(D.d)({defaultValues:{isnew:!o,id:o?o.id:0,description:o?o.description:"",type:"NINGUNO",status:"ACTIVO",phone:o?o.phone:"",operation:o?"UPDATE":"INSERT"}}),k=w.register,S=w.handleSubmit,E=w.setValue,N=w.getValues,A=w.trigger,T=w.clearErrors,I=w.formState.errors,H=S((function(e){b(Object(O.a)({visible:!0,question:j(m.a.confirmation_save),callback:function(){b(Object(f.c)(Object(d.Ff)(e))),b(Object(O.d)(!0)),x(!0)}}))}));return Object(i.useEffect)((function(){k("phone",{validate:function(e){return e&&e.length||j(m.a.field_required)}}),k("description",{validate:function(e){return e&&e.length||j(m.a.field_required)}})}),[k]),Object(i.useEffect)((function(){o&&(E("id",o.id),E("phone",o.phone),E("description",o.description),A())}),[o]),Object(i.useEffect)((function(){if(y)if(v.loading||v.error){if(v.error){var e=j(v.code||"error_unexpected_error",{module:j(m.a.blacklist).toLocaleLowerCase()});b(Object(O.e)({show:!0,severity:"error",message:e})),b(Object(O.d)(!1)),x(!1)}}else u(),b(Object(O.d)(!1)),x(!1),s(!1)}),[v,y]),Object(F.jsx)(C.g,{open:n,title:j(m.a.detail),button1Type:"button",buttonText1:j(m.a.cancel),handleClickButton1:function(){T(),s(!1)},button2Type:"button",buttonText2:j(m.a.save),handleClickButton2:H,children:Object(F.jsxs)("div",{className:"row-zyx",children:[Object(F.jsx)(C.l,{label:j(m.a.phone),className:"col-6",valueDefault:N("phone"),onChange:function(e){return E("phone",e)},error:null===I||void 0===I||null===(t=I.phone)||void 0===t?void 0:t.message}),Object(F.jsx)(C.l,{label:j(m.a.description),className:"col-6",valueDefault:N("description"),onChange:function(e){return E("description",e)},error:null===I||void 0===I||null===(a=I.description)||void 0===a?void 0:a.message})]})})},Oe=a(980),ve=a(447),ge=a(167),he=a(197),ye=a(326),xe=a.n(ye),we=a(1247),ke=a.n(we),Se=Object(b.a)((function(e){return{containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"}}})),Ce=function(e){var t=e.disabled,a=e.onHandlerDelete,n=s.a.useState(null),i=Object(c.a)(n,2),r=i[0],l=i[1],o=Object(p.a)().t;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(S.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",size:"small",disabled:t,onClick:function(e){e.stopPropagation(),l(e.currentTarget)},children:Object(F.jsx)(xe.a,{})}),Object(F.jsx)(ge.a,{id:"menu-appbar",anchorEl:r,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(r),onClose:function(e){e.stopPropagation(),l(null)},children:a&&Object(F.jsxs)(he.a,{onClick:function(e){e.stopPropagation(),l(null),a()},children:[Object(F.jsx)(ve.a,{color:"inherit",children:Object(F.jsx)(z.a,{width:18,style:{fill:"#7721AD"}})}),o(m.a.delete)]})})]})},De=function(){var e=Object(l.c)(),t=Se(),a=Object(p.a)().t,b=Object(r.b)((function(e){return e.main})),v=Object(r.b)((function(e){return e.main.mainAux})),g=Object(r.b)((function(e){return e.main.execute})),h=Object(i.useState)("view-1"),y=Object(c.a)(h,2),x=y[0],w=y[1],k=Object(i.useState)({row:null,edit:!1}),S=Object(c.a)(k,2),C=S[0],D=S[1],E=Object(i.useState)(!1),N=Object(c.a)(E,2),A=N[0],T=N[1],I=Object(i.useState)(!1),H=Object(c.a)(I,2),L=H[0],R=H[1],_=Object(i.useState)(!1),M=Object(c.a)(_,2),P=M[0],z=M[1],W=Object(i.useState)(!1),V=Object(c.a)(W,2),U=V[0],B=V[1],q=s.a.useMemo((function(){return[{accessor:"id",NoFilter:!0,isComponent:!0,minWidth:60,width:"1%",Cell:function(e){var t=e.cell.row.original;return Object(F.jsx)(Ce,{onHandlerDelete:function(){J(t)}})}},{Header:a(m.a.campaign),accessor:"title",NoFilter:!1,width:"auto",maxWidth:"200px"},{Header:a(m.a.description),accessor:"description",NoFilter:!1,width:"auto",maxWidth:"200px"},{Header:a(m.a.startdate),accessor:"startdate",NoFilter:!1,type:"date",Cell:function(e){var t=e.cell.row.original;return Object(F.jsx)("div",{children:Object(d.Q)(t.startdate)})}},{Header:a(m.a.enddate),accessor:"enddate",NoFilter:!1,type:"date",Cell:function(e){var t=e.cell.row.original;return Object(F.jsx)("div",{children:Object(d.Q)(t.enddate)})}},{Header:a(m.a.status),accessor:"status",NoFilter:!1,prefixTranslation:"status_",Cell:function(e){var t=e.cell.row.original.status;return(a("status_".concat(t).toLowerCase())||"").toUpperCase()}},{accessor:"stop",isComponent:!0,maxWidth:"80px",Cell:function(e){var t=e.cell.row.original;return"EJECUTANDO"===(null===t||void 0===t?void 0:t.status)?Object(F.jsx)(ke.a,{titleAccess:a(m.a.stop),fontSize:"large",style:{width:35,height:35,fill:"#ea2e49"},onClick:function(e){e.stopPropagation(),Q(t)}}):null}},{accessor:"execute",isComponent:!0,Cell:function(e){var a=e.cell.row.original,n=a.id,c=a.status,i=a.startdate,s=a.enddate;return Object(d.Q)(i,"date")<=Object(d.jh)()&&Object(d.jh)()<=Object(d.Q)(s,"date")?"EJECUTANDO"===c?Object(F.jsx)(o.a,{className:t.button,variant:"contained",color:"primary",onClick:function(e){e.stopPropagation(),K(n)},style:{backgroundColor:"#55bd84"},children:Object(F.jsx)(j.a,{i18nKey:m.a.status})}):"ACTIVO"===c?Object(F.jsx)(o.a,{className:t.button,variant:"contained",color:"primary",onClick:function(e){e.stopPropagation(),G(n)},style:{backgroundColor:"#55bd84"},children:Object(F.jsx)(j.a,{i18nKey:m.a.execute})}):null:null}}]}),[]),X=function(){return e(Object(f.g)(Object(d.ac)()))},K=function(t){P||(e(Object(f.h)(Object(d.hc)(t))),z(!0))},G=function(t){L||(e(Object(f.h)(Object(d.gc)(t))),R(!0))};Object(i.useEffect)((function(){return X(),function(){e(Object(f.t)())}}),[]),Object(i.useEffect)((function(){if(A)if(g.loading||g.error){if(g.error){var t=a(g.code||"error_unexpected_error",{module:a(m.a.campaign).toLocaleLowerCase()});e(Object(O.e)({show:!0,severity:"error",message:t})),e(Object(O.d)(!1)),T(!1)}}else e(Object(O.e)({show:!0,severity:"success",message:a(m.a.successful_delete)})),X(),e(Object(O.d)(!1)),T(!1);if(U)if(g.loading||g.error){if(g.error){var n=a(g.code||"error_unexpected_error",{module:a(m.a.campaign).toLocaleLowerCase()});e(Object(O.e)({show:!0,severity:"error",message:n})),e(Object(O.d)(!1)),B(!1)}}else e(Object(O.e)({show:!0,severity:"success",message:a(m.a.successful_transaction)})),X(),e(Object(O.d)(!1)),B(!1)}),[g,A,U]),Object(i.useEffect)((function(){if(P)if(v.loading||v.error){if(v.error){var t=a(v.code||"error_unexpected_error",{module:a(m.a.campaign).toLocaleLowerCase()});e(Object(O.e)({show:!0,severity:"error",message:t})),z(!1)}}else{var n=v.data[0],c=n.status,i=n.enviado,s=n.total;"EJECUTANDO"===c?(e(Object(O.e)({show:!0,severity:"success",message:"".concat((a("status_".concat(c).toLowerCase())||"").toUpperCase(),": ").concat(a(m.a.sent)," ").concat(i,"/").concat(s)})),z(!1)):"ACTIVO"===c&&(e(Object(O.e)({show:!0,severity:"success",message:"".concat(Object(d.B)(a(m.a.sent)))})),X(),z(!1))}if(L)if(v.loading||v.error){if(v.error){var r=a(v.code||"error_unexpected_error",{module:a(m.a.campaign).toLocaleLowerCase()});e(Object(O.e)({show:!0,severity:"error",message:r})),e(Object(O.d)(!1)),R(!1)}}else e(Object(O.e)({show:!0,severity:"success",message:a(m.a.successful_transaction)})),X(),R(!1)}),[v,P,L]);var J=function(t){if("EJECUTANDO"===t.status)e(Object(O.e)({show:!0,severity:"error",message:a(m.a.campaign_in_execution)}));else{e(Object(O.a)({visible:!0,question:a(m.a.confirmation_delete),callback:function(){e(Object(f.c)(Object(d.T)(Object(n.a)(Object(n.a)({},t),{},{operation:"DELETE",status:"ELIMINADO",id:t.id})))),e(Object(O.d)(!0)),T(!0)}}))}},Q=function(t){if("EJECUTANDO"===t.status){e(Object(O.a)({visible:!0,question:a(m.a.confirmation_stop),callback:function(){e(Object(f.c)(Object(d.eh)({campaignid:t.id}))),e(Object(O.d)(!0)),B(!0)}}))}};return"view-1"===x?b.mainData.error?Object(F.jsx)("h1",{children:"ERROR"}):Object(F.jsx)(u.f,{onClickRow:function(t){"EJECUTANDO"===t.status?e(Object(O.e)({show:!0,severity:"error",message:a(m.a.campaign_in_execution)})):(w("view-2"),D({row:t,edit:!0}))},columns:q,titlemodule:a(m.a.campaign_plural,{count:2}),data:b.mainData.data,download:!0,loading:b.mainData.loading,register:!0,ButtonsElement:function(){return Object(F.jsxs)(s.a.Fragment,{children:[Object(F.jsx)(o.a,{className:t.button,variant:"contained",color:"primary",disabled:b.mainData.loading,onClick:function(){return w("blacklist")},style:{backgroundColor:"#ea2e49"},children:Object(F.jsx)(j.a,{i18nKey:m.a.blacklist})}),Object(F.jsx)(o.a,{className:t.button,variant:"contained",color:"primary",disabled:b.mainData.loading,onClick:function(){return w("report")},style:{backgroundColor:"#22b66e"},children:Object(F.jsx)(j.a,{i18nKey:m.a.report})})]})},handleRegister:function(){w("view-2"),D({row:null,edit:!0})}}):"view-2"===x?Object(F.jsx)(ue,{data:C,setViewSelected:w,fetchData:X}):"blacklist"===x?Object(F.jsx)(me,{setViewSelected:w}):"report"===x?Object(F.jsx)(Oe.a,{setViewSelected:w}):null};t.default=De},783:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return n}))},784:function(e,t,a){"use strict";a.d(t,"c",(function(){return $})),a.d(t,"a",(function(){return Z}));var n=a(26),c=a(1),i=a(20),s=a(3),r=a(0),l=a.n(r),o=a(1048),d=a(1049),u=a(1045),b=a(1047),p=a(1146),j=a(1044),m=a(257),f=a(721),O=a(197),v=a(51),g=a(444),h=a(169),y=a(718),x=a(170),w=a(94),k=a(8),S=a(16),C=a(794),D=a.n(C),E=a(9),N=a(315),A=a(1145),T=a(830),I=a(1046),H=a(893),L=a(894),R=a(765),_=a(766),M=a(767),P=a(768),z=a(323),F=a.n(z),W=a(167),V=a(793),U=a(48),B=a(172),q=a(779),X=a(7),K=a(2),G=Object(h.a)((function(e){var t;return{footerTable:(t={display:"block"},Object(s.a)(t,e.breakpoints.up("sm"),{display:"flex",justifyContent:"space-between"}),Object(s.a)(t,"& > div",Object(s.a)({display:"block",textAlign:"center"},e.breakpoints.up("sm"),{display:"flex",alignItems:"center"})),t),trdynamic:{"&:hover":{boxShadow:"0 11px 6px -9px rgb(84 84 84 / 78%)","& $containerfloat":{visibility:"visible"}}},containerfloat:{borderBottom:"none",padding:"4px 24px 4px 16px",backgroundColor:"white",marginTop:"1px",position:"absolute",zIndex:9999,left:0,visibility:"hidden"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},title:{fontSize:"22px",fontWeight:"bold",color:e.palette.text.primary},containerButtons:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:8},containerButtonsNoFilters:{display:"flex",width:"100%",justifyContent:"end",alignItems:"center",flexWrap:"wrap",gap:8},iconOrder:{width:20,height:20,color:e.palette.text.primary},containerHeader:Object(s.a)({display:"block",backgroundColor:"#FFF",padding:e.spacing(1)},e.breakpoints.up("sm"),{display:"flex"}),containerHeaderColumn:{display:"flex",justifyContent:"space-between",alignItems:"center"},iconHelpText:{width:15,height:15,cursor:"pointer"}}})),J=function(e){var t=e.header,a=e.type,n=e.setFilters,o=e.filters,d=e.listSelectFilter,u=Object(r.useState)(""),b=Object(i.a)(u,2),p=b[0],j=b[1],f=l.a.useState(null),O=Object(i.a)(f,2),v=O[0],h=O[1],y=Boolean(v),x=Object(r.useState)("contains"),w=Object(i.a)(x,2),k=w[0],S=w[1];Object(r.useEffect)((function(){switch(a){case"number":case"number-centered":case"date":case"datetime-local":case"time":case"select":S("equals");break;case"boolean":S("all");break;case"string":case"color":default:S("contains")}}),[a]),Object(r.useEffect)((function(){["number","number-centered"].includes(a)&&S("equals")}),[a]);var C=function(e){h(null),S(e),"boolean"===a?(j(e),n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:e,operator:e})),0)):"select"===a?(j(e),n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,"_ALL"===e?void 0:{value:e,operator:"equals"})),0)):"text"!==a&&a?["number","number-centered"].includes(a)?"isempty"===e||"isnotempty"===e||"isnull"===e||"isnotnull"===e?n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:"",operator:e})),0):p&&n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:p,operator:e})),0):"isempty"===e||"isnotempty"===e||"isnull"===e||"isnotnull"===e?n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:"",operator:e})),0):""!==p&&n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:p,operator:e})),0):"isempty"===e||"isnotempty"===e||"isnull"===e||"isnotnull"===e?n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:"",operator:e})),0):p&&n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:p,operator:e})),0)};return Object(r.useEffect)((function(){if(0===Object.keys(o).length)j("");else if(t in o){var e;j((null===o||void 0===o||null===(e=o[t])||void 0===e?void 0:e.value)||""),(null===o||void 0===o?void 0:o[t])&&S(o[t].operator)}}),[o]),Object(K.jsx)("div",{style:{display:"flex",alignItems:"center"},children:"boolean"===a?Object(K.jsx)(q.a,{value:p,handleClickItemMenu:C}):"select"===a?Object(K.jsx)(q.d,{value:p,handleClickItemMenu:C,data:d||[]}):Object(K.jsxs)(l.a.Fragment,{children:["date"===a&&Object(q.b)(p,(function(e){(null===e||e instanceof Date&&!isNaN(e.valueOf()))&&(j((null===e||void 0===e?void 0:e.toISOString())||""),e||["isnull","isnotnull"].includes(k)?n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:(null===e||void 0===e?void 0:e.toISOString().split("T")[0])||"",operator:k})),0):n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,void 0)),0))})),"time"===a&&Object(q.e)(p,(function(e){(null===e||e instanceof Date&&!isNaN(e.valueOf()))&&(j((null===e||void 0===e?void 0:e.toISOString())||""),e||["isnull","isnotnull"].includes(k)?n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:null===e||void 0===e?void 0:e.toLocaleTimeString(),operator:k})),0):n(Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,void 0)),0))})),!["date","time"].includes(a)&&Object(K.jsx)(g.a,{style:{fontSize:"15px",minWidth:"100px"},type:["number","number-centered"].includes(a)?"number":"text",fullWidth:!0,value:p,onKeyDown:function(e){13===e.keyCode&&n(p||"noempty"===k||"empty"===k?Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,{value:p,operator:k})):Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},t,void 0)),0)},onChange:function(e){return j(e.target.value)}}),Object(K.jsx)(m.a,{onClick:function(e){h(e.currentTarget)},size:"small",children:Object(K.jsx)(A.a,{style:{cursor:"pointer"},"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",color:"action",fontSize:"small"})}),Object(K.jsx)(W.a,{id:"long-menu",anchorEl:v,open:y,onClose:function(){h(null)},PaperProps:{style:{maxHeight:216,width:"20ch"}},children:Object(q.c)(a||"string",k,C)})]})})},Q=l.a.memo((function(e){var t,a=e.titlemodule,l=e.columns,g=e.data,h=e.fetchData,C=e.filterrange,N=e.totalrow,A=e.pageCount,z=e.download,W=e.register,q=e.handleRegister,Q=e.HeadComponent,$=e.ButtonsElement,Z=e.exportPersonalized,ee=e.loading,te=e.importCSV,ae=e.autotrigger,ne=void 0!==ae&&ae,ce=e.autoRefresh,ie=e.useSelection,se=e.selectionKey,re=e.selectionFilter,le=e.initialSelectedRows,oe=e.cleanSelection,de=e.setCleanSelection,ue=e.setSelectedRows,be=e.onClickRow,pe=e.FiltersElement,je=e.filterRangeDate,me=void 0===je?"month":je,fe=e.onFilterChange,Oe=e.initialEndDate,ve=void 0===Oe?null:Oe,ge=e.initialStartDate,he=void 0===ge?null:ge,ye=e.initialFilters,xe=void 0===ye?{}:ye,we=e.initialPageIndex,ke=void 0===we?0:we,Se=G(),Ce=Object(r.useState)({sorts:{},filters:xe,pageIndex:ke}),De=Object(i.a)(Ce,2),Ee=De[0],Ne=De[1],Ae=Object(r.useState)(!1),Te=Object(i.a)(Ae,2),Ie=Te[0],He=Te[1],Le=Object(r.useState)(ne),Re=Object(i.a)(Le,2),_e=Re[0],Me=Re[1],Pe=Object(r.useState)({startDate:he,endDate:ve,page:ke,filters:xe}),ze=Object(i.a)(Pe,2),Fe=ze[0],We=ze[1],Ve=Object(V.useTable)({columns:l,data:g,initialState:{pageIndex:ke,pageSize:20,selectedRowIds:le||{}},manualPagination:!0,pageCount:A,useControlledState:function(e){return Object(r.useMemo)((function(){return Object(c.a)(Object(c.a)({},e),{},{pageIndex:Ee.pageIndex})}),[e,Ee.pageIndex])},autoResetSelectedRows:!1,getRowId:function(e,t,a){return se?a?[e[se],a].join("."):e[se]:a?[a.id,t].join("."):t},stateReducer:function(e,t){switch(t.type){case"toggleAllRowsSelected":return Object(c.a)(Object(c.a)({},e),{},{selectedRowIds:{}});default:return e}}},V.useFilters,V.useGlobalFilter,V.usePagination,V.useRowSelect,(function(e){ie&&e.visibleColumns.push((function(e){return[{id:"selection",width:80,Header:function(e){var t=e.getToggleAllPageRowsSelectedProps,a=e.filteredRows;return re?Object(K.jsx)("div",{style:{textAlign:"right"},children:Object(K.jsx)(B.a,{color:"primary",style:{padding:0},checked:a.filter((function(e){return e.original[null===re||void 0===re?void 0:re.key]===(null===re||void 0===re?void 0:re.value)})).every((function(e){return e.isSelected})),onChange:function(){a.filter((function(e){return e.original[null===re||void 0===re?void 0:re.key]===(null===re||void 0===re?void 0:re.value)})).forEach((function(e){e.toggleRowSelected()}))}})}):Object(K.jsx)("div",{style:{textAlign:"right"},children:Object(K.jsx)(B.a,Object(c.a)({color:"primary",style:{padding:0}},t()))})},Cell:function(e){var t=e.row;return re&&t.original[null===re||void 0===re?void 0:re.key]!==(null===re||void 0===re?void 0:re.value)?null:Object(K.jsx)("div",{style:{textAlign:"right"},children:Object(K.jsx)(B.a,{color:"primary",style:{padding:0},checked:t.isSelected,onChange:function(e){return t.toggleRowSelected()}})})},NoFilter:!0,isComponent:!0}].concat(Object(n.a)(e))}))})),Ue=Ve.getTableProps,Be=Ve.getTableBodyProps,qe=Ve.headerGroups,Xe=Ve.prepareRow,Ke=Ve.page,Ge=Ve.canPreviousPage,Je=Ve.canNextPage,Qe=Ve.pageOptions,Ye=Ve.pageCount,$e=Ve.setPageSize,Ze=Ve.toggleAllRowsSelected,et=Ve.state,tt=et.pageIndex,at=et.pageSize,nt=et.selectedRowIds,ct=function(e){Ne((function(t){return Object(c.a)(Object(c.a)({},t),{},{pageIndex:e,trigger:!0})})),We((function(t){return Object(c.a)(Object(c.a)({},t),{},{page:e})}))},it=Object(r.useState)({startDate:he?new Date(he):"month"===me?Object(X.Oc)():Object(X.Fc)(),endDate:ve?new Date(ve):"month"===me?Object(X.kd)():Object(X.Fc)(),key:"selection"}),st=Object(i.a)(it,2),rt=st[0],lt=st[1],ot=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&Ne((function(e){return Object(c.a)(Object(c.a)({},e),{},{pageIndex:ke,trigger:!1})})),h&&(h(Object(c.a)(Object(c.a)({},Ee),{},{pageSize:at,pageIndex:e?ke:Ee.pageIndex,daterange:{startDate:rt.startDate?new Date(rt.startDate.setHours(10)).toISOString().substring(0,10):null,endDate:rt.endDate?new Date(rt.endDate.setHours(10)).toISOString().substring(0,10):null}})),We((function(t){return Object(c.a)(Object(c.a)({},t),{},{page:e?ke:Ee.pageIndex,startDate:rt.startDate?new Date(rt.startDate.setHours(10)).getTime():null,endDate:rt.endDate?new Date(rt.endDate.setHours(10)).getTime():null})})))};Object(r.useEffect)((function(){oe&&(Ze(!1),ue&&ue({}),de&&de(!1))}),[oe]),Object(r.useEffect)((function(){(null===Ee||void 0===Ee?void 0:Ee.trigger)&&ot()}),[Ee,_e]),Object(r.useEffect)((function(){_e&&ot()}),[at]),Object(r.useEffect)((function(){_e&&_e&&ot(!0)}),[_e]),Object(r.useEffect)((function(){(null===ce||void 0===ce?void 0:ce.value)&&(ot(),null===ce||void 0===ce||ce.callback(!1))}),[ce]),Object(r.useEffect)((function(){ue&&ue(nt)}),[nt]),Object(r.useEffect)((function(){null===fe||void 0===fe||fe(Fe)}),[Fe]);return Object(K.jsxs)(v.a,{width:1,children:[a&&Object(K.jsx)("div",{className:Se.title,children:a}),Object(K.jsx)(v.a,{className:Se.containerHeader,justifyContent:"space-between",alignItems:"center",children:Object(K.jsxs)("div",{className:Object(E.default)((t={},Object(s.a)(t,Se.containerButtons,!!pe),Object(s.a)(t,Se.containerButtonsNoFilters,!pe),t)),children:[C&&Object(K.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[Object(K.jsx)(U.f,{open:Ie,setOpen:He,range:rt,onSelect:lt,children:Object(K.jsx)(w.a,{disabled:ee,style:{border:"1px solid #bfbfc0",borderRadius:4,color:"rgb(143, 146, 161)"},startIcon:Object(K.jsx)(S.n,{}),onClick:function(){return He(!Ie)},children:Object(X.Ec)(rt.startDate)+" - "+Object(X.Ec)(rt.endDate)})}),pe&&pe,Object(K.jsx)(w.a,{disabled:ee,variant:"contained",color:"primary",startIcon:Object(K.jsx)(T.a,{style:{color:"white"}}),style:{backgroundColor:"#55BD84",width:120},onClick:function(){_e&&ot(!0),Me(!0)},children:Object(K.jsx)(y.a,{i18nKey:k.a.search})})]}),Object(K.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[$&&Object(K.jsx)($,{}),te&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("input",{name:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",id:"laraigo-upload-csv-file",type:"file",style:{display:"none"},onChange:function(e){return te(e.target.files)}}),Object(K.jsx)("label",{htmlFor:"laraigo-upload-csv-file",children:Object(K.jsx)(w.a,{className:Se.button,variant:"contained",component:"span",color:"primary",disabled:ee,startIcon:Object(K.jsx)(D.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:Object(K.jsx)(y.a,{i18nKey:k.a.import})})})]}),W&&Object(K.jsx)(w.a,{className:Se.button,variant:"contained",color:"primary",disabled:ee,startIcon:Object(K.jsx)(I.a,{color:"secondary"}),onClick:q,style:{backgroundColor:"#55BD84"},children:Object(K.jsx)(y.a,{i18nKey:k.a.register})}),z&&Object(K.jsx)(w.a,{className:Se.button,variant:"contained",color:"primary",disabled:ee,onClick:function(){Z&&Z(Object(c.a)(Object(c.a)({},Ee),{},{daterange:{startDate:rt.startDate?new Date(rt.startDate.setHours(10)).toISOString().substring(0,10):null,endDate:rt.endDate?new Date(rt.endDate.setHours(10)).toISOString().substring(0,10):null}}))},startIcon:Object(K.jsx)(S.E,{}),children:Object(K.jsx)(y.a,{i18nKey:k.a.download})})]})]})}),Q&&Object(K.jsx)(Q,{}),Object(K.jsxs)(b.a,{style:{position:"relative"},children:[Object(K.jsx)(v.a,{overflow:"auto",children:Object(K.jsxs)(o.a,Object(c.a)(Object(c.a)({},Ue()),{},{"aria-label":"enhanced table",size:"small","aria-labelledby":"tableTitle",children:[Object(K.jsx)(p.a,{children:qe.map((function(e){return Object(K.jsx)(j.a,Object(c.a)(Object(c.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e,t){return e.activeOnHover?Object(K.jsx)("th",{style:{width:"0px"}},"header-floating"):Object(K.jsx)(u.a,{children:e.isComponent?e.render("Header"):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:Se.containerHeaderColumn,children:[Object(K.jsxs)(v.a,Object(c.a)(Object(c.a)({component:"div"},e.getHeaderProps()),{},{onClick:function(){return!e.NoSort&&function(e){var t={};Object.keys(Ee.sorts).includes(e)&&(t=Object(c.a)({},Ee.sorts)),"desc"===t[e]?delete t[e]:"asc"===t[e]?t[e]="desc":t[e]="asc",Ne((function(e){return Object(c.a)(Object(c.a)({},e),{},{sorts:t,trigger:!0})}))}(e.id)},style:{whiteSpace:"nowrap",wordWrap:"break-word",display:"flex",cursor:"pointer",alignItems:"center"},children:[e.render("Header"),Ee.sorts[e.id]&&("asc"===Ee.sorts[e.id]?Object(K.jsx)(H.a,{className:Se.iconOrder,color:"action"}):Object(K.jsx)(L.a,{className:Se.iconOrder,color:"action"}))]})),!!e.helpText&&Object(K.jsx)(x.a,{title:Object(K.jsx)("div",{style:{fontSize:12,whiteSpace:"break-spaces"},children:e.helpText}),arrow:!0,placement:"top",children:Object(K.jsx)(F.a,{color:"action",className:Se.iconHelpText})})]}),!e.NoFilter&&Object(K.jsx)(J,{header:e.id,listSelectFilter:e.listSelectFilter||[],type:e.type,filters:Ee.filters,setFilters:function(e,t){!function(e,t){Ne((function(t){return Object(c.a)(Object(c.a)({},t),{},{filters:e,pageIndex:0,trigger:!0})}))}(e),We((function(a){return Object(c.a)(Object(c.a)({},a),{},{filters:e,page:t})}))}})]})},t)}))}))}))}),Object(K.jsx)(d.a,Object(c.a)(Object(c.a)({},Be()),{},{style:{backgroundColor:"white"},children:ee?Object(K.jsx)(Y,{columns:qe[0].headers.length}):Ke.map((function(e){return Xe(e),Object(K.jsx)(j.a,Object(c.a)(Object(c.a)({},e.getRowProps()),{},{hover:!0,style:{cursor:be?"pointer":"default"},children:e.cells.map((function(t,a){var n;return Object(K.jsx)(u.a,Object(c.a)(Object(c.a)({},t.getCellProps({style:{minWidth:t.column.minWidth,width:t.column.width,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"number"===t.column.type?"right":(null===(n=t.column.type)||void 0===n?void 0:n.includes("centered"))?"center":"left"}})),{},{onClick:function(){return"selection"!==t.column.id?be&&be(e.original):null},children:t.render("Cell")}))}))}))}))}))]}))}),Object(K.jsxs)(v.a,{className:Se.footerTable,children:[Object(K.jsxs)(v.a,{children:[Object(K.jsx)(m.a,{onClick:function(){return ct(0)},disabled:!Ge,children:Object(K.jsx)(R.a,{})}),Object(K.jsx)(m.a,{onClick:function(){return ct(Ee.pageIndex-1)},disabled:!Ge,children:Object(K.jsx)(_.a,{})}),Object(K.jsx)(m.a,{onClick:function(){return ct(Ee.pageIndex+1)},disabled:!Je,children:Object(K.jsx)(M.a,{})}),Object(K.jsx)(m.a,{onClick:function(){return ct(Ye-1)},disabled:!Je,children:Object(K.jsx)(P.a,{})}),Object(K.jsx)(v.a,{component:"span",fontSize:14,children:Object(K.jsx)(y.a,{i18nKey:k.a.tablePageOf,values:{currentPage:0===Qe.length?0:tt+1,totalPages:Qe.length},components:[Object(K.jsx)(v.a,{fontWeight:"700",component:"span"}),Object(K.jsx)(v.a,{fontWeight:"700",component:"span"})]})})]}),Object(K.jsx)(v.a,{children:Object(K.jsx)(y.a,{i18nKey:1e5===(N||0)?k.a.tableShowingRecordOfMore:k.a.tableShowingRecordOf,values:{itemCount:Ke.length,totalItems:N}})}),Object(K.jsxs)(v.a,{children:[Object(K.jsx)(f.a,{disableUnderline:!0,style:{display:"inline-flex"},value:at,onChange:function(e){$e(Number(e.target.value))},children:[5,10,20,50,100].map((function(e){return Object(K.jsx)(O.a,{value:e,children:e},e)}))}),Object(K.jsx)(v.a,{fontSize:14,display:"inline",style:{marginRight:"1rem"},children:Object(K.jsx)(y.a,{i18nKey:k.a.recordPerPage,count:at})})]})]})]})]})}));t.b=Q;var Y=function(e){for(var t=e.columns,a=[],n=0;n<t;n++)a.push(Object(K.jsx)(u.a,{children:Object(K.jsx)(N.a,{})},"table-simple-skeleton-".concat(n)));return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(j.a,{children:a},"1aux1"),Object(K.jsx)(j.a,{children:a},"2aux2")]})};function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignore:[]};return Object(r.useMemo)((function(){var a={endDate:Number(e.get("endDate")),startDate:Number(e.get("startDate")),page:Number(e.get("page")),filters:{}},n=t.ignore;return e.forEach((function(t,c){if("endDate"!==c&&"startDate"!==c&&"page"!==c&&!c.includes("-operator")&&!(n||[]).includes(c)){var i="".concat(c,"-operator");a.filters[c]={value:t,operator:e.get(i)}}})),a}),[t,e])}function Z(e,t){var a=new URLSearchParams(t);for(var n in e){var c=e[n];"filters"!==n&&void 0!==c&&null!==c&&a.set(n,String(c))}var i=e.filters;for(var s in i)"object"===typeof i[s]&&"value"in i[s]&&"operator"in i[s]&&(a.set(s,String(i[s].value)),a.set("".concat(s,"-operator"),String(i[s].operator)));return a}},786:function(e,t,a){"use strict";var n=a(45),c=a(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(a(0)),s=(0,n(a(62)).default)(i.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=s},830:function(e,t,a){"use strict";var n=a(0),c=a(43);t.a=Object(c.a)(n.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search")},850:function(e,t,a){"use strict";var n=a(0),c=a(43);t.a=Object(c.a)(n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},893:function(e,t,a){"use strict";var n=a(0),c=a(43);t.a=Object(c.a)(n.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward")},894:function(e,t,a){"use strict";var n=a(0),c=a(43);t.a=Object(c.a)(n.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward")},895:function(e,t,a){"use strict";var n=a(0),c=a(43);t.a=Object(c.a)(n.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp")},923:function(e,t,a){"use strict";var n=a(0),c=a(43);t.a=Object(c.a)(n.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"}),"FileCopy")},980:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var n=a(1),c=a(20),i=a(0),s=a.n(i),r=a(25),l=a(40),o=a(7),d=a(83),u=a(44),b=a(48),p=a(169),j=a(122),m=a(8),f=a(94),O=a(784),v=a(779),g=a(16),h=a(830),y=a(2),x=[{id:"view-1",name:"Campaign"},{id:"view-2",name:"Campaign report"}],w=Object(p.a)((function(e){return{containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},select:{width:"200px"},flexgrow1:{flexGrow:1},itemDate:{minHeight:40,height:40,border:"1px solid #bfbfc0",borderRadius:4,color:"rgb(143, 146, 161)"}}})),k={default:"default",proactive:"proactive"},S={startDate:new Date((new Date).setDate(1)),endDate:new Date((new Date).getFullYear(),(new Date).getMonth()+1,0),key:"selection"},C=function(e){var t=e.setViewSelected,a=e.externalUse,p=w(),v=Object(l.c)(),C=Object(j.a)().t,E=Object(r.b)((function(e){return e.main.mainPaginated})),N=Object(r.b)((function(e){return e.main.exportData})),A=Object(i.useState)(0),T=Object(c.a)(A,2),I=T[0],H=T[1],L=Object(i.useState)(0),R=Object(c.a)(L,2),_=R[0],M=R[1],P=Object(i.useState)({pageSize:20,pageIndex:0,filters:{},sorts:{},daterange:null}),z=Object(c.a)(P,2),F=z[0],W=z[1],V=Object(i.useState)(!1),U=Object(c.a)(V,2),B=U[0],q=U[1],X=Object(i.useState)(!1),K=Object(c.a)(X,2),G=K[0],J=K[1],Q=Object(i.useState)({}),Y=Object(c.a)(Q,2),$=Y[0],Z=Y[1],ee=Object(i.useState)({}),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],ce=Object(i.useState)("default"),ie=Object(c.a)(ce,2),se=ie[0],re=ie[1],le=Object(i.useState)(!1),oe=Object(c.a)(le,2),de=oe[0],ue=oe[1],be=Object(i.useState)(S),pe=Object(c.a)(be,2),je=pe[0],me=pe[1],fe=function(e){var t=e.cell.column,a=e.cell.row.original;return Object(y.jsx)("div",{onClick:function(){Z(a),J(!0)},children:"datetime"===t.sortType&&a[t.id]?Object(o.K)(a[t.id]).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric"}):a[t.id]})},Oe=s.a.useMemo((function(){return[{Header:C(m.a.campaign),accessor:"title",Cell:fe},{Header:C(m.a.description),accessor:"description",Cell:fe},{Header:C(m.a.templatetype),accessor:"templatetype",Cell:fe},{Header:C(m.a.templatename),accessor:"templatename",Cell:fe},{Header:C(m.a.channel),accessor:"channel",Cell:fe},{Header:C(m.a.rundate),accessor:"rundate",type:"date",sortType:"datetime",Cell:fe},{Header:C(m.a.total),accessor:"total",type:"number",sortType:"number",Cell:fe},{Header:C(m.a.success),accessor:"success",type:"number",sortType:"number",Cell:fe},{Header:C(m.a.success_percent),accessor:"successp",type:"number",sortType:"number",Cell:fe},{Header:C(m.a.failed),accessor:"fail",type:"number",sortType:"number",Cell:fe},{Header:C(m.a.failed_percent),accessor:"failp",type:"number",sortType:"number",Cell:fe},{Header:C(m.a.attended),accessor:"attended",type:"number",sortType:"number",Cell:fe},{Header:C(m.a.locked),accessor:"locked",type:"number",sortType:"number",Cell:fe},{Header:C(m.a.blacklisted),accessor:"blacklisted",type:"number",sortType:"number",Cell:fe}]}),[]),ve=function(e){var t=e.pageSize,a=e.pageIndex,c=e.filters,i=e.sorts;v(Object(u.d)(!0)),W(Object(n.a)(Object(n.a)({},F),{pageSize:t,pageIndex:a,filters:c,sorts:i})),v(Object(d.k)(Object(o.dc)({startdate:je.startDate,enddate:je.endDate,sorts:i,filters:c,take:t,skip:a*t})))};Object(i.useEffect)((function(){return v(Object(d.u)()),ve(F),function(){v(Object(d.u)())}}),[]),Object(i.useEffect)((function(){var e;if(B)if(N.loading||N.error){if(N.error){var t=C(N.code||"error_unexpected_error",{module:C(m.a.blacklist).toLocaleLowerCase()});v(Object(u.e)({show:!0,severity:"error",message:t})),v(Object(u.d)(!1)),q(!1)}}else v(Object(u.d)(!1)),q(!1),null===(e=N.url)||void 0===e||e.split(",").forEach((function(e){return window.open(e,"_blank")}))}),[N,B]),Object(i.useEffect)((function(){E.loading||E.error||(H(Math.ceil(E.count/F.pageSize)),M(E.count),v(Object(u.d)(!1)))}),[E]);return Object(y.jsxs)("div",{style:{width:"100%"},children:[!a&&Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsxs)("div",{children:[Object(y.jsx)(b.L,{breadcrumbs:x,handleClick:t}),Object(y.jsx)(b.R,{title:C(m.a.report)})]}),Object(y.jsx)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:Object(y.jsx)(f.a,{variant:"contained",type:"button",color:"primary",style:{backgroundColor:"#FB5F5F"},onClick:function(){return t&&t("view-1")},children:C(m.a.back)})})]}),a&&Object(y.jsx)("div",{style:{height:10}}),Object(y.jsx)("div",{className:a?"":p.containerDetail,children:Object(y.jsx)(O.b,{columns:Oe,data:E.data,totalrow:_,loading:E.loading,pageCount:I,download:!0,fetchData:ve,ButtonsElement:function(){return Object(y.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[Object(y.jsx)(b.f,{open:de,setOpen:ue,range:je,onSelect:me,children:Object(y.jsx)(f.a,{className:p.itemDate,startIcon:Object(y.jsx)(g.n,{}),onClick:function(){return ue(!de)},children:Object(o.Ec)(je.startDate)+" - "+Object(o.Ec)(je.endDate)})}),Object(y.jsx)(f.a,{disabled:E.loading,variant:"contained",color:"primary",startIcon:Object(y.jsx)(h.a,{style:{color:"white"}}),style:{width:120,backgroundColor:"#55BD84"},onClick:function(){return ve(F)},children:C(m.a.search)}),Object(y.jsx)(b.u,{uset:!0,variant:"outlined",label:C(m.a.reporttype),className:p.select,valueDefault:se,onChange:function(e){return re(null===e||void 0===e?void 0:e.key)},data:Object(o.X)(k),optionDesc:"value",optionValue:"key"})]})},exportPersonalized:function(){return 0===Object.keys(ae).length?(v(Object(u.e)({show:!0,severity:"error",message:C(m.a.no_record_selected)})),null):se?void(se===k.default?(v(Object(d.d)(Object(o.cc)(Object.keys(ae).reduce((function(e,t){return e.push({campaignid:t.split("_")[0],rundate:t.split("_")[1]}),e}),[])),"".concat(C(m.a.report)),"excel",!0,[{key:"templatetype",alias:C(m.a.templatetype)},{key:"date",alias:C(m.a.date)},{key:"campaign",alias:C(m.a.campaign)},{key:"description",alias:C(m.a.description)},{key:"ticketnum",alias:C(m.a.ticket)},{key:"group",alias:C(m.a.group)},{key:"userid",alias:C(m.a.userid)},{key:"agent",alias:C(m.a.agent)},{key:"contact",alias:C(m.a.contact)},{key:"template",alias:C(m.a.templatename)},{key:"rundate",alias:C(m.a.rundate)},{key:"runtime",alias:C(m.a.runtime)},{key:"firstreplydate",alias:C(m.a.firstreplydate)},{key:"firstreplytime",alias:C(m.a.firstreplytime)},{key:"finishdate",alias:C(m.a.finishconversationdate)},{key:"finishtime",alias:C(m.a.finishconversationtime)},{key:"realduration",alias:C(m.a.realduration)},{key:"classification",alias:C(m.a.classification)},{key:"conversationid",alias:C(m.a.conversationid)},{key:"status",alias:C(m.a.status)},{key:"log",alias:C(m.a.log)}])),v(Object(u.d)(!0)),q(!0)):se===k.proactive&&(v(Object(d.d)(Object(o.ec)(Object.keys(ae).reduce((function(e,t){return e.push({campaignid:t.split("_")[0],rundate:t.split("_")[1]}),e}),[])),"".concat(C(m.a.report)),"excel",!0,[{key:"templatetype",alias:C(m.a.templatetype)},{key:"campaign",alias:C(m.a.campaign)},{key:"description",alias:C(m.a.description)},{key:"template",alias:C(m.a.template)},{key:"ticketnum",alias:C(m.a.ticket)},{key:"year",alias:C(m.a.year)},{key:"month",alias:C(m.a.month)},{key:"ticketdate",alias:C(m.a.ticketdate)},{key:"tickettime",alias:C(m.a.tickettime)},{key:"contact",alias:C(m.a.contact)},{key:"client",alias:C(m.a.client)},{key:"channel",alias:C(m.a.channel)},{key:"group",alias:C(m.a.group)},{key:"firstagent",alias:C(m.a.firstagent)},{key:"message",alias:C(m.a.message)},{key:"classification",alias:C(m.a.classification)},{key:"lastagent",alias:C(m.a.lastagent)},{key:"status",alias:C(m.a.status)},{key:"log",alias:C(m.a.log)}])),v(Object(u.d)(!0)),q(!0))):(v(Object(u.e)({show:!0,severity:"error",message:C(m.a.no_type_selected)})),null)},useSelection:!0,selectionKey:"id",setSelectedRows:ne})}),G&&Object(y.jsx)(D,{openModal:G,setOpenModal:J,row:$})]})},D=function(e){var t=e.openModal,a=e.setOpenModal,n=e.row,u=Object(l.c)(),p=Object(j.a)().t,f=Object(r.b)((function(e){return e.main.mainAux})),O=Object(i.useState)(!1),g=Object(c.a)(O,2),h=g[0],x=g[1],w=s.a.useMemo((function(){return[{Header:p(m.a.contact),accessor:"contact"},{Header:p(m.a.status),accessor:"status"},{Header:p(m.a.log),accessor:"log"}]}),[]);return Object(i.useEffect)((function(){if(null!==n)return u(Object(d.h)(Object(o.cc)([{campaignid:n.id.split("_")[0],rundate:n.id.split("_")[1]}]))),x(!0),function(){u(Object(d.z)())}}),[]),Object(i.useEffect)((function(){h&&(f.loading||f.error||x(!1))}),[f,h]),Object(y.jsx)(b.g,{maxWidth:"md",open:t,title:"".concat(n.title," ").concat(Object(o.K)(n.rundate).toLocaleString()),button1Type:"button",buttonText1:p(m.a.close),handleClickButton1:function(){a(!1)},children:Object(y.jsx)("div",{className:"row-zyx",children:Object(y.jsx)(v.f,{columns:w,data:f.data,loading:f.loading,filterGeneral:!1,download:!1})})})}}}]);
//# sourceMappingURL=32.2e28ad13.chunk.js.map