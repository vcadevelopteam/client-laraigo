{"version":3,"sources":["../node_modules/@material-ui/icons/Check.js","../node_modules/@material-ui/icons/Remove.js","pages/MessageTemplates.tsx","store/channel/actions.ts","../node_modules/@material-ui/icons/Add.js","components/fields/RichText.tsx","../node_modules/@material-ui/icons/AttachFile.js","../node_modules/@material-ui/icons/Refresh.js","../node_modules/@material-ui/icons/esm/GetApp.js","../node_modules/@material-ui/icons/esm/FileCopy.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","CodeMirror","lazy","useStyles","makeStyles","theme","btnButton","flexGrow","flexBasis","minHeight","minWidth","button","fontSize","fontWeight","padding","textTransform","buttonTitle","marginRight","width","containerDetail","background","marginTop","spacing","headerText","headerType","mb1","marginBottom","mediabutton","margin","opacity","IDMESSAGETEMPLATE","DetailMessageTemplates","data","row","edit","setViewSelected","multiData","fetchData","dispatch","useDispatch","t","useTranslation","classes","dataCategory","success","dataLanguage","dataChannel","filter","x","type","addRequest","useSelector","state","channel","requestAddTemplate","executeRes","main","execute","uploadResult","uploadFile","useState","undefined","htmlLoad","setHtmlLoad","body","bodyAttachment","setBodyAttachment","bodyAlert","setBodyAlert","bodyobject","bodyObject","setBodyObject","fileAttachment","setFileAttachment","fileAttachmentTemplate","setFileAttachmentTemplate","htmlEdit","setHtmlEdit","id","isNew","fromprovider","isProvider","setIsProvider","disableInput","setDisableInput","disableNamespace","setDisableNamespace","waitSave","setWaitSave","waitAdd","setWaitAdd","waitUploadFile","setWaitUploadFile","dataExternalCategory","description","langKeys","TEMPLATE_ACCOUNT_UPDATE","TEMPLATE_PAYMENT_UPDATE","TEMPLATE_PERSONAL_FINANCE_UPDATE","TEMPLATE_SHIPPING_UPDATE","TEMPLATE_RESERVATION_UPDATE","TEMPLATE_ISSUE_RESOLUTION","TEMPLATE_APPOINTMENT_UPDATE","TEMPLATE_TRANSPORTATION_UPDATE","TEMPLATE_TICKET_UPDATE","TEMPLATE_ALERT_UPDATE","TEMPLATE_AUTO_REPLY","TEMPLATE_TRANSACTIONAL","TEMPLATE_MARKETING","TEMPLATE_OTP","dataExternalStatus","TEMPLATE_APPROVED","TEMPLATE_IN_APPEAL","TEMPLATE_PENDING","TEMPLATE_REJECTED","TEMPLATE_PENDING_DELETION","TEMPLATE_DELETED","TEMPLATE_DISABLED","TEMPLATE_LOCKED","TEMPLATE_PAUSED","TEMPLATE_SUBMITTED","NONE","toUpperCase","dataExternalLanguage","TEMPLATE_AF","TEMPLATE_SQ","TEMPLATE_AR","TEMPLATE_AZ","TEMPLATE_BN","TEMPLATE_BG","TEMPLATE_CA","TEMPLATE_ZH_CN","TEMPLATE_ZH_HK","TEMPLATE_ZH_TW","TEMPLATE_HR","TEMPLATE_CS","TEMPLATE_DA","TEMPLATE_NL","TEMPLATE_EN","TEMPLATE_EN_GB","TEMPLATE_EN_US","TEMPLATE_ET","TEMPLATE_FIL","TEMPLATE_FI","TEMPLATE_FR","TEMPLATE_KA","TEMPLATE_DE","TEMPLATE_EL","TEMPLATE_GU","TEMPLATE_HA","TEMPLATE_HE","TEMPLATE_HI","TEMPLATE_HU","TEMPLATE_ID","TEMPLATE_GA","TEMPLATE_IT","TEMPLATE_JA","TEMPLATE_KN","TEMPLATE_KK","TEMPLATE_RW_RW","TEMPLATE_KO","TEMPLATE_KY_KG","TEMPLATE_LO","TEMPLATE_LV","TEMPLATE_LT","TEMPLATE_MK","TEMPLATE_MS","TEMPLATE_ML","TEMPLATE_MR","TEMPLATE_NB","TEMPLATE_FA","TEMPLATE_PL","TEMPLATE_PT_BR","TEMPLATE_PT_PT","TEMPLATE_PA","TEMPLATE_RO","TEMPLATE_RU","TEMPLATE_SR","TEMPLATE_SK","TEMPLATE_SL","TEMPLATE_ES","TEMPLATE_ES_AR","TEMPLATE_ES_ES","TEMPLATE_ES_MX","TEMPLATE_SW","TEMPLATE_SV","TEMPLATE_TA","TEMPLATE_TE","TEMPLATE_TH","TEMPLATE_TR","TEMPLATE_UK","TEMPLATE_UR","TEMPLATE_UZ","TEMPLATE_VI","TEMPLATE_ZU","dataMessageType","text","messagetemplate_sms","messagetemplate_hsm","messagetemplate_mail","messagetemplate_html","dataTemplateType","messagetemplate_standard","messagetemplate_multimedia","dataHeaderType","messagetemplate_text","messagetemplate_image","messagetemplate_document","messagetemplate_video","dataButtonType","messagetemplate_url","messagetemplate_quickreply","messagetemplate_phonenumber","dataPriority","messagetemplate_low","messagetemplate_medium","messagetemplate_high","useForm","defaultValues","attachment","buttons","buttonsenabled","includes","category","footer","footerenabled","header","headerenabled","headertype","language","name","namespace","operation","priority","status","templatetype","typeattachment","externalid","externalstatus","communicationchannelid","communicationchanneltype","servicecredentials","communicationchannelservicecredentials","integrationid","communicationchannelintegrationid","exampleparameters","control","register","handleSubmit","setValue","getValues","unregister","trigger","errors","formState","templateTypeDisabled","setTemplateTypeDisabled","useFieldArray","fields","useEffect","validate","length","field_required","match","nametemplate_validation","then","html","matchClosingTags","loading","error","errormessage","code","module","messagetemplate","toLocaleLowerCase","showSnackbar","show","severity","message","showBackdrop","successful_edit","successful_register","url","join","onSubmit","renderToString","toElement","manageConfirmation","visible","question","confirmation_save","callback","addTemplate","insMessageTemplate","validationchar","onChangeTemplateMedia","a","onChangeTemplateType","onClickHeaderToogle","onClickFooterToogle","onClickButtonsToogle","onChangeHeaderType","onChangeButton","index","param","onClickAddButton","title","payload","onClickRemoveButton","btns","i","onClickAttachment","useCallback","document","getElementById","click","onChangeAttachment","files","file","item","fd","FormData","append","reader","FileReader","readAsText","onload","event","content","target","result","toString","view1","view2","onChangeAttachmentTemplate","handleCleanMediaInput","f","input","split","changeProvider","style","display","justifyContent","breadcrumbs","messagetemplatedetail","handleClick","newmessagetemplate","gap","alignItems","variant","color","startIcon","backgroundColor","onClick","back","className","disabled","save","showid","label","messagetemplateid","messagetype","onChange","richTextToString","optionDesc","optionValue","valueDefault","domainvalue","uset","messagetemplate_fromprovider","messagetemplate_externalstatus","Fragment","htmlColor","maxLength","rows","addbutton","removebutton","map","btn","fregister","subject","lineHeight","mb","spellCheck","borderStyle","borderWidth","borderColor","borderRadius","component","accept","e","messagetemplate_changetoview","messagetemplate_changetoeditor","fallback","height","extensions","dangerouslySetInnerHTML","__html","messagetemplate_attachment","FilePreview","src","onClose","useFilePreviewStyles","btnContainer","flexDirection","infoContainer","root","maxHeight","maxWidth","overflow","isUrl","getFileName","m","getFileExt","pop","elevation","textOverflow","whiteSpace","size","href","rel","download","MessageTemplates","executeResult","mainResult","memoryTable","synchronizeRequest","requestSynchronizeTemplate","deleteRequest","requestDeleteTemplate","communicationChannelList","setCommunicationChannelList","communicationChannel","setCommunicationChannel","rowSelected","setRowSelected","showId","setShowId","viewSelected","waitSynchronize","setWaitSynchronize","waitDelete","setWaitDelete","columns","useMemo","accessor","isComponent","NoFilter","Cell","props","cell","original","viewFunction","handleView","deleteFunction","handleDelete","editFunction","handleEdit","Header","creationdate","dateToLocalDate","createdate","prefixTranslation","toLowerCase","yes","no","none","getCollection","getMessageTemplateSel","setMemoryTable","getMultiCollection","getValuesFromDomain","selCommunicationChannelWhatsApp","resetAllMain","cleanMemoryTable","successful_delete","mainData","confirmation_delete","deleteTemplate","onClickRow","ButtonsElement","flexWrap","communicationchannel","messagetemplate_synchronize_alert01","communicationchanneldesc","phone","messagetemplate_synchronize_alert02","synchronizeTemplate","messagetemplate_synchronize","titlemodule","messagetemplate_plural","count","handleRegister","pageSizeDefault","pageSize","initialPageIndex","page","initialStateFilter","entries","filters","getChannelsList","accessToken","appId","callAPI","ChannelsService","getPagelist","types","actionTypes","CHANNELS","CHANNELS_SUCCESS","failure","CHANNELS_FAILURE","insertChannel","requestBody","insertchnl","CHANNELS_INSERTSUCCESS","activateChannel","ACTIVATECHANNEL","ACTIVATECHANNEL_SUCCESS","ACTIVATECHANNEL_FAILURE","deleteChannel","deletechnl","checkPaymentPlan","CHECK_PAYMENTPLAN","CHECK_PAYMENTPLAN_SUCCESS","CHECK_PAYMENTPLAN_FAILURE","insertChannel2","chatIconFile","service","interface","iconbutton","headerIconFile","iconheader","botIconFile","iconbot","bubbleIconFile","bubble","iconbubble","chatIcon","headerIcon","botIcon","bubbleIcon","CommonService","INSERT_CHANNEL","INSERT_CHANNEL_FAILURE","INSERT_CHANNEL_SUCCESS","resetInsertChannel","INSERT_CHANNEL_RESET","editChannel","channelType","editchnl","EDIT_CHANNEL","EDIT_CHANNEL_FAILURE","EDIT_CHANNEL_SUCCESS","resetEditChannel","EDIT_CHANNEL_RESET","getFacebookPages","getPagelistSub","FACEBOOK_PAGES","FACEBOOK_PAGES_SUCCESS","FACEBOOK_PAGES_FAILURE","resetGetFacebookPages","FACEBOOK_PAGES_RESET","getMessengerPages","MESSENGER_PAGES","MESSENGER_PAGES_SUCCESS","MESSENGER_PAGES_FAILURE","resetGetMessengerPages","MESSENGER_PAGES_RESET","getInstagramPages","INSTAGRAM_PAGES","INSTAGRAM_PAGES_SUCCESS","INSTAGRAM_PAGES_FAILURE","resetGetInstagramPages","INSTAGRAM_PAGES_RESET","getInstagramDMPages","INSTAGRAMDM_PAGES","INSTAGRAMDM_PAGES_SUCCESS","INSTAGRAMDM_PAGES_FAILURE","resetGetInstagramDMPages","INSTAGRAMDM_PAGES_RESET","request","SYNCHRONIZE_TEMPLATE_FAILURE","SYNCHRONIZE_TEMPLATE","SYNCHRONIZE_TEMPLATE_SUCCESS","ADD_TEMPLATE_FAILURE","ADD_TEMPLATE","ADD_TEMPLATE_SUCCESS","DELETE_TEMPLATE_FAILURE","DELETE_TEMPLATE","DELETE_TEMPLATE_SUCCESS","getPhoneList","PHONE_LIST","PHONE_LIST_SUCCESS","PHONE_LIST_FAILURE","EMOJISINDEXED","emojis","reduce","acc","emojihex","element","ReactDomServer","children","hasOwnProperty","push","renderElement","isStatic","attributes","key","renderLeaf","leaf","LIST_TYPES","useRichTextStyles","toolbar","editable","overflowY","overflowX","direction","littleboxes","cursor","QuickResponseStyles","iconResponse","containerQuickReply","boxShadow","headerQuickReply","paddingLeft","QuickReply","quickReplies","editor","open","setOpen","quickRepliesToShow","setquickRepliesToShow","showSearch","setShowSearch","search","setSearch","ticketSelected","inbox","user","login","validateToken","favorite","onClickAway","send_quickreply","arrow","placement","prev","position","bottom","fullWidth","autoFocus","placeholder","onBlur","InputProps","endAdornment","edge","disablePadding","insertText","quickreply","replace","ticketnum","displayname","firstname","lastname","handlerClickItem","primary","quickreplyid","EmojiPickerZyx","emojisIndexed","emojisNoShow","emojiFavorite","onSelect","icon","send_emoji","native","sheetSize","i18n","categories","search_result","recent","favorites","people","emoticons","nature","animals","foods","food","activity","activities","places","travel","objects","symbols","flags","emojisToShowFilter","emoji","indexOf","unified","TEXT_ALIGN_TYPES","RichText","refresh","image","positionEditable","onlyurl","endinput","emojiNoShow","boxProps","withImages","withHistory","withReact","createEditor","upload","selection","anchor","path","offset","focus","FontFamily","tooltip","FormatSizeMenu","MarkButton","format","TextColor","Alignment","BlockButton","OnlyURLInsertImageButton","i18nKey","loadingImage","marginLeft","borderTop","textAlign","align","StaticImage","Image","bold","italic","underline","fontfamily","fontFamily","fontsize","backgroundcolor","useSlate","marks","Editor","font","labelId","preventDefault","removeMark","addMark","toggleFontFamily","anchorEl","setAnchorEl","Boolean","handleClose","toggleFontSize","currentTarget","keepMounted","anchorOrigin","vertical","horizontal","transformOrigin","small","normal","large","huge","textalign","newProperties","isBlockActive","Transforms","setNodes","toggleAlignment","ColorBoxes","other","toggleBackgroundColor","toggleColor","textcolor","isMarkActive","blockType","Array","from","nodes","at","unhangRange","n","isEditor","SlateElement","isElement","active","toggleMark","isActive","isList","unwrapNodes","block","wrapNodes","toggleBlock","useInsertImageButtonStyles","rootPopup","paddingRight","rootTab","hidden","attachTab","useSlateStatic","setUrl","resetUploadFile","insertImage","clearUrl","addNewUrlImage","onMouseDown","MenuListProps","role","clsx","enterTheUrl","insertNodes","next","endDummyElement","useImageStyles","img","left","top","ReactEditor","findPath","selected","useSelected","focused","useFocused","contentEditable","alt","insertData","isVoid","getData","addEventListener","readAsDataURL","test","createSvgIcon"],"mappings":"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","file":"static/js/35.27abdd14.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"\n}), 'Check');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13H5v-2h14v2z\"\n}), 'Remove');\n\nexports.default = _default;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { Suspense, FC, useCallback, useEffect, useState } from 'react';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport Button from '@material-ui/core/Button';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport TableZyx from '../components/fields/table-simple';\r\nimport { Box, CircularProgress, IconButton, Paper } from '@material-ui/core';\r\nimport { Close, FileCopy, GetApp } from '@material-ui/icons';\r\nimport { getMessageTemplateSel, getValuesFromDomain, insMessageTemplate, richTextToString, selCommunicationChannelWhatsApp, dateToLocalDate } from 'common/helpers';\r\nimport { Descendant } from \"slate\";\r\nimport { Dictionary, MultiData } from \"@types\";\r\nimport { execute, getCollection, getMultiCollection, resetAllMain, uploadFile, cleanMemoryTable, setMemoryTable } from 'store/main/actions';\r\nimport { FieldEdit, FieldEditMulti, FieldSelect, FieldView, TemplateBreadcrumbs, TemplateIcons, TitleDetail } from 'components';\r\nimport { langKeys } from 'lang/keys';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { manageConfirmation, showBackdrop, showSnackbar } from 'store/popus/actions';\r\nimport { RichText, renderToString, toElement } from 'components/fields/RichText';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useFieldArray, useForm } from 'react-hook-form';\r\nimport { useSelector } from 'hooks';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { synchronizeTemplate, deleteTemplate, addTemplate } from 'store/channel/actions';\r\n\r\nconst CodeMirror = React.lazy(() => import('@uiw/react-codemirror'));\r\n\r\ninterface RowSelected {\r\n    edit: boolean,\r\n    row: Dictionary | null,\r\n}\r\n\r\ninterface DetailProps {\r\n    data: RowSelected;\r\n    fetchData: () => void;\r\n    multiData: MultiData[];\r\n    setViewSelected: (view: string) => void;\r\n}\r\n\r\nconst arrayBread = (view1: string, view2: string) => [\r\n    { id: \"view-1\", name: view1 },\r\n    { id: \"view-2\", name: view2 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    btnButton: {\r\n        flexGrow: 0,\r\n        flexBasis: 0,\r\n        minHeight: '30px',\r\n        minWidth: 'max-content',\r\n    },\r\n    button: {\r\n        fontSize: '14px',\r\n        fontWeight: 500,\r\n        padding: 12,\r\n        textTransform: 'initial'\r\n    },\r\n    buttonTitle: {\r\n        marginRight: '0.25rem',\r\n        width: 'auto',\r\n    },\r\n    containerDetail: {\r\n        background: '#fff',\r\n        marginTop: theme.spacing(2),\r\n        padding: theme.spacing(2),\r\n    },\r\n    headerText: {\r\n        flexBasis: '200px',\r\n        flexGrow: 1,\r\n    },\r\n    headerType: {\r\n        flexBasis: '130px',\r\n        flexGrow: 0,\r\n        marginRight: '10px',\r\n    },\r\n    mb1: {\r\n        marginBottom: '0.25rem',\r\n    },\r\n    mediabutton: {\r\n        margin: theme.spacing(1),\r\n        flexBasis: 0,\r\n        flexGrow: 1,\r\n        minHeight: '30px',\r\n        opacity: 0.8,\r\n        padding: 0,\r\n        '&:hover': {\r\n            opacity: 1,\r\n        }\r\n    },\r\n}));\r\n\r\nconst IDMESSAGETEMPLATE = \"IDMESSAGETEMPLATE\";\r\nconst MessageTemplates: FC = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const { t } = useTranslation();\r\n\r\n    const executeResult = useSelector(state => state.main.execute);\r\n    const mainResult = useSelector(state => state.main);\r\n    const memoryTable = useSelector(state => state.main.memoryTable);\r\n    const synchronizeRequest = useSelector(state => state.channel.requestSynchronizeTemplate);\r\n    const deleteRequest = useSelector(state => state.channel.requestDeleteTemplate);\r\n\r\n    const [communicationChannelList, setCommunicationChannelList] = useState<Dictionary[]>([]);\r\n    const [communicationChannel, setCommunicationChannel] = useState<any>(null);\r\n    const [rowSelected, setRowSelected] = useState<RowSelected>({ row: null, edit: false });\r\n    const [showId, setShowId] = useState(false);\r\n    const [viewSelected, setViewSelected] = useState(\"view-1\");\r\n    const [waitSave, setWaitSave] = useState(false);\r\n    const [waitSynchronize, setWaitSynchronize] = useState(false);\r\n    const [waitDelete, setWaitDelete] = useState(false);\r\n\r\n    const columns = React.useMemo(\r\n        () => [\r\n            {\r\n                accessor: 'id',\r\n                isComponent: true,\r\n                minWidth: 60,\r\n                NoFilter: true,\r\n                width: '1%',\r\n                Cell: (props: any) => {\r\n                    const row = props.cell.row.original;\r\n                    return (\r\n                        <TemplateIcons\r\n                            viewFunction={() => handleView(row)}\r\n                            deleteFunction={() => handleDelete(row)}\r\n                            editFunction={() => handleEdit(row)}\r\n                        />\r\n                    )\r\n                }\r\n            },\r\n            {\r\n                accessor: 'createdate',\r\n                Header: t(langKeys.creationdate),\r\n                NoFilter: true,\r\n                Cell: (props: any) => {\r\n                    const row = props.cell.row.original;\r\n                    return (\r\n                        <div>{dateToLocalDate(row.createdate)}</div>\r\n                    )\r\n                }\r\n            },\r\n            ...(showId ? [{\r\n                accessor: 'templateid',\r\n                Header: t(langKeys.messagetemplateid),\r\n                NoFilter: true,\r\n                Cell: (props: any) => {\r\n                    const row = props.cell.row.original;\r\n                    if (row.showid) {\r\n                        return row.id;\r\n                    }\r\n                    else {\r\n                        return null;\r\n                    }\r\n                }\r\n            }] : []),\r\n            {\r\n                accessor: 'type',\r\n                Header: t(langKeys.type),\r\n                prefixTranslation: 'messagetemplate_',\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                accessor: 'templatetype',\r\n                Header: t(langKeys.templatetype),\r\n                prefixTranslation: 'messagetemplate_',\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                accessor: 'name',\r\n                Header: t(langKeys.name),\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                accessor: 'namespace',\r\n                Header: t(langKeys.namespace),\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                accessor: 'status',\r\n                Header: t(langKeys.status),\r\n                prefixTranslation: 'status_',\r\n                NoFilter: true,\r\n                Cell: (props: any) => {\r\n                    const { status } = props.cell.row.original;\r\n                    return (t(`status_${status}`.toLowerCase()) || \"\").toUpperCase();\r\n                }\r\n            },\r\n            {\r\n                accessor: 'fromprovider',\r\n                Header: t(langKeys.messagetemplate_fromprovider),\r\n                NoFilter: true,\r\n                Cell: (props: any) => {\r\n                    const { fromprovider } = props.cell.row.original;\r\n                    return (fromprovider ? t(langKeys.yes) : t(langKeys.no)).toUpperCase();\r\n                }\r\n            },\r\n            {\r\n                accessor: 'externalstatus',\r\n                Header: t(langKeys.messagetemplate_externalstatus),\r\n                NoFilter: true,\r\n                Cell: (props: any) => {\r\n                    const { externalstatus } = props.cell.row.original;\r\n                    return (externalstatus ? t(`TEMPLATE_${externalstatus}`) : t(langKeys.none)).toUpperCase();\r\n                }\r\n            },\r\n        ],\r\n        [showId]\r\n    )\r\n\r\n    const fetchData = () => dispatch(getCollection(getMessageTemplateSel(0)));\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        dispatch(setMemoryTable({\r\n            id: IDMESSAGETEMPLATE\r\n        }));\r\n        dispatch(getMultiCollection([\r\n            getValuesFromDomain(\"MESSAGETEMPLATECATEGORY\"),\r\n            getValuesFromDomain(\"LANGUAGE\"),\r\n            selCommunicationChannelWhatsApp(),\r\n        ]));\r\n        return () => {\r\n            dispatch(resetAllMain());\r\n            dispatch(cleanMemoryTable());\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (waitSave) {\r\n            if (!executeResult.loading && !executeResult.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(langKeys.successful_delete) }))\r\n                fetchData();\r\n                dispatch(showBackdrop(false));\r\n                setWaitSave(false);\r\n            } else if (executeResult.error) {\r\n                const errormessage = t(executeResult.code || \"error_unexpected_error\", { module: t(langKeys.messagetemplate).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitSave(false);\r\n            }\r\n        }\r\n    }, [executeResult, waitSave]);\r\n\r\n    useEffect(() => {\r\n        if (waitDelete) {\r\n            if (!deleteRequest.loading && !deleteRequest.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(langKeys.successful_delete) }))\r\n                fetchData();\r\n                dispatch(showBackdrop(false));\r\n                setWaitDelete(false);\r\n            } else if (deleteRequest.error) {\r\n                const errormessage = t(deleteRequest.code || \"error_unexpected_error\", { module: t(langKeys.messagetemplate).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitDelete(false);\r\n            }\r\n        }\r\n    }, [deleteRequest, waitDelete]);\r\n\r\n    useEffect(() => {\r\n        if (mainResult.mainData.data.length > 0) {\r\n            setShowId(mainResult.mainData.data[0]?.showid);\r\n        }\r\n    }, [mainResult.mainData.data])\r\n\r\n    useEffect(() => {\r\n        if (mainResult.multiData.data.length > 0) {\r\n            if (mainResult.multiData.data[2] && mainResult.multiData.data[2].success) {\r\n                setCommunicationChannelList(mainResult.multiData.data[2].data || []);\r\n            }\r\n        }\r\n    }, [mainResult.multiData.data])\r\n\r\n    useEffect(() => {\r\n        if (waitSynchronize) {\r\n            if (!synchronizeRequest.loading && !synchronizeRequest.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(synchronizeRequest.code || \"success\") }))\r\n                dispatch(showBackdrop(false));\r\n                fetchData();\r\n                setWaitSynchronize(false);\r\n            }\r\n            else if (synchronizeRequest.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: t(synchronizeRequest.code || \"error_unexpected_error\") }))\r\n                dispatch(showBackdrop(false));\r\n                fetchData();\r\n                setWaitSynchronize(false);\r\n            }\r\n        }\r\n    }, [synchronizeRequest, waitSynchronize])\r\n\r\n    const handleRegister = () => {\r\n        setViewSelected(\"view-2\");\r\n        setRowSelected({ row: null, edit: true });\r\n    }\r\n\r\n    const handleView = (row: Dictionary) => {\r\n        setViewSelected(\"view-2\");\r\n        setRowSelected({ row, edit: false });\r\n    }\r\n\r\n    const handleEdit = (row: Dictionary) => {\r\n        setViewSelected(\"view-2\");\r\n        setRowSelected({ row, edit: true });\r\n    }\r\n\r\n    const handleSynchronize = (channel: any) => {\r\n        const callback = () => {\r\n            dispatch(synchronizeTemplate(channel));\r\n            dispatch(showBackdrop(true));\r\n            setWaitSynchronize(true);\r\n        }\r\n\r\n        dispatch(manageConfirmation({\r\n            visible: true,\r\n            question: t(langKeys.messagetemplate_synchronize_alert01) + `${channel.communicationchanneldesc} (${channel.phone})` + t(langKeys.messagetemplate_synchronize_alert02),\r\n            callback\r\n        }))\r\n    }\r\n\r\n    const handleDelete = (row: Dictionary) => {\r\n        if (row?.fromprovider) {\r\n            const callback = () => {\r\n                dispatch(deleteTemplate({ ...row, operation: 'DELETE', status: 'ELIMINADO', id: row.id }));\r\n                dispatch(showBackdrop(true));\r\n                setWaitDelete(true);\r\n            }\r\n\r\n            dispatch(manageConfirmation({\r\n                visible: true,\r\n                question: t(langKeys.confirmation_delete),\r\n                callback,\r\n            }))\r\n        }\r\n        else {\r\n            const callback = () => {\r\n                dispatch(execute(insMessageTemplate({ ...row, operation: 'DELETE', status: 'ELIMINADO', id: row.id })));\r\n                dispatch(showBackdrop(true));\r\n                setWaitSave(true);\r\n            }\r\n\r\n            dispatch(manageConfirmation({\r\n                visible: true,\r\n                question: t(langKeys.confirmation_delete),\r\n                callback,\r\n            }))\r\n        }\r\n    }\r\n\r\n    if (viewSelected === \"view-1\") {\r\n        if (mainResult.mainData.error) {\r\n            return <h1>ERROR</h1>;\r\n        }\r\n        return (\r\n            <TableZyx\r\n                onClickRow={handleEdit}\r\n                ButtonsElement={() => (\r\n                    <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap' }}>\r\n                        <FieldSelect\r\n                            label={t(langKeys.communicationchannel)}\r\n                            style={{ width: 300 }}\r\n                            valueDefault={communicationChannel?.communicationchannelid}\r\n                            variant=\"outlined\"\r\n                            optionDesc=\"communicationchanneldesc\"\r\n                            optionValue=\"communicationchannelid\"\r\n                            data={communicationChannelList}\r\n                            onChange={(value) => { setCommunicationChannel(value) }}\r\n                        />\r\n                        <Button\r\n                            disabled={!communicationChannel}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            style={{ width: 140, backgroundColor: \"#55BD84\" }}\r\n                            startIcon={<RefreshIcon style={{ color: 'white' }} />}\r\n                            onClick={() => { handleSynchronize(communicationChannel) }}\r\n                        >{t(langKeys.messagetemplate_synchronize)}\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n                columns={columns}\r\n                titlemodule={t(langKeys.messagetemplate_plural, { count: 2 })}\r\n                data={mainResult.mainData.data}\r\n                download={true}\r\n                loading={mainResult.mainData.loading}\r\n                register={true}\r\n                handleRegister={handleRegister}\r\n                pageSizeDefault={IDMESSAGETEMPLATE === memoryTable.id ? memoryTable.pageSize === -1 ? 20 : memoryTable.pageSize : 20}\r\n                initialPageIndex={IDMESSAGETEMPLATE === memoryTable.id ? memoryTable.page === -1 ? 0 : memoryTable.page : 0}\r\n                initialStateFilter={IDMESSAGETEMPLATE === memoryTable.id ? Object.entries(memoryTable.filters).map(([key, value]) => ({ id: key, value })) : undefined}\r\n            />\r\n        )\r\n    }\r\n    else\r\n        return (\r\n            <DetailMessageTemplates\r\n                data={rowSelected}\r\n                setViewSelected={setViewSelected}\r\n                multiData={mainResult.multiData.data}\r\n                fetchData={fetchData}\r\n            />\r\n        )\r\n}\r\n\r\nconst DetailMessageTemplates: React.FC<DetailProps> = ({ data: { row, edit }, setViewSelected, multiData, fetchData }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const { t } = useTranslation();\r\n\r\n    const classes = useStyles();\r\n    const dataCategory = multiData[0] && multiData[0].success ? multiData[0].data : [];\r\n    const dataLanguage = multiData[1] && multiData[1].success ? multiData[1].data : [];\r\n    const dataChannel = multiData[2] && multiData[2].success ? multiData[2].data.filter(x => x.type !== \"WHAG\") : [];\r\n    const addRequest = useSelector(state => state.channel.requestAddTemplate);\r\n    const executeRes = useSelector(state => state.main.execute);\r\n    const uploadResult = useSelector(state => state.main.uploadFile);\r\n    const [htmlLoad, setHtmlLoad] = useState<any | undefined>(undefined)\r\n    const [bodyAttachment, setBodyAttachment] = useState(row?.body || \"\");\r\n    const [bodyAlert, setBodyAlert] = useState(\"\");\r\n    const [bodyObject, setBodyObject] = useState<Descendant[]>(row?.bodyobject || [{ \"type\": \"paragraph\", \"children\": [{ \"text\": row?.body || \"\" }] }]);\r\n    const [fileAttachment, setFileAttachment] = useState<File | null>(null);\r\n    const [fileAttachmentTemplate, setFileAttachmentTemplate] = useState<File | null>(null);\r\n    const [htmlEdit, setHtmlEdit] = useState(false);\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const [isNew, setIsNew] = useState(row?.id ? false : true);\r\n    const [isProvider, setIsProvider] = useState(row?.fromprovider ? true : false);\r\n    const [disableInput, setDisableInput] = useState(false);\r\n    const [disableNamespace, setDisableNamespace] = useState(false);\r\n    const [waitSave, setWaitSave] = useState(false);\r\n    const [waitAdd, setWaitAdd] = useState(false);\r\n    const [waitUploadFile, setWaitUploadFile] = useState(false);\r\n\r\n    const dataExternalCategory = [\r\n        { value: \"ACCOUNT_UPDATE\", description: t(langKeys.TEMPLATE_ACCOUNT_UPDATE) },\r\n        { value: \"PAYMENT_UPDATE\", description: t(langKeys.TEMPLATE_PAYMENT_UPDATE) },\r\n        { value: \"PERSONAL_FINANCE_UPDATE\", description: t(langKeys.TEMPLATE_PERSONAL_FINANCE_UPDATE) },\r\n        { value: \"SHIPPING_UPDATE\", description: t(langKeys.TEMPLATE_SHIPPING_UPDATE) },\r\n        { value: \"RESERVATION_UPDATE\", description: t(langKeys.TEMPLATE_RESERVATION_UPDATE) },\r\n        { value: \"ISSUE_RESOLUTION\", description: t(langKeys.TEMPLATE_ISSUE_RESOLUTION) },\r\n        { value: \"APPOINTMENT_UPDATE\", description: t(langKeys.TEMPLATE_APPOINTMENT_UPDATE) },\r\n        { value: \"TRANSPORTATION_UPDATE\", description: t(langKeys.TEMPLATE_TRANSPORTATION_UPDATE) },\r\n        { value: \"TICKET_UPDATE\", description: t(langKeys.TEMPLATE_TICKET_UPDATE) },\r\n        { value: \"ALERT_UPDATE\", description: t(langKeys.TEMPLATE_ALERT_UPDATE) },\r\n        { value: \"AUTO_REPLY\", description: t(langKeys.TEMPLATE_AUTO_REPLY) },\r\n        { value: \"TRANSACTIONAL\", description: t(langKeys.TEMPLATE_TRANSACTIONAL) },\r\n        { value: \"MARKETING\", description: t(langKeys.TEMPLATE_MARKETING) },\r\n        { value: \"OTP\", description: t(langKeys.TEMPLATE_OTP) },\r\n    ];\r\n\r\n    const dataExternalStatus = [\r\n        { value: \"APPROVED\", description: t(langKeys.TEMPLATE_APPROVED) },\r\n        { value: \"IN_APPEAL\", description: t(langKeys.TEMPLATE_IN_APPEAL) },\r\n        { value: \"PENDING\", description: t(langKeys.TEMPLATE_PENDING) },\r\n        { value: \"REJECTED\", description: t(langKeys.TEMPLATE_REJECTED) },\r\n        { value: \"PENDING_DELETION\", description: t(langKeys.TEMPLATE_PENDING_DELETION) },\r\n        { value: \"DELETED\", description: t(langKeys.TEMPLATE_DELETED) },\r\n        { value: \"DISABLED\", description: t(langKeys.TEMPLATE_DISABLED) },\r\n        { value: \"LOCKED\", description: t(langKeys.TEMPLATE_LOCKED) },\r\n        { value: \"PAUSED\", description: t(langKeys.TEMPLATE_PAUSED) },\r\n        { value: \"SUBMITTED\", description: t(langKeys.TEMPLATE_SUBMITTED) },\r\n        { value: \"NONE\", description: (t(langKeys.NONE) || \"\").toUpperCase() },\r\n    ];\r\n\r\n    const dataExternalLanguage = [\r\n        { description: t(langKeys.TEMPLATE_AF), value: \"AF\" },\r\n        { description: t(langKeys.TEMPLATE_SQ), value: \"SQ\" },\r\n        { description: t(langKeys.TEMPLATE_AR), value: \"AR\" },\r\n        { description: t(langKeys.TEMPLATE_AZ), value: \"AZ\" },\r\n        { description: t(langKeys.TEMPLATE_BN), value: \"BN\" },\r\n        { description: t(langKeys.TEMPLATE_BG), value: \"BG\" },\r\n        { description: t(langKeys.TEMPLATE_CA), value: \"CA\" },\r\n        { description: t(langKeys.TEMPLATE_ZH_CN), value: \"ZH_CN\" },\r\n        { description: t(langKeys.TEMPLATE_ZH_HK), value: \"ZH_HK\" },\r\n        { description: t(langKeys.TEMPLATE_ZH_TW), value: \"ZH_TW\" },\r\n        { description: t(langKeys.TEMPLATE_HR), value: \"HR\" },\r\n        { description: t(langKeys.TEMPLATE_CS), value: \"CS\" },\r\n        { description: t(langKeys.TEMPLATE_DA), value: \"DA\" },\r\n        { description: t(langKeys.TEMPLATE_NL), value: \"NL\" },\r\n        { description: t(langKeys.TEMPLATE_EN), value: \"EN\" },\r\n        { description: t(langKeys.TEMPLATE_EN_GB), value: \"EN_GB\" },\r\n        { description: t(langKeys.TEMPLATE_EN_US), value: \"EN_US\" },\r\n        { description: t(langKeys.TEMPLATE_ET), value: \"ET\" },\r\n        { description: t(langKeys.TEMPLATE_FIL), value: \"FIL\" },\r\n        { description: t(langKeys.TEMPLATE_FI), value: \"FI\" },\r\n        { description: t(langKeys.TEMPLATE_FR), value: \"FR\" },\r\n        { description: t(langKeys.TEMPLATE_KA), value: \"KA\" },\r\n        { description: t(langKeys.TEMPLATE_DE), value: \"DE\" },\r\n        { description: t(langKeys.TEMPLATE_EL), value: \"EL\" },\r\n        { description: t(langKeys.TEMPLATE_GU), value: \"GU\" },\r\n        { description: t(langKeys.TEMPLATE_HA), value: \"HA\" },\r\n        { description: t(langKeys.TEMPLATE_HE), value: \"HE\" },\r\n        { description: t(langKeys.TEMPLATE_HI), value: \"HI\" },\r\n        { description: t(langKeys.TEMPLATE_HU), value: \"HU\" },\r\n        { description: t(langKeys.TEMPLATE_ID), value: \"ID\" },\r\n        { description: t(langKeys.TEMPLATE_GA), value: \"GA\" },\r\n        { description: t(langKeys.TEMPLATE_IT), value: \"IT\" },\r\n        { description: t(langKeys.TEMPLATE_JA), value: \"JA\" },\r\n        { description: t(langKeys.TEMPLATE_KN), value: \"KN\" },\r\n        { description: t(langKeys.TEMPLATE_KK), value: \"KK\" },\r\n        { description: t(langKeys.TEMPLATE_RW_RW), value: \"RW_RW\" },\r\n        { description: t(langKeys.TEMPLATE_KO), value: \"KO\" },\r\n        { description: t(langKeys.TEMPLATE_KY_KG), value: \"KY_KG\" },\r\n        { description: t(langKeys.TEMPLATE_LO), value: \"LO\" },\r\n        { description: t(langKeys.TEMPLATE_LV), value: \"LV\" },\r\n        { description: t(langKeys.TEMPLATE_LT), value: \"LT\" },\r\n        { description: t(langKeys.TEMPLATE_MK), value: \"MK\" },\r\n        { description: t(langKeys.TEMPLATE_MS), value: \"MS\" },\r\n        { description: t(langKeys.TEMPLATE_ML), value: \"ML\" },\r\n        { description: t(langKeys.TEMPLATE_MR), value: \"MR\" },\r\n        { description: t(langKeys.TEMPLATE_NB), value: \"NB\" },\r\n        { description: t(langKeys.TEMPLATE_FA), value: \"FA\" },\r\n        { description: t(langKeys.TEMPLATE_PL), value: \"PL\" },\r\n        { description: t(langKeys.TEMPLATE_PT_BR), value: \"PT_BR\" },\r\n        { description: t(langKeys.TEMPLATE_PT_PT), value: \"PT_PT\" },\r\n        { description: t(langKeys.TEMPLATE_PA), value: \"PA\" },\r\n        { description: t(langKeys.TEMPLATE_RO), value: \"RO\" },\r\n        { description: t(langKeys.TEMPLATE_RU), value: \"RU\" },\r\n        { description: t(langKeys.TEMPLATE_SR), value: \"SR\" },\r\n        { description: t(langKeys.TEMPLATE_SK), value: \"SK\" },\r\n        { description: t(langKeys.TEMPLATE_SL), value: \"SL\" },\r\n        { description: t(langKeys.TEMPLATE_ES), value: \"ES\" },\r\n        { description: t(langKeys.TEMPLATE_ES_AR), value: \"ES_AR\" },\r\n        { description: t(langKeys.TEMPLATE_ES_ES), value: \"ES_ES\" },\r\n        { description: t(langKeys.TEMPLATE_ES_MX), value: \"ES_MX\" },\r\n        { description: t(langKeys.TEMPLATE_SW), value: \"SW\" },\r\n        { description: t(langKeys.TEMPLATE_SV), value: \"SV\" },\r\n        { description: t(langKeys.TEMPLATE_TA), value: \"TA\" },\r\n        { description: t(langKeys.TEMPLATE_TE), value: \"TE\" },\r\n        { description: t(langKeys.TEMPLATE_TH), value: \"TH\" },\r\n        { description: t(langKeys.TEMPLATE_TR), value: \"TR\" },\r\n        { description: t(langKeys.TEMPLATE_UK), value: \"UK\" },\r\n        { description: t(langKeys.TEMPLATE_UR), value: \"UR\" },\r\n        { description: t(langKeys.TEMPLATE_UZ), value: \"UZ\" },\r\n        { description: t(langKeys.TEMPLATE_VI), value: \"VI\" },\r\n        { description: t(langKeys.TEMPLATE_ZU), value: \"ZU\" },\r\n    ];\r\n\r\n    const dataMessageType = [\r\n        { value: \"SMS\", text: t(langKeys.messagetemplate_sms) },\r\n        { value: \"HSM\", text: t(langKeys.messagetemplate_hsm) },\r\n        { value: \"MAIL\", text: t(langKeys.messagetemplate_mail) },\r\n        { value: \"HTML\", text: t(langKeys.messagetemplate_html) },\r\n    ];\r\n\r\n    const dataTemplateType = [\r\n        { value: \"STANDARD\", text: t(langKeys.messagetemplate_standard) },\r\n        { value: \"MULTIMEDIA\", text: t(langKeys.messagetemplate_multimedia) },\r\n    ];\r\n\r\n    const dataHeaderType = [\r\n        { value: 'text', text: t(langKeys.messagetemplate_text) },\r\n        { value: 'image', text: t(langKeys.messagetemplate_image) },\r\n        { value: 'document', text: t(langKeys.messagetemplate_document) },\r\n        { value: 'video', text: t(langKeys.messagetemplate_video) },\r\n    ];\r\n\r\n    const dataButtonType = [\r\n        { value: \"url\", text: t(langKeys.messagetemplate_url) },\r\n        { value: \"quick_reply\", text: t(langKeys.messagetemplate_quickreply) },\r\n        { value: \"phone_number\", text: t(langKeys.messagetemplate_phonenumber) },\r\n    ];\r\n\r\n    const dataPriority = [\r\n        { value: 1, text: t(langKeys.messagetemplate_low) },\r\n        { value: 2, text: t(langKeys.messagetemplate_medium) },\r\n        { value: 3, text: t(langKeys.messagetemplate_high) },\r\n    ]\r\n\r\n    const { control, register, handleSubmit, setValue, getValues, unregister, trigger, formState: { errors } } = useForm({\r\n        defaultValues: {\r\n            attachment: row?.attachment || '',\r\n            body: row?.body || '',\r\n            buttons: row ? (row.buttons || []) : [],\r\n            buttonsenabled: ![null, undefined].includes(row?.buttonsenabled) ? row?.buttonsenabled : false,\r\n            category: row?.category || '',\r\n            description: row?.description || '',\r\n            footer: row?.footer || '',\r\n            footerenabled: ![null, undefined].includes(row?.footerenabled) ? row?.footerenabled : false,\r\n            header: row?.header || '',\r\n            headerenabled: ![null, undefined].includes(row?.headerenabled) ? row?.headerenabled : false,\r\n            headertype: row?.headertype || 'text',\r\n            id: row ? row.id : 0,\r\n            language: row?.language || '',\r\n            name: row?.name || '',\r\n            namespace: row?.namespace || '',\r\n            operation: row ? \"EDIT\" : \"INSERT\",\r\n            priority: row?.priority || 2,\r\n            status: row?.status || 'ACTIVO',\r\n            templatetype: row?.templatetype || 'STANDARD',\r\n            type: row?.type || 'HSM',\r\n            typeattachment: row?.typeattachment || '',\r\n            fromprovider: row?.fromprovider || false,\r\n            externalid: row?.externalid || '',\r\n            externalstatus: row?.externalstatus || 'NONE',\r\n            communicationchannelid: row?.communicationchannelid || 0,\r\n            communicationchanneltype: row?.communicationchanneltype || '',\r\n            servicecredentials: row?.communicationchannelservicecredentials || '',\r\n            integrationid: row?.communicationchannelintegrationid || '',\r\n            exampleparameters: row?.exampleparameters || '',\r\n        }\r\n    });\r\n\r\n    const [templateTypeDisabled, setTemplateTypeDisabled] = useState(['SMS', 'MAIL'].includes(getValues('type')));\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const { fields: buttons } = useFieldArray({\r\n        control,\r\n        name: \"buttons\",\r\n    });\r\n\r\n    React.useEffect(() => {\r\n        register('body', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('category', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('language', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('name', { validate: (value) => (value && ((value || \"\").match(\"^[a-z0-9_]+$\") !== null)) || t(langKeys.nametemplate_validation) });\r\n        register('namespace', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('templatetype', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('type', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('typeattachment');\r\n        register('fromprovider');\r\n        register('externalid');\r\n        register('externalstatus');\r\n        register('communicationchannelid');\r\n        register('communicationchanneltype');\r\n        register('servicecredentials');\r\n        register('integrationid');\r\n        register('exampleparameters');\r\n    }, [edit, register]);\r\n\r\n    useEffect(() => {\r\n        import('@codemirror/lang-html').then(html => {\r\n           setHtmlLoad([html.html({ matchClosingTags: true })])\r\n        });\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!isNew && isProvider) {\r\n            setDisableInput(true);\r\n        }\r\n    }, [isNew, isProvider])\r\n\r\n    useEffect(() => {\r\n        if (waitAdd) {\r\n            if (!addRequest.loading && !addRequest.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(row ? langKeys.successful_edit : langKeys.successful_register) }))\r\n                fetchData();\r\n                dispatch(showBackdrop(false));\r\n                setViewSelected(\"view-1\");\r\n            } else if (addRequest.error) {\r\n                const errormessage = t(addRequest.code || \"error_unexpected_error\", { module: t(langKeys.messagetemplate).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitAdd(false);\r\n            }\r\n        }\r\n    }, [addRequest, waitAdd])\r\n\r\n    useEffect(() => {\r\n        if (waitSave) {\r\n            if (!executeRes.loading && !executeRes.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(row ? langKeys.successful_edit : langKeys.successful_register) }))\r\n                fetchData();\r\n                dispatch(showBackdrop(false));\r\n                setViewSelected(\"view-1\");\r\n            } else if (executeRes.error) {\r\n                const errormessage = t(executeRes.code || \"error_unexpected_error\", { module: t(langKeys.messagetemplate).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitSave(false);\r\n            }\r\n        }\r\n    }, [executeRes, waitSave])\r\n\r\n    useEffect(() => {\r\n        if (waitUploadFile) {\r\n            if (!uploadResult.loading && !uploadResult.error) {\r\n                setValue('attachment', (!!getValues('attachment') ? [getValues('attachment'), uploadResult?.url || ''] : [uploadResult?.url || '']).join(','));\r\n                setWaitUploadFile(false);\r\n            } else if (uploadResult.error) {\r\n                setWaitUploadFile(false);\r\n            }\r\n        }\r\n    }, [waitUploadFile, uploadResult])\r\n\r\n    const onSubmit = handleSubmit((data) => {\r\n        if (data.type === 'MAIL') {\r\n            data.body = renderToString(toElement(bodyObject));\r\n            if (data.body === `<div data-reactroot=\"\"><p><span></span></p></div>`) {\r\n                setBodyAlert(t(langKeys.field_required));\r\n                return\r\n            }\r\n            else {\r\n                setBodyAlert(\"\");\r\n            }\r\n        }\r\n\r\n        if (data.type === 'HTML') {\r\n            if (data.body) {\r\n                setBodyAlert(\"\");\r\n            }\r\n            else {\r\n                setBodyAlert(t(langKeys.field_required));\r\n                return\r\n\r\n            }\r\n        }\r\n\r\n        if (isNew && isProvider) {\r\n            const callback = () => {\r\n                if (data.type === 'MAIL') {\r\n                    data.body = renderToString(toElement(bodyObject));\r\n                    if (data.body === '<div data-reactroot=\"\"><p><span></span></p></div>') {\r\n                        setBodyAlert(t(langKeys.field_required));\r\n                        return;\r\n                    }\r\n                    else {\r\n                        setBodyAlert(\"\");\r\n                    }\r\n                }\r\n\r\n                if (data.type === 'HTML') {\r\n                    if (data.body) {\r\n                        setBodyAlert(\"\");\r\n                    }\r\n                    else {\r\n                        setBodyAlert(t(langKeys.field_required));\r\n                        return;\r\n\r\n                    }\r\n                }\r\n\r\n                dispatch(addTemplate({ ...data, bodyobject: bodyObject }));\r\n                dispatch(showBackdrop(true));\r\n                setWaitAdd(true);\r\n            }\r\n\r\n            dispatch(manageConfirmation({\r\n                visible: true,\r\n                question: t(langKeys.confirmation_save),\r\n                callback,\r\n            }))\r\n        }\r\n        else {\r\n            const callback = () => {\r\n                if (data.type === 'MAIL') {\r\n                    data.body = renderToString(toElement(bodyObject));\r\n                    if (data.body === '<div data-reactroot=\"\"><p><span></span></p></div>') {\r\n                        setBodyAlert(t(langKeys.field_required));\r\n                        return;\r\n                    }\r\n                    else {\r\n                        setBodyAlert(\"\");\r\n                    }\r\n                }\r\n\r\n                if (data.type === 'HTML') {\r\n                    if (data.body) {\r\n                        setBodyAlert(\"\");\r\n                    }\r\n                    else {\r\n                        setBodyAlert(t(langKeys.field_required));\r\n                        return;\r\n\r\n                    }\r\n                }\r\n\r\n                dispatch(execute(insMessageTemplate({ ...data, bodyobject: bodyObject })));\r\n                dispatch(showBackdrop(true));\r\n                setWaitSave(true);\r\n            }\r\n\r\n            dispatch(manageConfirmation({\r\n                visible: true,\r\n                question: t(langKeys.confirmation_save),\r\n                callback,\r\n            }))\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (row) {\r\n            if (row.fromprovider && row.communicationchanneltype) {\r\n                setDisableNamespace(row.communicationchanneltype === \"WHAT\" ? false : true);\r\n            }\r\n            else {\r\n                setDisableNamespace(false);\r\n            }\r\n\r\n\r\n            const type = row?.type || \"HSM\";\r\n\r\n            if (type === \"HSM\") {\r\n                register('name', { validate: (value) => (value && ((value || \"\").match(\"^[a-z0-9_]+$\") !== null)) || t(langKeys.nametemplate_validation) });\r\n                register('namespace', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                register('body', { validate: (value) => (value && (value || '').length <= 1024) || \"\" + t(langKeys.validationchar) });\r\n                register('header', { validate: (value) => true });\r\n                register('footer', { validate: (value) => true });\r\n\r\n                if (row?.headerenabled) {\r\n                    register('header', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                }\r\n\r\n                if (row?.footerenabled) {\r\n                    register('footer', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                }\r\n\r\n                onChangeTemplateMedia();\r\n            }\r\n            else {\r\n                register('name', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                register('namespace', { validate: (value) => true });\r\n                if (type === \"SMS\") {\r\n                    register('header', { validate: (value) => true });\r\n                    register('body', { validate: (value) => (value && (value || '').length <= 160) || \"\" + t(langKeys.validationchar) });\r\n                    register('footer', { validate: (value) => true });\r\n                }\r\n                else {\r\n                    register('header', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                    register('body', { validate: (value) => true });\r\n                    register('footer', { validate: (value) => true });\r\n                }\r\n            }\r\n        }\r\n    }, [row])\r\n\r\n    const onChangeMessageType = (data: Dictionary) => {\r\n        if (getValues('type') === 'MAIL' && (data?.value || '') !== 'MAIL') {\r\n            setValue('body', richTextToString(bodyObject))\r\n        }\r\n\r\n        setIsProvider(false);\r\n\r\n        setValue('fromprovider', false);\r\n        setValue('externalid', '');\r\n        setValue('externalstatus', '');\r\n        setValue('communicationchannelid', 0);\r\n        setValue('communicationchanneltype', '');\r\n        setValue('exampleparameters', '');\r\n        setValue('servicecredentials', '');\r\n        setValue('integrationid', '');\r\n        setValue('fromprovider', false);\r\n\r\n        trigger('fromprovider');\r\n        trigger('externalid');\r\n        trigger('externalstatus');\r\n        trigger('communicationchannelid');\r\n        trigger('communicationchanneltype');\r\n        trigger('exampleparameters');\r\n        trigger('servicecredentials');\r\n        trigger('integrationid');\r\n        trigger('fromprovider');\r\n\r\n        setValue('type', data?.value || '');\r\n\r\n        trigger('type');\r\n\r\n        switch (data?.value || 'HSM') {\r\n            case 'HSM':\r\n                setValue('body', '');\r\n\r\n                register('name', { validate: (value) => (value && ((value || \"\").match(\"^[a-z0-9_]+$\") !== null)) || t(langKeys.nametemplate_validation) });\r\n                register('namespace', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                register('body', { validate: (value) => (value && (value || '').length <= 1024) || \"\" + t(langKeys.validationchar) });\r\n                register('header', { validate: (value) => true });\r\n                register('footer', { validate: (value) => true });\r\n\r\n                if (getValues('headerenabled')) {\r\n                    register('header', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                }\r\n\r\n                if (getValues('footerenabled')) {\r\n                    register('footer', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                }\r\n\r\n                setTemplateTypeDisabled(false);\r\n                onChangeTemplateMedia();\r\n                break;\r\n\r\n            case 'MAIL':\r\n            case 'HTML':\r\n                setValue('body', '');\r\n                setValue('namespace', '');\r\n\r\n                register('name', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                register('namespace', { validate: (value) => true });\r\n                register('header', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                register('body', { validate: (value) => true });\r\n                register('footer', { validate: (value) => true });\r\n\r\n                onChangeTemplateType({ value: 'STANDARD' });\r\n                setTemplateTypeDisabled(true);\r\n                break;\r\n\r\n            case 'SMS':\r\n                setValue('body', '');\r\n                setValue('namespace', '');\r\n\r\n                register('name', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n                register('namespace', { validate: (value) => true });\r\n                register('header', { validate: (value) => true });\r\n                register('body', { validate: (value) => (value && (value || '').length <= 160) || \"\" + t(langKeys.validationchar) });\r\n                register('footer', { validate: (value) => true });\r\n                onChangeTemplateType({ value: 'STANDARD' });\r\n                setTemplateTypeDisabled(true);\r\n                break;\r\n        }\r\n    }\r\n\r\n    const onChangeTemplateMedia = async () => {\r\n        if (getValues('headerenabled')) {\r\n            register('header', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        }\r\n        else {\r\n            register('header', { validate: (value) => true });\r\n        }\r\n\r\n        if (getValues('footerenabled')) {\r\n            register('footer', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        }\r\n        else {\r\n            register('footer', { validate: (value) => true });\r\n        }\r\n\r\n        await trigger('header');\r\n        await trigger('footer');\r\n    }\r\n\r\n    const onChangeTemplateType = async (data: Dictionary) => {\r\n        setValue('templatetype', data?.value || '');\r\n        await trigger('templatetype');\r\n    }\r\n\r\n    const onClickHeaderToogle = async ({ value }: { value?: Boolean | null } = {}) => {\r\n        if (value) {\r\n            setValue('headerenabled', value);\r\n        }\r\n        else {\r\n            setValue('headerenabled', !getValues('headerenabled'));\r\n        }\r\n        await trigger('headerenabled');\r\n        await trigger('header');\r\n\r\n        await onChangeTemplateMedia();\r\n    }\r\n\r\n    const onClickFooterToogle = async ({ value }: { value?: Boolean | null } = {}) => {\r\n        if (value) {\r\n            setValue('footerenabled', value);\r\n        }\r\n        else {\r\n            setValue('footerenabled', !getValues('footerenabled'));\r\n        }\r\n        await trigger('footerenabled');\r\n        await trigger('footer');\r\n\r\n        await onChangeTemplateMedia();\r\n    }\r\n\r\n    const onClickButtonsToogle = async ({ value }: { value?: Boolean | null } = {}) => {\r\n        if (value) {\r\n            setValue('buttonsenabled', value);\r\n        }\r\n        else {\r\n            setValue('buttonsenabled', !getValues('buttonsenabled'));\r\n        }\r\n        await trigger('buttonsenabled');\r\n    }\r\n\r\n    const onChangeHeaderType = async (data: Dictionary) => {\r\n        setValue('headertype', data?.value || '');\r\n        await trigger('headertype');\r\n    }\r\n\r\n    const onChangeButton = (index: number, param: string, value: string) => {\r\n        setValue(`buttons.${index}.${param}`, value);\r\n    }\r\n\r\n    const onClickAddButton = async () => {\r\n        if (getValues('buttons') && getValues('buttons').length < 3) {\r\n            setValue('buttons', [...getValues('buttons'), { title: '', type: '', payload: '' }]);\r\n        }\r\n        await trigger('buttons');\r\n    }\r\n\r\n    const onClickRemoveButton = async () => {\r\n        let btns = getValues('buttons');\r\n\r\n        if (btns && btns.length > 0) {\r\n            unregister(`buttons.${btns.length - 1}`);\r\n            setValue('buttons', btns.filter((x: any, i: number) => i !== btns.length - 1));\r\n        }\r\n\r\n        await trigger('buttons');\r\n    }\r\n\r\n    const onClickAttachment = useCallback(() => {\r\n        const input = document.getElementById('attachmentInput');\r\n        input!.click();\r\n    }, []);\r\n\r\n    const onChangeAttachment = useCallback((files: any) => {\r\n        const file = files?.item(0);\r\n\r\n        if (file) {\r\n            setFileAttachment(file);\r\n            let fd = new FormData();\r\n            fd.append('file', file, file.name);\r\n            dispatch(uploadFile(fd));\r\n            setWaitUploadFile(true);\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (fileAttachmentTemplate) {\r\n            var reader = new FileReader();\r\n            reader.readAsText(fileAttachmentTemplate);\r\n            reader.onload = (event: any) => {\r\n                let content = event.target.result.toString();\r\n                setValue('body', content);\r\n                setBodyAttachment(content);\r\n            };\r\n        }\r\n    }, [fileAttachmentTemplate])\r\n\r\n    const onChangeAttachmentTemplate = useCallback((files: any) => {\r\n        const file = files?.item(0);\r\n        if (file) {\r\n            setFileAttachmentTemplate(file);\r\n        }\r\n    }, [])\r\n\r\n    const handleCleanMediaInput = async (f: string) => {\r\n        const input = document.getElementById('attachmentInput') as HTMLInputElement;\r\n        if (input) {\r\n            input.value = \"\";\r\n        }\r\n        setFileAttachment(null);\r\n        setValue('attachment', getValues('attachment').split(',').filter((a: string) => a !== f).join(','));\r\n        await trigger('attachment');\r\n    }\r\n\r\n    const changeProvider = async (value: any) => {\r\n        if (value && isProvider) {\r\n        }\r\n        else {\r\n            setValue('category', '');\r\n        }\r\n\r\n        if (value) {\r\n            setIsProvider(true);\r\n\r\n            setValue('fromprovider', true);\r\n            setValue('externalid', '');\r\n            setValue('externalstatus', 'PENDING');\r\n            setValue('communicationchannelid', value.communicationchannelid);\r\n            setValue('communicationchanneltype', value.type);\r\n            setValue('exampleparameters', '');\r\n            setValue('servicecredentials', value.servicecredentials);\r\n            setValue('integrationid', value.integrationid);\r\n            setValue('fromprovider', true);\r\n\r\n            if (value.type === \"WHAT\") {\r\n                setDisableNamespace(false);\r\n            }\r\n            else {\r\n                setDisableNamespace(true);\r\n                setValue('namespace', '-');\r\n            }\r\n        }\r\n        else {\r\n            setIsProvider(false);\r\n\r\n            setValue('fromprovider', false);\r\n            setValue('externalid', '');\r\n            setValue('externalstatus', 'NONE');\r\n            setValue('communicationchannelid', 0);\r\n            setValue('communicationchanneltype', '');\r\n            setValue('exampleparameters', '');\r\n            setValue('servicecredentials', '');\r\n            setValue('integrationid', '');\r\n            setValue('fromprovider', false);\r\n\r\n            setDisableNamespace(false);\r\n        }\r\n\r\n        trigger('fromprovider');\r\n        trigger('externalid');\r\n        trigger('externalstatus');\r\n        trigger('communicationchannelid');\r\n        trigger('communicationchanneltype');\r\n        trigger('exampleparameters');\r\n        trigger('servicecredentials');\r\n        trigger('integrationid');\r\n        trigger('fromprovider');\r\n    }\r\n\r\n    return (\r\n        <div style={{ width: '100%' }}>\r\n            <form onSubmit={onSubmit}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                    <div>\r\n                        <TemplateBreadcrumbs\r\n                            breadcrumbs={arrayBread(t(langKeys.messagetemplate), t(langKeys.messagetemplatedetail))}\r\n                            handleClick={setViewSelected}\r\n                        />\r\n                        <TitleDetail\r\n                            title={row ? `${row.name}` : t(langKeys.newmessagetemplate)}\r\n                        />\r\n                    </div>\r\n                    <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            type=\"button\"\r\n                            color=\"primary\"\r\n                            startIcon={<ClearIcon color=\"secondary\" />}\r\n                            style={{ backgroundColor: \"#FB5F5F\" }}\r\n                            onClick={() => setViewSelected(\"view-1\")}\r\n                        >{t(langKeys.back)}</Button>\r\n                        <Button\r\n                            className={classes.button}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            type=\"submit\"\r\n                            startIcon={<SaveIcon color=\"secondary\" />}\r\n                            style={{ backgroundColor: \"#55BD84\" }}\r\n                            disabled={waitUploadFile}\r\n                        >{t(langKeys.save)}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n                <div className={classes.containerDetail}>\r\n                    {row?.showid && <div className=\"row-zyx\">\r\n                        <FieldView\r\n                            label={t(langKeys.messagetemplateid)}\r\n                            value={row ? (row.id || \"\") : \"\"}\r\n                            className=\"col-12\"\r\n                        />\r\n                    </div>}\r\n                    <div className=\"row-zyx\">\r\n                        <FieldSelect\r\n                            className=\"col-6\"\r\n                            data={dataMessageType}\r\n                            error={errors?.type?.message}\r\n                            label={t(langKeys.messagetype)}\r\n                            onChange={onChangeMessageType}\r\n                            optionDesc=\"text\"\r\n                            optionValue=\"value\"\r\n                            valueDefault={getValues('type')}\r\n                            disabled={disableInput}\r\n                        />\r\n                        <FieldEdit\r\n                            className=\"col-6\"\r\n                            error={errors?.name?.message}\r\n                            label={t(langKeys.name)}\r\n                            onChange={(value) => setValue('name', value)}\r\n                            valueDefault={getValues('name')}\r\n                            disabled={disableInput}\r\n                        />\r\n                    </div>\r\n                    <div className=\"row-zyx\">\r\n                        {isProvider && <>\r\n                            {isNew && <FieldSelect\r\n                                className=\"col-6\"\r\n                                data={dataExternalCategory}\r\n                                error={errors?.category?.message}\r\n                                label={t(langKeys.category)}\r\n                                onChange={(value) => setValue('category', value?.value)}\r\n                                optionDesc=\"description\"\r\n                                optionValue=\"value\"\r\n                                valueDefault={getValues('category')}\r\n                                disabled={disableInput}\r\n                            />}\r\n                            {!isNew && <FieldView\r\n                                className=\"col-6\"\r\n                                label={t(langKeys.category)}\r\n                                value={row ? (t(`TEMPLATE_${row.category}`)) : \"\"}\r\n                            />}\r\n                        </>}\r\n                        {!isProvider && <FieldSelect\r\n                            className=\"col-6\"\r\n                            data={dataCategory}\r\n                            error={errors?.category?.message}\r\n                            label={t(langKeys.category)}\r\n                            onChange={(value) => setValue('category', value?.domainvalue)}\r\n                            optionDesc=\"domaindesc\"\r\n                            optionValue=\"domainvalue\"\r\n                            valueDefault={getValues('category')}\r\n                            disabled={disableInput}\r\n                        />}\r\n                        {isProvider && <FieldSelect\r\n                            className=\"col-6\"\r\n                            data={dataExternalLanguage}\r\n                            error={errors?.language?.message}\r\n                            label={t(langKeys.language)}\r\n                            onChange={(value) => setValue('language', value?.value)}\r\n                            optionDesc=\"description\"\r\n                            optionValue=\"value\"\r\n                            valueDefault={getValues('language')}\r\n                            disabled={disableInput}\r\n                        />}\r\n                        {!isProvider && <FieldSelect\r\n                            className=\"col-6\"\r\n                            data={dataLanguage}\r\n                            error={errors?.language?.message}\r\n                            label={t(langKeys.language)}\r\n                            onChange={(value) => setValue('language', value?.domainvalue)}\r\n                            optionDesc=\"domaindesc\"\r\n                            optionValue=\"domainvalue\"\r\n                            uset={true}\r\n                            valueDefault={getValues('language')}\r\n                            disabled={disableInput}\r\n                        />}\r\n                    </div>\r\n                    {getValues('type') === 'HSM' && <div className=\"row-zyx\">\r\n                        <FieldSelect\r\n                            className=\"col-6\"\r\n                            data={dataChannel}\r\n                            error={errors?.communicationchannelid?.message}\r\n                            label={t(langKeys.messagetemplate_fromprovider)}\r\n                            onChange={(value) => changeProvider(value)}\r\n                            optionDesc=\"communicationchanneldesc\"\r\n                            optionValue=\"communicationchannelid\"\r\n                            valueDefault={getValues('communicationchannelid')}\r\n                            disabled={!isNew || disableInput}\r\n                        />\r\n                        <FieldSelect\r\n                            className=\"col-6\"\r\n                            data={dataExternalStatus}\r\n                            error={errors?.externalstatus?.message}\r\n                            label={t(langKeys.messagetemplate_externalstatus)}\r\n                            optionDesc=\"description\"\r\n                            optionValue=\"value\"\r\n                            valueDefault={getValues('externalstatus')}\r\n                            disabled={true}\r\n                        />\r\n                    </div>}\r\n                    {getValues('type') === 'HSM' && <div className=\"row-zyx\">\r\n                        <FieldEdit\r\n                            className=\"col-12\"\r\n                            error={errors?.namespace?.message}\r\n                            label={t(langKeys.namespace)}\r\n                            onChange={(value) => setValue('namespace', value)}\r\n                            valueDefault={getValues('namespace')}\r\n                            disabled={disableNamespace}\r\n                        />\r\n                    </div>}\r\n                    <div className=\"row-zyx\">\r\n                        <FieldSelect\r\n                            className=\"col-12\"\r\n                            data={dataTemplateType}\r\n                            disabled={templateTypeDisabled || disableInput}\r\n                            error={errors?.templatetype?.message}\r\n                            label={t(langKeys.templatetype)}\r\n                            onChange={onChangeTemplateType}\r\n                            optionDesc=\"text\"\r\n                            optionValue=\"value\"\r\n                            valueDefault={getValues('templatetype')}\r\n                        />\r\n                    </div>\r\n                    {(getValues('templatetype') === 'MULTIMEDIA' && getValues('type') === 'HSM') && <div className=\"row-zyx\">\r\n                        <React.Fragment>\r\n                            <Button\r\n                                className={classes.mediabutton}\r\n                                onClick={() => onClickHeaderToogle()}\r\n                                startIcon={<CheckIcon htmlColor=\"#FFFFFF\" />}\r\n                                style={{ backgroundColor: getValues('headerenabled') ? \"#000000\" : \"#AAAAAA\", color: \"#FFFFFF\" }}\r\n                                type=\"button\"\r\n                                variant=\"contained\"\r\n                                disabled={disableInput}\r\n                            >{t(langKeys.header)}</Button>\r\n                            <Button\r\n                                className={classes.mediabutton}\r\n                                startIcon={<CheckIcon htmlColor=\"#FFFFFF\" />}\r\n                                style={{ backgroundColor: \"#000000\", color: \"#FFFFFF\" }}\r\n                                type=\"button\"\r\n                                variant=\"contained\"\r\n                                disabled={disableInput}\r\n                            >{t(langKeys.body)}</Button>\r\n                            <Button\r\n                                className={classes.mediabutton}\r\n                                onClick={() => onClickFooterToogle()}\r\n                                startIcon={<CheckIcon htmlColor=\"#FFFFFF\" />}\r\n                                style={{ backgroundColor: getValues('footerenabled') ? \"#000000\" : \"#AAAAAA\", color: \"#FFFFFF\" }}\r\n                                type=\"button\"\r\n                                variant=\"contained\"\r\n                                disabled={disableInput}\r\n                            >{t(langKeys.footer)}</Button>\r\n                            <Button\r\n                                className={classes.mediabutton}\r\n                                onClick={() => onClickButtonsToogle()}\r\n                                startIcon={<CheckIcon htmlColor=\"#FFFFFF\" />}\r\n                                style={{ backgroundColor: getValues('buttonsenabled') ? \"#000000\" : \"#AAAAAA\", color: \"#FFFFFF\" }}\r\n                                type=\"button\"\r\n                                variant=\"contained\"\r\n                                disabled={disableInput}\r\n                            >{t(langKeys.buttons)}</Button>\r\n                        </React.Fragment>\r\n                    </div>}\r\n                    {(getValues('templatetype') === 'MULTIMEDIA' && getValues('headerenabled') && getValues('type') === 'HSM') && <div className=\"row-zyx\">\r\n                        <React.Fragment>\r\n                            <FieldSelect\r\n                                className={classes.headerType}\r\n                                data={dataHeaderType}\r\n                                label={t(langKeys.headertype)}\r\n                                onChange={onChangeHeaderType}\r\n                                optionDesc=\"text\"\r\n                                optionValue=\"value\"\r\n                                disabled={disableInput}\r\n                                valueDefault={getValues('headertype')}\r\n                            />\r\n                            <FieldEdit\r\n                                className={classes.headerText}\r\n                                error={errors?.header?.message}\r\n                                label={t(langKeys.header)}\r\n                                onChange={(value) => setValue('header', value)}\r\n                                valueDefault={getValues('header')}\r\n                                disabled={disableInput && getValues('header') === \"text\"}\r\n                            />\r\n                        </React.Fragment>\r\n                    </div>}\r\n                    {(getValues('type') === 'SMS' || getValues('type') === 'HSM') && <div className=\"row-zyx\">\r\n                        <FieldEditMulti\r\n                            className=\"col-12\"\r\n                            error={errors?.body?.message}\r\n                            label={t(langKeys.body)}\r\n                            maxLength={getValues('type') === 'SMS' ? 160 : 1024}\r\n                            onChange={(value) => setValue('body', value)}\r\n                            valueDefault={getValues('body')}\r\n                            disabled={disableInput}\r\n                        />\r\n                    </div>}\r\n                    {(getValues('templatetype') === 'MULTIMEDIA' && getValues('footerenabled') && getValues('type') === 'HSM') && <div className=\"row-zyx\">\r\n                        <FieldEditMulti\r\n                            className=\"col-12\"\r\n                            error={errors?.footer?.message}\r\n                            label={t(langKeys.footer)}\r\n                            maxLength={60}\r\n                            onChange={(value) => setValue('footer', value)}\r\n                            rows={2}\r\n                            valueDefault={getValues('footer')}\r\n                            disabled={disableInput}\r\n                        />\r\n                    </div>}\r\n                    {(getValues('templatetype') === 'MULTIMEDIA' && getValues('buttonsenabled') && getValues('type') === 'HSM') && <div className=\"row-zyx\" style={{ alignItems: 'flex-end' }}>\r\n                        <FieldView\r\n                            className={classes.buttonTitle}\r\n                            label={t(langKeys.buttons)}\r\n                        />\r\n                        {(getValues('buttons')?.length < 3) && <Button\r\n                            className={classes.btnButton}\r\n                            color=\"primary\"\r\n                            onClick={() => onClickAddButton()}\r\n                            startIcon={<AddIcon color=\"primary\" />}\r\n                            style={{ margin: \"10px\" }}\r\n                            type=\"button\"\r\n                            variant=\"outlined\"\r\n                            disabled={disableInput}\r\n                        >{t(langKeys.addbutton)}\r\n                        </Button>}\r\n                        {(getValues('buttons')?.length > 0) && <Button\r\n                            className={classes.btnButton}\r\n                            color=\"primary\"\r\n                            onClick={() => onClickRemoveButton()}\r\n                            startIcon={<RemoveIcon color=\"primary\" />}\r\n                            style={{ margin: \"10px\" }}\r\n                            type=\"button\"\r\n                            variant=\"outlined\"\r\n                            disabled={disableInput}\r\n                        >{t(langKeys.removebutton)}\r\n                        </Button>}\r\n                    </div>}\r\n                    {(getValues('templatetype') === 'MULTIMEDIA' && getValues('buttonsenabled') && getValues('type') === 'HSM') && <div className=\"row-zyx\">\r\n                        <React.Fragment>\r\n                            {getValues('buttons')?.map((btn: any, i: number) => {\r\n                                return (<div key={`btn-${i}`} className=\"col-4\">\r\n                                    <FieldEdit\r\n                                        className={classes.mb1}\r\n                                        error={errors?.buttons?.[i]?.title?.message}\r\n                                        fregister={{\r\n                                            ...register(`buttons.${i}.title`, {\r\n                                                validate: (value) => (value && value.length) || t(langKeys.field_required)\r\n                                            })\r\n                                        }}\r\n                                        label={t(langKeys.title)}\r\n                                        onChange={(value) => onChangeButton(i, 'title', value)}\r\n                                        valueDefault={btn?.title || \"\"}\r\n                                        disabled={disableInput}\r\n                                    />\r\n                                    <FieldSelect\r\n                                        className={classes.mb1}\r\n                                        data={dataButtonType}\r\n                                        error={errors?.buttons?.[i]?.type?.message}\r\n                                        fregister={{\r\n                                            ...register(`buttons.${i}.type`, {\r\n                                                validate: (value) => (value && value.length) || t(langKeys.field_required)\r\n                                            })\r\n                                        }}\r\n                                        label={t(langKeys.type)}\r\n                                        onChange={(value) => onChangeButton(i, 'type', value?.value)}\r\n                                        optionDesc=\"text\"\r\n                                        optionValue=\"value\"\r\n                                        valueDefault={btn?.type || \"\"}\r\n                                        disabled={disableInput}\r\n                                    />\r\n                                    <FieldEdit\r\n                                        className={classes.mb1}\r\n                                        error={errors?.buttons?.[i]?.payload?.message}\r\n                                        fregister={{\r\n                                            ...register(`buttons.${i}.payload`, {\r\n                                                validate: (value) => (value && value.length) || t(langKeys.field_required)\r\n                                            })\r\n                                        }}\r\n                                        label={t(langKeys.payload)}\r\n                                        onChange={(value) => onChangeButton(i, 'payload', value)}\r\n                                        valueDefault={btn?.payload || \"\"}\r\n                                        disabled={disableInput}\r\n                                    />\r\n                                </div>)\r\n                            })}\r\n                        </React.Fragment>\r\n                    </div>}\r\n                    {(getValues('type') === 'MAIL' || getValues('type') === 'HTML') && <div className=\"row-zyx\">\r\n                        <FieldEdit\r\n                            className=\"col-6\"\r\n                            error={errors?.header?.message}\r\n                            label={t(langKeys.subject)}\r\n                            onChange={(value) => setValue('header', value)}\r\n                            valueDefault={getValues('header')}\r\n                            disabled={disableInput}\r\n                        />\r\n                        <FieldSelect\r\n                            className=\"col-6\"\r\n                            data={dataPriority}\r\n                            error={errors?.priority?.message}\r\n                            label={t(langKeys.priority)}\r\n                            onChange={(value) => setValue('priority', value?.value)}\r\n                            optionDesc=\"text\"\r\n                            optionValue=\"value\"\r\n                            valueDefault={getValues('priority')}\r\n                            disabled={disableInput}\r\n                        />\r\n                    </div>}\r\n                    {getValues('type') === 'MAIL' && <div className=\"row-zyx\">\r\n                        <React.Fragment>\r\n                            <Box fontWeight={500} lineHeight=\"18px\" fontSize={14} mb={1} color=\"textPrimary\">{t(langKeys.body)}</Box>\r\n                            <RichText\r\n                                onChange={(value) => {\r\n                                    setBodyObject(value)\r\n                                }}\r\n                                spellCheck\r\n                                style={{ borderStyle: \"solid\", borderWidth: \"1px\", borderColor: \"#762AA9\", borderRadius: \"4px\", padding: \"10px\" }}\r\n                                value={bodyObject}\r\n                            />\r\n                            <FieldEdit\r\n                                className={classes.headerText}\r\n                                disabled={true}\r\n                                error={bodyAlert}\r\n                                label={''}\r\n                            />\r\n                        </React.Fragment>\r\n                    </div>}\r\n                    {getValues('type') === 'HTML' && <div className=\"row-zyx\">\r\n                        <Button\r\n                            component=\"label\"\r\n                            variant=\"contained\"\r\n                            disabled={disableInput}\r\n                        >\r\n                            <input\r\n                                accept=\".html\"\r\n                                onChange={(e) => onChangeAttachmentTemplate(e.target.files)}\r\n                                type=\"file\"\r\n                            />\r\n                        </Button>\r\n                        <FieldEdit\r\n                            className={classes.headerText}\r\n                            disabled={true}\r\n                            error={bodyAlert}\r\n                            label={''}\r\n                        />\r\n                    </div>}\r\n                    {getValues('type') === 'HTML' && <div className=\"row-zyx\">\r\n                        {bodyAttachment && <React.Fragment>\r\n                            <MenuItem onClick={() => setHtmlEdit(!htmlEdit)} disabled={disableInput}>\r\n                                <ListItemIcon color=\"inherit\">\r\n                                    <RefreshIcon style={{ width: 16, color: \"#7721AD\" }} fontSize=\"small\" />\r\n                                </ListItemIcon>\r\n                                <div style={{ fontSize: 16 }}>{htmlEdit ? t(langKeys.messagetemplate_changetoview) : t(langKeys.messagetemplate_changetoeditor)}</div>\r\n                            </MenuItem>\r\n                            {!htmlEdit ? <div style={{ borderStyle: \"solid\", borderWidth: \"1px\", borderColor: \"#762AA9\", borderRadius: \"4px\", padding: \"20px\" }} dangerouslySetInnerHTML={{ __html: bodyAttachment }} /> : (\r\n                                <Suspense fallback={<div>Loading...</div>}>\r\n                                    <CodeMirror\r\n                                        value={getValues('body')}\r\n                                        height={\"600px\"}\r\n                                        onChange={(value) => { setValue('body', value || \"\"); setBodyAttachment(value || \"\"); }}\r\n                                        extensions={htmlLoad}\r\n                                    />\r\n                                </Suspense>\r\n                            )}\r\n                        </React.Fragment>}\r\n                    </div>}\r\n                    {(getValues('type') === 'MAIL' || getValues('type') === 'HTML') && <div className=\"row-zyx\">\r\n                        <FieldView label={t(langKeys.messagetemplate_attachment)} />\r\n                        <React.Fragment>\r\n                            <input\r\n                                accept=\"file/*\"\r\n                                id=\"attachmentInput\"\r\n                                onChange={(e) => onChangeAttachment(e.target.files)}\r\n                                style={{ display: 'none' }}\r\n                                type=\"file\"\r\n                                disabled={disableInput}\r\n                            />\r\n                            {<IconButton\r\n                                disabled={waitUploadFile || disableInput}\r\n                                onClick={onClickAttachment}\r\n                                style={{ borderRadius: \"0px\" }}\r\n                            >\r\n                                <AttachFileIcon color=\"primary\" />\r\n                            </IconButton>}\r\n                            {!!getValues(\"attachment\") && getValues(\"attachment\").split(',').map((f: string, i: number) => (\r\n                                <FilePreview key={`attachment-${i}`} src={f} onClose={(f) => handleCleanMediaInput(f)} />\r\n                            ))}\r\n                            {waitUploadFile && fileAttachment && <FilePreview key={`attachment-x`} src={fileAttachment} />}\r\n                        </React.Fragment>\r\n                    </div>}\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface FilePreviewProps {\r\n    onClose?: (f: string) => void;\r\n    src: File | string;\r\n}\r\n\r\nconst useFilePreviewStyles = makeStyles(theme => ({\r\n    btnContainer: {\r\n        color: 'lightgrey',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    infoContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        height: '100%',\r\n    },\r\n    root: {\r\n        alignItems: 'center',\r\n        backgroundColor: 'white',\r\n        borderRadius: 4,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        margin: theme.spacing(1),\r\n        maxHeight: 80,\r\n        maxWidth: 300,\r\n        overflow: 'hidden',\r\n        padding: theme.spacing(1),\r\n        width: 'fit-content',\r\n    },\r\n}));\r\n\r\nconst FilePreview: FC<FilePreviewProps> = ({ src, onClose }) => {\r\n    const classes = useFilePreviewStyles();\r\n\r\n    const isUrl = useCallback(() => typeof src === \"string\" && src.includes('http'), [src]);\r\n\r\n    const getFileName = useCallback(() => {\r\n        if (isUrl()) {\r\n            const m = (src as string).match(/.*\\/(.+?)\\./);\r\n            return m && m.length > 1 ? m[1] : \"\";\r\n        };\r\n        return (src as File).name;\r\n    }, [isUrl, src]);\r\n\r\n    const getFileExt = useCallback(() => {\r\n        if (isUrl()) {\r\n            return (src as string).split('.').pop()?.toUpperCase() || \"-\";\r\n        }\r\n        return (src as File).name?.split('.').pop()?.toUpperCase() || \"-\";\r\n    }, [isUrl, src]);\r\n\r\n    return (\r\n        <Paper className={classes.root} elevation={2}>\r\n            <FileCopy />\r\n            <div style={{ width: '0.5em' }} />\r\n            <div className={classes.infoContainer}>\r\n                <div>\r\n                    <div style={{ fontWeight: 'bold', textOverflow: 'ellipsis', overflow: 'hidden', maxWidth: 190, whiteSpace: 'nowrap' }}>{getFileName()}</div>{getFileExt()}\r\n                </div>\r\n            </div>\r\n            <div style={{ width: '0.5em' }} />\r\n            {!isUrl() && !onClose && <CircularProgress color=\"primary\" />}\r\n            <div className={classes.btnContainer}>\r\n                {onClose && (\r\n                    <IconButton size=\"small\" onClick={() => onClose(src as string)}>\r\n                        <Close />\r\n                    </IconButton>\r\n                )}\r\n                {isUrl() && <div style={{ height: '10%' }} />}\r\n                {isUrl() && (\r\n                    <a href={src as string} target=\"_blank\" rel=\"noreferrer\" download={`${getFileName()}.${getFileExt()}`}>\r\n                        <IconButton size=\"small\">\r\n                            <GetApp />\r\n                        </IconButton>\r\n                    </a>\r\n                )}\r\n            </div>\r\n        </Paper>\r\n    );\r\n}\r\n\r\nexport default MessageTemplates;","import { IActionCall, IChannel, IChatWebAdd, IRequestBody } from \"@types\";\r\nimport { ChannelsService, CommonService } from \"network\";\r\nimport actionTypes from \"./actionTypes\";\r\n\r\nexport const getChannelsList = (accessToken: String, appId: String): IActionCall => ({\r\n    callAPI: () => ChannelsService.getPagelist(accessToken, appId),\r\n    types: {\r\n        loading: actionTypes.CHANNELS,\r\n        success: actionTypes.CHANNELS_SUCCESS,\r\n        failure: actionTypes.CHANNELS_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const getChannelsListSub = (accessToken: String, appId: String): IActionCall => ({\r\n    callAPI: () => ChannelsService.getPagelistSub(accessToken, appId),\r\n    types: {\r\n        loading: actionTypes.CHANNELS,\r\n        success: actionTypes.CHANNELS_SUCCESS,\r\n        failure: actionTypes.CHANNELS_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const insertChannel = (requestBody: IRequestBody): IActionCall => ({\r\n    callAPI: () => ChannelsService.insertchnl(requestBody),\r\n    types: {\r\n        loading: actionTypes.CHANNELS,\r\n        success: actionTypes.CHANNELS_INSERTSUCCESS,\r\n        failure: actionTypes.CHANNELS_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const activateChannel = (requestBody: IRequestBody): IActionCall => ({\r\n    callAPI: () => ChannelsService.activateChannel(requestBody),\r\n    types: {\r\n        loading: actionTypes.ACTIVATECHANNEL,\r\n        success: actionTypes.ACTIVATECHANNEL_SUCCESS,\r\n        failure: actionTypes.ACTIVATECHANNEL_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const deleteChannel = (requestBody: IRequestBody): IActionCall => ({\r\n    callAPI: () => ChannelsService.deletechnl(requestBody),\r\n    types: {\r\n        loading: actionTypes.CHANNELS,\r\n        success: actionTypes.CHANNELS_INSERTSUCCESS,\r\n        failure: actionTypes.CHANNELS_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const checkPaymentPlan = (requestBody: IRequestBody): IActionCall => ({\r\n    callAPI: () => ChannelsService.checkPaymentPlan(requestBody),\r\n    types: {\r\n        loading: actionTypes.CHECK_PAYMENTPLAN,\r\n        success: actionTypes.CHECK_PAYMENTPLAN_SUCCESS,\r\n        failure: actionTypes.CHECK_PAYMENTPLAN_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetGetChannelsList = (): IActionCall => ({ type: actionTypes.CHANNELS_RESET });\r\n\r\nexport const resetGetChannelsSubList = (): IActionCall => ({ type: actionTypes.CHANNELS_RESET });\r\n\r\nexport const resetChannelInsert = (): IActionCall => ({ type: actionTypes.CHANNELS_INSERTSUCCESS_RESET });\r\n\r\nexport const insertChannel2 = (payload: IRequestBody<IChatWebAdd>): IActionCall => ({\r\n    callAPI: async () => {\r\n        const chatIconFile = payload.service!.interface.iconbutton as File | null;\r\n        const headerIconFile = payload.service!.interface.iconheader as File | null;\r\n        const botIconFile = payload.service!.interface.iconbot as File | null;\r\n        const bubbleIconFile = payload.service!.bubble.iconbubble as File | null;\r\n\r\n        let chatIcon = \"\";\r\n        let headerIcon = \"\";\r\n        let botIcon = \"\";\r\n        let bubbleIcon = \"\";\r\n\r\n        if (chatIconFile) {\r\n            const fd = new FormData();\r\n            fd.append('file', chatIconFile, chatIconFile.name);\r\n            chatIcon = (await CommonService.uploadFile(fd)).data[\"url\"];\r\n        }\r\n\r\n        if (headerIconFile) {\r\n            const fd = new FormData();\r\n            fd.append('file', headerIconFile, headerIconFile.name);\r\n            headerIcon = (await CommonService.uploadFile(fd)).data[\"url\"];\r\n        }\r\n\r\n        if (botIconFile) {\r\n            const fd = new FormData();\r\n            fd.append('file', botIconFile, botIconFile.name);\r\n            botIcon = (await CommonService.uploadFile(fd)).data[\"url\"];\r\n        }\r\n\r\n        if (bubbleIconFile) {\r\n            const fd = new FormData();\r\n            fd.append('file', bubbleIconFile, bubbleIconFile.name);\r\n            bubbleIcon = (await CommonService.uploadFile(fd)).data[\"url\"];\r\n        }\r\n\r\n        payload.service!.interface.iconbutton = chatIcon;\r\n        payload.service!.interface.iconheader = headerIcon;\r\n        payload.service!.interface.iconbot = botIcon;\r\n        payload.service!.bubble.iconbubble = bubbleIcon;\r\n\r\n        return ChannelsService.insertchnl(payload);\r\n    },\r\n    types: {\r\n        loading: actionTypes.INSERT_CHANNEL,\r\n        failure: actionTypes.INSERT_CHANNEL_FAILURE,\r\n        success: actionTypes.INSERT_CHANNEL_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetInsertChannel = () => ({ type: actionTypes.INSERT_CHANNEL_RESET });\r\n\r\nexport const editChannel = (payload: IRequestBody<IChannel | IChatWebAdd>, channelType?: string): IActionCall => ({\r\n    callAPI: async () => {\r\n        if (channelType === \"CHAZ\" || channelType === \"SMOOCHANDROID\") {\r\n            const service = payload.service as IChatWebAdd;\r\n            let chatIcon = service.interface.iconbutton as File | string | null;\r\n            let headerIcon = service.interface.iconheader as File | string | null;\r\n            let botIcon = service.interface.iconbot as File | string | null;\r\n            let bubbleIcon = service.bubble.iconbubble as File | string | null;\r\n\r\n            if (chatIcon && typeof chatIcon === \"object\") {\r\n                const fd = new FormData();\r\n                fd.append('file', chatIcon, chatIcon.name);\r\n                chatIcon = (await CommonService.uploadFile(fd)).data[\"url\"] as string;\r\n            }\r\n\r\n            if (headerIcon && typeof headerIcon === \"object\") {\r\n                const fd = new FormData();\r\n                fd.append('file', headerIcon, headerIcon.name);\r\n                headerIcon = (await CommonService.uploadFile(fd)).data[\"url\"] as string;\r\n            }\r\n\r\n            if (botIcon && typeof botIcon === \"object\") {\r\n                const fd = new FormData();\r\n                fd.append('file', botIcon, botIcon.name);\r\n                botIcon = (await CommonService.uploadFile(fd)).data[\"url\"] as string;\r\n            }\r\n\r\n            if (bubbleIcon && typeof bubbleIcon === \"object\") {\r\n                const fd = new FormData();\r\n                fd.append('file', bubbleIcon, bubbleIcon.name);\r\n                bubbleIcon = (await CommonService.uploadFile(fd)).data[\"url\"] as string;\r\n            }\r\n\r\n            (payload.service as IChatWebAdd).interface.iconbutton = chatIcon;\r\n            (payload.service as IChatWebAdd).interface.iconheader = headerIcon;\r\n            (payload.service as IChatWebAdd).interface.iconbot = botIcon;\r\n            (payload.service as IChatWebAdd).bubble.iconbubble = bubbleIcon;\r\n\r\n            return ChannelsService.editchnl(payload);\r\n        }\r\n        return CommonService.main(payload);\r\n    },\r\n    types: {\r\n        loading: actionTypes.EDIT_CHANNEL,\r\n        failure: actionTypes.EDIT_CHANNEL_FAILURE,\r\n        success: actionTypes.EDIT_CHANNEL_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetEditChannel = () => ({ type: actionTypes.EDIT_CHANNEL_RESET });\r\n\r\nexport const getFacebookPages = (accessToken: String, appId: String): IActionCall => ({\r\n    callAPI: () => ChannelsService.getPagelistSub(accessToken, appId),\r\n    types: {\r\n        loading: actionTypes.FACEBOOK_PAGES,\r\n        success: actionTypes.FACEBOOK_PAGES_SUCCESS,\r\n        failure: actionTypes.FACEBOOK_PAGES_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetGetFacebookPages = () => ({ type: actionTypes.FACEBOOK_PAGES_RESET });\r\n\r\nexport const getMessengerPages = (accessToken: String, appId: String): IActionCall => ({\r\n    callAPI: () => ChannelsService.getPagelistSub(accessToken, appId),\r\n    types: {\r\n        loading: actionTypes.MESSENGER_PAGES,\r\n        success: actionTypes.MESSENGER_PAGES_SUCCESS,\r\n        failure: actionTypes.MESSENGER_PAGES_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetGetMessengerPages = () => ({ type: actionTypes.MESSENGER_PAGES_RESET });\r\n\r\nexport const getInstagramPages = (accessToken: String, appId: String): IActionCall => ({\r\n    callAPI: () => ChannelsService.getPagelistSub(accessToken, appId),\r\n    types: {\r\n        loading: actionTypes.INSTAGRAM_PAGES,\r\n        success: actionTypes.INSTAGRAM_PAGES_SUCCESS,\r\n        failure: actionTypes.INSTAGRAM_PAGES_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetGetInstagramPages = () => ({ type: actionTypes.INSTAGRAM_PAGES_RESET });\r\n\r\nexport const getInstagramDMPages = (accessToken: String, appId: String): IActionCall => ({\r\n    callAPI: () => ChannelsService.getPagelistSub(accessToken, appId),\r\n    types: {\r\n        loading: actionTypes.INSTAGRAMDM_PAGES,\r\n        success: actionTypes.INSTAGRAMDM_PAGES_SUCCESS,\r\n        failure: actionTypes.INSTAGRAMDM_PAGES_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetGetInstagramDMPages = () => ({ type: actionTypes.INSTAGRAMDM_PAGES_RESET });\r\n\r\nexport const synchronizeTemplate = (request: any): IActionCall => ({\r\n    callAPI: () => ChannelsService.synchronizeTemplate(request),\r\n    types: {\r\n        failure: actionTypes.SYNCHRONIZE_TEMPLATE_FAILURE,\r\n        loading: actionTypes.SYNCHRONIZE_TEMPLATE,\r\n        success: actionTypes.SYNCHRONIZE_TEMPLATE_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetSynchronizeTemplate = (): IActionCall => ({ type: actionTypes.SYNCHRONIZE_TEMPLATE_RESET });\r\n\r\nexport const addTemplate = (request: any): IActionCall => ({\r\n    callAPI: () => ChannelsService.addTemplate(request),\r\n    types: {\r\n        failure: actionTypes.ADD_TEMPLATE_FAILURE,\r\n        loading: actionTypes.ADD_TEMPLATE,\r\n        success: actionTypes.ADD_TEMPLATE_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetAddTemplate = (): IActionCall => ({ type: actionTypes.ADD_TEMPLATE_RESET });\r\n\r\nexport const deleteTemplate = (request: any): IActionCall => ({\r\n    callAPI: () => ChannelsService.deleteTemplate(request),\r\n    types: {\r\n        failure: actionTypes.DELETE_TEMPLATE_FAILURE,\r\n        loading: actionTypes.DELETE_TEMPLATE,\r\n        success: actionTypes.DELETE_TEMPLATE_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetDeleteTemplate = (): IActionCall => ({ type: actionTypes.DELETE_TEMPLATE_RESET });\r\n\r\nexport const getPhoneList = (request: any): IActionCall => ({\r\n    callAPI: () => ChannelsService.getPhoneList(request),\r\n    types: {\r\n        loading: actionTypes.PHONE_LIST,\r\n        success: actionTypes.PHONE_LIST_SUCCESS,\r\n        failure: actionTypes.PHONE_LIST_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetGetPhoneList = (): IActionCall => ({ type: actionTypes.PHONE_LIST_RESET });","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Box, BoxProps, IconButton, IconButtonProps, Menu, TextField, Toolbar, makeStyles, Button, InputAdornment, Tabs, FormHelperText, CircularProgress, Tooltip, SelectProps, FormControl, Select, MenuItem, ClickAwayListener, Divider } from '@material-ui/core';\r\nimport {\r\n    FormatBold as FormatBoldIcon,\r\n    FormatItalic as FormatItalicIcon,\r\n    FormatUnderlined as FormatUnderlinedIcon,\r\n    Code as FormatCodeIcon,\r\n    LooksOne as FormatLooksOneIcon,\r\n    LooksTwo as FormatLooksTwoIcon,\r\n    FormatQuote as FormatQuoteIcon,\r\n    FormatListNumbered as FormatListNumberedIcon,\r\n    FormatListBulleted as FormatListBulletedIcon,\r\n    InsertPhoto as InsertPhotoIcon,\r\n    Delete as DeleteIcon,\r\n    Close as CloseIcon,\r\n    FormatSize as FormatSizeIcon,\r\n    Check as CheckIcon,\r\n    FormatColorText as FormatColorTextIcon,\r\n    FormatAlignRight as FormatAlignRightIcon,\r\n    FormatAlignCenter as FormatAlignCenterIcon,\r\n    EmojiEmotions as EmojiEmotionsIcon,\r\n    FormatAlignLeft as FormatAlignLeftIcon,\r\n} from '@material-ui/icons';\r\nimport { emojis } from \"common/constants/emojis\";\r\nimport React, { FC, useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { createEditor, BaseEditor, Descendant, Transforms, Editor, Element as SlateElement } from 'slate';\r\nimport { Slate, Editable, withReact, ReactEditor, useSlate, useSlateStatic, useSelected, useFocused } from 'slate-react';\r\nimport { withHistory } from 'slate-history';\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport { langKeys } from 'lang/keys';\r\nimport ReactDomServer from 'react-dom/server';\r\nimport { AntTab } from 'components';\r\nimport clsx from 'clsx';\r\nimport { useSelector } from 'hooks';\r\nimport { resetUploadFile, uploadFile } from 'store/main/actions';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showSnackbar } from 'store/popus/actions';\r\nimport { ArrowDropDownIcon, QuickresponseIcon, SearchIcon } from 'icons';\r\nimport { Picker } from 'emoji-mart';\r\nimport { Dictionary } from '@types';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nconst EMOJISINDEXED = emojis.reduce((acc: any, item: any) => ({ ...acc, [item.emojihex]: item }), {});\r\n\r\nexport const renderToString = (element: React.ReactElement) => {\r\n    return ReactDomServer.renderToString(element);\r\n}\r\n\r\nexport const toElement = (value: Descendant[], root: FC = ({ children }) => <div>{children}</div>): React.ReactElement => {\r\n    let children: React.ReactNode[] = [];\r\n\r\n    for (const item of value) {\r\n        if (item.hasOwnProperty('type') && item.hasOwnProperty('children')) {\r\n            const element = item as CustomElement;\r\n            children.push(toElement(\r\n                element.children,\r\n                ({ children }) => renderElement({\r\n                    element,\r\n                    children,\r\n                    isStatic: true,\r\n                    attributes: { key: element },\r\n                }),\r\n            ));\r\n        } else {\r\n            const text = item as CustomText;\r\n            children.push(renderLeaf({\r\n                leaf: text,\r\n                text: text,\r\n                children: text.text,\r\n                attributes: { key: text },\r\n            }));\r\n        }\r\n    }\r\n\r\n    return root({ children })!;\r\n}\r\n\r\nconst LIST_TYPES = ['bulleted-list', 'numbered-list'];\r\ntype ElemetType = 'paragraph' | 'block-quote' | 'heading-one' | 'heading-two' | 'list-item' | 'bulleted-list' | 'numbered-list' | 'image-src' | \"alignment\";\r\ninterface CustomElement extends Object {\r\n    type: ElemetType;\r\n    children: CustomElement[] | CustomText[];\r\n    url?: string | null;\r\n    align: \"left\" | \"center\" | \"right\";\r\n}\r\n\r\ninterface CustomText extends Object {\r\n    text: string;\r\n    bold?: boolean;\r\n    italic?: boolean;\r\n    fontfamily?: string;\r\n    textalign?: string;\r\n    fontsize?: string;\r\n    color?: string;\r\n    backgroundcolor?: string;\r\n    code?: boolean;\r\n    underline?: boolean;\r\n}\r\n\r\ndeclare module 'slate' {\r\n    interface CustomTypes {\r\n        Editor: BaseEditor & ReactEditor;\r\n        Element: CustomElement;\r\n        Text: CustomText;\r\n    }\r\n}\r\n\r\ninterface RichTextProps extends Omit<BoxProps, 'onChange'> {\r\n    placeholder?: string;\r\n    spellCheck?: boolean;\r\n    value: Descendant[];\r\n    error?: string;\r\n    onChange: (value: Descendant[]) => void;\r\n    onlyurl?: boolean;\r\n    image?: Boolean;\r\n    children?: React.ReactNode;\r\n    endinput?: React.ReactNode;\r\n    positionEditable?: 'top' | 'bottom';\r\n    refresh?: number;\r\n    emojiNoShow?: any;\r\n    emojiFavorite?: any;\r\n    emoji?: Boolean;\r\n    quickReplies?: any[];\r\n}\r\n\r\ninterface RenderElementProps {\r\n    attributes?: any;\r\n    children: React.ReactNode;\r\n    element: CustomElement;\r\n    isStatic?: boolean;\r\n}\r\n\r\ninterface RenderLeafProps {\r\n    attributes?: any;\r\n    children: React.ReactNode;\r\n    leaf: Omit<CustomText, 'text'>;\r\n    text: CustomText;\r\n}\r\n\r\ntype RenderElement = (props: RenderElementProps) => JSX.Element;\r\ntype RenderLeaf = (props: RenderLeafProps) => JSX.Element;\r\ntype StaticRenderElement = (props: { element: CustomElement, children: any }) => JSX.Element;\r\n\r\nconst useRichTextStyles = makeStyles(theme => ({\r\n    toolbar: {\r\n        padding: 0,\r\n        width: \"100%\"\r\n    },\r\n    editable: {\r\n        height: 200,\r\n        overflowY: \"scroll\",\r\n        overflowX: \"hidden\",\r\n        width: \"100%\",\r\n        direction: \"ltr\",\r\n    },\r\n    littleboxes: {\r\n        cursor: \"pointer\",\r\n        marginRight: 1,\r\n        width: 16,\r\n        height: 16\r\n    }\r\n}));\r\n\r\ninterface EmojiPickerZyxProps {\r\n    emojisIndexed?: Dictionary[];\r\n    emojisNoShow?: string[];\r\n    emojiFavorite?: string[];\r\n    onSelect: (e: any) => void;\r\n    style?: React.CSSProperties;\r\n    icon?: (onClick: () => void) => React.ReactNode;\r\n}\r\nconst QuickResponseStyles = makeStyles((theme) => ({\r\n    iconResponse: {\r\n        //cursor: 'pointer',\r\n        //poisition: 'relative',\r\n        color: '#2E2C34',\r\n        //'&:hover': {\r\n        //    // color: theme.palette.primary.main,\r\n        //    backgroundColor: '#EBEAED',\r\n        //    borderRadius: 4\r\n        //}\r\n    },\r\n    containerQuickReply: {\r\n        boxShadow: '0px 3px 6px rgb(0 0 0 / 10%)',\r\n        backgroundColor: '#FFF',\r\n        width: 250,\r\n    },\r\n    headerQuickReply: {\r\n        fontSize: 14,\r\n        fontWeight: 500,\r\n        padding: theme.spacing(1),\r\n        paddingLeft: theme.spacing(1.5),\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n    },\r\n}));\r\n\r\ninterface QuickReplyProps {\r\n    quickReplies: any[];\r\n    editor: BaseEditor & ReactEditor;\r\n}\r\n\r\nexport const QuickReply: React.FC<QuickReplyProps> = ({ quickReplies, editor}) => {\r\n    const classes = QuickResponseStyles();\r\n    const [open, setOpen] = React.useState(false);\r\n    const [quickRepliesToShow, setquickRepliesToShow] = useState<Dictionary[]>([])\r\n    const handleClick = () => setOpen((prev) => !prev);\r\n    const [showSearch, setShowSearch] = useState(false);\r\n    const [search, setSearch] = useState(\"\");\r\n    const { t } = useTranslation();\r\n    const ticketSelected = useSelector(state => state.inbox.ticketSelected);\r\n    const user = useSelector(state => state.login.validateToken.user);\r\n\r\n    const handleClickAway = () => setOpen(false);\r\n\r\n    useEffect(() => {\r\n        if (search === \"\") {\r\n            setquickRepliesToShow(quickReplies.filter(x => !!x.favorite))\r\n        } else {\r\n            setquickRepliesToShow(quickReplies.filter(x => x.description.toLowerCase().includes(search.toLowerCase())))\r\n        }\r\n    }, [search, quickReplies])\r\n\r\n    const handlerClickItem = (item: Dictionary) => {\r\n        setOpen(false);\r\n        editor.insertText(item.quickreply\r\n            .replace(\"{{numticket}}\", ticketSelected?.ticketnum)\r\n            .replace(\"{{client_name}}\", ticketSelected?.displayname)\r\n            .replace(\"{{agent_name}}\", user?.firstname + \" \" + user?.lastname)\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ClickAwayListener onClickAway={handleClickAway}>\r\n            <span>\r\n                <Tooltip title={t(langKeys.send_quickreply) + \"\"} arrow placement=\"top\">\r\n                    <IconButton\r\n                            aria-label=\"more\"\r\n                            aria-controls=\"long-menu\"\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleClick}\r\n                        >\r\n                        <QuickresponseIcon className={classes.iconResponse}/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n                {open && (\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        bottom: 60\r\n                    }}>\r\n                        <div className={classes.containerQuickReply}>\r\n                            <div>\r\n                                {!showSearch ?\r\n                                    <div className={classes.headerQuickReply}>\r\n                                        <div >User Quick Response</div>\r\n                                        <IconButton\r\n                                            size=\"small\"\r\n                                            onClick={() => setShowSearch(true)} edge=\"end\"\r\n                                        >\r\n                                            <SearchIcon />\r\n                                        </IconButton>\r\n\r\n                                    </div>\r\n                                    :\r\n                                    <TextField\r\n                                        color=\"primary\"\r\n                                        fullWidth\r\n                                        autoFocus\r\n                                        placeholder=\"Search quickreplies\"\r\n                                        style={{ padding: '6px 6px 6px 12px' }}\r\n                                        onBlur={() => !search && setShowSearch(false)}\r\n                                        onChange={e => setSearch(e.target.value)}\r\n                                        InputProps={{\r\n                                            endAdornment: (\r\n                                                <InputAdornment position=\"end\">\r\n                                                    <IconButton size=\"small\">\r\n                                                        <SearchIcon />\r\n                                                    </IconButton>\r\n                                                </InputAdornment>\r\n                                            )\r\n                                        }}\r\n                                    />\r\n                                }\r\n                            </div>\r\n                            <Divider />\r\n                            <List component=\"nav\" disablePadding style={{ maxHeight: 200, overflowY: 'overlay' as any }}>\r\n                                {quickRepliesToShow.map((item) => (\r\n                                    <ListItem\r\n                                        button\r\n                                        key={item.quickreplyid}\r\n                                        onClick={() => handlerClickItem(item)}\r\n                                    >\r\n                                        <Tooltip title={item.quickreply} arrow placement=\"top\">\r\n                                            <ListItemText primary={item.description} />\r\n                                        </Tooltip>\r\n                                    </ListItem>\r\n                                ))}\r\n                            </List>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </span>\r\n        </ClickAwayListener>\r\n    )\r\n}\r\nexport const EmojiPickerZyx: React.FC<EmojiPickerZyxProps> = ({ emojisIndexed, emojisNoShow = [], emojiFavorite = [], onSelect, icon }) => {\r\n    const [open, setOpen] = React.useState(false);\r\n    const handleClick = () => setOpen((prev) => !prev);\r\n    const { t } = useTranslation();\r\n    const handleClickAway = () => setOpen(false);\r\n    return (\r\n        <ClickAwayListener onClickAway={handleClickAway}>\r\n            <span >\r\n                {icon?.(handleClick) || (\r\n                    <Tooltip title={t(langKeys.send_emoji) + \"\"} arrow placement=\"top\">\r\n                        <IconButton\r\n                            aria-label=\"more\"\r\n                            aria-controls=\"long-menu\"\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleClick}\r\n                        >\r\n                            <EmojiEmotionsIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                )}\r\n                {open && (\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        bottom: 100\r\n                    }}>\r\n                        <Picker\r\n                            onSelect={(e) => { setOpen(false); onSelect(e) }}\r\n                            native={true}\r\n                            sheetSize={32}\r\n                            i18n={{\r\n                                search: t(langKeys.search),\r\n                                categories: {\r\n                                    search: t(langKeys.search_result),\r\n                                    recent: t(langKeys.favorites),\r\n                                    people: t(langKeys.emoticons),\r\n                                    nature: t(langKeys.animals),\r\n                                    foods: t(langKeys.food),\r\n                                    activity: t(langKeys.activities),\r\n                                    places: t(langKeys.travel),\r\n                                    objects: t(langKeys.objects),\r\n                                    symbols: t(langKeys.symbols),\r\n                                    flags: t(langKeys.flags),\r\n                                }\r\n                            }}\r\n                            recent={emojiFavorite.length > 0 ? emojiFavorite?.map(x => (EMOJISINDEXED as Dictionary)?.[x || \"\"]?.id || '') : undefined}\r\n                            emojisToShowFilter={emojisNoShow && emojisNoShow.length > 0 ? (emoji: any) => emojisNoShow.map(x => x.toUpperCase()).indexOf(emoji.unified.toUpperCase()) === -1 : undefined}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </span>\r\n        </ClickAwayListener>\r\n    )\r\n}\r\n\r\nconst TEXT_ALIGN_TYPES = ['left', 'center', 'right', 'justify']\r\n\r\n/**TODO: Validar que la URL de la imagen sea valida en el boton de insertar imagen */\r\nexport const RichText: FC<RichTextProps> = ({ value, refresh = 0, onChange, placeholder, image = true, spellCheck, error, positionEditable = \"bottom\", children, onlyurl = false\r\n    , endinput, emojiNoShow, emojiFavorite, emoji = false,quickReplies=[], ...boxProps }) => {\r\n    const classes = useRichTextStyles();\r\n    // Create a Slate editor object that won't change across renders.\r\n    const editor = useMemo(() => withImages(withHistory(withReact(createEditor()))), []);\r\n    const upload = useSelector(state => state.main.uploadFile);\r\n    // const [valueg, setvalueg] = useState(value)\r\n\r\n    useEffect(() => {\r\n        //evitar q en cada cmbio re-renderice, solo en casos q el componente q llama lo requiera (ejemplo replypanel)\r\n        if (editor?.children) {\r\n            editor.selection = {\r\n                anchor: { path: [0, 0], offset: 0 },\r\n                focus: { path: [0, 0], offset: 0 },\r\n            };\r\n            editor.children = value;\r\n        }\r\n    }, [refresh])\r\n\r\n    return (\r\n        <Box {...boxProps}>\r\n            <Slate editor={editor} value={value} onChange={onChange} >\r\n                {positionEditable === \"top\" &&\r\n                <div\r\n                className={classes.editable}>\r\n\r\n                    <Editable\r\n                        placeholder={placeholder}\r\n                        renderElement={renderElement}\r\n                        renderLeaf={renderLeaf}\r\n                        spellCheck={spellCheck}\r\n                    />\r\n                </div>\r\n                }\r\n                <Toolbar className={classes.toolbar}>\r\n                    <div>\r\n                        <div style={{ display: \"inline-block\" }}>\r\n                            {children}\r\n                        </div>\r\n                        <FontFamily tooltip='font'></FontFamily>\r\n                        <FormatSizeMenu tooltip='size'></FormatSizeMenu>\r\n                        {quickReplies.length > 0 && (\r\n                            <QuickReply quickReplies={quickReplies} editor={editor}></QuickReply>\r\n                        )}\r\n                        {emoji && <EmojiPickerZyx emojisIndexed={EMOJISINDEXED} onSelect={e => editor.insertText(e.native)} emojisNoShow={emojiNoShow} emojiFavorite={emojiFavorite} />}\r\n                        <MarkButton format=\"bold\" tooltip='bold'>\r\n                            <FormatBoldIcon />\r\n                        </MarkButton>\r\n                        <MarkButton format=\"italic\" tooltip='italic'>\r\n                            <FormatItalicIcon />\r\n                        </MarkButton>\r\n                        <MarkButton format=\"underline\" tooltip='underline'>\r\n                            <FormatUnderlinedIcon />\r\n                        </MarkButton>\r\n\r\n                        <TextColor tooltip='size'></TextColor>\r\n                        <Alignment tooltip='alignment'></Alignment>\r\n\r\n                        <BlockButton format=\"numbered-list\" tooltip='numbered_list'>\r\n                            <FormatListNumberedIcon />\r\n                        </BlockButton>\r\n                        <BlockButton format=\"bulleted-list\" tooltip='bulleted_list'>\r\n                            <FormatListBulletedIcon />\r\n                        </BlockButton>\r\n\r\n                        <MarkButton format=\"code\" tooltip='code'>\r\n                            <FormatCodeIcon />\r\n                        </MarkButton>\r\n                        <BlockButton format=\"heading-one\" tooltip='heading_one'>\r\n                            <FormatLooksOneIcon />\r\n                        </BlockButton>\r\n                        <BlockButton format=\"heading-two\" tooltip='heading_two'>\r\n                            <FormatLooksTwoIcon />\r\n                        </BlockButton>\r\n                        <BlockButton format=\"block-quote\" tooltip='block_quote'>\r\n                            <FormatQuoteIcon />\r\n                        </BlockButton>\r\n                        {(image && onlyurl) &&\r\n                                <OnlyURLInsertImageButton>\r\n                                    <InsertPhotoIcon />\r\n                                </OnlyURLInsertImageButton>\r\n                        }\r\n                        {\r\n                            /*<InsertImageButton>\r\n                            <InsertPhotoIcon />\r\n                        </InsertImageButton> */\r\n                        }\r\n                        {upload.loading && (\r\n                            <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', gap: 8 }}>\r\n                                <CircularProgress size={24} />\r\n                                <span><strong><Trans i18nKey={langKeys.loadingImage} />...</strong></span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div style={{ marginLeft: \"auto\", marginRight: 0 }}>\r\n                        {endinput}\r\n                    </div>\r\n                </Toolbar>\r\n                {positionEditable !== \"top\" &&\r\n                    <Editable\r\n                        placeholder={placeholder}\r\n                        renderElement={renderElement}\r\n                        renderLeaf={renderLeaf}\r\n                        spellCheck={spellCheck}\r\n                        style={{borderTop: \"1.5px dotted #949494\"}}\r\n                    />\r\n                }\r\n            </Slate>\r\n            {error && error !== '' && <FormHelperText error>{error}</FormHelperText>}\r\n        </Box >\r\n    );\r\n}\r\n\r\n/**Renderiza el texto seleccionado con cierto estilo */\r\nconst renderElement: RenderElement = ({ attributes = {}, children, element, isStatic = false }) => {\r\n    const style = { textAlign: element.align }\r\n    switch (element.type) {\r\n        case 'block-quote':\r\n            return <blockquote style={style} {...attributes}>{children}</blockquote>;\r\n        case 'bulleted-list':\r\n            return <ul style={style} {...attributes}>{children}</ul>;\r\n        case 'heading-one':\r\n            return <h1 style={style} {...attributes}>{children}</h1>;\r\n        case 'heading-two':\r\n            return <h2 style={style} {...attributes}>{children}</h2>;\r\n        case 'list-item':\r\n            return <li style={style} {...attributes}>{children}</li>;\r\n        case 'numbered-list':\r\n            return <ol style={style} {...attributes}>{children}</ol>;\r\n        case 'image-src':\r\n            if (isStatic === true) return <StaticImage element={element} children={children} />;\r\n            return <Image element={element} attributes={attributes} children={children} />;\r\n        default:\r\n            // element.type: paragraph\r\n            return <p style={style} {...attributes}>{children}</p>;\r\n    }\r\n}\r\n\r\n/**Renderiza el texto seleccionado con cierto formato */\r\nconst renderLeaf: RenderLeaf = ({ attributes = {}, children, leaf }) => {\r\n\r\n    if (leaf.bold === true) {\r\n        children = <strong>{children}</strong>;\r\n    }\r\n    if (leaf.code === true) {\r\n        children = <code>{children}</code>;\r\n    }\r\n    if (leaf.italic === true) {\r\n        children = <em>{children}</em>;\r\n    }\r\n    if (leaf.underline === true) {\r\n        children = <u>{children}</u>;\r\n    }\r\n    if (leaf.fontfamily) {\r\n        children = <span style={{ fontFamily: leaf.fontfamily }}>{children}</span>;\r\n    }\r\n    if (leaf.fontsize) {\r\n        children = <span style={{ fontSize: leaf.fontsize }}>{children}</span>;\r\n    }\r\n    if (leaf.color) {\r\n        children = <span style={{ color: leaf.color }}>{children}</span>;\r\n    }\r\n    if (leaf.backgroundcolor) {\r\n        children = <span style={{ backgroundColor: leaf.backgroundcolor }}>{children}</span>;\r\n    }\r\n\r\n    return <span {...attributes}>{children}</span>;\r\n}\r\n\r\n/**Aplicar formato en bloque */\r\nconst toggleBlock = (editor: BaseEditor & ReactEditor, format: ElemetType) => {\r\n    const isActive = isBlockActive(\r\n        editor,\r\n        format,\r\n        TEXT_ALIGN_TYPES.includes(format) ? 'align' : 'type'\r\n    )\r\n    const isList = LIST_TYPES.includes(format);\r\n\r\n    Transforms.unwrapNodes(editor, {\r\n        match: n =>\r\n            !Editor.isEditor(n) &&\r\n            SlateElement.isElement(n) &&\r\n            LIST_TYPES.includes(n.type),\r\n        split: true,\r\n    });\r\n    const newProperties: Partial<SlateElement> = {\r\n        type: isActive ? 'paragraph' : isList ? 'list-item' : format,\r\n    };\r\n    Transforms.setNodes<SlateElement>(editor, newProperties);\r\n\r\n    if (!isActive && isList) {\r\n        const block: CustomElement = { type: format, children: [], align: 'left' };\r\n        Transforms.wrapNodes(editor, block);\r\n    }\r\n}\r\n/**Aplicar fuente al texto seleccionado */\r\nconst toggleFontFamily = (editor: BaseEditor & ReactEditor, value: string) => {\r\n    if (value === \"inherit\") {\r\n        Editor.removeMark(editor, 'fontfamily');\r\n    } else {\r\n        Editor.addMark(editor, 'fontfamily', value);\r\n    }\r\n}\r\n\r\nconst toggleFontSize = (editor: BaseEditor & ReactEditor, value: string) => {\r\n    if (value === \"small\") {\r\n        Editor.removeMark(editor, 'fontsize');\r\n    } else {\r\n        Editor.addMark(editor, 'fontsize', value);\r\n    }\r\n}\r\nconst toggleAlignment = (editor: BaseEditor & ReactEditor, value: \"left\" | \"center\" | \"right\") => {\r\n    const isActive = isBlockActive(\r\n        editor,\r\n        \"paragraph\",\r\n        'align'\r\n    )\r\n    let newProperties: Partial<SlateElement>\r\n    newProperties = {\r\n        align: isActive ? undefined : value,\r\n    }\r\n    Transforms.setNodes<SlateElement>(editor, newProperties)\r\n    if (value === \"left\") {\r\n        Editor.removeMark(editor, 'textalign');\r\n    } else {\r\n        Editor.addMark(editor, 'textalign', value);\r\n    }\r\n}\r\nconst toggleColor = (editor: BaseEditor & ReactEditor, value: string) => {\r\n    if (value === \"black\") {\r\n        Editor.removeMark(editor, 'color');\r\n    } else {\r\n        Editor.addMark(editor, 'color', value);\r\n    }\r\n}\r\nconst toggleBackgroundColor = (editor: BaseEditor & ReactEditor, value: string) => {\r\n    if (value === \"transparent\") {\r\n        Editor.removeMark(editor, 'backgroundcolor');\r\n    } else {\r\n        Editor.addMark(editor, 'backgroundcolor', value);\r\n    }\r\n}\r\n\r\ninterface FontFamilyProps extends SelectProps {\r\n    tooltip: string;\r\n    other?: () => void;\r\n}\r\n\r\nconst FontFamily: FC<FontFamilyProps> = ({ tooltip = '', children, onClick, ...props }) => {\r\n    const editor = useSlate();\r\n    const marks = Editor.marks(editor);\r\n    const fontfamily = marks?.fontfamily || 'inherit';\r\n    const { t } = useTranslation();\r\n\r\n    return (\r\n        <FormControl>\r\n            <Tooltip title={t(langKeys.font) || \"font\"} aria-label=\"add\">\r\n            <Select\r\n                labelId=\"font-family-select-label\"\r\n                value={fontfamily}\r\n                style={{ width: 150, marginLeft: 10 }}\r\n                onChange={e => {\r\n                    e.preventDefault();\r\n                    toggleFontFamily(editor, e.target.value as string);\r\n                }}\r\n            >\r\n                <MenuItem style={{ fontFamily: \"inherit\" }} value=\"inherit\">{t(langKeys.default)}</MenuItem>\r\n                <MenuItem style={{ fontFamily: \"serif\" }} value=\"serif\">Serif</MenuItem>\r\n                <MenuItem style={{ fontFamily: \"sans-serif\" }} value=\"sans-serif\">Sans-serif</MenuItem>\r\n                <MenuItem style={{ fontFamily: \"monospace\" }} value=\"monospace\">Monospace</MenuItem>\r\n                <MenuItem style={{ fontFamily: \"cursive\" }} value=\"cursive\">Cursive</MenuItem>\r\n                <MenuItem style={{ fontFamily: \"fantasy\" }} value=\"fantasy\">Fantasy</MenuItem>\r\n            </Select>\r\n            </Tooltip>\r\n        </FormControl>\r\n    );\r\n}\r\nconst FormatSizeMenu: FC<FontFamilyProps> = ({ tooltip = '', children, onClick, ...props }) => {\r\n    const editor = useSlate();\r\n    const marks = Editor.marks(editor);\r\n    const fontsize = marks?.fontsize || 'small';\r\n    const { t } = useTranslation();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n\r\n    const handleClick = (event: any) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = (value: string) => {\r\n        toggleFontSize(editor, value);\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <FormControl>\r\n            <>\r\n                <Tooltip title={t(langKeys.size) || \"size\"} aria-label=\"add\">\r\n                    <IconButton\r\n                        aria-label=\"more\"\r\n                        aria-controls=\"long-menu\"\r\n                        aria-haspopup=\"true\"\r\n                        onClick={handleClick}\r\n                    >\r\n                        <FormatSizeIcon />\r\n                        <ArrowDropDownIcon />\r\n                    </IconButton>\r\n                </Tooltip>\r\n                <Menu\r\n                    id=\"long-menu\"\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    anchorOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'center',\r\n                    }}\r\n                >\r\n                    <MenuItem onClick={() => handleClose(\"x-small\")} style={{ paddingLeft: 0, fontSize: \"x-small\" }} value=\"x-small\">\r\n                        {fontsize === \"x-small\" && <CheckIcon style={{ marginRight: 10, marginLeft: 10, width: 20, height: 20 }} />}\r\n                        <div style={{ marginLeft: (fontsize !== \"x-small\" ? 40 : 0) }}>{t(langKeys.small)} </div>\r\n                    </MenuItem>\r\n                    <MenuItem onClick={() => handleClose(\"small\")} style={{ paddingLeft: 0, fontSize: \"small\" }} value=\"small\">\r\n                        {fontsize === \"small\" && <CheckIcon style={{ marginRight: 10, marginLeft: 10, width: 20, height: 20 }} />}\r\n                        <div style={{ marginLeft: (fontsize !== \"small\" ? 40 : 0) }}>{t(langKeys.normal)} </div>\r\n                    </MenuItem>\r\n                    <MenuItem onClick={() => handleClose(\"large\")} style={{ paddingLeft: 0, fontSize: \"large\" }} value=\"large\">\r\n                        {fontsize === \"large\" && <CheckIcon style={{ marginRight: 10, marginLeft: 10, width: 20, height: 20 }} />}\r\n                        <div style={{ marginLeft: (fontsize !== \"large\" ? 40 : 0) }}>{t(langKeys.large)} </div>\r\n                    </MenuItem>\r\n                    <MenuItem onClick={() => handleClose(\"xx-large\")} style={{ paddingLeft: 0, fontSize: \"xx-large\" }} value=\"xx-large\">\r\n                        {fontsize === \"xx-large\" && <CheckIcon style={{ marginRight: 10, marginLeft: 10, width: 20, height: 20 }} />}\r\n                        <div style={{ marginLeft: (fontsize !== \"xx-large\" ? 40 : 0) }}>{t(langKeys.huge)} </div>\r\n                    </MenuItem>\r\n                </Menu>\r\n            </>\r\n        </FormControl>\r\n    );\r\n}\r\nconst Alignment: FC<FontFamilyProps> = ({ tooltip = '', children, onClick, ...props }) => {\r\n    const editor = useSlate();\r\n    const marks = Editor.marks(editor);\r\n    const textalign = marks?.textalign || 'left';\r\n    const { t } = useTranslation();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n\r\n    const handleClick = (event: any) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = (value: \"left\" | \"center\" | \"right\") => {\r\n        toggleAlignment(editor, value);\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <FormControl>\r\n            <>\r\n                <Tooltip title={t(langKeys.align) || \"align\"} aria-label=\"add\">\r\n                    <IconButton\r\n                        aria-label=\"more\"\r\n                        aria-controls=\"long-menu\"\r\n                        aria-haspopup=\"true\"\r\n                        onClick={handleClick}\r\n                    >\r\n                        {(textalign !== \"right\" && textalign !== \"center\") && <FormatAlignLeftIcon />}\r\n                        {textalign === \"right\" && <FormatAlignRightIcon />}\r\n                        {textalign === \"center\" && <FormatAlignCenterIcon />}\r\n                        <ArrowDropDownIcon />\r\n                    </IconButton>\r\n                </Tooltip>\r\n                <Menu\r\n                    id=\"long-menu\"\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    anchorOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'center',\r\n                    }}\r\n                >\r\n                    <MenuItem onClick={() => handleClose(\"left\")} value=\"left\">\r\n                        <div><FormatAlignLeftIcon /></div>\r\n                    </MenuItem>\r\n                    <MenuItem onClick={() => handleClose(\"center\")} value=\"center\">\r\n                        <div><FormatAlignCenterIcon /></div>\r\n                    </MenuItem>\r\n                    <MenuItem onClick={() => handleClose(\"right\")} value=\"right\">\r\n                        <div><FormatAlignRightIcon /></div>\r\n                    </MenuItem>\r\n                </Menu>\r\n            </>\r\n        </FormControl>\r\n    );\r\n}\r\n\r\nconst ColorBoxes: FC<FontFamilyProps> = ({ other, tooltip }) => {\r\n    const editor = useSlate();\r\n    const classes = useRichTextStyles();\r\n\r\n    const handleClose = (value: string) => {\r\n        if (tooltip === \"background\") {\r\n            toggleBackgroundColor(editor, value);\r\n        } else {\r\n            toggleColor(editor, value);\r\n        }\r\n        other?.();\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ display: \"flex\", marginTop: 10 }}>\r\n                <div onClick={() => handleClose(\"rgb(0,0,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(0,0,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(68,68,68)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(68,68,68)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(102,102,102)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(102,102,102)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(153,153,153)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(153,153,153)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(204,204,204)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(204,204,204)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(238,238,238)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(238,238,238)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(243,243,243)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(243,243,243)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(255,255,255)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(255,255,255)\" }}></div>\r\n            </div>\r\n            <div style={{ display: \"flex\", marginTop: 5, marginBottom: 5 }}>\r\n                <div onClick={() => handleClose(\"rgb(255,0,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(255,0,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(255,153,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(255,153,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(255,255,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(255,255,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(0,255,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(0,255,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(0,255,255)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(0,255,255)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(0,0,255)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(0,0,255)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(153,0,255)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(153,0,255)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(255,0,255)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(255,0,255)\" }}></div>\r\n            </div>\r\n            <div style={{ display: \"flex\", marginBottom: 1 }}>\r\n                <div onClick={() => handleClose(\"rgb(244,204,204)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(244,204,204)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(252,229,205)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(252,229,205)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(255,242,204)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(255,242,204)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(217,234,211)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(217,234,211)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(208,224,227)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(208,224,227)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(207,226,243)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(207,226,243)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(217,210,233)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(217,210,233)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(234,209,220)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(234,209,220)\" }}></div>\r\n            </div>\r\n            <div style={{ display: \"flex\", marginBottom: 1 }}>\r\n                <div onClick={() => handleClose(\"rgb(234,153,153)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(234,153,153)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(249,203,156)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(249,203,156)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(255,229,153)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(255,229,153)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(182,215,168)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(182,215,168)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(162,196,201)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(162,196,201)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(159,197,232)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(159,197,232)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(180,167,214)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(180,167,214)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(213,166,189)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(213,166,189)\" }}></div>\r\n            </div>\r\n            <div style={{ display: \"flex\", marginBottom: 1 }}>\r\n                <div onClick={() => handleClose(\"rgb(224,102,102)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(224,102,102)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(246,178,107)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(246,178,107)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(255,217,102)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(255,217,102)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(147,196,125)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(147,196,125)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(118,165,175)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(118,165,175)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(111,168,220)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(111,168,220)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(142,124,195)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(142,124,195)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(194,123,160)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(194,123,160)\" }}></div>\r\n            </div>\r\n            <div style={{ display: \"flex\", marginBottom: 1 }}>\r\n                <div onClick={() => handleClose(\"rgb(204,0,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(204,0,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(230,145,56)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(230,145,56)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(241,194,50)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(241,194,50)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(106,168,79)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(106,168,79)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(69,129,142)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(69,129,142)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(61,133,198)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(61,133,198)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(103,78,167)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(103,78,167)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(166,77,121)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(166,77,121)\" }}></div>\r\n            </div>\r\n            <div style={{ display: \"flex\", marginBottom: 1 }}>\r\n                <div onClick={() => handleClose(\"rgb(153,0,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(153,0,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(180,95,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(180,95,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(191,144,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(191,144,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(56,118,29)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(56,118,29)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(19,79,92)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(19,79,92)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(11,83,148)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(11,83,148)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(53,28,117)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(53,28,117)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(116,27,71)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(116,27,71)\" }}></div>\r\n            </div>\r\n            <div style={{ display: \"flex\", marginBottom: 1 }}>\r\n                <div onClick={() => handleClose(\"rgb(102,0,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(102,0,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(120,63,4)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(120,63,4)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(127,96,0)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(127,96,0)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(39,78,19)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(39,78,19)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(12,52,61)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(12,52,61)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(7,55,99)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(7,55,99)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(32,18,77)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(32,18,77)\" }}></div>\r\n                <div onClick={() => handleClose(\"rgb(76,17,48)\")} className={classes.littleboxes} style={{ backgroundColor: \"rgb(76,17,48)\" }}></div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nconst TextColor: FC<FontFamilyProps> = ({ tooltip = '', children, onClick, ...props }) => {\r\n    const { t } = useTranslation();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n\r\n    const handleClick = (event: any) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <FormControl>\r\n            <>\r\n                <Tooltip title={t(langKeys.textcolor) || \"textcolor\"} aria-label=\"add\">\r\n                    <IconButton\r\n                        aria-label=\"more\"\r\n                        aria-controls=\"long-menu\"\r\n                        aria-haspopup=\"true\"\r\n                        onClick={handleClick}\r\n                    >\r\n                        <FormatColorTextIcon />\r\n                        <ArrowDropDownIcon />\r\n                    </IconButton>\r\n                </Tooltip>\r\n                <Menu\r\n                    anchorOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'center',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 120,\r\n                        horizontal: 'center',\r\n                    }}\r\n                    id=\"long-menu\"\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                >\r\n                    <div style={{ display: \"flex\", marginRight: 10 }}>\r\n                        <div style={{ marginLeft: 10, marginRight: 10 }}>\r\n                            <div>{t(langKeys.backgroundColor)}</div>\r\n                            <ColorBoxes tooltip=\"background\" other={() => handleClose()} />\r\n                        </div>\r\n                        <div>\r\n                            <div>{t(langKeys.textcolor)}</div>\r\n                            <ColorBoxes tooltip=\"textcolor\" other={() => handleClose()} />\r\n                        </div>\r\n                    </div>\r\n                </Menu>\r\n            </>\r\n        </FormControl>\r\n    );\r\n}\r\n\r\nconst isMarkActive = (editor: BaseEditor & ReactEditor, format: keyof Omit<CustomText, 'text'>) => {\r\n    const marks = Editor.marks(editor);\r\n    return marks ? marks[format] === true : false;\r\n}\r\n\r\n/**Aplicar estilo al texto seleccionado */\r\nconst toggleMark = (editor: BaseEditor & ReactEditor, format: keyof Omit<CustomText, 'text'>) => {\r\n    const isActive = isMarkActive(editor, format);\r\n\r\n    if (isActive) {\r\n        Editor.removeMark(editor, format);\r\n    } else {\r\n        Editor.addMark(editor, format, true);\r\n    }\r\n}\r\n\r\nconst isBlockActive = (editor: BaseEditor & ReactEditor, format: ElemetType, blockType: \"type\" | \"align\" = 'type') => {\r\n    const { selection } = editor\r\n    if (!selection) return false\r\n\r\n    const [match] = Array.from(\r\n        Editor.nodes(editor, {\r\n            at: Editor.unhangRange(editor, selection),\r\n            match: n =>\r\n                !Editor.isEditor(n) &&\r\n                SlateElement.isElement(n) &&\r\n                n[blockType] === format,\r\n        })\r\n    )\r\n\r\n    return !!match\r\n}\r\n\r\ninterface MarkButtonProps extends IconButtonProps {\r\n    tooltip: string;\r\n    format: keyof Omit<CustomText, 'text'>;\r\n}\r\n\r\nconst MarkButton: FC<MarkButtonProps> = ({ tooltip = '', format, children, onClick, ...props }) => {\r\n    const editor = useSlate();\r\n    const active = isMarkActive(editor, format);\r\n    const { t } = useTranslation();\r\n\r\n    return (\r\n        <Tooltip title={t((langKeys as any)[tooltip]) || ''}>\r\n            <IconButton\r\n                {...props}\r\n                onClick={e => {\r\n                    e.preventDefault();\r\n                    toggleMark(editor, format);\r\n                    onClick?.(e);\r\n                }}\r\n                color={active ? 'primary' : 'default'}\r\n            >\r\n                {children}\r\n            </IconButton>\r\n        </Tooltip>\r\n    );\r\n}\r\n\r\ninterface BlockButtonProps extends IconButtonProps {\r\n    tooltip: string;\r\n    format: ElemetType;\r\n}\r\n\r\nconst BlockButton: FC<BlockButtonProps> = ({ tooltip = '', format, children, onClick, ...props }) => {\r\n    const editor = useSlate();\r\n    const active = isBlockActive(editor, format);\r\n    const { t } = useTranslation();\r\n\r\n    return (\r\n        <Tooltip title={t((langKeys as any)[tooltip]) || ''}>\r\n            <IconButton\r\n                {...props}\r\n                onClick={e => {\r\n                    e.preventDefault();\r\n                    toggleBlock(editor, format);\r\n                    onClick?.(e);\r\n                }}\r\n                color={active ? 'primary' : 'default'}\r\n            >\r\n                {children}\r\n            </IconButton>\r\n        </Tooltip>\r\n    );\r\n}\r\n\r\nconst useInsertImageButtonStyles = makeStyles(theme => ({\r\n    rootPopup: {\r\n        width: 280,\r\n        paddingLeft: theme.spacing(1),\r\n        paddingRight: theme.spacing(1),\r\n        justifyContent: 'stretch',\r\n    },\r\n    rootTab: {\r\n        padding: theme.spacing(2),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: 12,\r\n    },\r\n    hidden: {\r\n        display: 'none',\r\n    },\r\n    attachTab: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        gap: 8,\r\n    },\r\n}));\r\n\r\nconst OnlyURLInsertImageButton: FC = ({ children }) => {\r\n    const editor = useSlateStatic();\r\n    const dispatch = useDispatch();\r\n    const { t } = useTranslation();\r\n    const classes = useInsertImageButtonStyles();\r\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n    const [url, setUrl] = useState('');\r\n    const [waitUploadFile, setWaitUploadFile] = useState(false);\r\n    const upload = useSelector(state => state.main.uploadFile);\r\n    const open = Boolean(anchorEl);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(resetUploadFile());\r\n        };\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (waitUploadFile) {\r\n            if (upload.loading) return;\r\n            if (upload.error) {\r\n                const message = t(upload.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n                dispatch(showSnackbar({\r\n                    message,\r\n                    show: true,\r\n                    severity: \"error\"\r\n                }));\r\n                setWaitUploadFile(false);\r\n            } else if (upload.url && upload.url.length > 0) {\r\n                insertImage(editor, upload.url);\r\n                dispatch(resetUploadFile());\r\n                setWaitUploadFile(false);\r\n            }\r\n        }\r\n    }, [waitUploadFile, upload, editor, t, dispatch]);\r\n\r\n    const clearUrl = useCallback(() => setUrl(''), []);\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const addNewUrlImage = useCallback(() => {\r\n        if (url.length > 0 && isUrl(url)) {\r\n            insertImage(editor, url);\r\n            clearUrl();\r\n        }\r\n    }, [url, editor, clearUrl]);\r\n\r\n    return (\r\n        <>\r\n            <Tooltip title={t(langKeys.image) || ''}>\r\n                <IconButton\r\n                    aria-controls=\"insert-image-button-rich-text-popup\"\r\n                    aria-haspopup=\"true\"\r\n                    aria-expanded={open ? 'true' : undefined}\r\n                    onMouseDown={event => {\r\n                        event.preventDefault();\r\n                        handleClick(event);\r\n                    }}\r\n                >\r\n                    {children}\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Menu\r\n                id=\"insert-image-button-rich-text-popup\"\r\n                anchorEl={anchorEl}\r\n                open={open}\r\n                onClose={handleClose}\r\n                variant=\"menu\"\r\n                MenuListProps={{\r\n                    'aria-labelledby': 'basic-button',\r\n                }}\r\n            >\r\n                <div className={classes.rootPopup}>\r\n                    <div role=\"tabpanel\" className={clsx(classes.rootTab)}>\r\n                        <TextField\r\n                            placeholder={t(langKeys.enterTheUrl)}\r\n                            value={url}\r\n                            onChange={e => setUrl(e.target.value)}\r\n                            autoFocus\r\n                            disabled={waitUploadFile || upload.loading}\r\n                            InputProps={{\r\n                                endAdornment: (\r\n                                    <InputAdornment position=\"end\">\r\n                                        <IconButton size=\"small\" onClick={clearUrl}>\r\n                                            <CloseIcon />\r\n                                        </IconButton>\r\n                                    </InputAdornment>\r\n                                )\r\n                            }}\r\n                        />\r\n                        <Button\r\n                            type=\"button\"\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            size=\"small\"\r\n                            disabled={waitUploadFile || upload.loading}\r\n                            onClick={addNewUrlImage}\r\n                        >\r\n                            <Trans i18nKey={langKeys.accept} />\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </Menu>\r\n        </>\r\n    );\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst InsertImageButton: FC = ({ children }) => {\r\n    const editor = useSlateStatic();\r\n    const dispatch = useDispatch();\r\n    const { t } = useTranslation();\r\n    const classes = useInsertImageButtonStyles();\r\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n    const [url, setUrl] = useState('');\r\n    const [tabIndex, setTabIndex] = useState(0);\r\n    const [waitUploadFile, setWaitUploadFile] = useState(false);\r\n    const upload = useSelector(state => state.main.uploadFile);\r\n    const open = Boolean(anchorEl);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(resetUploadFile());\r\n        };\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (waitUploadFile) {\r\n            if (upload.loading) return;\r\n            if (upload.error) {\r\n                const message = t(upload.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n                dispatch(showSnackbar({\r\n                    message,\r\n                    show: true,\r\n                    severity: \"error\"\r\n                }));\r\n                setWaitUploadFile(false);\r\n            } else if (upload.url && upload.url.length > 0) {\r\n                insertImage(editor, upload.url);\r\n                dispatch(resetUploadFile());\r\n                setWaitUploadFile(false);\r\n            }\r\n        }\r\n    }, [waitUploadFile, upload, editor, t, dispatch]);\r\n\r\n    const clearUrl = useCallback(() => setUrl(''), []);\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const addNewUrlImage = useCallback(() => {\r\n        if (url.length > 0 && isUrl(url)) {\r\n            insertImage(editor, url);\r\n            clearUrl();\r\n        }\r\n    }, [url, editor, clearUrl]);\r\n\r\n    const handleAttachImage = useCallback(() => {\r\n        const input = document.getElementById('richtextImageBtnInput');\r\n        input!.click();\r\n    }, []);\r\n\r\n    const addNewAttachedImage = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (!e.target.files) return;\r\n        const file = e.target.files[0];\r\n        const fd = new FormData();\r\n        fd.append('file', file, file.name);\r\n        dispatch(uploadFile(fd));\r\n        setWaitUploadFile(true);\r\n        setAnchorEl(null);\r\n        clearUrl();\r\n    }, [clearUrl, dispatch]);\r\n\r\n    return (\r\n        <div>\r\n            <Tooltip title={t(langKeys.image) || ''}>\r\n                <IconButton\r\n                    aria-controls=\"insert-image-button-rich-text-popup\"\r\n                    aria-haspopup=\"true\"\r\n                    aria-expanded={open ? 'true' : undefined}\r\n                    onMouseDown={event => {\r\n                        event.preventDefault();\r\n                        handleClick(event);\r\n                    }}\r\n                >\r\n                    {children}\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Menu\r\n                id=\"insert-image-button-rich-text-popup\"\r\n                anchorEl={anchorEl}\r\n                open={open}\r\n                onClose={handleClose}\r\n                MenuListProps={{\r\n                    'aria-labelledby': 'basic-button',\r\n                }}\r\n            >\r\n                <div className={classes.rootPopup}>\r\n                    <Tabs\r\n                        value={tabIndex}\r\n                        onChange={(_, i) => setTabIndex(i)}\r\n                        textColor=\"primary\"\r\n                        indicatorColor=\"primary\"\r\n                        variant=\"fullWidth\"\r\n                    >\r\n                        <AntTab\r\n                            disabled={upload.loading}\r\n                            value={0}\r\n                            label=\"URL\"\r\n                        />\r\n                        <AntTab\r\n                            disabled={upload.loading}\r\n                            value={1}\r\n                            label={(\r\n                                <div className={classes.attachTab}>\r\n                                    {waitUploadFile && upload.loading && <CircularProgress size={24} />}\r\n                                    <Trans i18nKey={langKeys.attached} />\r\n                                </div>\r\n                            )}\r\n                        />\r\n                    </Tabs>\r\n                    <div role=\"tabpanel\" className={clsx(classes.rootTab, tabIndex !== 0 && classes.hidden)}>\r\n                        <TextField\r\n                            placeholder={t(langKeys.enterTheUrl)}\r\n                            value={url}\r\n                            onChange={e => setUrl(e.target.value)}\r\n                            autoFocus\r\n                            disabled={waitUploadFile || upload.loading}\r\n                            InputProps={{\r\n                                endAdornment: (\r\n                                    <InputAdornment position=\"end\">\r\n                                        <IconButton size=\"small\" onClick={clearUrl}>\r\n                                            <CloseIcon />\r\n                                        </IconButton>\r\n                                    </InputAdornment>\r\n                                )\r\n                            }}\r\n                        />\r\n                        <Button\r\n                            type=\"button\"\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            size=\"small\"\r\n                            disabled={waitUploadFile || upload.loading}\r\n                            onClick={addNewUrlImage}\r\n                        >\r\n                            <Trans i18nKey={langKeys.accept} />\r\n                        </Button>\r\n                    </div>\r\n                    <div role=\"tabpanel\" className={clsx(classes.rootTab, tabIndex !== 1 && classes.hidden)}>\r\n                        <input\r\n                            accept=\"image/*\"\r\n                            style={{ display: 'none' }}\r\n                            id=\"richtextImageBtnInput\"\r\n                            type=\"file\"\r\n                            onChange={addNewAttachedImage}\r\n                        />\r\n                        <Button\r\n                            type=\"button\"\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            size=\"small\"\r\n                            disabled={waitUploadFile || upload.loading}\r\n                            onClick={handleAttachImage}\r\n                        >\r\n                            <Trans i18nKey={langKeys.select} />\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </Menu>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst isUrl = (src: string | undefined | null) => {\r\n    return typeof src === \"string\" && src.length > 0 && src.includes('http');\r\n}\r\n\r\nconst insertImage = (editor: BaseEditor & ReactEditor, url: string | null) => {\r\n    const text: CustomText = { text: '' };\r\n    const image: CustomElement = { type: 'image-src', url, children: [text], align: 'left' };\r\n    Transforms.insertNodes(editor, image);\r\n\r\n    const nextNode = Editor.next(editor);\r\n    if (nextNode) return;\r\n\r\n    const endDummyText: CustomText = { text: '' };\r\n    const endDummyElement: CustomElement = { type: 'paragraph', url: undefined, children: [endDummyText], align: 'left' };\r\n    Transforms.insertNodes(editor, endDummyElement);\r\n}\r\n\r\nconst useImageStyles = makeStyles(theme => ({\r\n    root: {\r\n        position: 'relative',\r\n        // width: 'fit-content',\r\n        // maxWidth: '100%',\r\n        // display: 'inline-block',\r\n    },\r\n    img: {\r\n        display: 'block',\r\n        maxWidth: '100%',\r\n        maxHeight: '20em',\r\n    },\r\n    btn: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        top: 0,\r\n    },\r\n}));\r\n\r\nconst Image: RenderElement = ({ children, element, attributes }) => {\r\n    const classes = useImageStyles();\r\n    const editor = useSlateStatic();\r\n    const path = ReactEditor.findPath(editor, element);\r\n\r\n    const selected = useSelected();\r\n    const focused = useFocused();\r\n\r\n    return (\r\n        <div {...attributes} /*style={{ width: 'fit-content', maxWidth: '100%' }}*/>\r\n            {children}\r\n            <div contentEditable={false} className={classes.root}>\r\n                <img\r\n                    src={element.url || ''}\r\n                    alt=\"Imagen\"\r\n                    className={classes.img}\r\n                    style={{ boxShadow: selected && focused ? '0 0 0 3px #B4D5FF' : 'none' }}\r\n                />\r\n                <IconButton\r\n                    // onClick={() => Transforms.removeNodes(editor, { at: path })}\r\n                    onClick={() => Transforms.setNodes(editor, { type: 'paragraph', url: undefined }, { at: path })}\r\n                    color=\"default\"\r\n                    className={classes.btn}\r\n                >\r\n                    <DeleteIcon />\r\n                </IconButton>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst StaticImage: StaticRenderElement = ({ children, element }) => {\r\n    const classes = useImageStyles();\r\n\r\n    return (\r\n        <div>\r\n            {children}\r\n            <div contentEditable={false} className={classes.root}>\r\n                <img\r\n                    src={element.url || ''}\r\n                    alt=\"Imagen\"\r\n                    className={classes.img}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst withImages = (editor: BaseEditor & ReactEditor) => {\r\n    const { insertData, isVoid } = editor\r\n\r\n    editor.isVoid = (element: CustomElement) => {\r\n        return element.type === 'image-src' ? true : isVoid(element);\r\n    }\r\n\r\n    editor.insertData = data => {\r\n        const text = data.getData('text/plain');\r\n        const { files } = data;\r\n\r\n        if (files && files.length > 0) {\r\n            for (const file of Array.from(files)) {\r\n                const reader = new FileReader();\r\n                const [mime] = file.type.split('/');\r\n\r\n                if (mime === 'image') {\r\n                    reader.addEventListener('load', () => {\r\n                        const url = reader.result;\r\n                        insertImage(editor, url as string);\r\n                    });\r\n\r\n                    reader.readAsDataURL(file);\r\n                }\r\n            }\r\n        } else if (isUrl(text) && /(apng|avif|gif|jpg|jpeg|jfif|png|svg)$/i.test(text)) {\r\n            insertImage(editor, text);\r\n        } else {\r\n            insertData(data);\r\n        }\r\n    }\r\n\r\n    return editor;\r\n}\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"\n}), 'AttachFile');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'Refresh');\n\nexports.default = _default;","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), 'GetApp');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z\"\n}), 'FileCopy');"],"sourceRoot":""}