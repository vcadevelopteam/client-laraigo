(this["webpackJsonpclient-laraigo"]=this["webpackJsonpclient-laraigo"]||[]).push([[62],{1418:function(e,t,a){"use strict";a.r(t);var i=a(3),c=a(24),n=a.n(c),l=a(39),o=a(26),r=a(1),s=a(20),d=a(0),u=a.n(d),b=a(25),v=a(40),j=a(94),O=a(83),p=a(48),m=a(7),f=a(779),h=a(15),x=a(169),g=a(780),y=a.n(g),w=a(122),N=a(8),S=a(205),D=a(778),C=a.n(D),E=a(910),I=a(44),_=a(776),q=a(51),R=a(450),k=a(314),A=a(156),T=a(245),P=a(101),z=a(257),F=a(171),V=a(16),L=a(937),$=a.n(L),M=a(830),U=a(1046),B=a(1366),H=a(923),G=a(850),Y=a(895),W=a(1249),X=a.n(W),K=a(998),Q=a(814),Z=a(1047),J=a(241),ee=a(1048),te=a(1146),ae=a(1044),ie=a(1045),ce=a(1049),ne=a(9),le=a(265),oe=a.n(le),re=a(824),se=a.n(re),de=a(315),ue=a(918),be=a(890),ve=a(891),je=a(807),Oe=a.n(je),pe=a(102),me=a(332),fe=a.n(me),he=a(254),xe=a(2),ge=Object(h.a)((function(e){return{head:{backgroundColor:"#7721ad",color:e.palette.common.white},body:{fontSize:14}}}))(ie.a),ye=Object(h.a)((function(e){return{}}))(ae.a);function we(e,t){return t&&e?(t/(e+1)).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"0.00"}function Ne(e,t){return t&&e?(t-t/(e+1)).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"0.00"}function Se(e){var t=function(e){return("0"+e).slice(-2)},a=e.getTimezoneOffset(),i=a<0?"+":"-";return a=Math.abs(a),new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,-1)+i+t(a/60|0)+":"+t(a%60)}var De=Object(x.a)((function(e){return{title:{fontSize:"22px",color:e.palette.text.primary},fieldView:{},container:{display:"flex",flexWrap:"wrap",gap:16},containerField:{borderRadius:e.spacing(2),flex:"0 0 300px",display:"flex",flexDirection:"column",flexWrap:"wrap",gap:16,border:"1px solid #e1e1e1",padding:e.spacing(2)},titleCard:{fontSize:16,fontWeight:"bold"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},buttoncomments:{padding:6,fontWeight:500,fontSize:"14px",textTransform:"initial"},text:{fontWeight:500,fontSize:15},imgContainer:{borderRadius:20,backgroundColor:"white",width:300,height:200,display:"flex",alignItems:"center",justifyContent:"center"},img:{paddingTop:10,height:"100%",width:"auto"},icon:{"&:hover":{cursor:"pointer",color:e.palette.primary.main}},containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},fieldsfilter:{width:220},transparent:{color:"transparent"},commentary:{fontStyle:"italic"},section:{fontWeight:"bold"}}})),Ce=Object(he.a)(fe.a)({"& label.Mui-focused":{color:"#7721ad"},"& .MuiInput-underline:after":{borderBottomColor:"#7721ad"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"#7721ad"}}}),Ee="IDCOSTPERPERIOD",Ie=function(e){var t=e.dataCorp,a=e.dataOrg,i=e.dataPaymentPlan,c=e.dataPlan,n=Object(v.c)(),l=Object(w.a)().t,o=De(),h=Object(b.b)((function(e){return e.main.execute})),x=Object(b.b)((function(e){return e.main})),g=Object(b.b)((function(e){return e.main.memoryTable})),y=Object(b.b)((function(e){return e.login.validateToken.user})),S=Object(d.useState)({billingplan:"",corpid:(null===y||void 0===y?void 0:y.corpid)||0,month:((new Date).getMonth()+1).toString().padStart(2,"0"),orgid:0,supportplan:"",year:String((new Date).getFullYear())}),D=Object(s.a)(S,2),C=D[0],E=D[1],_=Object(d.useState)(!1),q=Object(s.a)(_,2),R=q[0],k=q[1],A=Object(d.useState)({row:null,edit:!1}),T=Object(s.a)(A,2),P=T[0],z=T[1],F=Object(d.useState)("view-1"),V=Object(s.a)(F,2),L=V[0],$=V[1],U=Object(d.useState)(!1),B=Object(s.a)(U,2),H=B[0],G=B[1],Y=Object(d.useState)(!1),W=Object(s.a)(Y,2),X=W[0],K=W[1];function Q(){n(Object(I.d)(!0)),n(Object(O.g)(Object(m.Tb)(C)))}Object(d.useEffect)((function(){return Q(),n(Object(O.G)({id:Ee})),function(){n(Object(O.a)())}}),[]),Object(d.useEffect)((function(){x.mainData.loading||n(Object(I.d)(!1))}),[x]);var Z=u.a.useMemo((function(){return[{Header:l(N.a.corporation),accessor:"corpdesc"},{Header:l(N.a.partner),accessor:"partner"},{Header:l(N.a.organization),accessor:"orgdesc"},{Header:l(N.a.year),accessor:"year"},{Header:l(N.a.month),accessor:"month"},{Header:l(N.a.contractedplan),accessor:"billingplan"},{Header:l(N.a.supportplan),accessor:"supportplan"},{Header:l(N.a.taxableamount),accessor:"taxableamount",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.taxableamount;return Object(m.jb)(t||0)}},{Header:l(N.a.totalcharge),accessor:"totalcharge",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.totalcharge;return Object(m.jb)(t||0)}},{Header:l(N.a.uniquecontacts),accessor:"clientquantity",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.clientquantity;return Object(m.lb)(t||0)}},{Header:l(N.a.conversation_plural),accessor:"conversationquantity",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.conversationquantity;return Object(m.lb)(t||0)}},{Header:l(N.a.interaction_plural),accessor:"interactionquantity",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.interactionquantity;return Object(m.lb)(t||0)}},{Header:l(N.a.supervisor_plural),accessor:"supervisorquantity",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.supervisorquantity;return Object(m.lb)(t||0)}},{Header:l(N.a.agent_plural),accessor:"asesorquantity",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.asesorquantity;return Object(m.lb)(t||0)}}]}),[]),J=function(){return n(Object(O.g)(Object(m.Tb)(C)))};Object(d.useEffect)((function(){k(""===C.year)}),[C]),Object(d.useEffect)((function(){if(X)if(h.loading||h.error){if(h.error){var e=l(h.code||"error_unexpected_error",{module:l(N.a.billingplan).toLocaleLowerCase()});n(Object(I.e)({show:!0,severity:"error",message:e})),n(Object(I.d)(!1)),G(!1),K(!1)}}else H?(n(Object(I.e)({show:!0,severity:"success",message:l(N.a.successful_calculate)})),G(!1)):n(Object(I.e)({show:!0,severity:"success",message:l(N.a.successful_delete)})),J(),n(Object(I.d)(!1)),K(!1)}),[h,X,H]);return"view-1"===L?Object(xe.jsx)(d.Fragment,{children:Object(xe.jsx)(f.f,{columns:Z,onClickRow:function(e){$("view-2"),z({row:e,edit:!0})},ButtonsElement:function(){return Object(xe.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object(xe.jsx)(p.u,{label:l(N.a.year),style:{width:140},valueDefault:C.year,variant:"outlined",onChange:function(e){return E((function(t){return Object(r.a)(Object(r.a)({},t),{},{year:(null===e||void 0===e?void 0:e.value)||0})}))},data:m.O,optionDesc:"value",optionValue:"value"}),Object(xe.jsx)(p.q,{label:l(N.a.month),style:{width:214},valueDefault:C.month,variant:"outlined",onChange:function(e){return E((function(t){return Object(r.a)(Object(r.a)({},t),{},{month:e.map((function(e){return e.val})).join()})}))},data:m.N,uset:!0,prefixTranslation:"month_",optionDesc:"val",optionValue:"val"}),Object(xe.jsx)(p.u,{label:l(N.a.corporation),className:o.fieldsfilter,valueDefault:C.corpid,variant:"outlined",onChange:function(e){return E((function(t){return Object(r.a)(Object(r.a)({},t),{},{corpid:(null===e||void 0===e?void 0:e.corpid)||0,orgid:0})}))},data:t,optionDesc:"description",optionValue:"corpid",disabled:["ADMINISTRADOR","ADMINISTRADOR P","ADMINISTRADOR LIMADERMA"].includes((null===y||void 0===y?void 0:y.roledesc)||""),orderbylabel:!0}),Object(xe.jsx)(p.u,{label:l(N.a.organization),className:o.fieldsfilter,valueDefault:C.orgid,variant:"outlined",onChange:function(e){return E((function(t){return Object(r.a)(Object(r.a)({},t),{},{orgid:(null===e||void 0===e?void 0:e.orgid)||0})}))},data:a.filter((function(e){return e.corpid===C.corpid})),optionDesc:"orgdesc",optionValue:"orgid",orderbylabel:!0}),Object(xe.jsx)(p.u,{label:l(N.a.contractedplan),className:o.fieldsfilter,valueDefault:C.billingplan,variant:"outlined",onChange:function(e){return E((function(t){return Object(r.a)(Object(r.a)({},t),{},{billingplan:e?e.plan:""})}))},data:i,optionDesc:"plan",optionValue:"plan",orderbylabel:!0}),Object(xe.jsx)(p.u,{label:l(N.a.supportplan),className:o.fieldsfilter,valueDefault:C.supportplan,variant:"outlined",onChange:function(e){return E((function(t){return Object(r.a)(Object(r.a)({},t),{},{supportplan:e?e.description:""})}))},data:c,optionDesc:"description",optionValue:"description",orderbylabel:!0}),Object(xe.jsx)(j.a,{disabled:x.mainData.loading||R,variant:"contained",color:"primary",style:{width:120,backgroundColor:"#55BD84"},startIcon:Object(xe.jsx)(M.a,{style:{color:"white"}}),onClick:function(){return Q()},children:l(N.a.search)})]})},data:x.mainData.data,filterGeneral:!1,download:!0,loading:x.mainData.loading,register:!1,calculate:!0,handleCalculate:function(){n(Object(I.a)({visible:!0,question:l(N.a.confirmation_calculate),callback:function(){n(Object(O.c)(Object(m.Sb)(parseInt(C.year||"0"),parseInt(C.month||"0"),C.corpid,C.orgid))),n(Object(I.d)(!0)),K(!0),G(!0)}}))},pageSizeDefault:Ee===g.id?-1===g.pageSize?20:g.pageSize:20,initialPageIndex:Ee===g.id?-1===g.page?0:g.page:0,initialStateFilter:Ee===g.id?Object.entries(g.filters).map((function(e){var t=Object(s.a)(e,2);return{id:t[0],value:t[1]}})):void 0})}):"view-2"===L?Object(xe.jsx)(_e,{data:P,setViewSelected:$,fetchData:J,dataCorp:t,dataOrg:a,dataPaymentPlan:i,dataPlan:c}):null},_e=function(e){var t,a,i,c,n,l,f,h,x,g,D,E,k,A,T,P,z,F,V,L,$,M,B,H,G,Y,W=e.data,X=W.row,K=W.edit,Q=e.setViewSelected,Z=e.fetchData,J=e.dataPaymentPlan,ee=e.dataPlan,te=Object(v.c)(),ae=Object(w.a)().t,ie=De(),ce=Object(b.b)((function(e){return e.main.mainAux})),ne=Object(b.b)((function(e){return e.main.execute})),le=Object(b.b)((function(e){return e.main.multiData})),oe=Object(d.useState)([]),re=Object(s.a)(oe,2),se=re[0],de=re[1],ue=Object(d.useState)(!1),be=Object(s.a)(ue,2),ve=be[0],je=be[1],Oe=Object(d.useState)((null===X||void 0===X?void 0:X.channelcreateoverride)||!1),pe=Object(s.a)(Oe,2),me=pe[0],fe=pe[1],he=Object(d.useState)((null===X||void 0===X?void 0:X.usercreateoverride)||!1),ge=Object(s.a)(he,2),ye=ge[0],we=ge[1],Ne=Object(d.useState)([]),Se=Object(s.a)(Ne,2),Ce=Se[0],Ee=Se[1],Ie=Object(d.useState)([]),_e=Object(s.a)(Ie,2),ke=_e[0],Ae=_e[1],Te=Object(d.useState)([]),Pe=Object(s.a)(Te,2),ze=Pe[0],Fe=Pe[1],Ve=Object(d.useState)(0),Le=Object(s.a)(Ve,2),$e=Le[0],Me=Le[1],Ue=Object(d.useState)(!1),Be=Object(s.a)(Ue,2),He=Be[0],Ge=Be[1],Ye=Object(d.useState)(!1),We=Object(s.a)(Ye,2),Xe=We[0],Ke=We[1],Qe=Object(d.useState)(!1),Ze=Object(s.a)(Qe,2),Je=Ze[0],et=Ze[1],tt=[{id:"view-1",name:ae(N.a.costperperiod)},{id:"view-2",name:ae(N.a.costperperioddetail)}];Object(d.useEffect)((function(){if(!ce.loading&&!ce.error){var e;Ae(ce.data);var t=[],a=0;null===(e=ce.data)||void 0===e||e.forEach((function(){t=[].concat(Object(o.a)(t),[{index:a,allOk:!0}]),a++})),de(t)}}),[ce]),Object(d.useEffect)((function(){Xe&&le.data[0]&&le.data[0].success&&le.data[0].data&&le.data[0].data[0]&&le.data[0].data[0].type&&Ee(le.data[0]&&le.data[0].success?le.data[0].data:[])}),[le.data,Xe]);var at=function(){return te(Object(O.h)(Object(m.k)({corpid:null===X||void 0===X?void 0:X.corpid,orgid:(null===X||void 0===X?void 0:X.orgid)||0,year:null===X||void 0===X?void 0:X.year,month:null===X||void 0===X?void 0:X.month,provider:"",type:"",plan:""})))};Object(d.useEffect)((function(){(null===X||void 0===X?void 0:X.year)&&(null===X||void 0===X?void 0:X.month)&&(te(Object(O.p)([Object(m.f)({year:null===X||void 0===X?void 0:X.year,month:null===X||void 0===X?void 0:X.month,provider:"",type:"",plan:""})])),Ke(!0)),(null===X||void 0===X?void 0:X.invoicestatus)&&(null===X||void 0===X?void 0:X.paymentstatus)?"INVOICED"!==(null===X||void 0===X?void 0:X.invoicestatus)&&"PAID"!==(null===X||void 0===X?void 0:X.paymentstatus)&&je(!0):je(!0),at()}),[]);var it=Object(S.d)({defaultValues:{additionalservicefee1:(null===X||void 0===X?void 0:X.additionalservicefee1)||0,additionalservicefee2:(null===X||void 0===X?void 0:X.additionalservicefee2)||0,additionalservicefee3:(null===X||void 0===X?void 0:X.additionalservicefee3)||0,additionalservicename1:(null===X||void 0===X?void 0:X.additionalservicename1)||"",additionalservicename2:(null===X||void 0===X?void 0:X.additionalservicename2)||"",additionalservicename3:(null===X||void 0===X?void 0:X.additionalservicename3)||"",asesorquantity:(null===X||void 0===X?void 0:X.asesorquantity)||0,basicfee:(null===X||void 0===X?void 0:X.basicfee)||0,billingplan:(null===X||void 0===X?void 0:X.billingplan)||"",callchannelcost:(null===X||void 0===X?void 0:X.callchannelcost)||0,callothercost:(null===X||void 0===X?void 0:X.callothercost)||0,callphonecost:(null===X||void 0===X?void 0:X.callphonecost)||0,callpubliccost:(null===X||void 0===X?void 0:X.callpubliccost)||0,callrecordingcost:(null===X||void 0===X?void 0:X.callrecordingcost)||0,callvoipcost:(null===X||void 0===X?void 0:X.callvoipcost)||0,channelcharge:(null===X||void 0===X?void 0:X.channelcharge)||0,channelcreateoverride:(null===X||void 0===X?void 0:X.channelcreateoverride)||!1,channelfreequantity:(null===X||void 0===X?void 0:X.channelfreequantity)||0,channelothercharge:(null===X||void 0===X?void 0:X.channelothercharge)||0,channelotherfee:(null===X||void 0===X?void 0:X.channelotherfee)||0,channelotherquantity:(null===X||void 0===X?void 0:X.channelotherquantity)||0,channelwhatsappcharge:(null===X||void 0===X?void 0:X.channelwhatsappcharge)||0,channelwhatsappfee:(null===X||void 0===X?void 0:X.channelwhatsappfee)||0,channelwhatsappquantity:(null===X||void 0===X?void 0:X.channelwhatsappquantity)||0,clientadditionalcharge:(null===X||void 0===X?void 0:X.clientadditionalcharge)||0,clientadditionalfee:(null===X||void 0===X?void 0:X.clientadditionalfee)||0,clientfreequantity:(null===X||void 0===X?void 0:X.clientfreequantity)||0,clientquantity:(null===X||void 0===X?void 0:X.clientquantity)||0,conversationclientwhatcharge:(null===X||void 0===X?void 0:X.conversationclientwhatcharge)||0,conversationclientwhatfee:(null===X||void 0===X?void 0:X.conversationclientwhatfee)||0,conversationclientwhatfreequantity:(null===X||void 0===X?void 0:X.conversationclientwhatfreequantity)||0,conversationclientwhatquantity:(null===X||void 0===X?void 0:X.conversationclientwhatquantity)||0,conversationcompanywhatcharge:(null===X||void 0===X?void 0:X.conversationcompanywhatcharge)||0,conversationcompanywhatfee:(null===X||void 0===X?void 0:X.conversationcompanywhatfee)||0,conversationcompanywhatfreequantity:(null===X||void 0===X?void 0:X.conversationcompanywhatfreequantity)||0,conversationcompanywhatquantity:(null===X||void 0===X?void 0:X.conversationcompanywhatquantity)||0,conversationquantity:(null===X||void 0===X?void 0:X.conversationquantity)||0,conversationwhatcharge:(null===X||void 0===X?void 0:X.conversationwhatcharge)||0,corpdesc:(null===X||void 0===X?void 0:X.corpdesc)||"",corpid:(null===X||void 0===X?void 0:X.corpid)||0,force:(null===X||void 0===X?void 0:X.force)||!0,freewhatsappchannel:(null===X||void 0===X?void 0:X.freewhatsappchannel)||0,freewhatsappconversations:(null===X||void 0===X?void 0:X.freewhatsappconversations)||0,interactionquantity:(null===X||void 0===X?void 0:X.interactionquantity)||0,mailcost:(null===X||void 0===X?void 0:X.mailcost)||0,mailquantity:(null===X||void 0===X?void 0:X.mailquantity)||0,minimummailquantity:(null===X||void 0===X?void 0:X.minimummailquantity)||0,minimumsmsquantity:(null===X||void 0===X?void 0:X.minimumsmsquantity)||0,month:(null===X||void 0===X?void 0:X.month)||(new Date).getMonth()+1,orgdesc:(null===X||void 0===X?void 0:X.orgdesc)||"",orgid:(null===X||void 0===X?void 0:X.orgid)||0,smscost:(null===X||void 0===X?void 0:X.smscost)||0,smsquantity:(null===X||void 0===X?void 0:X.smsquantity)||0,supervisorquantity:(null===X||void 0===X?void 0:X.supervisorquantity)||0,supportbasicfee:(null===X||void 0===X?void 0:X.supportbasicfee)||0,supportplan:(null===X||void 0===X?void 0:X.supportplan)||"",totalcharge:(null===X||void 0===X?void 0:X.totalcharge)||0,unitepricepermail:(null===X||void 0===X?void 0:X.unitepricepermail)||0,unitpricepersms:(null===X||void 0===X?void 0:X.unitpricepersms)||0,useradditionalcharge:(null===X||void 0===X?void 0:X.useradditionalcharge)||0,useradditionalfee:(null===X||void 0===X?void 0:X.useradditionalfee)||0,usercreateoverride:(null===X||void 0===X?void 0:X.usercreateoverride)||!1,userfreequantity:(null===X||void 0===X?void 0:X.userfreequantity)||0,userquantity:(null===X||void 0===X?void 0:X.userquantity)||0,vcacomissionperconversation:(null===X||void 0===X?void 0:X.vcacomissionperconversation)||0,vcacomissionperhsm:(null===X||void 0===X?void 0:X.vcacomissionperhsm)||0,vcacomissionpermail:(null===X||void 0===X?void 0:X.vcacomissionpermail)||0,vcacomissionpersms:(null===X||void 0===X?void 0:X.vcacomissionpersms)||0,vcacomissionpervoicechannel:(null===X||void 0===X?void 0:X.vcacomissionpervoicechannel)||0,voximplantcallothercost:(null===X||void 0===X?void 0:X.voximplantcallothercost)||0,voximplantcallothervcacost:(null===X||void 0===X?void 0:X.voximplantcallothervcacost)||0,voximplantcallphonecost:(null===X||void 0===X?void 0:X.voximplantcallphonecost)||0,voximplantcallphonevcacost:(null===X||void 0===X?void 0:X.voximplantcallphonevcacost)||0,voximplantcallpubliccost:(null===X||void 0===X?void 0:X.voximplantcallpubliccost)||0,voximplantcallpublicvcacost:(null===X||void 0===X?void 0:X.voximplantcallpublicvcacost)||0,voximplantcallrecordingcost:(null===X||void 0===X?void 0:X.voximplantcallrecordingcost)||0,voximplantcallrecordingvcacost:(null===X||void 0===X?void 0:X.voximplantcallrecordingvcacost)||0,voximplantcallvoipcost:(null===X||void 0===X?void 0:X.voximplantcallvoipcost)||0,voximplantcallvoipvcacost:(null===X||void 0===X?void 0:X.voximplantcallvoipvcacost)||0,year:(null===X||void 0===X?void 0:X.year)||(new Date).getFullYear()}}),ct=it.register,nt=it.handleSubmit,lt=it.setValue,ot=it.getValues,rt=it.formState.errors;u.a.useEffect((function(){ct("additionalservicefee1"),ct("additionalservicefee2"),ct("additionalservicefee3"),ct("additionalservicename1"),ct("additionalservicename2"),ct("additionalservicename3"),ct("basicfee",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("billingplan",{validate:function(e){return e&&e.length||ae(N.a.field_required)}}),ct("callchannelcost"),ct("callothercost"),ct("callphonecost"),ct("callpubliccost"),ct("callrecordingcost"),ct("callvoipcost"),ct("channelcreateoverride"),ct("channelfreequantity",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("channelotherfee",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("channelwhatsappfee",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("clientadditionalfee",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("clientfreequantity",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("conversationclientwhatfreequantity"),ct("conversationcompanywhatfreequantity"),ct("corpid"),ct("force"),ct("freewhatsappchannel",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("freewhatsappconversations"),ct("mailcost"),ct("mailquantity"),ct("minimummailquantity",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("minimumsmsquantity",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("month"),ct("orgid"),ct("smscost"),ct("smsquantity"),ct("supportbasicfee",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("supportplan",{validate:function(e){return e&&e.length||ae(N.a.field_required)}}),ct("totalcharge"),ct("unitepricepermail"),ct("unitpricepersms"),ct("useradditionalfee",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("usercreateoverride"),ct("userfreequantity",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("vcacomissionperconversation"),ct("vcacomissionperhsm",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("vcacomissionpermail"),ct("vcacomissionpersms"),ct("vcacomissionpervoicechannel",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||ae(N.a.field_required)}}),ct("voximplantcallothercost"),ct("voximplantcallothervcacost"),ct("voximplantcallphonecost"),ct("voximplantcallphonevcacost"),ct("voximplantcallpubliccost"),ct("voximplantcallpublicvcacost"),ct("voximplantcallrecordingcost"),ct("voximplantcallrecordingvcacost"),ct("voximplantcallvoipcost"),ct("voximplantcallvoipvcacost"),ct("year")}),[K,ct]),Object(d.useEffect)((function(){Je&&(ne.loading||ne.error?ne.error&&(te(Object(I.e)({show:!0,severity:"error",message:ae(ne.code||"error_unexpected_error",{module:ae(N.a.billingplan).toLocaleLowerCase()})})),et(!1),te(Object(I.d)(!1))):(te(Object(I.e)({show:!0,severity:"success",message:ae(X?N.a.successful_edit:N.a.successful_register)})),Z&&Z(),at&&at(),te(Object(I.d)(!1)),Q("view-1")))}),[ne,Je]),Object(d.useEffect)((function(){if(se.length===ke.length&&He){var e;if(Ge(!1),se.some((function(e){return!e.allOk})))return;if(ke.length>0)if(((null===(e=ke.filter((function(e,t,a){return t===a.findIndex((function(t){return t.type===e.type&&t.provider===e.provider&&"ACTIVO"===t.status}))})))||void 0===e?void 0:e.length)||0)<ke.length)return void te(Object(I.e)({show:!0,severity:"error",message:ae(N.a.aiduplicatealert)}));var t=ot();te(Object(I.a)({visible:!0,question:ae(N.a.confirmation_save),callback:function(){var e=[].concat(Object(o.a)(ke),Object(o.a)(ze));e.length>0&&e.map((function(e){return e.corpid=(null===X||void 0===X?void 0:X.corpid)||0,e.orgid=(null===X||void 0===X?void 0:X.orgid)||0,e})),e.length>0?te(Object(O.c)({header:Object(m.l)(t),detail:[Object(m.j)((null===X||void 0===X?void 0:X.corpid)||0,(null===X||void 0===X?void 0:X.orgid)||0,e)]},!0)):te(Object(O.c)(Object(m.l)(t))),te(Object(I.d)(!0)),et(!0)}}))}}),[se,He]);var st=nt((function(e){Ge(!0),7===$e&&de([])})),dt=function(e,t){e&&"INSERT"!==e.operation&&Fe((function(t){return[].concat(Object(o.a)(t),[Object(r.a)(Object(r.a)({},e),{},{operation:"DELETE",status:"ELIMINADO"})])}));var a=ke.filter((function(e,a){return a!==t}));Ae(a)};return Object(xe.jsx)("div",{style:{width:"100%"},children:Object(xe.jsxs)("form",{onSubmit:st,children:[Object(xe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(xe.jsxs)("div",{children:[Object(xe.jsx)(p.L,{breadcrumbs:tt,handleClick:function(e){Q(e),Z()}}),Object(xe.jsx)(p.R,{title:X?"".concat(X.corpdesc," - ").concat(X.orgdesc):ae(N.a.neworganization)})]}),Object(xe.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(xe.jsx)(j.a,{variant:"contained",type:"button",color:"primary",startIcon:Object(xe.jsx)(C.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){Q("view-1"),Z()},children:ae(N.a.back)}),ve&&Object(xe.jsx)(j.a,{className:ie.button,variant:"contained",color:"primary",type:"submit",startIcon:Object(xe.jsx)(y.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:ae(N.a.save)})]})]}),Object(xe.jsxs)(_.a,{value:$e,indicatorColor:"primary",variant:"fullWidth",style:{borderBottom:"1px solid #EBEAED",backgroundColor:"#FFF",marginTop:8},textColor:"primary",onChange:function(e,t){return Me(t)},children:[Object(xe.jsx)(p.b,{label:ae(N.a.generalinformation)}),Object(xe.jsx)(p.b,{label:ae(N.a.agents_plural)}),Object(xe.jsx)(p.b,{label:ae(N.a.channel_plural)}),Object(xe.jsx)(p.b,{label:ae(N.a.conversation_plural)}),Object(xe.jsx)(p.b,{label:ae(N.a.contact_plural)}),Object(xe.jsx)(p.b,{label:ae(N.a.messaging)}),Object(xe.jsx)(p.b,{label:ae(N.a.billingperiodvoice)}),Object(xe.jsx)(p.b,{label:ae(N.a.billingsetup_ai)}),Object(xe.jsx)(p.b,{label:"Extras"})]}),0===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.corporation),value:ot("corpdesc")}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.organization),value:ot("orgdesc")})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.year),value:ot("year")}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.month),value:ot("month")})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.u,{label:ae(N.a.contractedplan),className:"col-6",valueDefault:ot("billingplan"),variant:"outlined",onChange:function(e){return lt("billingplan",null===e||void 0===e?void 0:e.plan)},data:J,error:null===rt||void 0===rt||null===(t=rt.billingplan)||void 0===t?void 0:t.message,optionDesc:"plan",optionValue:"plan",orderbylabel:!0}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.contractedplan),value:ot("billingplan")}),ve?Object(xe.jsx)(p.u,{label:ae(N.a.contractedsupportplan),className:"col-6",valueDefault:ot("supportplan"),variant:"outlined",onChange:function(e){return lt("supportplan",null===e||void 0===e?void 0:e.description)},data:ee,error:null===rt||void 0===rt||null===(a=rt.supportplan)||void 0===a?void 0:a.message,optionDesc:"description",optionValue:"description",orderbylabel:!0}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.contractedsupportplan),value:ot("supportplan")})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.costbasedonthecontractedplan),onChange:function(e){return lt("basicfee",e)},valueDefault:ot("basicfee"),error:null===rt||void 0===rt||null===(i=rt.basicfee)||void 0===i?void 0:i.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.costbasedonthecontractedplan),value:ot("basicfee")}),ve?Object(xe.jsx)(p.l,{label:ae(N.a.costbasedonthesupportplan),onChange:function(e){return lt("supportbasicfee",e)},valueDefault:ot("supportbasicfee"),error:null===rt||void 0===rt||null===(c=rt.supportbasicfee)||void 0===c?void 0:c.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.costbasedonthesupportplan),value:Object(m.jb)(ot("supportbasicfee")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.totalcharge),value:Object(m.jb)(ot("totalcharge")||0)})})]}),1===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.numberofagentshired),onChange:function(e){return lt("userfreequantity",e)},valueDefault:ot("userfreequantity"),error:null===rt||void 0===rt||null===(n=rt.userfreequantity)||void 0===n?void 0:n.message,type:"number",className:"col-6"}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.numberofagentshired),value:String(ot("userfreequantity"))}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.numberofactiveadvisers),value:String(ot("userquantity"))})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.numberofactivesupervisors),value:String(ot("supervisorquantity"))}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.numberofactiveagents),value:String(ot("asesorquantity"))})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.useradditionalfee),onChange:function(e){return lt("useradditionalfee",e)},valueDefault:ot("useradditionalfee"),error:null===rt||void 0===rt||null===(l=rt.useradditionalfee)||void 0===l?void 0:l.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.useradditionalfee),value:Object(m.jb)(ot("useradditionalfee")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.useradditionalcharge),value:Object(m.jb)(ot("useradditionalcharge")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsxs)("div",{className:"col-6",style:{paddingBottom:"3px"},children:[Object(xe.jsx)(q.a,{fontWeight:500,lineHeight:"18px",fontSize:14,mb:2,color:"textPrimary",children:ae(N.a.allowuseroverride)}),Object(xe.jsx)(R.a,{style:{paddingLeft:10},control:Object(xe.jsx)(p.z,{disabled:!1===ve,checked:ye,onChange:function(e){we(e.target.checked),lt("usercreateoverride",e.target.checked)}}),label:""})]})})]}),2===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.channelfreequantity),onChange:function(e){return lt("channelfreequantity",e)},valueDefault:ot("channelfreequantity"),error:null===rt||void 0===rt||null===(f=rt.channelfreequantity)||void 0===f?void 0:f.message,type:"number",className:"col-6"}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.channelfreequantity),value:ot("channelfreequantity")}),ve?Object(xe.jsx)(p.l,{label:ae(N.a.contractedplanchannelotherfee),onChange:function(e){return lt("channelotherfee",e)},valueDefault:ot("channelotherfee"),error:null===rt||void 0===rt||null===(h=rt.channelotherfee)||void 0===h?void 0:h.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.contractedplanchannelotherfee),value:Object(m.kb)(ot("channelotherfee")||0)})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.contractedplanfreewhatsappchannel),onChange:function(e){return lt("freewhatsappchannel",e)},valueDefault:ot("freewhatsappchannel"),error:null===rt||void 0===rt||null===(x=rt.freewhatsappchannel)||void 0===x?void 0:x.message,type:"number",className:"col-6"}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.contractedplanfreewhatsappchannel),value:ot("freewhatsappchannel").toString()}),ve?Object(xe.jsx)(p.l,{label:ae(N.a.channelwhatsappfee),onChange:function(e){return lt("channelwhatsappfee",e)},valueDefault:ot("channelwhatsappfee"),error:null===rt||void 0===rt||null===(g=rt.channelwhatsappfee)||void 0===g?void 0:g.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.channelwhatsappfee),value:Object(m.kb)(ot("channelwhatsappfee")||0)})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.channelotherquantity),value:ot("channelotherquantity").toString()}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.channelwhatsappquantity),value:ot("channelwhatsappquantity").toString()})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.channelcharge),value:Object(m.jb)(ot("channelcharge")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.reportfreeconversations),value:ot("freewhatsappconversations").toString()})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsxs)("div",{className:"col-6",style:{paddingBottom:"3px"},children:[Object(xe.jsx)(q.a,{fontWeight:500,lineHeight:"18px",fontSize:14,mb:2,color:"textPrimary",children:ae(N.a.allowchanneloverride)}),Object(xe.jsx)(R.a,{style:{paddingLeft:10},control:Object(xe.jsx)(p.z,{disabled:!1===ve,checked:me,onChange:function(e){fe(e.target.checked),lt("channelcreateoverride",e.target.checked)}}),label:""})]})})]}),3===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.conversationquantity),value:ot("conversationquantity").toString()}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.interactionquantity),value:ot("interactionquantity").toString()})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.conversationclientwhatquantity),value:ot("conversationclientwhatquantity").toString()}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.conversationclientwhatfreequantity),value:ot("conversationclientwhatfreequantity").toString()})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.conversationclientwhatcharge),value:Object(m.jb)(ot("conversationclientwhatcharge")||0)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.conversationcompanywhatquantity),value:ot("conversationcompanywhatquantity").toString()}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.conversationcompanywhatfreequantity),value:ot("conversationcompanywhatfreequantity").toString()})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.conversationcompanywhatcharge),value:Object(m.jb)(ot("conversationcompanywhatcharge")||0)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve&&Object(xe.jsx)(p.l,{label:ae(N.a.vcacomissionperhsm),onChange:function(e){return lt("vcacomissionperhsm",e)},valueDefault:ot("vcacomissionperhsm"),error:null===rt||void 0===rt||null===(D=rt.vcacomissionperhsm)||void 0===D?void 0:D.message,type:"number",className:"col-6",inputProps:{step:"any"}}),!ve&&Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.vcacomissionperhsm),value:Object(m.kb)(ot("vcacomissionperhsm")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.conversationwhatcharge),value:Object(m.jb)(ot("conversationwhatcharge")||0)})]})]}),4===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.clientfreequantity),onChange:function(e){return lt("clientfreequantity",e)},valueDefault:ot("clientfreequantity"),error:null===rt||void 0===rt||null===(E=rt.clientfreequantity)||void 0===E?void 0:E.message,type:"number",className:"col-6"}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.clientfreequantity),value:ot("clientfreequantity").toString()}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.clientquantity),value:ot("clientquantity").toString()})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.clientadditionalfee),onChange:function(e){return lt("clientadditionalfee",e)},valueDefault:ot("clientadditionalfee"),error:null===rt||void 0===rt||null===(k=rt.clientadditionalfee)||void 0===k?void 0:k.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.clientadditionalfee),value:Object(m.kb)(ot("clientadditionalfee")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.clientadditionalcharge),value:Object(m.jb)(ot("clientadditionalcharge")||0)})]})]}),5===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.unitpricepersms),onChange:function(e){return lt("unitpricepersms",e)},valueDefault:ot("unitpricepersms"),error:null===rt||void 0===rt||null===(A=rt.unitpricepersms)||void 0===A?void 0:A.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.unitpricepersms),value:Object(m.kb)(ot("unitpricepersms")||0)}),ve?Object(xe.jsx)(p.l,{label:ae(N.a.vcacomissionpersms),onChange:function(e){return lt("vcacomissionpersms",e)},valueDefault:ot("vcacomissionpersms"),error:null===rt||void 0===rt||null===(T=rt.vcacomissionpersms)||void 0===T?void 0:T.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.vcacomissionpersms),value:Object(m.kb)(ot("vcacomissionpersms")||0)})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.smsquantity),value:Object(m.lb)(ot("smsquantity")||0)}),ve?Object(xe.jsx)(p.l,{label:ae(N.a.minimumsmsquantity),onChange:function(e){return lt("minimumsmsquantity",e)},valueDefault:ot("minimumsmsquantity"),error:null===rt||void 0===rt||null===(P=rt.minimumsmsquantity)||void 0===P?void 0:P.message,type:"number",className:"col-6"}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.minimumsmsquantity),value:Object(m.kb)(ot("minimumsmsquantity")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.smscost),value:Object(m.jb)(ot("smscost")||0)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:ae(N.a.unitepricepermail),onChange:function(e){return lt("unitepricepermail",e)},valueDefault:ot("unitepricepermail"),error:null===rt||void 0===rt||null===(z=rt.unitepricepermail)||void 0===z?void 0:z.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.unitepricepermail),value:Object(m.kb)(ot("unitepricepermail")||0)}),ve?Object(xe.jsx)(p.l,{label:ae(N.a.vcacomissionpermail),onChange:function(e){return lt("vcacomissionpermail",e)},valueDefault:ot("vcacomissionpermail"),error:null===rt||void 0===rt||null===(F=rt.vcacomissionpermail)||void 0===F?void 0:F.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.vcacomissionpermail),value:Object(m.kb)(ot("vcacomissionpermail")||0)})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.mailquantity),value:Object(m.lb)(ot("mailquantity")||0)}),ve?Object(xe.jsx)(p.l,{label:ae(N.a.minimummailquantity),onChange:function(e){return lt("minimummailquantity",e)},valueDefault:ot("minimummailquantity"),error:null===rt||void 0===rt||null===(V=rt.minimummailquantity)||void 0===V?void 0:V.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.minimummailquantity),value:Object(m.kb)(ot("minimummailquantity")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.mailcost),value:Object(m.jb)(ot("mailcost")||0)})})]}),6===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsx)("div",{className:"row-zyx",children:ve?Object(xe.jsx)(p.l,{label:ae(N.a.vcacomissionpervoicechannel),onChange:function(e){return lt("vcacomissionpervoicechannel",e)},valueDefault:ot("vcacomissionpervoicechannel"),error:null===rt||void 0===rt||null===(L=rt.vcacomissionpervoicechannel)||void 0===L?void 0:L.message,type:"number",className:"col-12",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.vcacomissionpervoicechannel),value:Object(m.jb)(ot("vcacomissionpervoicechannel")||0)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallphonecost),value:Object(m.jb)(ot("voximplantcallphonecost")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallphonevcacost),value:Object(m.jb)(ot("voximplantcallphonevcacost")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.callphonecost),value:Object(m.jb)(ot("callphonecost")||0)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallpubliccost),value:Object(m.jb)(ot("voximplantcallpubliccost")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallpublicvcacost),value:Object(m.jb)(ot("voximplantcallpublicvcacost")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.callpubliccost),value:Object(m.jb)(ot("callpubliccost")||0)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallvoipcost),value:Object(m.jb)(ot("voximplantcallvoipcost")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallvoipvcacost),value:Object(m.jb)(ot("voximplantcallvoipvcacost")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.callvoipcost),value:Object(m.jb)(ot("callvoipcost")||0)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallrecordingcost),value:Object(m.jb)(ot("voximplantcallrecordingcost")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallrecordingvcacost),value:Object(m.jb)(ot("voximplantcallrecordingvcacost")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.callrecordingcost),value:Object(m.jb)(ot("callrecordingcost")||0)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallothercost),value:Object(m.jb)(ot("voximplantcallothercost")||0)}),Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.voximplantcallothervcacost),value:Object(m.jb)(ot("voximplantcallothervcacost")||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.callothercost),value:Object(m.jb)(ot("callothercost")||0)})}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:ae(N.a.callchannelcost),value:Object(m.jb)(ot("callchannelcost")||0)})})]}),7===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsxs)("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"space-between"},children:[Object(xe.jsxs)("div",{className:ie.title,children:[ae(N.a.aitotalcost),": ",Object(m.jb)((null===X||void 0===X?void 0:X.totalaicost)||0)]}),Object(xe.jsx)("div",{children:Object(xe.jsx)(j.a,{className:ie.button,variant:"contained",color:"primary",disabled:ce.loading||!ve,startIcon:Object(xe.jsx)(U.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},onClick:function(){Ae((function(e){return[].concat(Object(o.a)(e),[{id:0,corpid:(null===X||void 0===X?void 0:X.corpid)||0,orgid:(null===X||void 0===X?void 0:X.orgid)||0,year:(null===X||void 0===X?void 0:X.year)||0,month:(null===X||void 0===X?void 0:X.month)||0,aicost:0,aiquantity:0,operation:"INSERT",status:"ACTIVO"}])}))},children:ae(N.a.addnewai)})})]}),ce.loading?Object(xe.jsx)(Re,{}):ke.map((function(e,t){return Object(xe.jsx)(qe,{index:t,data:{row:e,edit:ve},updateRecords:Ae,preData:ke,triggerSave:He,handleDelete:dt,setAllIndex:de,intelligenceData:Ce},"ai-".concat(null===e||void 0===e?void 0:e.provider,"-").concat(null===e||void 0===e?void 0:e.typeprovider,"-").concat(1e3*t))}))]}),8===$e&&Object(xe.jsxs)("div",{className:ie.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:"".concat(ae(N.a.additionalservicename)," 1"),onChange:function(e){return lt("additionalservicename1",e)},valueDefault:ot("additionalservicename1"),error:null===rt||void 0===rt||null===($=rt.additionalservicename1)||void 0===$?void 0:$.message,className:"col-6"}):Object(xe.jsx)(p.v,{className:"col-6",label:"".concat(ae(N.a.additionalservicename)," 1"),value:ot("additionalservicename1")}),ve?Object(xe.jsx)(p.l,{label:"".concat(ae(N.a.additionalservicefee)," 1"),onChange:function(e){return lt("additionalservicefee1",e)},valueDefault:ot("additionalservicefee1"),error:null===rt||void 0===rt||null===(M=rt.additionalservicefee1)||void 0===M?void 0:M.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:"".concat(ae(N.a.additionalservicefee)," 1"),value:Object(m.kb)(ot("additionalservicefee1")||0)})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:"".concat(ae(N.a.additionalservicename)," 2"),onChange:function(e){return lt("additionalservicename2",e)},valueDefault:ot("additionalservicename2"),error:null===rt||void 0===rt||null===(B=rt.additionalservicename2)||void 0===B?void 0:B.message,className:"col-6"}):Object(xe.jsx)(p.v,{className:"col-6",label:"".concat(ae(N.a.additionalservicename)," 2"),value:ot("additionalservicename2")}),ve?Object(xe.jsx)(p.l,{label:"".concat(ae(N.a.additionalservicefee)," 2"),onChange:function(e){return lt("additionalservicefee2",e)},valueDefault:ot("additionalservicefee2"),error:null===rt||void 0===rt||null===(H=rt.additionalservicefee2)||void 0===H?void 0:H.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:"".concat(ae(N.a.additionalservicefee)," 2"),value:Object(m.kb)(ot("additionalservicefee2")||0)})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[ve?Object(xe.jsx)(p.l,{label:"".concat(ae(N.a.additionalservicename)," 3"),onChange:function(e){return lt("additionalservicename3",e)},valueDefault:ot("additionalservicename3"),error:null===rt||void 0===rt||null===(G=rt.additionalservicename3)||void 0===G?void 0:G.message,className:"col-6"}):Object(xe.jsx)(p.v,{className:"col-6",label:"".concat(ae(N.a.additionalservicename)," 3"),value:ot("additionalservicename3")}),ve?Object(xe.jsx)(p.l,{label:"".concat(ae(N.a.additionalservicefee)," 3"),onChange:function(e){return lt("additionalservicefee3",e)},valueDefault:ot("additionalservicefee3"),error:null===rt||void 0===rt||null===(Y=rt.additionalservicefee3)||void 0===Y?void 0:Y.message,type:"number",className:"col-6",inputProps:{step:"any"}}):Object(xe.jsx)(p.v,{className:"col-6",label:"".concat(ae(N.a.additionalservicefee)," 3"),value:Object(m.kb)(ot("additionalservicefee3")||0)})]})]})]})})},qe=function(e){var t,a,c,s,u,b,v,O,f,h,x=e.index,g=e.data,y=g.row,D=g.edit,C=e.updateRecords,E=e.preData,I=e.triggerSave,_=e.setAllIndex,q=e.handleDelete,R=e.intelligenceData,k=Object(w.a)().t,A=Object(S.d)(),T=A.register,P=A.handleSubmit,z=A.setValue,F=A.getValues,V=A.trigger,L=A.formState.errors,$=A.reset;function M(e,t){C&&C((function(a,c){return a[x]=Object(r.a)(Object(r.a)({},a[x]),{},Object(i.a)({},e,t)),a}))}Object(d.useEffect)((function(){I&&Object(l.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:t=e.sent,a=F(),t&&C&&C((function(e,t){return e[x]=Object(r.a)(Object(r.a)({},a),{},{operation:"INSERT"===e[x].operation?"INSERT":"UPDATE"}),e})),_((function(e){return[].concat(Object(o.a)(e),[{index:x,allOk:t}])}));case 6:case"end":return e.stop()}}),e)})))()}),[I]),Object(d.useEffect)((function(){$({id:y?y.id:0,corpid:y?y.corpid:0,orgid:y?y.orgid:0,year:y?y.year:0,month:y?y.month:0,provider:y?y.provider:"",measureunit:y?y.measureunit:"",charlimit:y?y.charlimit:0,plan:y?y.plan:"",freeinteractions:y?y.freeinteractions:0,basicfee:y?y.basicfee:0,additionalfee:y?y.additionalfee:0,description:y?y.description:"",aiquantity:y?y.aiquantity:0,aicost:y?y.aicost:0,status:y?y.status:"ACTIVO",type:y?y.type:"",operation:y?"UPDATE":"INSERT"}),T("id"),T("corpid"),T("orgid"),T("year"),T("month"),T("provider",{validate:function(e){return e&&e.length||k(N.a.field_required)}}),T("measureunit"),T("charlimit",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||k(N.a.field_required)}}),T("plan",{validate:function(e){return e&&e.length||k(N.a.field_required)}}),T("freeinteractions",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||k(N.a.field_required)}}),T("basicfee",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||k(N.a.field_required)}}),T("additionalfee",{validate:function(e){return(e||String(e))&&parseFloat(String(e))>=0||k(N.a.field_required)}}),T("description"),T("aiquantity"),T("aicost"),T("status"),T("type",{validate:function(e){return e&&e.length||k(N.a.field_required)}}),T("operation")}),[E]);var U=P((function(e){y?C&&C((function(t){return t.map((function(t){return t.orgid===y?Object(r.a)(Object(r.a)(Object(r.a)({},t),e),{},{operation:t.operation||"UPDATE"}):t}))})):C&&C((function(t){return[].concat(Object(o.a)(t),[Object(r.a)(Object(r.a)({},e),{},{operation:"INSERT"})])}))}));return Object(xe.jsxs)(ue.a,{defaultExpanded:0===(null===y||void 0===y?void 0:y.id),style:{marginBottom:"8px"},children:[Object(xe.jsx)(be.a,{expandIcon:Object(xe.jsx)(Oe.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(xe.jsx)(pe.a,{children:(null===y||void 0===y?void 0:y.type)?"".concat(y.type," - ").concat(y.provider," (").concat(y.plan,")"):k(N.a.newai)})}),Object(xe.jsx)(ve.a,{children:Object(xe.jsxs)("form",{onSubmit:U,style:{width:"100%"},children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.u,{label:k(N.a.aiservice),className:"col-6",valueDefault:"".concat(F("type")," - ").concat(F("provider")," (").concat(F("plan"),")"),onChange:function(e){z("provider",(null===e||void 0===e?void 0:e.provider)||""),z("measureunit",(null===e||void 0===e?void 0:e.measureunit)||""),z("charlimit",(null===e||void 0===e?void 0:e.charlimit)||0),z("plan",(null===e||void 0===e?void 0:e.plan)||""),z("freeinteractions",(null===e||void 0===e?void 0:e.freeinteractions)||0),z("basicfee",(null===e||void 0===e?void 0:e.basicfee)||0),z("additionalfee",(null===e||void 0===e?void 0:e.additionalfee)||0),z("description",(null===e||void 0===e?void 0:e.description)||""),z("type",(null===e||void 0===e?void 0:e.type)||""),M("provider",(null===e||void 0===e?void 0:e.provider)||""),M("measureunit",(null===e||void 0===e?void 0:e.measureunit)||""),M("charlimit",(null===e||void 0===e?void 0:e.charlimit)||0),M("plan",(null===e||void 0===e?void 0:e.plan)||""),M("freeinteractions",(null===e||void 0===e?void 0:e.freeinteractions)||0),M("basicfee",(null===e||void 0===e?void 0:e.basicfee)||0),M("additionalfee",(null===e||void 0===e?void 0:e.additionalfee)||0),M("description",(null===e||void 0===e?void 0:e.description)||""),M("type",(null===e||void 0===e?void 0:e.type)||""),V("provider"),V("measureunit"),V("charlimit"),V("plan"),V("freeinteractions"),V("basicfee"),V("additionalfee"),V("description"),V("type"),C&&C((function(t,a){return t[x]=Object(r.a)(Object(r.a)({},t[x]),{},{corpid:null===e||void 0===e?void 0:e.corpid,orgid:(null===e||void 0===e?void 0:e.orgid)||0}),t}))},error:null===L||void 0===L||null===(t=L.type)||void 0===t?void 0:t.message,data:R,optionDesc:"typeproviderplan",optionValue:"typeproviderplan",disabled:!D}),Object(xe.jsx)(p.l,{label:k(N.a.billingsetup_provider),className:"col-6",valueDefault:F("provider"),error:null===L||void 0===L||null===(a=L.provider)||void 0===a?void 0:a.message,disabled:!0})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.l,{label:k(N.a.billingsetup_service),className:"col-6",valueDefault:F("type"),error:null===L||void 0===L||null===(c=L.type)||void 0===c?void 0:c.message,disabled:!0}),Object(xe.jsx)(p.l,{label:k(N.a.billingsetup_plan),className:"col-6",valueDefault:F("plan"),error:null===L||void 0===L||null===(s=L.plan)||void 0===s?void 0:s.message,disabled:!0})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.l,{label:k(N.a.billingsetup_measureunit),className:"col-6",valueDefault:F("measureunit"),error:null===L||void 0===L||null===(u=L.measureunit)||void 0===u?void 0:u.message,disabled:!0}),Object(xe.jsx)(p.l,{label:k(N.a.billingsetup_minimuminteractions),className:"col-6",valueDefault:F("freeinteractions"),error:null===L||void 0===L||null===(b=L.freeinteractions)||void 0===b?void 0:b.message,type:"number",onChange:function(e){z("freeinteractions",e||0),M("freeinteractions",e||0)},disabled:!D})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.l,{label:k(N.a.billingsetup_baseprice),className:"col-6",valueDefault:F("basicfee"),error:null===L||void 0===L||null===(v=L.basicfee)||void 0===v?void 0:v.message,type:"number",inputProps:{step:"any"},onChange:function(e){z("basicfee",e||0),M("basicfee",e||0)},disabled:!D}),Object(xe.jsx)(p.l,{label:k(N.a.billingsetup_additionalprice),className:"col-6",valueDefault:F("additionalfee"),error:null===L||void 0===L||null===(O=L.additionalfee)||void 0===O?void 0:O.message,type:"number",inputProps:{step:"any"},onChange:function(e){z("additionalfee",e||0),M("additionalfee",e||0)},disabled:!D})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.l,{label:k(N.a.quantity),className:"col-6",valueDefault:Object(m.lb)(F("aiquantity")||0),error:null===L||void 0===L||null===(f=L.aiquantity)||void 0===f?void 0:f.message,type:"number",inputProps:{step:"any"},disabled:!0}),Object(xe.jsx)(p.l,{label:k(N.a.aicost),className:"col-6",valueDefault:Object(m.jb)(F("aicost")||0),error:null===L||void 0===L||null===(h=L.aicost)||void 0===h?void 0:h.message,type:"number",inputProps:{step:"any"},disabled:!0})]}),Object(xe.jsx)("div",{style:{textAlign:"right"},children:Object(xe.jsx)(j.a,{variant:"contained",type:"button",color:"primary",startIcon:Object(xe.jsx)(oe.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){return q(y,x)},disabled:!D,children:k(N.a.delete)})})]})})]})},Re=function(){return Object(xe.jsx)(k.a,{style:{display:"flex",paddingLeft:0,paddingRight:0,paddingBottom:8},children:Object(xe.jsx)(q.a,{style:{padding:20,backgroundColor:"white",display:"flex",flexDirection:"column",flexGrow:1},children:Object(xe.jsxs)(A.a,{container:!0,direction:"column",children:[Object(xe.jsx)(A.a,{container:!0,direction:"row",spacing:1,children:Object(xe.jsx)(A.a,{item:!0,sm:12,xl:12,xs:12,md:12,lg:12,children:Object(xe.jsx)(de.a,{})})}),Object(xe.jsx)(T.a,{style:{margin:"10px 0"}}),Object(xe.jsx)(A.a,{container:!0,direction:"row",spacing:1,children:Object(xe.jsx)(A.a,{item:!0,sm:12,xl:12,xs:12,md:12,lg:12,children:Object(xe.jsx)(de.a,{})})})]})})})},ke=function(e){var t,a=e.dataCorp,c=e.dataOrg,n=e.customSearch,l=Object(v.c)(),o=Object(w.a)().t,f=De(),h=Object(b.b)((function(e){return e.main.execute})),x=Object(b.b)((function(e){return e.main})),g=Object(b.b)((function(e){return e.main.exportData})),y=Object(b.b)((function(e){return e.login.validateToken.user})),S=Object(b.b)((function(e){return e.culqi.requestReportPdf})),D=Object(d.useState)({datetoshow:"".concat(new Date((new Date).setDate(1)).getFullYear(),"-").concat(String(new Date((new Date).setDate(1)).getMonth()+1).padStart(2,"0")),year:(new Date).getFullYear(),month:(new Date).getMonth()+1,corpid:(null===y||void 0===y?void 0:y.corpid)||0,orgid:(null===y||void 0===y?void 0:y.orgid)||0,totalize:2}),C=Object(s.a)(D,2),_=C[0],q=C[1],R=Object(d.useState)(!1),k=Object(s.a)(R,2),A=k[0],T=k[1],z=Object(d.useState)(!1),F=Object(s.a)(z,2),L=F[0],$=F[1],U=Object(d.useState)([]),H=Object(s.a)(U,2),G=H[0],Y=H[1],W=Object(d.useState)(2),X=Object(s.a)(W,2),K=X[0],Q=X[1],ie=Object(d.useState)(!1),le=Object(s.a)(ie,2),oe=le[0],re=le[1],se=Object(d.useState)(!1),de=Object(s.a)(se,2),ue=de[0],be=de[1],ve=Object(d.useState)(!1),je=Object(s.a)(ve,2),Oe=je[0],pe=je[1],me=Object(d.useState)(!1),fe=Object(s.a)(me,2),he=fe[0],Se=fe[1],Ce=u.a.useRef(null),Ee=[{value:1,description:o(N.a.corporation)},{value:2,description:o(N.a.organization)}];function Ie(){l(Object(I.d)(!0)),Q(_.totalize),2===_.totalize?l(Object(O.g)(Object(m.Ub)(_))):l(Object(O.g)(Object(m.Vb)(_)))}Object(d.useEffect)((function(){Ie()}),[]),Object(d.useEffect)((function(){T(!1),_&&_.totalize&&(1===_.totalize&&($(!0),_.corpid&&T(!0)),2===_.totalize&&($(!1),_.corpid&&_.orgid&&T(!0)))}),[_]),Object(d.useEffect)((function(){0!==(null===n||void 0===n?void 0:n.corpid)&&(q((function(e){return Object(r.a)(Object(r.a)({},e),{},{datetoshow:"".concat(null===n||void 0===n?void 0:n.year,"-").concat(String(null===n||void 0===n?void 0:n.month).padStart(2,"0")),year:null===n||void 0===n?void 0:n.year,month:null===n||void 0===n?void 0:n.month,corpid:null===n||void 0===n?void 0:n.corpid,orgid:null===n||void 0===n?void 0:n.orgid,totalize:null===n||void 0===n?void 0:n.totalize})})),pe(!0))}),[n]),Object(d.useEffect)((function(){Oe&&(pe(!1),Ie())}),[_,Oe]),Object(d.useEffect)((function(){x.mainData.loading||(x.mainData.data.length?Y(x.mainData.data[0]):Y(null),l(Object(I.d)(!1)))}),[x.mainData]),Object(d.useEffect)((function(){if(oe)if(h.loading||h.error){if(h.error){var e=o(h.code||"error_unexpected_error",{module:o(N.a.tipification).toLocaleLowerCase()});l(Object(I.e)({show:!0,severity:"error",message:e})),l(Object(I.d)(!1)),re(!1)}}else l(Object(I.e)({show:!0,severity:"success",message:o(N.a.successful_calculate)})),l(Object(I.d)(!1)),re(!1),Ie()}),[h,oe]);var _e=function(e){l(Object(O.d)(Object(m.n)({corpid:_.corpid,orgid:_.orgid,year:_.year,month:_.month,type:e}),"BillingUserHsmHistory","excel",!0)),l(Object(I.d)(!0)),be(!0)};return Object(d.useEffect)((function(){if(ue)if(g.loading||g.error){if(g.error){var e=o(g.code||"error_unexpected_error",{module:o(N.a.person).toLocaleLowerCase()});l(Object(I.e)({show:!0,severity:"error",message:e})),l(Object(I.d)(!1)),be(!1)}}else l(Object(I.d)(!1)),be(!1),window.open(g.url,"_blank")}),[g,ue]),Object(d.useEffect)((function(){if(he)if(S.loading||S.error){if(S.error){var e=o(S.code||"error_unexpected_error",{module:o(N.a.person).toLocaleLowerCase()});l(Object(I.e)({show:!0,severity:"error",message:e})),l(Object(I.d)(!1)),Se(!1)}}else l(Object(I.d)(!1)),Se(!1),S.datacard&&window.open(S.datacard,"_blank")}),[S,he]),Object(xe.jsxs)(d.Fragment,{children:[Object(xe.jsx)("div",{children:Object(xe.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object(xe.jsx)(P.a,{id:"date",className:f.fieldsfilter,type:"month",variant:"outlined",onChange:function(e){return function(e){if(""!==e){var t=new Date(e+"-02"),a=(null===t||void 0===t?void 0:t.getMonth())+1,i=null===t||void 0===t?void 0:t.getFullYear(),c="".concat(i,"-").concat(String(a).padStart(2,"0"));q((function(e){return Object(r.a)(Object(r.a)({},e),{},{datetoshow:c,year:i,month:a})}))}}(e.target.value)},value:_.datetoshow,size:"small"}),Object(xe.jsx)(p.u,{label:o(N.a.corporation),className:f.fieldsfilter,valueDefault:_.corpid,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{corpid:(null===e||void 0===e?void 0:e.corpid)||0,orgid:0})}))},data:a,optionDesc:"description",optionValue:"corpid",disabled:["ADMINISTRADOR","ADMINISTRADOR P","ADMINISTRADOR LIMADERMA"].includes((null===y||void 0===y?void 0:y.roledesc)||""),orderbylabel:!0}),Object(xe.jsx)(p.u,{label:o(N.a.organization),className:f.fieldsfilter,valueDefault:_.orgid,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{orgid:(null===e||void 0===e?void 0:e.orgid)||0})}))},data:c.filter((function(e){return e.corpid===_.corpid})),optionDesc:"orgdesc",optionValue:"orgid",orderbylabel:!0,disabled:L}),Object(xe.jsx)(p.u,{label:o(N.a.totalize),className:f.fieldsfilter,valueDefault:_.totalize,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{totalize:(null===e||void 0===e?void 0:e.value)||0})}))},data:Ee,optionDesc:"description",optionValue:"value",orderbylabel:!0}),Object(xe.jsx)(j.a,{variant:"contained",color:"primary",disabled:x.mainData.loading||!A,startIcon:Object(xe.jsx)(M.a,{style:{color:"white"}}),style:{width:120,backgroundColor:"#55BD84"},onClick:function(){return Ie()},children:o(N.a.search)}),!x.mainData.loading&&G&&Object(xe.jsxs)(d.Fragment,{children:[Object(xe.jsx)(j.a,{className:f.button,variant:"contained",color:"primary",disabled:g.loading,startIcon:Object(xe.jsx)(B.a,{color:"secondary"}),onClick:function(){l(Object(I.a)({visible:!0,question:o(N.a.confirmation_calculate),callback:function(){l(Object(O.c)(Object(m.Sb)(_.year,_.month,_.corpid,_.orgid))),l(Object(I.d)(!0)),re(!0)}}))},style:{backgroundColor:"#55BD84"},children:"".concat(o(N.a.calculate))}),Object(xe.jsx)(j.a,{className:f.button,variant:"contained",color:"primary",disabled:g.loading,onClick:function(){return function(){if(G){var e=[];G.artificialintelligencedata&&G.artificialintelligencedata.forEach((function(t){e.push({service:t.type,provider:t.provider,plan:t.plan,freeinteractions:Object(m.lb)(t.freeinteractions||0),aiquantity:Object(m.lb)(t.aiquantity||0),additionalfee:(t.aiquantity||0)<=(t.freeinteractions||0)?"":"$".concat(Object(m.kb)(t.additionalfee||0)),taxableamount:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,t.aicost||0):Object(m.jb)(t.aicost)),igv:"$".concat(1!==G.taxrate?Ne(G.igv,t.aicost):"0.00"),aicost:"$".concat(Object(m.jb)(t.aicost||0))})}));var t={method:"",parameters:{generalinformationclient:2===K?G.orgdesc:G.corpdesc,generalinformationplan:G.billingplan,generalinformationperiod:"".concat(G.year,"-").concat(String(G.month).padStart(2,"0")),basecost1:"",basecost2:"",basecost3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.basicfee||0):Object(m.jb)(G.basicfee)),basecost4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.basicfee||0):"0.00"),basecost5:"$".concat(G.basicfee?Object(m.jb)(G.basicfee||0):"0.00"),agentcontracted1:Object(m.lb)(G.userfreequantity||0),agentcontracted2:"",agentcontracted3:"",agentcontracted4:"",agentcontracted5:"",agentadditional1:Object(m.lb)(G.useradditionalquantity||0),agentadditional2:"$".concat(Object(m.kb)(G.useradditionalfee||0)),agentadditional3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.useradditionalcharge||0):Object(m.jb)(G.useradditionalcharge)),agentadditional4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.useradditionalcharge||0):"0.00"),agentadditional5:"$".concat(Object(m.jb)(G.useradditionalcharge||0)),channelcontracted1:Object(m.lb)(G.channelfreequantity||0),channelcontracted2:"",channelcontracted3:"",channelcontracted4:"",channelcontracted5:"",channelwhatsappfree1:Object(m.lb)(G.freewhatsappchannel||0),channelwhatsappfree2:"",channelwhatsappfree3:"",channelwhatsappfree4:"",channelwhatsappfree5:"",channelwhatsapptotal1:Object(m.lb)(G.channelwhatsappquantity||0),channelwhatsapptotal2:"",channelwhatsapptotal3:"",channelwhatsapptotal4:"",channelwhatsapptotal5:"",channelwhatsappadditional1:Object(m.lb)((G.channelwhatsappquantity-G.freewhatsappchannel<0?0:G.channelwhatsappquantity-G.freewhatsappchannel)||0),channelwhatsappadditional2:"$".concat(Object(m.kb)(G.channelwhatsappfee||0)),channelwhatsappadditional3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.channelwhatsappcharge||0):Object(m.jb)(G.channelwhatsappcharge)),channelwhatsappadditional4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.channelwhatsappcharge||0):"0.00"),channelwhatsappadditional5:"$".concat(Object(m.jb)(G.channelwhatsappcharge||0)),channelother1:Object(m.lb)(G.channelotherquantity||0),channelother2:"$".concat(Object(m.kb)(G.channelotherfee||0)),channelother3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.channelothercharge||0):Object(m.jb)(G.channelothercharge)),channelother4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.channelothercharge||0):"0.00"),channelother5:"$".concat(Object(m.jb)(G.channelothercharge||0)),conversationwhatsappfree1:Object(m.lb)((G.channelwhatsappquantity||0)*(G.freewhatsappconversations||0)),conversationwhatsappfree2:"",conversationwhatsappfree3:"",conversationwhatsappfree4:"",conversationwhatsappfree5:"",conversationwhatsappclient1:Object(m.lb)(G.conversationclientwhatquantity||0),conversationwhatsappclient2:"",conversationwhatsappclient3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.conversationclientwhatcharge||0):Object(m.jb)(G.conversationclientwhatcharge)),conversationwhatsappclient4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.conversationclientwhatcharge||0):"0.00"),conversationwhatsappclient5:"$".concat(Object(m.jb)(G.conversationclientwhatcharge||0)),conversationwhatsappbusiness1:Object(m.lb)(G.conversationcompanywhatquantity||0),conversationwhatsappbusiness2:"",conversationwhatsappbusiness3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.conversationcompanywhatcharge||0):Object(m.jb)(G.conversationcompanywhatcharge)),conversationwhatsappbusiness4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.conversationcompanywhatcharge||0):"0.00"),conversationwhatsappbusiness5:"$".concat(Object(m.jb)(G.conversationcompanywhatcharge||0)),messagingminimumsms1:Object(m.lb)(G.minimumsmsquantity||0),messagingminimumsms2:"",messagingminimumsms3:"",messagingminimumsms4:"",messagingminimumsms5:"",messagingsms1:Object(m.lb)(G.smsquantity||0),messagingsms2:"$".concat(Object(m.kb)((G.unitpricepersms||0)+(G.vcacomissionpersms||0))),messagingsms3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.smscost||0):Object(m.jb)(G.smscost)),messagingsms4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.smscost||0):"0.00"),messagingsms5:"$".concat(Object(m.jb)(G.smscost||0)),messagingminimummail1:Object(m.lb)(G.minimummailquantity||0),messagingminimummail2:"",messagingminimummail3:"",messagingminimummail4:"",messagingminimummail5:"",messagingmail1:Object(m.lb)(G.mailquantity||0),messagingmail2:"$".concat(Object(m.kb)((G.unitepricepermail||0)+(G.vcacomissionpermail||0))),messagingmail3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.mailcost||0):Object(m.jb)(G.mailcost)),messagingmail4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.mailcost||0):"0.00"),messagingmail5:"$".concat(Object(m.jb)(G.mailcost||0)),voicephone1:"",voicephone2:"",voicephone3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callphonecost||0):Object(m.jb)(G.callphonecost)),voicephone4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callphonecost||0):"0.00"),voicephone5:"$".concat(Object(m.jb)(G.callphonecost||0)),voicecall1:"",voicecall2:"",voicecall3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callpubliccost||0):Object(m.jb)(G.callpubliccost)),voicecall4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callpubliccost||0):"0.00"),voicecall5:"$".concat(Object(m.jb)(G.callpubliccost||0)),voicevoip1:"",voicevoip2:"",voicevoip3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callvoipcost||0):Object(m.jb)(G.callvoipcost)),voicevoip4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callvoipcost||0):"0.00"),voicevoip5:"$".concat(Object(m.jb)(G.callvoipcost||0)),voicerecording1:"",voicerecording2:"",voicerecording3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callrecordingcost||0):Object(m.jb)(G.callrecordingcost)),voicerecording4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callrecordingcost||0):"0.00"),voicerecording5:"$".concat(Object(m.jb)(G.callrecordingcost||0)),voiceothers1:"",voiceothers2:"",voiceothers3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callothercost||0):Object(m.jb)(G.callothercost)),voiceothers4:"$".concat(1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callothercost||0):"0.00"),voiceothers5:"$".concat(Object(m.jb)(G.callothercost||0)),contactfree1:Object(m.lb)(G.clientfreequantity||0),contactfree2:"",contactfree3:"",contactfree4:"",contactfree5:"",contacttotal1:Object(m.lb)(G.clientquantity||0),contacttotal2:"",contacttotal3:"",contacttotal4:"",contacttotal5:"",contactadditional1:Object(m.lb)(G.clientadditionalquantity||0),contactadditional2:"$".concat(Object(m.kb)(G.clientadditionalfee||0)),contactadditional3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.clientadditionalcharge||0):Object(m.jb)(G.clientadditionalcharge)),contactadditional4:"$".concat(1!==G.taxrate?Ne(G.igv,G.clientadditionalcharge):"0.00"),contactadditional5:"$".concat(Object(m.jb)(G.clientadditionalcharge||0)),supportplan:G.supportplan,supportplan1:"",supportplan2:"",supportplan3:"$".concat(1!==G.taxrate?we(G.igv,G.supportbasicfee):Object(m.jb)(G.supportbasicfee)),supportplan4:"$".concat(1!==G.taxrate?Ne(G.igv,G.supportbasicfee):"0.00"),supportplan5:"$".concat(Object(m.jb)(G.supportbasicfee)),additional01service:G.additionalservicefee1?G.additionalservicename1:"",additional01service1:"",additional01service2:"",additional01service3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,(G.additionalservicefee1||0)*G.taxrate):Object(m.jb)((G.additionalservicefee1||0)*G.taxrate)),additional01service4:"$".concat(1!==G.taxrate?Ne(G.igv,(G.additionalservicefee1||0)*G.taxrate):"0.00"),additional01service5:"$".concat(Object(m.jb)((G.additionalservicefee1||0)*G.taxrate)),additional02service:G.additionalservicefee2?G.additionalservicename2:"",additional02service1:"",additional02service2:"",additional02service3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,(G.additionalservicefee2||0)*G.taxrate):Object(m.jb)((G.additionalservicefee2||0)*G.taxrate)),additional02service4:"$".concat(1!==G.taxrate?Ne(G.igv,(G.additionalservicefee2||0)*G.taxrate):"0.00"),additional02service5:"$".concat(Object(m.jb)((G.additionalservicefee2||0)*G.taxrate)),additional03service:G.additionalservicefee3?G.additionalservicename3:"",additional03service1:"",additional03service2:"",additional03service3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,(G.additionalservicefee3||0)*G.taxrate):Object(m.jb)((G.additionalservicefee3||0)*G.taxrate)),additional03service4:"$".concat(1!==G.taxrate?Ne(G.igv,(G.additionalservicefee3||0)*G.taxrate):"0.00"),additional03service5:"$".concat(Object(m.jb)((G.additionalservicefee3||0)*G.taxrate)),totalamount1:"",totalamount2:"",totalamount3:"$".concat(1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.totalcharge||0):Object(m.jb)(G.totalcharge)),totalamount4:"$".concat(1!==G.taxrate?Ne(G.igv,G.totalcharge):"0.00"),totalamount5:"$".concat(Object(m.jb)(G.totalcharge||0)),totalcontact:G.clientquantity,totalconversation:G.conversationquantity,totalinteraction:G.interactionquantity,totalagent:G.asesorquantity,totalsupervisor:G.supervisorquantity,intelligencedetail:e},dataonparameters:!0,template:o(N.a.billingreport_template),reportname:"period-report",key:"period-report"};l(Object(E.k)(t)),l(Object(I.d)(!0)),Se(!0)}}()},startIcon:Object(xe.jsx)(V.E,{}),children:o(N.a.download)}),Object(xe.jsx)(j.a,{className:f.button,variant:"contained",color:"primary",disabled:g.loading,onClick:function(){return l(Object(O.d)(Object(m.p)(_),"BillingPersonReport","excel",!0)),l(Object(I.d)(!0)),void be(!0)},startIcon:Object(xe.jsx)(V.E,{}),children:"".concat(o(N.a.report)," ").concat(o(N.a.uniquecontacts))}),Object(xe.jsx)(j.a,{className:f.button,variant:"contained",color:"primary",disabled:g.loading,onClick:function(){return l(Object(O.d)(Object(m.q)(_),"BillingUserReport","excel",!0)),l(Object(I.d)(!0)),void be(!0)},startIcon:Object(xe.jsx)(V.E,{}),children:"".concat(o(N.a.report)," ").concat(o(N.a.agents_plural))}),Object(xe.jsx)(j.a,{className:f.button,variant:"contained",color:"primary",disabled:g.loading,onClick:function(){return l(Object(O.d)(Object(m.m)(_),"BillingUserConversation","excel",!0)),l(Object(I.d)(!0)),void be(!0)},startIcon:Object(xe.jsx)(V.E,{}),children:"".concat(o(N.a.report)," ").concat(o(N.a.conversationwhatsapp))}),Object(xe.jsx)(j.a,{className:f.button,variant:"contained",color:"primary",disabled:g.loading,onClick:function(){return _e("SMS")},startIcon:Object(xe.jsx)(V.E,{}),children:"".concat(o(N.a.report)," ").concat(o(N.a.sms))}),Object(xe.jsx)(j.a,{className:f.button,variant:"contained",color:"primary",disabled:g.loading,onClick:function(){return _e("MAIL")},startIcon:Object(xe.jsx)(V.E,{}),children:"".concat(o(N.a.report)," ").concat(o(N.a.mail))})]})]})}),!x.mainData.loading&&Object(xe.jsxs)("div",{style:{width:"100%"},ref:Ce,children:[G&&Object(xe.jsxs)("div",{className:f.containerDetail,children:[Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:o(N.a.client),value:2===K?G.orgdesc:G.corpdesc})}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:"Plan",value:G.billingplan})}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:o(N.a.period),value:"".concat(G.year,"-").concat(String(G.month).padStart(2,"0"))})}),Object(xe.jsx)(Z.a,{component:J.a,style:{overflow:"hidden"},children:Object(xe.jsxs)(ee.a,{"aria-label":"customized table",children:[Object(xe.jsx)(te.a,{children:Object(xe.jsxs)(ae.a,{children:[Object(xe.jsx)(ge,{align:"left",children:o(N.a.billingreportitem)}),Object(xe.jsx)(ge,{align:"right",children:o(N.a.billingreportquantity)}),Object(xe.jsx)(ge,{align:"right",children:o(N.a.billingreportrate)}),Object(xe.jsx)(ge,{align:"right",children:o(N.a.billingreporttaxableamount)}),Object(xe.jsx)(ge,{align:"right",children:o(N.a.billingreporttaxableiva)}),Object(xe.jsx)(ge,{align:"right",children:o(N.a.billingreportamount)})]})}),Object(xe.jsxs)(ce.a,{children:[Object(xe.jsxs)(ye,{children:[Object(xe.jsx)(ge,{children:Object(xe.jsx)("b",{children:o(N.a.basecost)})}),Object(xe.jsx)(ge,{}),Object(xe.jsx)(ge,{}),Object(xe.jsxs)(ge,{align:"right",children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.basicfee||0):Object(m.jb)(G.basicfee)]}),Object(xe.jsxs)(ge,{align:"right",children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.basicfee||0):"0.00"]}),Object(xe.jsxs)(ge,{align:"right",children:["$",G.basicfee?Object(m.jb)(G.basicfee||0):"0.00"]})]}),Object(xe.jsxs)(ye,{children:[Object(xe.jsxs)(ge,{children:[Object(xe.jsx)("div",{children:Object(xe.jsx)("b",{children:o(N.a.agents_plural)})}),Object(xe.jsx)("div",{children:o(N.a.contracted)}),Object(xe.jsx)("div",{children:o(N.a.additional)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{children:Object(m.lb)(G.userfreequantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.useradditionalquantity||0)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.kb)(G.useradditionalfee||0)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.useradditionalcharge||0):Object(m.jb)(G.useradditionalcharge)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.useradditionalcharge||0):"0.00"]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.useradditionalcharge||0)]})]})]}),Object(xe.jsxs)(ye,{children:[Object(xe.jsxs)(ge,{children:[Object(xe.jsx)("div",{children:Object(xe.jsx)("b",{children:o(N.a.channel_plural)})}),Object(xe.jsx)("div",{children:o(N.a.contracted)}),Object(xe.jsx)("div",{children:o(N.a.whatsappfreechannel)}),Object(xe.jsx)("div",{children:o(N.a.whatsappchannel)}),Object(xe.jsx)("div",{children:o(N.a.whatsappadditionalchannel)}),Object(xe.jsx)("div",{children:o(N.a.otherchannels)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{children:Object(m.lb)(G.channelfreequantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.freewhatsappchannel||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.channelwhatsappquantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)((G.channelwhatsappquantity-G.freewhatsappchannel<0?0:G.channelwhatsappquantity-G.freewhatsappchannel)||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.channelotherquantity||0)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.kb)(G.channelwhatsappfee||0)]}),Object(xe.jsxs)("div",{children:["$",Object(m.kb)(G.channelotherfee||0)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.channelwhatsappcharge||0):Object(m.jb)(G.channelwhatsappcharge)]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.channelothercharge||0):Object(m.jb)(G.channelothercharge)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.channelwhatsappcharge||0):"0.00"]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.channelothercharge||0):"0.00"]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.channelwhatsappcharge||0)]}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.channelothercharge||0)]})]})]}),Object(xe.jsxs)(ye,{children:[Object(xe.jsxs)(ge,{children:[Object(xe.jsx)("div",{children:Object(xe.jsx)("b",{children:o(N.a.billingreportconversations)})}),Object(xe.jsx)("div",{children:o(N.a.reportfreeconversations)}),Object(xe.jsx)("div",{children:o(N.a.userinitiatedconversations)}),Object(xe.jsx)("div",{children:o(N.a.businessinitiatedconversations)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{children:Object(m.lb)((G.channelwhatsappquantity||0)*(G.freewhatsappconversations||0))}),Object(xe.jsx)("div",{children:Object(m.lb)(G.conversationclientwhatquantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.conversationcompanywhatquantity||0)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.conversationclientwhatcharge||0):Object(m.jb)(G.conversationclientwhatcharge)]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.conversationcompanywhatcharge||0):Object(m.jb)(G.conversationcompanywhatcharge)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.conversationclientwhatcharge||0):"0.00"]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.conversationcompanywhatcharge||0):"0.00"]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.conversationclientwhatcharge||0)]}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.conversationcompanywhatcharge||0)]})]})]}),Object(xe.jsxs)(ye,{children:[Object(xe.jsxs)(ge,{children:[Object(xe.jsx)("div",{children:Object(xe.jsx)("b",{children:o(N.a.billingreportmessaging)})}),Object(xe.jsx)("div",{children:o(N.a.minimumsmsquantity)}),Object(xe.jsx)("div",{children:o(N.a.billingreportsms)}),Object(xe.jsx)("div",{children:o(N.a.minimummailquantity)}),Object(xe.jsx)("div",{children:o(N.a.billingreportmail)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{children:Object(m.lb)(G.minimumsmsquantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.smsquantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.minimummailquantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.mailquantity||0)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.kb)((G.unitpricepersms||0)+(G.vcacomissionpersms||0))]}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.kb)((G.unitepricepermail||0)+(G.vcacomissionpermail||0))]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.smscost||0):Object(m.jb)(G.smscost)]}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.mailcost||0):Object(m.jb)(G.mailcost)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.smscost||0):"0.00"]}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.mailcost||0):"0.00"]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.smscost||0)]}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.mailcost||0)]})]})]}),Object(xe.jsxs)(ye,{children:[Object(xe.jsxs)(ge,{children:[Object(xe.jsx)("div",{children:Object(xe.jsx)("b",{children:o(N.a.periodreportvoice)})}),Object(xe.jsx)("div",{children:o(N.a.periodreportphone)}),Object(xe.jsx)("div",{children:o(N.a.periodreportpstn)}),Object(xe.jsx)("div",{children:o(N.a.periodreportvoip)}),Object(xe.jsx)("div",{children:o(N.a.periodreportrecording)}),Object(xe.jsx)("div",{children:o(N.a.periodreportother)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callphonecost||0):Object(m.jb)(G.callphonecost)]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callpubliccost||0):Object(m.jb)(G.callpubliccost)]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callvoipcost||0):Object(m.jb)(G.callvoipcost)]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callrecordingcost||0):Object(m.jb)(G.callrecordingcost)]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.callothercost||0):Object(m.jb)(G.callothercost)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callphonecost||0):"0.00"]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callpubliccost||0):"0.00"]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callvoipcost||0):"0.00"]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callrecordingcost||0):"0.00"]}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.taxrate?G.taxrate-1:0,G.callothercost||0):"0.00"]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.callphonecost||0)]}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.callpubliccost||0)]}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.callvoipcost||0)]}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.callrecordingcost||0)]}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.callothercost||0)]})]})]}),Object(xe.jsxs)(ye,{children:[Object(xe.jsxs)(ge,{children:[Object(xe.jsx)("div",{children:Object(xe.jsx)("b",{children:o(N.a.billingreportcontacts)})}),Object(xe.jsx)("div",{children:o(N.a.freecontacts)}),Object(xe.jsx)("div",{children:o(N.a.billingreporttotalcontacts)}),Object(xe.jsx)("div",{children:o(N.a.billingreportadditionalcontacts)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{children:Object(m.lb)(G.clientfreequantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.clientquantity||0)}),Object(xe.jsx)("div",{children:Object(m.lb)(G.clientadditionalquantity||0)})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.kb)(G.clientadditionalfee||0)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.clientadditionalcharge||0):Object(m.jb)(G.clientadditionalcharge)]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.igv,G.clientadditionalcharge):"0.00"]})]}),Object(xe.jsxs)(ge,{align:"right",children:[Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),Object(xe.jsxs)("div",{children:["$",Object(m.jb)(G.clientadditionalcharge||0)]})]})]}),null===G||void 0===G||null===(t=G.artificialintelligencedata)||void 0===t?void 0:t.map((function(e){return Object(xe.jsxs)(ye,{children:[Object(xe.jsx)(ge,{children:Object(xe.jsx)("div",{children:Object(xe.jsxs)("b",{children:[e.type," - ",e.provider," (",e.plan,")"]})})}),Object(xe.jsx)(ge,{align:"right",children:Object(xe.jsx)("div",{children:Object(m.lb)(e.aiquantity||0)})}),Object(xe.jsxs)(ge,{align:"right",children:[(e.aiquantity||0)>(e.freeinteractions||0)&&Object(xe.jsxs)("div",{children:["$",Object(m.kb)(e.additionalfee||0)]}),(e.aiquantity||0)<=(e.freeinteractions||0)&&Object(xe.jsx)("div",{style:{color:"transparent"},children:"."})]}),Object(xe.jsx)(ge,{align:"right",children:Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,e.aicost||0):Object(m.jb)(e.aicost)]})}),Object(xe.jsx)(ge,{align:"right",children:Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.igv,e.aicost):"0.00"]})}),Object(xe.jsx)(ge,{align:"right",children:Object(xe.jsxs)("div",{children:["$",Object(m.jb)(e.aicost||0)]})})]})})),Object(xe.jsxs)(ye,{children:[Object(xe.jsx)(ge,{children:Object(xe.jsxs)("b",{children:[o(N.a.supportplan)," ",G.supportplan]})}),Object(xe.jsx)(ge,{}),Object(xe.jsx)(ge,{}),Object(xe.jsxs)(ge,{align:"right",children:["$",1!==G.taxrate?we(G.igv,G.supportbasicfee):Object(m.jb)(G.supportbasicfee)]}),Object(xe.jsxs)(ge,{align:"right",children:["$",1!==G.taxrate?Ne(G.igv,G.supportbasicfee):"0.00"]}),Object(xe.jsxs)(ge,{align:"right",children:["$",Object(m.jb)(G.supportbasicfee)]})]}),Object(xe.jsxs)(ye,{children:[Object(xe.jsxs)(ge,{children:[G.additionalservicefee1?Object(xe.jsx)("div",{className:Object(ne.default)(Object(i.a)({},f.transparent,""===G.additionalservicename1)),children:""===G.additionalservicename1?Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}):G.additionalservicename1}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),G.additionalservicefee2?Object(xe.jsx)("div",{className:Object(ne.default)(Object(i.a)({},f.transparent,""===G.additionalservicename2)),children:""===G.additionalservicename2?Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}):G.additionalservicename2}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),G.additionalservicefee3?Object(xe.jsx)("div",{className:Object(ne.default)(Object(i.a)({},f.transparent,""===G.additionalservicename3)),children:""===G.additionalservicename3?Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}):G.additionalservicename3}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."})]}),Object(xe.jsx)(ge,{}),Object(xe.jsx)(ge,{}),Object(xe.jsxs)(ge,{align:"right",children:[G.additionalservicefee1?Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,(G.additionalservicefee1||0)*G.taxrate):Object(m.jb)((G.additionalservicefee1||0)*G.taxrate)]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),G.additionalservicefee2?Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,(G.additionalservicefee2||0)*G.taxrate):Object(m.jb)((G.additionalservicefee2||0)*G.taxrate)]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),G.additionalservicefee3?Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,(G.additionalservicefee3||0)*G.taxrate):Object(m.jb)((G.additionalservicefee3||0)*G.taxrate)]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."})]}),Object(xe.jsxs)(ge,{align:"right",children:[G.additionalservicefee1?Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.igv,(G.additionalservicefee1||0)*G.taxrate):"0.00"]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),G.additionalservicefee2?Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.igv,(G.additionalservicefee2||0)*G.taxrate):"0.00"]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),G.additionalservicefee3?Object(xe.jsxs)("div",{children:["$",1!==G.taxrate?Ne(G.igv,(G.additionalservicefee3||0)*G.taxrate):"0.00"]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."})]}),Object(xe.jsxs)(ge,{align:"right",children:[G.additionalservicefee1?Object(xe.jsxs)("div",{children:["$",Object(m.jb)((G.additionalservicefee1||0)*G.taxrate)]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),G.additionalservicefee2?Object(xe.jsxs)("div",{children:["$",Object(m.jb)((G.additionalservicefee2||0)*G.taxrate)]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."}),G.additionalservicefee3?Object(xe.jsxs)("div",{children:["$",Object(m.jb)((G.additionalservicefee3||0)*G.taxrate)]}):Object(xe.jsx)("div",{style:{color:"transparent"},children:"."})]})]}),Object(xe.jsxs)(ye,{children:[Object(xe.jsx)(ge,{children:Object(xe.jsx)("b",{children:o(N.a.periodamount)})}),Object(xe.jsx)(ge,{}),Object(xe.jsx)(ge,{}),Object(xe.jsxs)(ge,{align:"right",children:["$",1!==G.taxrate?we(G.taxrate?G.taxrate-1:0,G.totalcharge||0):Object(m.jb)(G.totalcharge)]}),Object(xe.jsxs)(ge,{align:"right",children:["$",1!==G.taxrate?Ne(G.igv,G.totalcharge):"0.00"]}),Object(xe.jsxs)(ge,{align:"right",children:["$",Object(m.jb)(G.totalcharge||0)]})]})]})]})}),Object(xe.jsx)("div",{style:{paddingTop:20,paddingBottom:20,fontWeight:"bold",fontSize:"1.5em"},children:o(N.a.servicedata)}),Object(xe.jsx)(Z.a,{component:J.a,style:{overflow:"hidden"},children:Object(xe.jsx)(ee.a,{"aria-label":"customized table",children:Object(xe.jsx)(te.a,{children:Object(xe.jsxs)(ae.a,{children:[Object(xe.jsxs)(ge,{align:"center",children:[Object(xe.jsx)("div",{children:G.clientwhatquantity}),Object(xe.jsx)("div",{children:o(N.a.billingreport_unique)})]}),Object(xe.jsxs)(ge,{align:"center",children:[Object(xe.jsx)("div",{children:G.clientquantity-G.clientwhatquantity}),Object(xe.jsx)("div",{children:o(N.a.billingreport_other)})]}),Object(xe.jsxs)(ge,{align:"center",children:[Object(xe.jsx)("div",{children:G.conversationquantity}),Object(xe.jsx)("div",{children:o(N.a.billingreport_conversation)})]}),Object(xe.jsxs)(ge,{align:"center",children:[Object(xe.jsx)("div",{children:G.interactionquantity}),Object(xe.jsx)("div",{children:o(N.a.billingreport_interaction)})]}),Object(xe.jsxs)(ge,{align:"center",children:[Object(xe.jsx)("div",{children:G.supervisorquantity}),Object(xe.jsx)("div",{children:o(N.a.billingreport_supervisor)})]}),Object(xe.jsxs)(ge,{align:"center",children:[Object(xe.jsx)("div",{children:G.asesorquantity}),Object(xe.jsx)("div",{children:o(N.a.billingreport_agent)})]})]})})})})]}),!G&&Object(xe.jsx)("div",{className:f.containerDetail,children:Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:"col-6",label:"",value:o(N.a.billingperiodnotfound)})})})]})]})},Ae="IDPAYMENTS",Te=function(e){var t=e.dataCorp,a=e.dataOrg,i=e.setCustomSearch,c=Object(v.c)(),n=Object(w.a)().t,l=De(),o=Object(b.b)((function(e){return e.main.execute})),h=Object(b.b)((function(e){return e.main.mainData})),x=Object(b.b)((function(e){return e.main.memoryTable})),g=Object(b.b)((function(e){return e.login.validateToken.user})),y=Object(d.useState)({corpid:(null===g||void 0===g?void 0:g.corpid)||0,month:((new Date).getMonth()+1).toString().padStart(2,"0"),orgid:0,year:String((new Date).getFullYear()),paymentstatus:"",currency:""}),S=Object(s.a)(y,2),D=S[0],C=S[1],E=Object(d.useState)([]),_=Object(s.a)(E,2),q=_[0],R=_[1],k=Object(d.useState)(!1),A=Object(s.a)(k,2),T=A[0],P=A[1],z=Object(d.useState)(null),F=Object(s.a)(z,2),V=F[0],L=F[1],$=Object(d.useState)(!1),U=Object(s.a)($,2),H=U[0],G=U[1],Y=Object(d.useState)("view-1"),W=Object(s.a)(Y,2),K=W[0],Q=W[1],Z=Object(d.useState)(!1),J=Object(s.a)(Z,2),ee=J[0],te=J[1],ae=Object(d.useState)(!1),ie=Object(s.a)(ae,2),ce=ie[0],ne=ie[1],le=Object(d.useState)(null),oe=Object(s.a)(le,2),re=oe[0],se=oe[1],de=Object(d.useState)(!1),ue=Object(s.a)(de,2),be=ue[0],ve=ue[1],je=[{value:"PEN",description:"PEN"},{value:"USD",description:"USD"}],Oe=[{value:"PENDING",description:n(N.a.PENDING)},{value:"PAID",description:n(N.a.PAID)},{value:"NONE",description:n(N.a.NONE)}],pe=function(){return c(Object(O.g)(Object(m.Xg)(D)))},me=function(){return c(Object(O.g)(Object(m.Xg)(D)))};Object(d.useEffect)((function(){return pe(),c(Object(O.G)({id:Ae})),function(){c(Object(O.a)())}}),[]),Object(d.useEffect)((function(){H&&V&&(i((function(e){return Object(r.a)(Object(r.a)({},e),{},{year:null===V||void 0===V?void 0:V.year,month:null===V||void 0===V?void 0:V.month,corpid:null===V||void 0===V?void 0:V.corpid,orgid:null===V||void 0===V?void 0:V.orgid,totalize:0===(null===V||void 0===V?void 0:V.orgid)?1:2})})),G(!1))}),[V,H]),Object(d.useEffect)((function(){be&&(Q("view-2"),L(re),ve(!1))}),[re,be]),Object(d.useEffect)((function(){P(""===D.year)}),[D]),Object(d.useEffect)((function(){if(ee)if(o.loading||o.error){if(o.error){var e=n(o.code||"error_unexpected_error",{module:n(N.a.organization_plural).toLocaleLowerCase()});c(Object(I.e)({show:!0,severity:"error",message:e})),te(!1),c(Object(I.d)(!1))}}else c(Object(I.e)({show:!0,severity:"success",message:n(N.a.invoicesuccessfullyvoided)})),pe&&pe(),c(Object(I.d)(!1)),Q("view-1")}),[o,ee]),Object(d.useEffect)((function(){if(ce)if(o.loading||o.error){if(o.error){var e=n(o.code||"error_unexpected_error",{module:n(N.a.organization_plural).toLocaleLowerCase()});c(Object(I.e)({show:!0,severity:"error",message:e})),ne(!1),c(Object(I.d)(!1))}}else c(Object(I.e)({show:!0,severity:"success",message:n(N.a.success)})),pe&&pe(),c(Object(I.d)(!1)),Q("view-1")}),[o,ce]),Object(d.useEffect)((function(){var e;h.loading||h.error||R(null===(e=h.data.filter((function(e){return"CANCELED"!==e.invoicestatus})))||void 0===e?void 0:e.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{invoicestatuscolumn:n(e.invoicestatus),paymentstatuscolumn:n(e.paymentstatus),hasreportcolumn:e.hasreport?n(N.a.toreport):n(N.a.none),docnumbercolumn:e.serie&&e.correlative?e.serie+"-"+e.correlative.toString().padStart(8,"0"):"X000-00000000",urlxmlcolumn:e.urlxml?n(N.a.xmldocumentopen):n(N.a.pendingpayment),urlcdrcolumn:e.urlcdr?n(N.a.cdrdocumentopen):n(N.a.pendingpayment)})})))}),[h]);var fe=u.a.useMemo((function(){return[{NoFilter:!0,isComponent:!0,minWidth:60,width:"1%",accessor:"orgid",Cell:function(e){var t=e.cell.row.original,a=!1,i=!1;return"ERROR"===t.invoicestatus||"PENDING"===t.invoicestatus||"CANCELED"===t.invoicestatus||"PENDING"!==t.paymentstatus||t.totalamount<=0||(a=!0),"INVOICED"!==t.invoicestatus&&"PAID"!==t.paymentstatus&&t.hasreport&&"SUPERADMIN"===(null===g||void 0===g?void 0:g.roledesc)&&(i=!0),Object(xe.jsxs)(xe.Fragment,{children:[a&&Object(xe.jsx)(j.a,{variant:"contained",color:"primary",style:{backgroundColor:"#55BD84",marginRight:"10px"},startIcon:Object(xe.jsx)(X.a,{style:{color:"white"}}),onClick:function(){se(t),ve(!0)},children:n(N.a.pay)}),i&&Object(xe.jsx)(j.a,{variant:"contained",color:"primary",style:{backgroundColor:"#55BD84"},startIcon:Object(xe.jsx)(B.a,{style:{color:"white"}}),onClick:function(){var e;e=t,c(Object(I.a)({visible:!0,question:n(N.a.confirmation_invoicerefresh),callback:function(){c(Object(O.c)(Object(m.sg)(e))),c(Object(I.d)(!0)),ne(!0)}}))},children:n(N.a.refresh)})]})}},{Header:n(N.a.corporation),accessor:"corpdesc"},{Header:n(N.a.organization),accessor:"orgdesc"},{Header:n(N.a.year),accessor:"year"},{Header:n(N.a.month),accessor:"month"},{Header:n(N.a.currency),accessor:"currency"},{Header:n(N.a.totalamount),accessor:"totalamount",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.totalamount;return Object(m.jb)(t||0)}},{Header:n(N.a.invoicestatus),accessor:"invoicestatuscolumn"},{Header:n(N.a.paymentstatus),accessor:"paymentstatuscolumn"},{Header:n(N.a.gotoreport),accessor:"hasreportcolumn",Cell:function(e){var t=e.cell.row.original;return(null===t||void 0===t?void 0:t.hasreport)?Object(xe.jsx)(d.Fragment,{children:Object(xe.jsx)("div",{children:Object(xe.jsx)("span",{onClick:function(){L(t),G(!0)},style:{display:"block",cursor:"pointer",color:"blue",textDecoration:"underline"},children:n(N.a.toreport)})})}):n(N.a.none)}},{Header:n(N.a.billingvoucher),accessor:"docnumbercolumn",Cell:function(e){var t=e.cell.row.original.urlpdf,a=(e.cell.row.original.serie?e.cell.row.original.serie:"X000")+"-"+(e.cell.row.original.correlative?e.cell.row.original.correlative.toString().padStart(8,"0"):"00000000");return Object(xe.jsx)(d.Fragment,{children:Object(xe.jsx)("div",{children:t?Object(xe.jsx)("a",{href:t,target:"_blank",style:{display:"block"},rel:"noreferrer",children:a}):Object(xe.jsx)("span",{style:{display:"block"},children:a})})})}},{Header:n(N.a.xmldocument),accessor:"urlxmlcolumn",Cell:function(e){var t=e.cell.row.original.urlxml;return Object(xe.jsx)(d.Fragment,{children:Object(xe.jsx)("div",{children:t?Object(xe.jsx)("a",{href:t,target:"_blank",style:{display:"block"},rel:"noreferrer",children:n(N.a.xmldocumentopen)}):Object(xe.jsx)("span",{style:{display:"block"},children:n(N.a.pendingpayment)})})})}},{Header:n(N.a.cdrdocument),accessor:"urlcdrcolumn",Cell:function(e){var t=e.cell.row.original.urlcdr;return Object(xe.jsx)(d.Fragment,{children:Object(xe.jsx)("div",{children:t?Object(xe.jsx)("a",{href:t,target:"_blank",style:{display:"block"},rel:"noreferrer",children:n(N.a.cdrdocumentopen)}):Object(xe.jsx)("span",{style:{display:"block"},children:n(N.a.pendingpayment)})})})}}]}),[]);return"view-1"===K?Object(xe.jsx)("div",{style:{width:"100%"},children:Object(xe.jsx)(f.f,{columns:fe,ButtonsElement:function(){return Object(xe.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object(xe.jsx)(p.u,{label:n(N.a.year),style:{width:140},valueDefault:D.year,variant:"outlined",onChange:function(e){return C((function(t){return Object(r.a)(Object(r.a)({},t),{},{year:(null===e||void 0===e?void 0:e.value)||0})}))},data:m.O,optionDesc:"value",optionValue:"value"}),Object(xe.jsx)(p.q,{label:n(N.a.month),style:{width:214},valueDefault:D.month,variant:"outlined",onChange:function(e){return C((function(t){return Object(r.a)(Object(r.a)({},t),{},{month:e.map((function(e){return e.val})).join()})}))},data:m.N,uset:!0,prefixTranslation:"month_",optionDesc:"val",optionValue:"val"}),Object(xe.jsx)(p.u,{label:n(N.a.corporation),className:l.fieldsfilter,valueDefault:D.corpid,variant:"outlined",onChange:function(e){return C((function(t){return Object(r.a)(Object(r.a)({},t),{},{corpid:(null===e||void 0===e?void 0:e.corpid)||0,orgid:0})}))},data:t,optionDesc:"description",optionValue:"corpid",disabled:["ADMINISTRADOR","ADMINISTRADOR P","ADMINISTRADOR LIMADERMA"].includes((null===g||void 0===g?void 0:g.roledesc)||""),orderbylabel:!0}),Object(xe.jsx)(p.u,{label:n(N.a.organization),className:l.fieldsfilter,valueDefault:D.orgid,variant:"outlined",onChange:function(e){return C((function(t){return Object(r.a)(Object(r.a)({},t),{},{orgid:(null===e||void 0===e?void 0:e.orgid)||0})}))},data:a.filter((function(e){return e.corpid===D.corpid})),optionDesc:"orgdesc",optionValue:"orgid",orderbylabel:!0}),Object(xe.jsx)(p.u,{label:n(N.a.currency),className:l.fieldsfilter,valueDefault:D.currency,variant:"outlined",onChange:function(e){return C((function(t){return Object(r.a)(Object(r.a)({},t),{},{currency:(null===e||void 0===e?void 0:e.value)||""})}))},data:je,optionDesc:"description",optionValue:"value",orderbylabel:!0}),Object(xe.jsx)(p.u,{label:n(N.a.paymentstatus),className:l.fieldsfilter,valueDefault:D.paymentstatus,variant:"outlined",onChange:function(e){return C((function(t){return Object(r.a)(Object(r.a)({},t),{},{paymentstatus:(null===e||void 0===e?void 0:e.value)||""})}))},data:Oe,optionDesc:"description",optionValue:"value",orderbylabel:!0}),Object(xe.jsx)(j.a,{disabled:h.loading||T,variant:"contained",color:"primary",style:{width:120,backgroundColor:"#55BD84"},startIcon:Object(xe.jsx)(M.a,{style:{color:"white"}}),onClick:me,children:n(N.a.search)})]})},data:q,filterGeneral:!1,loading:h.loading,download:!0,register:!1,pageSizeDefault:Ae===x.id?-1===x.pageSize?20:x.pageSize:20,initialPageIndex:Ae===x.id?-1===x.page?0:x.page:0,initialStateFilter:Ae===x.id?Object.entries(x.filters).map((function(e){var t=Object(s.a)(e,2);return{id:t[0],value:t[1]}})):void 0})}):Object(xe.jsx)(Pe,{fetchData:pe,data:V,setViewSelected:Q})},Pe=function(e){var t=e.data,a=e.setViewSelected,i=e.fetchData,c=Object(v.c)(),n=Object(w.a)().t,l=De(),o=Object(b.b)((function(e){return e.culqi.request})),r=Object(b.b)((function(e){return e.main})),u=Object(b.b)((function(e){return e.main.multiDataAux})),f=Object(b.b)((function(e){return e.culqi.requestGetExchangeRate})),h=Object(b.b)((function(e){return e.login.validateToken.user})),x=Object(d.useState)([]),g=Object(s.a)(x,2),y=g[0],S=g[1],D=Object(d.useState)(""),_=Object(s.a)(D,2),q=_[0],R=_[1],k=Object(d.useState)(""),A=Object(s.a)(k,2),T=A[0],P=A[1],z=Object(d.useState)(""),F=Object(s.a)(z,2),V=F[0],L=F[1],M=Object(d.useState)(""),U=Object(s.a)(M,2),B=U[0],H=U[1],G=Object(d.useState)(!1),Y=Object(s.a)(G,2),W=Y[0],X=Y[1],Q=Object(d.useState)(""),Z=Object(s.a)(Q,2),J=Z[0],ee=Z[1],te=Object(d.useState)(!1),ae=Object(s.a)(te,2),ie=ae[0],ce=ae[1],ne=Object(d.useState)(0),le=Object(s.a)(ne,2),oe=le[0],re=le[1],se=Object(d.useState)(0),de=Object(s.a)(se,2),ue=de[0],be=de[1],ve=Object(d.useState)(!1),je=Object(s.a)(ve,2),Oe=je[0],pe=je[1],me=Object(d.useState)(!1),fe=Object(s.a)(me,2),he=fe[0],ge=fe[1],ye=Object(d.useState)(!1),we=Object(s.a)(ye,2),Ne=we[0],Se=we[1],Ce=Object(d.useState)(!1),Ee=Object(s.a)(Ce,2),Ie=Ee[0],_e=Ee[1],qe=Object(d.useState)(0),Re=Object(s.a)(qe,2),ke=Re[0],Ae=Re[1],Te=Object(d.useState)(0),Pe=Object(s.a)(Te,2),ze=Pe[0],Fe=Pe[1],Ve=Object(d.useState)(""),Le=Object(s.a)(Ve,2),$e=Le[0],Me=Le[1],Ue=Object(d.useState)("FAVORITE"),Be=Object(s.a)(Ue,2),He=Be[0],Ge=Be[1],Ye=Object(d.useState)(0),We=Object(s.a)(Ye,2),Xe=We[0],Ke=We[1],Qe=Object(d.useState)(""),Ze=Object(s.a)(Qe,2),Je=Ze[0],et=Ze[1],tt=Object(d.useState)(""),at=Object(s.a)(tt,2),it=at[0],ct=at[1],nt=[{val:"FAVORITE",description:n(N.a.paymentfavorite)},{val:"CARD",description:n(N.a.paymentcard)},{val:"CULQI",description:n(N.a.paymentculqi)}];Object(d.useEffect)((function(){c(Object(O.g)(Object(m.Kb)())),c(Object(E.h)(null)),c(Object(O.q)([Object(m.Ag)({corpid:(null===h||void 0===h?void 0:h.corpid)||0,id:0,orgid:0})])),c(Object(I.d)(!0)),pe(!0)}),[]),Object(d.useEffect)((function(){var e=u.data.findIndex((function(e){return"UFN_PAYMENTCARD_LST"===e.key}));e>-1&&S({loading:!1,data:u.data[e]&&u.data[e].success?u.data[e].data:[]})}),[u]),Object(d.useEffect)((function(){if(y&&y.data&&y.data.length>0){var e=y.data.find((function(e){return!0===e.favorite}));e&&(Ke(e.paymentcardid),et(e.cardnumber),ct(e.cardcode),Fe(e.paymentcardid),Me(e.cardcode))}}),[y]),Object(d.useEffect)((function(){He&&("FAVORITE"===He&&(Fe(Xe),Me(it)),"CARD"!==He&&"CULQI"!==He||(Fe(0),Me("")))}),[He]),Object(d.useEffect)((function(){he&&(!o.loading&&o.data?(c(Object(I.e)({show:!0,severity:"success",message:""+n(o.message||N.a.success)})),c(Object(I.d)(!1)),c(Object(E.m)()),lt&&lt(),ge(!1)):o.error&&(c(Object(I.e)({show:!0,severity:"error",message:""+n(o.message||N.a.error_cos_unexpected)})),c(Object(I.d)(!1)),c(Object(E.m)()),ge(!1)))}),[o,he]),Object(d.useEffect)((function(){if(Oe&&!r.mainData.loading&&!f.loading&&(c(Object(I.d)(!1)),r.mainData.data&&r.mainData.data[0])){var e=r.mainData.data[0],a=(null===t||void 0===t?void 0:t.orgcountry)||(null===t||void 0===t?void 0:t.corpcountry),i=(null===t||void 0===t?void 0:t.orgdoctype)||(null===t||void 0===t?void 0:t.corpdoctype);if(a&&i)if("PE"===a&&"6"===i){var n=(null===t||void 0===t?void 0:t.totalamount)||0;"USD"===(null===t||void 0===t?void 0:t.currency)&&(n*=(null===f||void 0===f?void 0:f.exchangerate)||0),n>e.detractionminimum?(be(Math.round(100*(((null===t||void 0===t?void 0:t.totalamount)||0)-((null===t||void 0===t?void 0:t.totalamount)||0)*(e.detraction||0)+Number.EPSILON))/100),re(Math.round(100*(((null===t||void 0===t?void 0:t.totalamount)||0)+Number.EPSILON))/100),Se(!0),ce(!0),_e(!0),Ae(Math.round(100*(100*(e.detraction||0)+Number.EPSILON))/100)):(be(Math.round(100*(((null===t||void 0===t?void 0:t.totalamount)||0)+Number.EPSILON))/100),re(Math.round(100*(((null===t||void 0===t?void 0:t.totalamount)||0)+Number.EPSILON))/100),ce(!0))}else be(Math.round(100*(((null===t||void 0===t?void 0:t.totalamount)||0)+Number.EPSILON))/100),re(Math.round(100*(((null===t||void 0===t?void 0:t.totalamount)||0)+Number.EPSILON))/100),ce(!0);ee(e.publickey)}}),[r,f,Oe]);var lt=function(){i(),a("view-1")},ot=[{id:"view-1",name:n(N.a.payment)},{id:"view-2",name:n(N.a.paymentdetail)}];return Object(xe.jsx)("div",{style:{width:"100%"},children:Object(xe.jsxs)("div",{children:[Object(xe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(xe.jsxs)("div",{children:[Object(xe.jsx)(p.L,{breadcrumbs:ot,handleClick:function(e){a(e),i()}}),Object(xe.jsx)(p.R,{title:null===t||void 0===t?void 0:t.description})]}),Object(xe.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(xe.jsx)(j.a,{variant:"contained",type:"button",color:"primary",startIcon:Object(xe.jsx)(C.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){a("view-1"),i()},children:n(N.a.back)}),"PENDING"===(null===t||void 0===t?void 0:t.paymentstatus)&&("INVOICED"===(null===t||void 0===t?void 0:t.invoicestatus)||"DRAFT"===(null===t||void 0===t?void 0:t.invoicestatus))&&"CULQI"===He&&J&&ie&&Object(xe.jsx)(K.a,{type:"CHARGE",invoiceid:null===t||void 0===t?void 0:t.invoiceid,title:null===t||void 0===t?void 0:t.description,description:null===t||void 0===t?void 0:t.productdescription,currency:null===t||void 0===t?void 0:t.currency,amount:Math.round(100*(100*ue+Number.EPSILON))/100,callbackOnSuccess:function(){lt()},buttontitle:n(N.a.proceedpayment),purchaseorder:T,comments:q,corpid:null===t||void 0===t?void 0:t.corpid,orgid:null===t||void 0===t?void 0:t.orgid,disabled:W,successmessage:n(N.a.culqipaysuccess),publickey:J,override:Ne,totalpay:ue}),"PENDING"===(null===t||void 0===t?void 0:t.paymentstatus)&&("INVOICED"===(null===t||void 0===t?void 0:t.invoicestatus)||"DRAFT"===(null===t||void 0===t?void 0:t.invoicestatus))&&("FAVORITE"===He||"CARD"===He)&&Object(xe.jsx)(j.a,{variant:"contained",color:"primary",type:"button",startIcon:Object(xe.jsx)($.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},onClick:function(){c(Object(I.a)({visible:!0,question:n(N.a.confirmation_payment),callback:function(){c(Object(I.d)(!0)),c(Object(E.d)({invoiceid:null===t||void 0===t?void 0:t.invoiceid,settings:{title:null===t||void 0===t?void 0:t.description,description:null===t||void 0===t?void 0:t.productdescription,currency:null===t||void 0===t?void 0:t.currency,amount:Math.round(100*(100*ue+Number.EPSILON))/100},token:null,metadata:{},purchaseorder:T,comments:q,corpid:null===t||void 0===t?void 0:t.corpid,orgid:null===t||void 0===t?void 0:t.orgid,override:Ne,paymentcardid:ze,paymentcardcode:$e,iscard:!0})),ge(!0)}}))},disabled:W||!ze||!$e,children:n(N.a.proceedpayment)})]})]}),Object(xe.jsxs)("div",{style:{backgroundColor:"white",padding:16},children:[Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:l.section,label:"",value:n(N.a.paymentmethod)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.u,{label:n(N.a.paymentmethodtype),onChange:function(e){Ge((null===e||void 0===e?void 0:e.val)||0)},className:"col-6",valueDefault:He,data:nt,optionDesc:"description",optionValue:"val",orderbylabel:!0}),"CARD"===He&&Object(xe.jsx)(p.u,{label:n(N.a.paymentmethodcard),onChange:function(e){Me((null===e||void 0===e?void 0:e.cardcode)||""),Fe((null===e||void 0===e?void 0:e.paymentcardid)||0)},className:"col-6",valueDefault:ze,data:y.data?y.data.filter((function(e){return!0!==e.favorite})):[],optionDesc:"cardnumber",optionValue:"paymentcardid",loading:y.loading,orderbylabel:!0}),"FAVORITE"===He&&Object(xe.jsx)(p.l,{className:"col-6",label:n(N.a.paymentmethodcard),valueDefault:Je,disabled:!0})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:l.section,label:"",value:n(N.a.paymentinformation)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-4",label:n(N.a.servicedescription),value:(null===t||void 0===t?void 0:t.productdescription)||""}),Object(xe.jsx)(p.v,{className:"col-4",label:n(N.a.totalamount),value:("USD"===(null===t||void 0===t?void 0:t.currency)?"$":"S/")+Object(m.jb)(oe||0)}),Object(xe.jsx)(p.v,{className:"col-4",label:n(N.a.totaltopay),value:("USD"===(null===t||void 0===t?void 0:t.currency)?"$":"S/")+Object(m.jb)(ue||0)})]}),Ie&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:l.commentary,label:"",value:n(N.a.detractionnotepay1)+"".concat(ke)+n(N.a.detractionnotepay2)})}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:l.section,label:"",value:n(N.a.additional_information)})}),"DRAFT"===(null===t||void 0===t?void 0:t.invoicestatus)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:l.commentary,label:"",value:n(N.a.additionalinformation2)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:["DRAFT"===(null===t||void 0===t?void 0:t.invoicestatus)&&Object(xe.jsx)(p.l,{label:n(N.a.purchaseorder),onChange:function(e){return function(e){P(e),e.length>15?(H(n(N.a.validation15char)),X(!0)):(H(""),q.length<=150&&X(!1))}(e)},valueDefault:T,error:B,className:"col-12"}),"DRAFT"!==(null===t||void 0===t?void 0:t.invoicestatus)&&Object(xe.jsx)(p.v,{label:n(N.a.purchaseorder),value:null===t||void 0===t?void 0:t.purchaseorder,className:"col-12"})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:["DRAFT"===(null===t||void 0===t?void 0:t.invoicestatus)&&Object(xe.jsx)(p.l,{label:n(N.a.comments),onChange:function(e){return function(e){R(e),e.length>150?(L(n(N.a.validation150char)),X(!0)):(L(""),T.length<=15&&X(!1))}(e)},valueDefault:q,error:V,className:"col-12"}),"DRAFT"!==(null===t||void 0===t?void 0:t.invoicestatus)&&Object(xe.jsx)(p.v,{label:n(N.a.comments),value:null===t||void 0===t?void 0:t.comments,className:"col-12"})]}),"DRAFT"===(null===t||void 0===t?void 0:t.invoicestatus)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:l.commentary,label:"",value:n(N.a.additionalinformation1)})})]})]})})},ze="IDBILLING",Fe=function(e){var t=e.dataCorp,a=e.dataOrg,c=Object(v.c)(),o=Object(w.a)().t,h=De(),x=Object(b.b)((function(e){return e.main.execute})),g=Object(b.b)((function(e){return e.main.mainData})),y=Object(b.b)((function(e){return e.main.multiData})),S=Object(b.b)((function(e){return e.main.memoryTable})),D=Object(b.b)((function(e){return e.login.validateToken.user})),C=Object(d.useState)({corpid:(null===D||void 0===D?void 0:D.corpid)||0,month:((new Date).getMonth()+1).toString().padStart(2,"0"),orgid:0,year:String((new Date).getFullYear()),paymentstatus:"",currency:""}),E=Object(s.a)(C,2),_=E[0],q=E[1],R=Object(d.useState)(!1),k=Object(s.a)(R,2),A=k[0],T=k[1],P=Object(d.useState)(!1),z=Object(s.a)(P,2),F=z[0],V=z[1],L=Object(d.useState)(null),$=Object(s.a)(L,2),U=$[0],B=$[1],H=Object(d.useState)([]),G=Object(s.a)(H,2),Y=G[0],W=G[1],X=Object(d.useState)(!1),K=Object(s.a)(X,2),Q=K[0],Z=K[1],J=Object(d.useState)(null),ee=Object(s.a)(J,2),te=ee[0],ae=ee[1],ie=Object(d.useState)("view-1"),ce=Object(s.a)(ie,2),ne=ce[0],le=ce[1],oe=Object(d.useState)(!1),re=Object(s.a)(oe,2),se=re[0],de=re[1],ue=Object(d.useState)(!1),be=Object(s.a)(ue,2),ve=be[0],je=be[1],Oe=Object(d.useState)(""),pe=Object(s.a)(Oe,2),me=pe[0],fe=pe[1],he=Object(d.useState)(!1),ge=Object(s.a)(he,2),ye=ge[0],we=ge[1],Ne=Object(d.useState)(!1),Se=Object(s.a)(Ne,2),Ce=Se[0],Ee=Se[1],Ie=[{value:"PEN",description:"PEN"},{value:"USD",description:"USD"}],_e=[{value:"PENDING",description:o(N.a.PENDING)},{value:"PAID",description:o(N.a.PAID)},{value:"NONE",description:o(N.a.NONE)}],qe=function(){return c(Object(O.g)(Object(m.Wg)(_)))},Re=function(e){switch(e){case"0":return"billingfield_billingno";case"1":return"billingfield_billingdni";case"4":return"billingfield_billingextra";case"6":return"billingfield_billingruc";case"7":return"billingfield_billingpass";default:return"pendingpayment"}};Object(d.useEffect)((function(){return qe(),c(Object(O.G)({id:ze})),function(){c(Object(O.a)()),c(Object(O.p)([Object(m.yc)("ADMINISTRADOR"===(null===D||void 0===D?void 0:D.roledesc)?null===D||void 0===D?void 0:D.corpid:0),Object(m.sd)(),Object(m.Ke)("TYPECREDIT",null,null===D||void 0===D?void 0:D.orgid,null===D||void 0===D?void 0:D.corpid),Object(m.Kb)()]))}}),[]),Object(d.useEffect)((function(){Z(""===_.year)}),[_]),Object(d.useEffect)((function(){if(!F&&ye)if(x.loading||x.error){if(x.error){var e=o(x.code||"error_unexpected_error",{module:o(N.a.organization_plural).toLocaleLowerCase()});c(Object(I.e)({show:!0,severity:"error",message:e})),we(!1),c(Object(I.d)(!1))}}else c(Object(I.e)({show:!0,severity:"success",message:o(N.a.deleteinvoicesuccess)})),qe&&qe(),c(Object(I.d)(!1)),le("view-1")}),[x,ye]),Object(d.useEffect)((function(){g.loading||g.error||W(g.data.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{receiverdoctypecolumn:o(Re(e.receiverdoctype)),receiverdocnumcolumn:e.receiverdocnum?e.receiverdocnum:o(N.a.pendingpayment),receiverbusinessnamecolumn:e.receiverbusinessname?e.receiverbusinessname:o(N.a.pendingpayment),invoicestatuscolumn:o(e.invoicestatus),paymentstatuscolumn:o(e.paymentstatus),invoicetypecolumn:o($e(e.invoicetype)),seriecolumn:e.serie&&e.correlative?e.serie+"-"+e.correlative.toString().padStart(8,"0"):null})})))}),[g]);var ke=u.a.useMemo((function(){return[{NoFilter:!0,isComponent:!0,minWidth:60,width:"1%",accessor:"corpid",Cell:function(e){var t=e.cell.row.original;return!1!==t.hasreport&&!0!==t.hasreport||"INVOICED"===t.invoicestatus||"PAID"===t.paymentstatus?"INVOICED"!==t.invoicestatus||"CREDITNOTE"===t.type?null:Object(xe.jsx)(p.M,{extraFunction:function(){return Fe(t)},extraOption:o(N.a.generatecreditnote)}):Object(xe.jsx)(p.M,{deleteFunction:function(){return Pe(t)}})}},{Header:o(N.a.invoiceid),accessor:"invoiceid"},{Header:o(N.a.corporation),accessor:"corpdesc"},{Header:o(N.a.organization),accessor:"orgdesc"},{Header:o(N.a.billingclienttype),accessor:"receiverdoctypecolumn"},{Header:o(N.a.documentnumber),accessor:"receiverdocnumcolumn"},{Header:o(N.a.businessname),accessor:"receiverbusinessnamecolumn"},{Header:o(N.a.invoice_serviceyear),accessor:"year"},{Header:o(N.a.invoice_servicemonth),accessor:"month"},{Header:o(N.a.invoicestatus),accessor:"invoicestatuscolumn"},{Header:o(N.a.paymentstatus),accessor:"paymentstatuscolumn"},{Header:o(N.a.documenttype),accessor:"invoicetypecolumn"},{Header:o(N.a.billingvoucher),accessor:"seriecolumn",Cell:function(e){var t=e.cell.row.original.urlpdf,a=e.cell.row.original.serie&&e.cell.row.original.correlative?e.cell.row.original.serie+"-"+e.cell.row.original.correlative.toString().padStart(8,"0"):null;return Object(xe.jsx)(d.Fragment,{children:Object(xe.jsx)("div",{children:t?Object(xe.jsx)("a",{onClick:function(e){e.stopPropagation()},href:t,target:"_blank",style:{display:"block"},rel:"noreferrer",children:a}):Object(xe.jsx)("span",{style:{display:"block"},children:a})})})}},{Header:o(N.a.invoicedate),accessor:"invoicedate",Cell:function(e){return e.cell.row.original.invoicedate||null}},{Header:o(N.a.expirationdate),accessor:"expirationdate",Cell:function(e){return e.cell.row.original.expirationdate||null}},{Header:o(N.a.currency),accessor:"currency"},{Header:o(N.a.taxbase),accessor:"subtotal",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.subtotal;return Object(m.jb)(t||0)}},{Header:o(N.a.billingtax),accessor:"taxes",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.taxes;return Object(m.jb)(t||0)}},{Header:o(N.a.totalamount),accessor:"totalamount",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.totalamount;return Object(m.jb)(t||0)}},{Header:o(N.a.comments),accessor:"commentcontent",Cell:function(e){var t=e.cell.row.original.commentcontent,a=e.cell.row.original;return t?Object(xe.jsx)(d.Fragment,{children:Object(xe.jsxs)("div",{style:{display:"inline-block"},children:[(t||"").substring(0,50),"... ",Object(xe.jsx)("a",{onClick:function(e){e.stopPropagation(),Te(a)},style:{cursor:"pointer",textDecoration:"underline",color:"blue"},rel:"noreferrer",children:o(N.a.seeMore)})]})}):Object(xe.jsx)(d.Fragment,{children:Object(xe.jsx)("div",{style:{display:"inline-block"},children:Object(xe.jsx)("a",{onClick:function(e){e.stopPropagation(),Te(a)},style:{display:"block",cursor:"pointer",textDecoration:"underline",color:"blue"},rel:"noreferrer",children:o(N.a.seeMore)})})})}}]}),[]);Object(d.useEffect)((function(){if(!F&&Ce)if(x.loading||x.error){if(x.error){var e=o(x.code||"error_unexpected_error",{module:o(N.a.tipification).toLocaleLowerCase()});c(Object(I.e)({show:!0,severity:"error",message:e})),c(Object(I.d)(!1)),Ee(!1)}}else c(Object(I.e)({show:!0,severity:"success",message:o(A?N.a.successful_import:N.a.successful_delete)})),T(!1),qe(),c(Object(I.d)(!1)),Ee(!1)}),[x,Ce]);var Ae=function(){var e=Object(l.a)(n.a.mark((function e(t){var a,l,o,s,d,u,b;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),!(a=t[0])){e.next=13;break}return l=y.data.findIndex((function(e){return"UFN_CORP_SEL"===e.key})),o=[{value:"PEN",description:"PEN"},{value:"USD",description:"USD"}],s=y.data[l]&&y.data[l].success?y.data[l].data:[],d=[{value:0,description:"NO DOMICILIADO"},{value:1,description:"DNI"},{value:4,description:"CARNE EXT."},{value:6,description:"RUC"},{value:7,description:"PASAPORTE"}],u=[{value:"01",description:"FACTURA"},{value:"03",description:"BOLETA"}],e.next=10,Object(m.rh)(a,void 0);case 10:(b=(b=e.sent).filter((function(e){return!["",null,void 0].includes(e.description)&&!["",null,void 0].includes(e.receiverdocnum)&&!["",null,void 0].includes(e.receiverbusinessname)&&!["",null,void 0].includes(e.receiverfiscaladdress)&&!["",null,void 0].includes(e.receivercountry)&&!["",null,void 0].includes(e.receivermail)&&!["",null,void 0].includes(e.invoicestatus)&&!["",null,void 0].includes(e.paymentstatus)&&!["",null,void 0].includes(e.totalamount)&&!["",null,void 0].includes(e.exchangerate)&&Object.keys(u.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.value,t.description))}),{})).includes(e.invoicetype)&&Object.keys(d.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.value,t.description))}),{})).includes(""+e.receiverdoctype)&&Object.keys(s.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.corpid,t.description))}),{})).includes(""+e.corpid)&&Object.keys(m.O.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.value,t.value))}),{})).includes(""+e.year)&&Object.keys(m.N.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.val,t.val))}),{})).includes("".concat(e.month).padStart(2,"0"))&&Object.keys(o.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.value,t.description))}),{})).includes(""+e.currency)}))).length>0&&(c(Object(I.d)(!0)),c(Object(O.c)({header:null,detail:b.map((function(e){return Object(m.Xf)(Object(r.a)(Object(r.a)({},e),{},{corpid:Number(e.corpid)||0,orgid:Number(e.orgid)||0,year:Number(e.year),month:Number(e.month),receiverdoctype:String(e.receiverdoctype),receiverdocnum:String(e.receiverdocnum),receiverbusinessname:String(e.receiverbusinessname),receiverfiscaladdress:String(e.receiverfiscaladdress),receivercountry:String(e.receivercountry),receivermail:String(e.receivermail),invoicetype:String(e.invoicetype),serie:String(e.serie||""),correlative:Number(e.correlative)||0,invoicedate:new Date(e.invoicedate),expirationdate:new Date(e.expirationdate),invoicestatus:String(e.invoicestatus),paymentstatus:String(e.paymentstatus),paymentdate:new Date(e.paymentdate),paidby:String(e.paidby||""),paymenttype:String(e.paymenttype||""),totalamount:Number(e.totalamount),exchangerate:Number(e.exchangerate),currency:String(e.currency),urlcdr:String(e.urlcdr||""),urlpdf:String(e.urlpdf||""),urlxml:String(e.urlxml||""),purchaseorder:String(e.purchaseorder||""),comments:String(e.comments||""),credittype:String(e.credittype),description:String(e.description),status:"ACTIVO"}))}))},!0)),Ee(!0));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(e){le("view-1"),B(e),V(!0)},Pe=function(e){c(Object(I.a)({visible:!0,question:o(N.a.cancelinvoice),callback:function(){c(Object(O.c)(Object(m.W)(e))),c(Object(I.d)(!0)),we(!0)}}))},Fe=function(e){le("view-2"),de(!0),je(!1),fe("generatecreditnote"),ae(e)},$e=function(e){switch(e){case"01":return"emissorinvoice";case"03":return"emissorticket";case"07":return"emissorcreditnote";default:return"emissornone"}};return"view-1"===ne?Object(xe.jsxs)("div",{style:{width:"100%"},children:[Object(xe.jsx)(Ve,{data:U,openModal:F,setOpenModal:V,onTrigger:function(){V(!1),qe(),le("view-1")}}),Object(xe.jsx)(f.f,{onClickRow:function(e){"PENDING"===e.invoicestatus||"DRAFT"===e.invoicestatus&&!0===e.hasreport?(le("view-3"),ae({row:e,edit:!0})):(le("view-2"),de(!1),je(!0),fe(""),ae(e))},columns:ke,ButtonsElement:function(){return Object(xe.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object(xe.jsx)(p.u,{label:o(N.a.year),style:{width:140},valueDefault:_.year,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{year:(null===e||void 0===e?void 0:e.value)||0})}))},data:m.O,optionDesc:"value",optionValue:"value"}),Object(xe.jsx)(p.q,{label:o(N.a.month),style:{width:214},valueDefault:_.month,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{month:e.map((function(e){return e.val})).join()})}))},data:m.N,uset:!0,prefixTranslation:"month_",optionDesc:"val",optionValue:"val"}),Object(xe.jsx)(p.u,{label:o(N.a.corporation),className:h.fieldsfilter,valueDefault:_.corpid,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{corpid:(null===e||void 0===e?void 0:e.corpid)||0,orgid:0})}))},data:t,optionDesc:"description",optionValue:"corpid",disabled:["ADMINISTRADOR","ADMINISTRADOR P","ADMINISTRADOR LIMADERMA"].includes((null===D||void 0===D?void 0:D.roledesc)||""),orderbylabel:!0}),Object(xe.jsx)(p.u,{label:o(N.a.organization),className:h.fieldsfilter,valueDefault:_.orgid,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{orgid:(null===e||void 0===e?void 0:e.orgid)||0})}))},data:a.filter((function(e){return e.corpid===_.corpid})),optionDesc:"orgdesc",optionValue:"orgid",orderbylabel:!0}),Object(xe.jsx)(p.u,{label:o(N.a.currency),className:h.fieldsfilter,valueDefault:_.currency,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{currency:(null===e||void 0===e?void 0:e.value)||""})}))},data:Ie,optionDesc:"description",optionValue:"value",orderbylabel:!0}),Object(xe.jsx)(p.u,{label:o(N.a.paymentstatus),className:h.fieldsfilter,valueDefault:_.paymentstatus,variant:"outlined",onChange:function(e){return q((function(t){return Object(r.a)(Object(r.a)({},t),{},{paymentstatus:(null===e||void 0===e?void 0:e.value)||""})}))},data:_e,optionDesc:"description",optionValue:"value",orderbylabel:!0}),Object(xe.jsx)(j.a,{disabled:g.loading||Q,variant:"contained",color:"primary",style:{width:120,backgroundColor:"#55BD84"},startIcon:Object(xe.jsx)(M.a,{style:{color:"white"}}),onClick:qe,children:o(N.a.search)})]})},data:Y,filterGeneral:!1,importCSV:Ae,handleTemplate:function(){var e=y.data.findIndex((function(e){return"UFN_CORP_SEL"===e.key})),t=y.data.findIndex((function(e){return"UFN_ORG_SEL"===e.key})),a=y.data[e]&&y.data[e].success?y.data[e].data:[],c=y.data[t]&&y.data[t].success?y.data[t].data:[],n=[a.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.corpid,o("".concat(t.description))))}),{}),c.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.orgid,o("".concat(t.orgdesc))))}),{}),m.O.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},null===t||void 0===t?void 0:t.value,o("".concat(null===t||void 0===t?void 0:t.value))))}),{}),m.N.reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},+t.val,o("".concat(+t.val))))}),{}),{},[{value:0,description:"NO DOMICILIADO"},{value:1,description:"DNI"},{value:4,description:"CARNE EXT."},{value:6,description:"RUC"},{value:7,description:"PASAPORTE"}].reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.value,o("".concat(t.description))))}),{}),{},{},{},{"CODIGO DE PAIS":"CODIGO DE PAIS"},{},[{value:"01",description:"FACTURA"},{value:"03",description:"BOLETA"}].reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.value,o("".concat(t.description))))}),{}),{},{},{},{},{DRAFT:"DRAFT",INVOICED:"INVOICED",ERROR:"ERROR"},{PENDING:"PENDING",PAID:"PAID"},{},{},{CARD:"CARD",REGISTEREDCARD:"REGISTEREDCARD"},{},{},[{value:"PEN",description:"PEN"},{value:"USD",description:"USD"}].reduce((function(e,t){return Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},t.value,o("".concat(t.description))))}),{}),{},{},{},{},{},{typecredit_alcontado:"typecredit_alcontado",typecredit_15:"typecredit_15",typecredit_30:"typecredit_30",typecredit_45:"typecredit_45",typecredit_60:"typecredit_60",typecredit_90:"typecredit_90"}];Object(m.bb)("".concat(o(N.a.template)," - ").concat(o(N.a.invoice)),Object(m.fh)(n,["corpid","orgid","year","month","description","receiverdoctype","receiverdocnum","receiverbusinessname","receiverfiscaladdress","receivercountry","receivermail","invoicetype","serie","correlative","invoicedate","expirationdate","invoicestatus","paymentstatus","paymentdate","paidby","paymenttype","totalamount","exchangerate","currency","urlcdr","urlpdf","urlxml","purchaseorder","comments","credittype"]))},download:!0,loading:g.loading||y.loading,register:!0,handleRegister:function(){le("view-3"),ae({row:null,edit:!0})},registertext:N.a.generateinvoice,pageSizeDefault:ze===S.id?-1===S.pageSize?20:S.pageSize:20,initialPageIndex:ze===S.id?-1===S.page?0:S.page:0,initialStateFilter:ze===S.id?Object.entries(S.filters).map((function(e){var t=Object(s.a)(e,2);return{id:t[0],value:t[1]}})):void 0})]}):"view-2"===ne?Object(xe.jsx)(Le,{data:te,fetchData:qe,setViewSelected:le,creditNote:se,regularize:ve,operationName:me}):Object(xe.jsx)(Be,{data:te,fetchData:qe,setViewSelected:le})},Ve=function(e){var t=e.data,a=e.openModal,i=e.setOpenModal,c=e.onTrigger,n=Object(v.c)(),l=Object(w.a)().t,o=De(),r=Object(b.b)((function(e){return e.main.mainAux2})),u=Object(b.b)((function(e){return e.main.execute})),f=Object(d.useState)([]),h=Object(s.a)(f,2),x=h[0],g=h[1],y=Object(d.useState)(!1),S=Object(s.a)(y,2),D=S[0],C=S[1],E=Object(d.useState)(!1),_=Object(s.a)(E,2),q=_[0],R=_[1],k=Object(d.useState)(""),A=Object(s.a)(k,2),T=A[0],P=A[1],z=Object(d.useState)(!1),F=Object(s.a)(z,2),V=F[0],L=F[1],$=Object(d.useState)({corpid:null===t||void 0===t?void 0:t.corpid,orgid:null===t||void 0===t?void 0:t.orgid,invoiceid:null===t||void 0===t?void 0:t.invoiceid,invoicecommentid:0,description:"",status:"ACTIVO",type:"",commentcontent:"",commenttype:"text",commentcaption:""}),M=Object(s.a)($,2),U=M[0],B=M[1],H=function(){n(Object(O.i)(Object(m.Yg)({corpid:null===t||void 0===t?void 0:t.corpid,orgid:null===t||void 0===t?void 0:t.orgid,invoiceid:null===t||void 0===t?void 0:t.invoiceid,invoicecommentid:0}))),R(!0),n(Object(I.d)(!0))};Object(d.useEffect)((function(){if(a&&t){g([]),P(""),L(!1);var e=U;e.corpid=null===t||void 0===t?void 0:t.corpid,e.orgid=null===t||void 0===t?void 0:t.orgid,e.invoiceid=null===t||void 0===t?void 0:t.invoiceid,e.invoicecommentid=0,e.description="",e.status="ACTIVO",e.type="",e.commentcontent="",e.commenttype="text",e.commentcaption="",B(e),H()}}),[t,a]),Object(d.useEffect)((function(){q&&(r.loading||r.error?r.error&&(R(!1),n(Object(I.d)(!1))):(g(r.data),n(Object(I.d)(!1)),R(!1)))}),[r,q]),Object(d.useEffect)((function(){if(D)if(u.loading||u.error)u.error&&(n(Object(I.e)({show:!0,severity:"error",message:l(u.code||"error_unexpected_error",{module:l(N.a.organization_plural).toLocaleLowerCase()})})),n(Object(I.d)(!1)),C(!1));else{n(Object(I.e)({show:!0,severity:"success",message:l(N.a.success)})),n(Object(I.d)(!1)),C(!1),g([]);var e=U;e.commentcontent="",B(e),H(),L(!0)}}),[u,D]);return Object(xe.jsx)(p.g,{open:a,title:l(N.a.invoicecomments),buttonText1:l(N.a.close),handleClickButton1:function(){i(!1),V&&c()},children:Object(xe.jsxs)("div",{style:{overflowY:"auto"},children:[x.map((function(e,t){return Object(xe.jsxs)("div",{style:{borderStyle:"solid",borderWidth:"1px",borderColor:"#762AA9",borderRadius:"4px",padding:"10px",margin:"10px"},children:[Object(xe.jsxs)("div",{style:{display:"flex"},children:[Object(xe.jsxs)("b",{style:{width:"100%"},children:[e.createby," ",l(N.a.invoiceat)," ",Object(m.K)(e.createdate||"").toLocaleString()]}),Object(xe.jsx)(j.a,{className:o.buttoncomments,variant:"contained",color:"primary",type:"button",style:{backgroundColor:"#FB5F5F"},onClick:function(){return function(e){U&&e&&n(Object(I.a)({visible:!0,question:l(N.a.confirmation_delete),callback:function(){var t=U;t.corpid=null===e||void 0===e?void 0:e.corpid,t.orgid=null===e||void 0===e?void 0:e.orgid,t.invoiceid=null===e||void 0===e?void 0:e.invoiceid,t.invoicecommentid=null===e||void 0===e?void 0:e.invoicecommentid,t.description=null===e||void 0===e?void 0:e.description,t.status="ELIMINADO",t.type=null===e||void 0===e?void 0:e.type,t.commentcontent=null===e||void 0===e?void 0:e.commentcontent,t.commenttype=null===e||void 0===e?void 0:e.commenttype,t.commentcaption=null===e||void 0===e?void 0:e.commentcaption,n(Object(O.c)(Object(m.Yf)(t))),n(Object(I.d)(!0)),C(!0)}}))}(e)},children:l(N.a.delete)})]}),Object(xe.jsx)(p.o,{className:"col-12",label:"",valueDefault:e.commentcontent,disabled:!0})]})})),Object(xe.jsxs)("div",{style:{padding:"10px",margin:"10px"},children:[Object(xe.jsxs)("div",{style:{display:"flex"},children:[Object(xe.jsxs)("b",{style:{width:"100%"},children:[l(N.a.new)," ",l(N.a.invoicecomment)]}),Object(xe.jsx)(j.a,{className:o.buttoncomments,variant:"contained",color:"primary",type:"button",style:{backgroundColor:"#55BD84"},onClick:function(){U&&(U.commentcontent?(P(""),n(Object(I.a)({visible:!0,question:l(N.a.confirmation_save),callback:function(){n(Object(O.c)(Object(m.Yf)(U))),n(Object(I.d)(!0)),C(!0)}}))):P(l(N.a.required_fields_missing)))},children:l(N.a.save)})]}),Object(xe.jsx)(p.o,{className:"col-12",label:"",valueDefault:U.commentcontent,error:T,onChange:function(e){var t=U;t.commentcontent=e,B(t)}})]})]})})},Le=function(e){var t,a,i,c=e.data,n=e.creditNote,l=e.regularize,o=e.operationName,r=e.setViewSelected,f=e.fetchData,h=Object(v.c)(),x=Object(w.a)().t,g=De(),y=Object(b.b)((function(e){return e.culqi.requestCreateCreditNote})),D=Object(b.b)((function(e){return e.culqi.requestEmitInvoice})),q=Object(b.b)((function(e){return e.main.multiDataAux})),R=Object(d.useState)([]),k=Object(s.a)(R,2),A=k[0],T=k[1],P=Object(d.useState)(!1),z=Object(s.a)(P,2),F=z[0],V=z[1],L=Object(d.useState)(0),$=Object(s.a)(L,2),M=$[0],U=$[1],B=Object(d.useState)([]),H=Object(s.a)(B,2),G=H[0],Y=H[1],W=Object(d.useState)(!1),K=Object(s.a)(W,2),Q=K[0],J=K[1],ne=Object(d.useState)(!1),le=Object(s.a)(ne,2),oe=le[0],re=le[1],se=[{id:"view-1",name:x(N.a.billingtitle)},{id:"view-2",name:x(N.a.billinginvoicedetail)}],de=[{value:"01",description:x(N.a.billingcreditnote01)},{value:"04",description:x(N.a.billingcreditnote04)}];Object(d.useEffect)((function(){c||r("view-1"),T({loading:!1,data:[]}),Y({loading:!1,data:[]});var e=(null===c||void 0===c?void 0:c.referenceinvoiceid)?c.referenceinvoiceid:null===c||void 0===c?void 0:c.invoiceid;h(Object(O.q)([Object(m.sd)(),Object(m.fd)(null===c||void 0===c?void 0:c.corpid,null===c||void 0===c?void 0:c.orgid,e)]))}),[]),Object(d.useEffect)((function(){if(Oe("productdetail",[]),G&&G.data){var e=[];G.data.forEach((function(t){e.push({productdescription:t.description,productcode:t.productcode,productmeasure:t.measureunit,productquantity:t.quantity,productsubtotal:t.productnetprice})})),ge(e)}}),[G]),Object(d.useEffect)((function(){var e=q.data.findIndex((function(e){return"UFN_MEASUREUNIT_SEL"===e.key}));e>-1&&T({loading:!1,data:q.data[e]&&q.data[e].success?q.data[e].data:[]});var t=q.data.findIndex((function(e){return"UFN_INVOICEDETAIL_SELBYINVOICEID"===e.key}));t>-1&&Y({loading:!1,data:q.data[t]&&q.data[t].success?q.data[t].data:[]})}),[q]);var ue=Object(S.d)({defaultValues:{corpid:null===c||void 0===c?void 0:c.corpid,orgid:null===c||void 0===c?void 0:c.orgid,invoiceid:null===c||void 0===c?void 0:c.invoiceid,creditnotetype:"",creditnotemotive:"",creditnotediscount:0,invoicestatus:null===c||void 0===c?void 0:c.invoicestatus,productdetail:[],hasreport:null===c||void 0===c?void 0:c.hasreport}}),be=ue.control,ve=ue.handleSubmit,je=ue.register,Oe=ue.setValue,pe=ue.getValues,me=ue.formState.errors,fe=Object(S.c)({control:be,name:"productdetail"}),he=fe.fields,ge=fe.append;u.a.useEffect((function(){je("corpid",{validate:function(e){return e&&e>0||""+x(N.a.field_required)}}),je("orgid"),je("invoiceid",{validate:function(e){return e&&e>0||""+x(N.a.field_required)}}),je("creditnotetype",{validate:function(e){return l||e&&e.length>0||""+x(N.a.field_required)}}),je("creditnotemotive",{validate:function(e){return l||e&&e.length>10||""+x(N.a.field_required_shorter)}}),je("creditnotediscount",{validate:function(e){return l||"04"!==pe("creditnotetype")||e&&e>0&&e<(null===c||void 0===c?void 0:c.subtotal)||""+x(N.a.discountvalidmessage)}})}),[je]);var ye=ve((function(e){if("ERROR"===(null===e||void 0===e?void 0:e.invoicestatus)||"INVOICED"!==(null===e||void 0===e?void 0:e.invoicestatus)&&"ERROR"!==(null===e||void 0===e?void 0:e.invoicestatus)&&(null===e||void 0===e?void 0:e.hasreport)){h(Object(I.a)({visible:!0,question:"ERROR"===(null===e||void 0===e?void 0:e.invoicestatus)?x(N.a.confirmatiom_reemit):x(N.a.confirmation_emit),callback:function(){h(Object(E.g)(e)),h(Object(I.d)(!0)),re(!0)}}))}else{if(n){h(Object(I.a)({visible:!0,question:x(N.a.confirmation_save),callback:function(){h(Object(E.e)(e)),h(Object(I.d)(!0)),re(!0)}}))}l&&V(!0)}}));return Object(d.useEffect)((function(){oe&&("ERROR"===(null===c||void 0===c?void 0:c.invoicestatus)||"INVOICED"!==(null===c||void 0===c?void 0:c.invoicestatus)&&"ERROR"!==(null===c||void 0===c?void 0:c.invoicestatus)&&(null===c||void 0===c?void 0:c.hasreport)?D.loading||D.error?D.error&&(h(Object(I.e)({show:!0,severity:"error",message:x(D.code||"error_unexpected_db_error")})),h(Object(I.d)(!1)),f(),r("view-1"),re(!1)):(h(Object(I.e)({show:!0,severity:"success",message:x(D.code||"success")})),h(Object(I.d)(!1)),f(),r("view-1"),re(!1)):y.loading||y.error?y.error&&(h(Object(I.e)({show:!0,severity:"error",message:x(y.code||"error_unexpected_db_error")})),h(Object(I.d)(!1)),f(),r("view-1"),re(!1)):(h(Object(I.e)({show:!0,severity:"success",message:x(y.code||"success")})),h(Object(I.d)(!1)),f(),r("view-1"),re(!1)))}),[y,D,oe]),Object(xe.jsxs)("div",{style:{width:"100%"},children:[Object(xe.jsx)($e,{data:c,openModal:F,setOpenModal:V,onTrigger:function(){V(!1),f(),r("view-1")}}),Object(xe.jsxs)("form",{onSubmit:ye,children:[Object(xe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(xe.jsxs)("div",{children:[Object(xe.jsx)(p.L,{breadcrumbs:se,handleClick:function(e){r(e),f()}}),Object(xe.jsx)(p.R,{title:x(o||N.a.billinginvoiceview)})]}),Object(xe.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(xe.jsx)(j.a,{variant:"contained",type:"button",color:"primary",startIcon:Object(xe.jsx)(C.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){r("view-1"),f()},children:x(N.a.back)}),"ERROR"===(null===c||void 0===c?void 0:c.invoicestatus)&&"07"!==(null===c||void 0===c?void 0:c.invoicetype)?Object(xe.jsx)(j.a,{className:g.button,variant:"contained",color:"primary",type:"submit",startIcon:Object(xe.jsx)(X.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:x(N.a.reemitinvoice)}):null,"INVOICED"!==(null===c||void 0===c?void 0:c.invoicestatus)&&"ERROR"!==(null===c||void 0===c?void 0:c.invoicestatus)&&"07"!==(null===c||void 0===c?void 0:c.invoicetype)&&(null===c||void 0===c?void 0:c.hasreport)?Object(xe.jsx)(j.a,{className:g.button,variant:"contained",color:"primary",type:"submit",startIcon:Object(xe.jsx)(X.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:x(N.a.emitinvoice)}):null,"INVOICED"===(null===c||void 0===c?void 0:c.invoicestatus)&&n?Object(xe.jsx)(j.a,{className:g.button,variant:"contained",color:"primary",type:"submit",startIcon:Object(xe.jsx)(X.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:x(N.a.emitinvoice)}):null,"INVOICED"===(null===c||void 0===c?void 0:c.invoicestatus)&&"PAID"!==(null===c||void 0===c?void 0:c.paymentstatus)&&"07"!==(null===c||void 0===c?void 0:c.invoicetype)&&l?Object(xe.jsx)(j.a,{className:g.button,variant:"contained",color:"primary",type:"submit",startIcon:Object(xe.jsx)(X.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:x(N.a.regulatepayment)}):null]})]}),Object(xe.jsxs)("div",{style:{backgroundColor:"white",padding:16},children:[Object(xe.jsxs)(_.a,{value:M,indicatorColor:"primary",variant:"fullWidth",style:{borderBottom:"1px solid #EBEAED",backgroundColor:"#FFF",marginTop:8},textColor:"primary",onChange:function(e,t){return U(t)},children:[Object(xe.jsx)(p.b,{label:x(N.a.billinginvoicedata)}),Object(xe.jsx)(p.b,{label:x(N.a.billingadditionalinfo)})]}),0===M&&Object(xe.jsxs)("div",{className:g.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:x(N.a.invoice_serviceyear),value:null===c||void 0===c?void 0:c.year,className:"col-6"}),Object(xe.jsx)(p.v,{label:x(N.a.invoice_servicemonth),value:null===c||void 0===c?void 0:c.month,className:"col-6"})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:x(N.a.docType),value:x(function(e){switch(e){case"0":return"billingfield_billingno";case"1":return"billingfield_billingdni";case"4":return"billingfield_billingextra";case"6":return"billingfield_billingruc";case"7":return"billingfield_billingpass";default:return""}}(null===c||void 0===c?void 0:c.receiverdoctype)),className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.documentnumber),value:null===c||void 0===c?void 0:c.receiverdocnum,className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.billingname),value:null===c||void 0===c?void 0:c.receiverbusinessname,className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.invoicestatus),value:x(null===c||void 0===c?void 0:c.invoicestatus),className:"col-3"})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:x(N.a.invoiceid),value:null===c||void 0===c?void 0:c.invoiceid,className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.documenttype),value:x(function(e){switch(e){case"01":return"emissorinvoice";case"03":return"emissorticket";case"07":return"emissorcreditnote";default:return""}}(null===c||void 0===c?void 0:c.invoicetype)),className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.billingvoucher),value:((null===c||void 0===c?void 0:c.serie)?c.serie:"X000")+"-"+((null===c||void 0===c?void 0:c.correlative)?null===c||void 0===c?void 0:c.correlative.toString().padStart(8,"0"):"00000000"),className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.invoicedate),value:null===c||void 0===c?void 0:c.invoicedate,className:"col-3"})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:x(N.a.credittype),value:x(null===c||void 0===c?void 0:c.credittype),className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.dueDate),value:null===c||void 0===c?void 0:c.expirationdate,className:"col-3"}),"CREDITNOTE"===(null===c||void 0===c?void 0:c.type)?Object(xe.jsx)(p.v,{label:x(N.a.referenceddocument),value:((null===c||void 0===c?void 0:c.referenceserie)?c.referenceserie:"X000")+"-"+((null===c||void 0===c?void 0:c.referencecorrelative)?null===c||void 0===c?void 0:c.referencecorrelative.toString().padStart(8,"0"):"00000000"),className:"col-3"}):Object(xe.jsx)(p.v,{label:x(N.a.purchaseorder),value:null===c||void 0===c?void 0:c.purchaseorder,className:"col-3"}),"CREDITNOTE"===(null===c||void 0===c?void 0:c.type)?Object(xe.jsx)(p.v,{label:x(N.a.ticket_reason),value:null===c||void 0===c?void 0:c.creditnotemotive,className:"col-3"}):Object(xe.jsx)(p.v,{label:x(N.a.comments),value:null===c||void 0===c?void 0:c.comments,className:"col-3"})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:x(N.a.currency),value:null===c||void 0===c?void 0:c.currency,className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.taxbase),value:Object(m.jb)((null===c||void 0===c?void 0:c.subtotal)||0),className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.billingtax),value:Object(m.jb)((null===c||void 0===c?void 0:c.taxes)||0),className:"col-3"}),Object(xe.jsx)(p.v,{label:x(N.a.totalamount),value:Object(m.jb)((null===c||void 0===c?void 0:c.totalamount)||0),className:"col-3"})]}),"CREDITNOTE"===(null===c||void 0===c?void 0:c.type)?Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:x(N.a.creditnotetype),value:x(function(e){switch(e){case"01":return"billingcreditnote01";case"04":return"billingcreditnote04";default:return""}}(null===c||void 0===c?void 0:c.creditnotetype)),className:"col-3"}),"04"===(null===c||void 0===c?void 0:c.creditnotetype)?Object(xe.jsx)(p.v,{label:x(N.a.globaldiscount),value:Object(m.jb)((null===c||void 0===c?void 0:c.creditnotediscount)||0),className:"col-3"}):null]}):null,n?Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.u,{className:"col-3",label:x(N.a.creditnotetype),onChange:function(e){Oe("creditnotetype",null===e||void 0===e?void 0:e.value),J("04"===(null===e||void 0===e?void 0:e.value))},valueDefault:pe("creditnotetype"),data:de,optionDesc:"description",optionValue:"value",error:null===me||void 0===me||null===(t=me.creditnotetype)||void 0===t?void 0:t.message,orderbylabel:!0}),Object(xe.jsx)(p.l,{label:x(N.a.ticket_reason),className:"col-3",valueDefault:pe("creditnotemotive"),onChange:function(e){return Oe("creditnotemotive",e)},error:null===me||void 0===me||null===(a=me.creditnotemotive)||void 0===a?void 0:a.message}),Q?Object(xe.jsx)(p.l,{label:x(N.a.globaldiscount),className:"col-3",valueDefault:pe("creditnotediscount"),onChange:function(e){return Oe("creditnotediscount",e)},error:null===me||void 0===me||null===(i=me.creditnotediscount)||void 0===i?void 0:i.message,type:"number",inputProps:{step:"any"}}):null]}):null,Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(Z.a,{children:Object(xe.jsxs)(ee.a,{children:[Object(xe.jsx)(te.a,{children:Object(xe.jsxs)(ae.a,{children:[Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:x(N.a.description),className:g.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:x(N.a.measureunit),className:g.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:x(N.a.unitaryprice),className:g.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:x(N.a.quantity),className:g.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:x(N.a.billingsubtotal),className:g.fieldView})})]})}),Object(xe.jsx)(ce.a,{children:he.map((function(e,t){return Object(xe.jsxs)(ae.a,{children:[Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:pe("productdetail.".concat(t,".productdescription")),className:g.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.u,{className:g.fieldView,loading:A.loading,valueDefault:pe("productdetail.".concat(t,".productmeasure")),data:A.data,optionDesc:"description",optionValue:"code",disabled:!0,orderbylabel:!0})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:Object(m.jb)(pe("productdetail.".concat(t,".productsubtotal"))||0),className:g.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:Object(m.jb)(pe("productdetail.".concat(t,".productquantity"))||0),className:g.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:Object(m.jb)((pe("productdetail.".concat(t,".productsubtotal"))||0)*(pe("productdetail.".concat(t,".productquantity"))||0)),className:g.fieldView})})]},e.id)}))})]})})})]}),1===M&&Object(xe.jsxs)("div",{className:g.containerDetail,children:[Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{label:"",value:x(N.a.invoiceinformation),className:g.section})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[(null===c||void 0===c?void 0:c.urlpdf)?Object(xe.jsx)("div",{className:"col-4",children:Object(xe.jsx)("a",{href:null===c||void 0===c?void 0:c.urlpdf,target:"_blank",rel:"noreferrer",children:x(N.a.urlpdf)})}):Object(xe.jsx)(p.v,{label:x(N.a.urlpdf),value:x(N.a.pendingpayment),className:"col-4"}),(null===c||void 0===c?void 0:c.urlcdr)?Object(xe.jsx)("div",{className:"col-4",children:Object(xe.jsx)("a",{href:null===c||void 0===c?void 0:c.urlcdr,target:"_blank",rel:"noreferrer",children:x(N.a.urlcdr)})}):Object(xe.jsx)(p.v,{label:x(N.a.urlcdr),value:x(N.a.pendingpayment),className:"col-4"}),(null===c||void 0===c?void 0:c.urlxml)?Object(xe.jsx)("div",{className:"col-4",children:Object(xe.jsx)("a",{href:null===c||void 0===c?void 0:c.urlxml,target:"_blank",rel:"noreferrer",children:x(N.a.urlxml)})}):Object(xe.jsx)(p.v,{label:x(N.a.urlxml),value:x(N.a.pendingpayment),className:"col-4"})]}),(null===c||void 0===c?void 0:c.errordescription)?Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{label:x(N.a.billingerror),value:null===c||void 0===c?void 0:c.errordescription,className:"col-12"})}):null,Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{label:"",value:x(N.a.paymentinformation),className:g.section})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:x(N.a.paymentstatus),value:x(null===c||void 0===c?void 0:c.paymentstatus),className:"col-4"}),Object(xe.jsx)(p.v,{label:x(N.a.paymentdate),value:(null===c||void 0===c?void 0:c.paymentdate)?Se(new Date(null===c||void 0===c?void 0:c.paymentdate)).replace("T"," ").substring(0,19):x(N.a.none),className:"col-4"}),Object(xe.jsx)(p.v,{label:x(N.a.billingusername),value:(null===c||void 0===c?void 0:c.paymentdate)?null===c||void 0===c?void 0:c.changeby:x(N.a.none),className:"col-4"})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:x(N.a.paymentnote),value:x((null===c||void 0===c?void 0:c.invoicepaymentnote)||N.a.none),className:"col-4"}),Object(xe.jsx)(p.v,{label:x(N.a.paymentcommentary),value:x((null===c||void 0===c?void 0:c.paymentcommentary)||N.a.none),className:"col-4"}),(null===c||void 0===c?void 0:c.invoicereferencefile)?Object(xe.jsx)("div",{className:"col-4",children:Object(xe.jsx)("a",{href:null===c||void 0===c?void 0:c.invoicereferencefile,target:"_blank",rel:"noreferrer",children:x(N.a.paymentreferenceview)})}):Object(xe.jsx)(p.v,{label:x(N.a.paymentfile),value:x(N.a.none),className:"col-4"})]})]})]})]})]})},$e=function(e){var t,a,i,c=e.data,o=e.openModal,r=e.setOpenModal,j=e.onTrigger,m=Object(v.c)(),f=Object(w.a)().t,h=Object(b.b)((function(e){return e.culqi.requestRegularizeInvoice})),x=Object(b.b)((function(e){return e.main.uploadFile})),g=Object(d.useState)(!1),y=Object(s.a)(g,2),D=y[0],C=y[1],_=Object(d.useState)(!1),q=Object(s.a)(_,2),R=q[0],k=q[1],A=Object(d.useState)(null),T=Object(s.a)(A,2),P=T[0],F=T[1],V=Object(S.d)({defaultValues:{corpid:null===c||void 0===c?void 0:c.corpid,orgid:null===c||void 0===c?void 0:c.orgid,invoiceid:null===c||void 0===c?void 0:c.invoiceid,invoicereferencefile:"",invoicepaymentnote:"",invoicepaymentcommentary:""}}),L=V.register,$=V.trigger,M=V.handleSubmit,U=V.setValue,B=V.getValues,H=V.formState.errors;u.a.useEffect((function(){L("corpid",{validate:function(e){return e&&e>0||""+f(N.a.field_required)}}),L("orgid"),L("invoiceid",{validate:function(e){return e&&e>0||""+f(N.a.field_required)}}),L("invoicereferencefile",{validate:function(e){return e&&e.length>0||""+f(N.a.field_required)}}),L("invoicepaymentnote",{validate:function(e){return e&&e.length>0||""+f(N.a.field_required)}}),L("invoicepaymentcommentary",{validate:function(e){return e&&e.length>0||""+f(N.a.field_required)}})}),[L]),Object(d.useEffect)((function(){D&&(h.loading||h.error?h.error&&(m(Object(I.e)({show:!0,severity:"error",message:f(h.code||"error_unexpected_db_error")})),m(Object(I.d)(!1)),C(!1)):(m(Object(I.e)({show:!0,severity:"success",message:f(h.code||"success")})),m(Object(I.d)(!1)),C(!1),j()))}),[h,D]);var G=M((function(e){m(Object(I.a)({visible:!0,question:f(N.a.confirmation_save),callback:function(){m(Object(E.j)(e)),m(Object(I.d)(!0)),C(!0)}}))})),Y=Object(d.useCallback)((function(){document.getElementById("attachmentInput").click()}),[]),W=Object(d.useCallback)((function(e){var t=null===e||void 0===e?void 0:e.item(0);if(t){F(t);var a=new FormData;a.append("file",t,t.name),m(Object(O.I)(a)),k(!0)}}),[]),X=function(){var e=Object(l.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=document.getElementById("attachmentInput"))&&(a.value=""),F(null),U("invoicereferencefile",B("invoicereferencefile").split(",").filter((function(e){return e!==t})).join("")),e.next=6,$("invoicereferencefile");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){R&&(x.loading||x.error?x.error&&k(!1):(U("invoicereferencefile",[B("invoicereferencefile"),(null===x||void 0===x?void 0:x.url)||""].join("")),k(!1)))}),[R,x]),Object(xe.jsxs)(p.g,{open:o,title:f(N.a.regulatepayment),buttonText1:f(N.a.cancel),handleClickButton1:function(){return r(!1)},buttonText2:f(N.a.save),handleClickButton2:G,button2Type:"submit",children:[Object(xe.jsx)(p.l,{label:f(N.a.paymentnote),valueDefault:B("invoicepaymentnote"),error:null===H||void 0===H||null===(t=H.invoicepaymentnote)||void 0===t?void 0:t.message,onChange:function(e){return U("invoicepaymentnote",e)},className:"col-12"}),Object(xe.jsx)(p.l,{label:f(N.a.paymentcommentary),valueDefault:B("invoicepaymentcommentary"),error:null===H||void 0===H||null===(a=H.invoicepaymentcommentary)||void 0===a?void 0:a.message,onChange:function(e){return U("invoicepaymentcommentary",e)},className:"col-12"}),Object(xe.jsx)(p.l,{label:f(N.a.evidenceofpayment),valueDefault:B("invoicereferencefile"),error:null===H||void 0===H||null===(i=H.invoicereferencefile)||void 0===i?void 0:i.message,disabled:!0}),Object(xe.jsxs)(u.a.Fragment,{children:[Object(xe.jsx)("input",{accept:"image/*",style:{display:"none"},id:"attachmentInput",type:"file",onChange:function(e){return W(e.target.files)}}),Object(xe.jsx)(z.a,{onClick:Y,disabled:R||null!==P,children:Object(xe.jsx)(se.a,{color:"primary"})}),!!B("invoicereferencefile")&&B("invoicereferencefile").split(",").map((function(e,t){return Object(xe.jsx)(Ue,{src:e,onClose:function(e){return X(e)}},"attachment-".concat(t))})),R&&P&&Object(xe.jsx)(Ue,{src:P},"attachment-x")]})]})},Me=Object(x.a)((function(e){return{root:{backgroundColor:"white",margin:e.spacing(1),padding:e.spacing(1),borderRadius:4,display:"flex",flexDirection:"row",maxWidth:300,maxHeight:80,alignItems:"center",width:"fit-content",overflow:"hidden"},infoContainer:{display:"flex",flexDirection:"column",height:"100%"},btnContainer:{display:"flex",flexDirection:"column",justifyContent:"center",color:"lightgrey"}}})),Ue=function(e){var t=e.src,a=e.onClose,i=Me(),c=Object(d.useCallback)((function(){return"string"===typeof t&&t.includes("http")}),[t]),n=Object(d.useCallback)((function(){if(c()){var e=t.match(/.*\/(.+?)\./);return e&&e.length>1?e[1]:""}return t.name}),[c,t]),l=Object(d.useCallback)((function(){var e,a,i;return c()?(null===(i=t.split(".").pop())||void 0===i?void 0:i.toUpperCase())||"-":(null===(e=t.name)||void 0===e||null===(a=e.split(".").pop())||void 0===a?void 0:a.toUpperCase())||"-"}),[c,t]);return Object(xe.jsxs)(J.a,{className:i.root,elevation:2,children:[Object(xe.jsx)(H.a,{}),Object(xe.jsx)("div",{style:{width:"0.5em"}}),Object(xe.jsx)("div",{className:i.infoContainer,children:Object(xe.jsxs)("div",{children:[Object(xe.jsx)("div",{style:{fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",maxWidth:190,whiteSpace:"nowrap"},children:n()}),l()]})}),Object(xe.jsx)("div",{style:{width:"0.5em"}}),!c()&&!a&&Object(xe.jsx)(F.a,{color:"primary"}),Object(xe.jsxs)("div",{className:i.btnContainer,children:[a&&Object(xe.jsx)(z.a,{size:"small",onClick:function(){return a(t)},children:Object(xe.jsx)(G.a,{})}),c()&&Object(xe.jsx)("div",{style:{height:"10%"}}),c()&&Object(xe.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",download:"".concat(n(),".").concat(l()),children:Object(xe.jsx)(z.a,{size:"small",children:Object(xe.jsx)(Y.a,{})})})]})]})},Be=function(e){var t,a,i,c,n,l,o,f,h,x,g,D,q,R,k,A,T,P,F,V,L,$,M=e.data,H=e.setViewSelected,G=e.fetchData,Y=Object(v.c)(),W=Object(w.a)().t,K=De(),Q=Object(b.b)((function(e){return e.culqi.requestCreateInvoice})),J=Object(b.b)((function(e){return e.main.execute})),ne=(null===M||void 0===M||null===(t=M.row)||void 0===t?void 0:t.hasreport)||!1,le=Object(b.b)((function(e){return e.main.multiDataAux})),re=Object(b.b)((function(e){return e.login.validateToken.user})),se=Object(d.useState)([]),de=Object(s.a)(se,2),ue=de[0],be=de[1],ve=Object(d.useState)([]),je=Object(s.a)(ve,2),Oe=je[0],pe=je[1],me=Object(d.useState)([]),fe=Object(s.a)(me,2),he=fe[0],ge=fe[1],ye=Object(d.useState)([]),we=Object(s.a)(ye,2),Ne=we[0],Se=we[1],Ce=Object(d.useState)([]),Ee=Object(s.a)(Ce,2),Ie=Ee[0],_e=Ee[1],qe=Object(d.useState)([]),Re=Object(s.a)(qe,2),ke=Re[0],Ae=Re[1],Te=Object(d.useState)(),Pe=Object(s.a)(Te,2),ze=Pe[0],Fe=Pe[1],Ve=Object(d.useState)(!1),Le=Object(s.a)(Ve,2),$e=Le[0],Me=Le[1],Ue=Object(d.useState)(!1),Be=Object(s.a)(Ue,2),He=Be[0],Ge=Be[1],Ye=Object(d.useState)(!1),We=Object(s.a)(Ye,2),Xe=We[0],Ke=We[1],Qe=Object(d.useState)(!1),Ze=Object(s.a)(Qe,2),Je=Ze[0],et=Ze[1],tt=Object(d.useState)(!1),at=Object(s.a)(tt,2),it=at[0],ct=at[1],nt=Object(d.useState)(0),lt=Object(s.a)(nt,2),ot=lt[0],rt=lt[1],st=Object(d.useState)(0),dt=Object(s.a)(st,2),ut=dt[0],bt=dt[1],vt=Object(d.useState)(0),jt=Object(s.a)(vt,2),Ot=jt[0],pt=jt[1],mt=Object(d.useState)(!1),ft=Object(s.a)(mt,2),ht=ft[0],xt=ft[1],gt=Object(d.useState)(!1),yt=Object(s.a)(gt,2),wt=yt[0],Nt=yt[1],St=[{id:"view-1",name:W(N.a.billingtitle)},{id:"view-3",name:W(N.a.billinggeneration)}];Object(d.useEffect)((function(){pe({loading:!0,data:[]}),ge({loading:!0,data:[]}),_e({loading:!0,data:[]}),Se({loading:!1,data:[]}),Ae({loading:!1,data:[]}),Y(Object(O.q)([Object(m.yc)("ADMINISTRADOR"===(null===re||void 0===re?void 0:re.roledesc)?null===re||void 0===re?void 0:re.corpid:0),Object(m.sd)(),Object(m.Ke)("TYPECREDIT",null,null===re||void 0===re?void 0:re.orgid,null===re||void 0===re?void 0:re.corpid),Object(m.Kb)()]))}),[]),Object(d.useEffect)((function(){if(He&&(null===M||void 0===M?void 0:M.row))if("INVOICED"!==(null===M||void 0===M?void 0:M.row.invoicestatus)&&"PAID"!==(null===M||void 0===M?void 0:M.row.paymentstatus)&&ne&&"SUPERADMIN"===(null===re||void 0===re?void 0:re.roledesc)&&xt(!0),Y(Object(O.q)([Object(m.fd)(null===M||void 0===M?void 0:M.row.corpid,null===M||void 0===M?void 0:M.row.orgid,null===M||void 0===M?void 0:M.row.invoiceid)])),qt("invoicecurrency",null===M||void 0===M?void 0:M.row.currency),qt("invoicepurchaseorder",null===M||void 0===M?void 0:M.row.purchaseorder),qt("invoicecomments",null===M||void 0===M?void 0:M.row.comments),null===M||void 0===M?void 0:M.row.orgid){var e,t=he.data.find((function(e){return e.corpid===(null===M||void 0===M?void 0:M.row.corpid)}));Y(Object(O.q)([Object(m.yd)(0,t.corpid)])),qt("billbyorg",null===(e=t)||void 0===e?void 0:e.billbyorg),Fe(t),et(!0)}else{var a;if(he)if(he.data)t=he.data.find((function(e){return e.corpid===(null===M||void 0===M?void 0:M.row.corpid)})),Ft(t),qt("billbyorg",null===(a=t)||void 0===a?void 0:a.billbyorg),Fe(null)}}),[He]),Object(d.useEffect)((function(){if(He&&Xe&&(et(!1),null===M||void 0===M?void 0:M.row)){var e=Ne.data.find((function(e){return e.orgid===(null===M||void 0===M?void 0:M.row.orgid)}));Ft(e||ze)}}),[Je,Xe]),Object(d.useEffect)((function(){if(qt("productdetail",[]),(null===M||void 0===M?void 0:M.row)&&ke&&ke.data){var e=[];ke.data.forEach((function(t){e.push({productdescription:t.description,productcode:t.productcode,productmeasure:t.measureunit,productquantity:t.quantity,productsubtotal:t.netamount})})),Pt(e),Vt()}}),[ke]),Object(d.useEffect)((function(){var e=le.data.findIndex((function(e){return"UFN_CORP_SEL"===e.key}));e>-1&&(ge({loading:!1,data:le.data[e]&&le.data[e].success?le.data[e].data:[]}),Ge(!0));var t=le.data.findIndex((function(e){return"UFN_ORG_SEL"===e.key}));t>-1&&(Se({loading:!1,data:le.data[t]&&le.data[t].success?le.data[t].data:[]}),Ke(!0));var a=le.data.findIndex((function(e){return"UFN_MEASUREUNIT_SEL"===e.key}));a>-1&&_e({loading:!1,data:le.data[a]&&le.data[a].success?le.data[a].data:[]});var i=le.data.findIndex((function(e){return"UFN_DOMAIN_LST_VALORES"===e.key}));i>-1&&pe({loading:!1,data:le.data[i]&&le.data[i].success?le.data[i].data:[]});var c=le.data.findIndex((function(e){return"UFN_INVOICEDETAIL_SELBYINVOICEID"===e.key}));c>-1&&Ae({loading:!1,data:le.data[c]&&le.data[c].success?le.data[c].data:[]});var n=le.data.findIndex((function(e){return"UFN_APPSETTING_INVOICE_SEL"===e.key}));n>-1&&be({loading:!1,data:le.data[n]&&le.data[n].success?le.data[n].data:[]})}),[le]);var Dt=Object(S.d)({defaultValues:{corpid:0,orgid:0,clientdoctype:"",clientdocnumber:"",clientbusinessname:"",clientfiscaladdress:"",clientcountry:"",clientmail:"",clientcredittype:"",invoicecreatedate:new Date((new Date).setHours((new Date).getHours()-5)).toISOString().split("T")[0],invoiceduedate:"",invoicecurrency:"USD",invoicetotalamount:0,invoicepurchaseorder:"",invoicecomments:"",autosendinvoice:null,productdetail:[],billbyorg:!1,onlyinsert:!1,invoiceid:(null===M||void 0===M?void 0:M.row)?null===M||void 0===M?void 0:M.row.invoiceid:0,year:(null===M||void 0===M?void 0:M.row)?null===M||void 0===M?void 0:M.row.year:0,month:(null===M||void 0===M?void 0:M.row)?null===M||void 0===M?void 0:M.row.month:0}}),Ct=Dt.control,Et=Dt.handleSubmit,It=Dt.register,_t=Dt.trigger,qt=Dt.setValue,Rt=Dt.getValues,kt=Dt.formState.errors,At=Object(S.c)({control:Ct,name:"productdetail"}),Tt=At.fields,Pt=At.append,zt=At.remove;u.a.useEffect((function(){It("corpid",{validate:function(e){return e&&e>0||""+W(N.a.field_required)}}),It("orgid",{validate:function(e){return!1===Rt("billbyorg")||e&&e>0||""+W(N.a.field_required)}}),It("clientdoctype",{validate:function(e){return e&&e.length>0||""+W(N.a.field_required)}}),It("clientdocnumber",{validate:function(e){return e&&e.length>0||""+W(N.a.field_required)}}),It("clientbusinessname",{validate:function(e){return e&&e.length>0||""+W(N.a.field_required)}}),It("clientfiscaladdress"),It("clientcountry"),It("clientmail"),It("clientcredittype"),It("invoicecreatedate",{validate:function(e){return e&&e.length>0||""+W(N.a.field_required)}}),It("invoiceduedate"),It("invoicecurrency",{validate:function(e){return e&&e.length>0||""+W(N.a.field_required)}}),It("invoicetotalamount",{validate:function(e){return e&&e>0||""+W(N.a.billingamountvalidation)}}),It("invoicepurchaseorder",{validate:function(e){return""===e||(e||"").length<=15||""+W(N.a.validation15char)}}),It("invoicecomments",{validate:function(e){return""===e||(e||"").length<=150||""+W(N.a.validation150char)}}),It("autosendinvoice"),It("year",{validate:function(e){return e&&e>0||""+W(N.a.field_required)}}),It("month",{validate:function(e){return e&&e>0||""+W(N.a.field_required)}})}),[It]);var Ft=function(e){if(qt("corpid",(null===e||void 0===e?void 0:e.corpid)||0),qt("orgid",(null===e||void 0===e?void 0:e.orgid)||0),qt("clientdoctype",(null===e||void 0===e?void 0:e.doctype)||""),qt("clientdocnumber",(null===e||void 0===e?void 0:e.docnum)||""),qt("clientbusinessname",(null===e||void 0===e?void 0:e.businessname)||""),qt("clientfiscaladdress",(null===e||void 0===e?void 0:e.fiscaladdress)||""),qt("clientcountry",(null===e||void 0===e?void 0:e.sunatcountry)||""),qt("clientmail",(null===e||void 0===e?void 0:e.contactemail)||""),qt("clientcredittype",(null===e||void 0===e?void 0:e.credittype)||""),qt("autosendinvoice",null===e||void 0===e?void 0:e.autosendinvoice),null===e||void 0===e?void 0:e.credittype){var t=new Date(Rt("invoicecreatedate"));switch(e.credittype){case"typecredit_15":t=new Date(t.setDate(t.getDate()+15));break;case"typecredit_30":t=new Date(t.setDate(t.getDate()+30));break;case"typecredit_45":t=new Date(t.setDate(t.getDate()+45));break;case"typecredit_60":t=new Date(t.setDate(t.getDate()+60));break;case"typecredit_90":t=new Date(t.setDate(t.getDate()+90))}qt("invoiceduedate",t.toISOString().split("T")[0])}else qt("invoiceduedate","");if((null===e||void 0===e?void 0:e.doctype)&&(null===ue||void 0===ue?void 0:ue.data)){var a=Rt("invoicetotalamount");"0"===(null===e||void 0===e?void 0:e.doctype)?(bt(0),pt(a||0)):(bt((a||0)*ue.data[0].igv),pt((a||0)+(a||0)*ue.data[0].igv))}_t("corpid"),_t("orgid"),_t("clientdoctype"),_t("clientdocnumber"),_t("clientbusinessname"),_t("clientfiscaladdress"),_t("clientcountry"),_t("clientmail"),_t("clientcredittype"),_t("autosendinvoice"),_t("invoicecreatedate"),_t("invoiceduedate")},Vt=function(){var e=Rt("productdetail"),t=0;e&&e.forEach((function(e){e.productquantity&&e.productsubtotal&&(t+=e.productquantity*e.productsubtotal)})),ue&&ue.data&&("0"===Rt("clientdoctype")?(bt(0),pt(t)):(bt(t*ue.data[0].igv),pt(t+t*ue.data[0].igv))),qt("invoicetotalamount",t),_t("invoicetotalamount")},Lt=Et((function(e){var t,a;Y(Object(I.a)({visible:!0,question:it?W(N.a.confirmation_save):"".concat(W(N.a.invoiceconfirmation01),"\n\n").concat(W(N.a.invoiceconfirmation02)).concat(Rt("clientdocnumber"),"\n").concat(W(N.a.invoiceconfirmation03)).concat(Rt("clientbusinessname"),"\n").concat(W(N.a.invoiceconfirmation04)).concat(Rt("year"),"\n").concat(W(N.a.invoiceconfirmation05)).concat(Rt("month"),"\n").concat(W(N.a.invoiceconfirmation06)).concat(W((t=Rt("clientcountry")||"",a=Rt("clientdoctype")||"","PE"===t&&"6"===a||"PE"!==t&&"0"===a?"emissorinvoice":"PE"!==t||"1"!==a&&"4"!==a&&"7"!==a?"":"emissorticket")),"\n").concat(W(N.a.invoiceconfirmation07)).concat(W(Rt("clientcredittype")),"\n").concat(W(N.a.invoiceconfirmation08)).concat(Rt("invoicecurrency"),"\n").concat(W(N.a.invoiceconfirmation09)).concat(Object(m.jb)(Rt("invoicetotalamount")||0),"\n").concat(W(N.a.invoiceconfirmation10)).concat(Object(m.jb)(ut||0),"\n").concat(W(N.a.invoiceconfirmation11)).concat(Object(m.jb)(Ot||0),"\n\n").concat(W(N.a.invoiceconfirmation12)),callback:function(){Y(Object(E.f)(e)),Y(Object(I.d)(!0)),Me(!0)}}))}));return Object(d.useEffect)((function(){wt&&(J.loading||J.error?J.error&&(Y(Object(I.e)({show:!0,severity:"error",message:W(J.code||"error_unexpected_error",{module:W(N.a.organization_plural).toLocaleLowerCase()})})),Y(Object(I.d)(!1)),Nt(!1)):(Y(Object(I.e)({show:!0,severity:"success",message:W(N.a.success)})),Y(Object(I.d)(!1)),G&&G(),H("view-1"),Nt(!1)))}),[J,wt]),Object(d.useEffect)((function(){$e&&(Q.loading||Q.error?Q.error&&(Y(Object(I.e)({show:!0,severity:"error",message:W(Q.code||"error_unexpected_db_error")})),Y(Object(I.d)(!1)),G(),H("view-1"),Me(!1)):(Y(Object(I.e)({show:!0,severity:"success",message:W(Q.code||"success")})),Y(Object(I.d)(!1)),G(),H("view-1"),Me(!1)))}),[Q,$e]),Object(xe.jsx)("div",{style:{width:"100%"},children:Object(xe.jsxs)("form",{onSubmit:Lt,children:[Object(xe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(xe.jsxs)("div",{children:[Object(xe.jsx)(p.L,{breadcrumbs:St,handleClick:function(e){H(e),G()}}),Object(xe.jsx)(p.R,{title:W(N.a.emiteinvoicetitle)})]}),Object(xe.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(xe.jsx)(j.a,{variant:"contained",type:"button",color:"primary",startIcon:Object(xe.jsx)(C.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){H("view-1"),G()},children:W(N.a.back)}),!ne&&Object(xe.jsx)(j.a,{className:K.button,variant:"contained",color:"primary",type:"submit",onClick:function(){qt("onlyinsert",!0),ct(!0)},startIcon:Object(xe.jsx)(y.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:W(N.a.saveasdraft)}),ne&&ht&&Object(xe.jsx)(j.a,{className:K.button,variant:"contained",color:"primary",onClick:function(){!function(e){Y(Object(I.a)({visible:!0,question:W(N.a.confirmation_invoicerefresh),callback:function(){Y(Object(O.c)(Object(m.sg)(e))),Y(Object(I.d)(!0)),Nt(!0)}}))}((null===M||void 0===M?void 0:M.row)||null)},startIcon:Object(xe.jsx)(B.a,{style:{color:"white"}}),style:{backgroundColor:"#55BD84"},children:W(N.a.refresh)}),Object(xe.jsx)(j.a,{className:K.button,variant:"contained",color:"primary",type:"submit",onClick:function(){qt("onlyinsert",!1),ct(!1)},startIcon:Object(xe.jsx)(X.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:W(N.a.emitinvoice)})]})]}),Object(xe.jsxs)("div",{className:K.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:K.section,label:"",value:W(N.a.clientsearch)}),Object(xe.jsx)(p.v,{className:K.commentary,label:"",value:W(N.a.billingtypevalidation)+(Rt("corpid")&&Rt("orgid")?W(N.a.organization):Rt("corpid")?W(N.a.corporation):"")})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.u,{label:W(N.a.corporation),loading:he.loading,onChange:function(e){!function(e){Ft(e),e?(Y(Object(O.q)([Object(m.yd)(0,e.corpid)])),qt("billbyorg",null===e||void 0===e?void 0:e.billbyorg),Fe(e)):(Se({loading:!1,data:[]}),qt("billbyorg",!1),Fe(null))}(e)},className:"col-3",valueDefault:(null===M||void 0===M||null===(a=M.row)||void 0===a?void 0:a.corpid)?null===M||void 0===M||null===(i=M.row)||void 0===i?void 0:i.corpid:Rt("corpid"),data:he.data,optionDesc:"description",optionValue:"corpid",error:null===kt||void 0===kt||null===(c=kt.corpid)||void 0===c?void 0:c.message,orderbylabel:!0,disabled:ne}),Object(xe.jsx)(p.u,{label:W(N.a.organization),loading:Ne.loading,onChange:function(e){!function(e){Ft(e||ze)}(e)},className:"col-3",valueDefault:(null===M||void 0===M||null===(n=M.row)||void 0===n?void 0:n.orgid)?null===M||void 0===M||null===(l=M.row)||void 0===l?void 0:l.orgid:Rt("orgid"),data:Ne.data,optionDesc:"orgdesc",optionValue:"orgid",disabled:!1===Rt("billbyorg")||ne,error:null===kt||void 0===kt||null===(o=kt.orgid)||void 0===o?void 0:o.message,orderbylabel:!0}),Object(xe.jsx)(p.u,{label:W(N.a.invoice_serviceyear),onChange:function(e){qt("year",parseInt((null===e||void 0===e?void 0:e.value)||"0"))},className:"col-3",valueDefault:(null===M||void 0===M||null===(f=M.row)||void 0===f?void 0:f.year)?null===M||void 0===M||null===(h=M.row)||void 0===h?void 0:h.year.toString():Rt("year"),data:m.O,optionDesc:"value",optionValue:"value",error:null===kt||void 0===kt||null===(x=kt.year)||void 0===x?void 0:x.message,disabled:ne}),Object(xe.jsx)(p.u,{label:W(N.a.invoice_servicemonth),onChange:function(e){qt("month",parseInt((null===e||void 0===e?void 0:e.val)||"0"))},className:"col-3",valueDefault:((null===M||void 0===M||null===(g=M.row)||void 0===g?void 0:g.month)||Rt("month")).toString().padStart(2,"0"),data:m.N,optionDesc:"val",optionValue:"val",error:null===kt||void 0===kt||null===(D=kt.month)||void 0===D?void 0:D.message,disabled:ne})]})]}),Object(xe.jsxs)("div",{style:{backgroundColor:"white",padding:16},children:[Object(xe.jsx)(_.a,{value:ot,indicatorColor:"primary",variant:"fullWidth",style:{borderBottom:"1px solid #EBEAED",backgroundColor:"#FFF",marginTop:8},textColor:"primary",onChange:function(e,t){return rt(t)},children:Object(xe.jsx)(p.b,{label:W(N.a.billinginvoicedata)})}),0===ot&&Object(xe.jsxs)("div",{className:K.containerDetail,children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.l,{label:W(N.a.docType),valueDefault:W(function(e){switch(e){case"0":return"billingfield_billingno";case"1":return"billingfield_billingdni";case"4":return"billingfield_billingextra";case"6":return"billingfield_billingruc";case"7":return"billingfield_billingpass";default:return""}}(Rt("clientdoctype"))),className:"col-3",error:null===kt||void 0===kt||null===(q=kt.clientdoctype)||void 0===q?void 0:q.message,disabled:!0}),Object(xe.jsx)(p.l,{label:W(N.a.documentnumber),valueDefault:Rt("clientdocnumber"),className:"col-3",error:null===kt||void 0===kt||null===(R=kt.clientdocnumber)||void 0===R?void 0:R.message,disabled:!0}),Object(xe.jsx)(p.l,{label:W(N.a.billingname),valueDefault:Rt("clientbusinessname"),className:"col-3",error:null===kt||void 0===kt||null===(k=kt.clientbusinessname)||void 0===k?void 0:k.message,disabled:!0}),Object(xe.jsx)(p.v,{label:W(N.a.invoicestatus),value:W((null===M||void 0===M?void 0:M.invoicestatus)||"DRAFT"),className:"col-3"})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{label:W(N.a.invoiceid),value:(null===M||void 0===M?void 0:M.invoiceid)||W(N.a.pendingsave),className:"col-3"}),Object(xe.jsx)(p.v,{label:W(N.a.documenttype),value:W(function(e){switch(e){case"01":return"emissorinvoice";case"03":return"emissorticket";case"07":return"emissorcreditnote";default:return N.a.pendingpayment}}(null===M||void 0===M?void 0:M.invoicetype)),className:"col-3"}),Object(xe.jsx)(p.v,{label:W(N.a.billingvoucher),value:((null===M||void 0===M?void 0:M.serie)?M.serie:"X000")+"-"+((null===M||void 0===M?void 0:M.correlative)?null===M||void 0===M?void 0:M.correlative.toString().padStart(8,"0"):"00000000"),className:"col-3"}),Object(xe.jsx)(p.v,{label:W(N.a.invoicedate),value:Rt("invoicecreatedate"),className:"col-3"})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.u,{className:"col-3",label:W(N.a.credittype),loading:Oe.loading,onChange:function(e){qt("clientcredittype",null===e||void 0===e?void 0:e.domainvalue),function(e){if(e){var t=new Date(Rt("invoicecreatedate"));switch(e){case"typecredit_15":t=new Date(t.setDate(t.getDate()+15));break;case"typecredit_30":t=new Date(t.setDate(t.getDate()+30));break;case"typecredit_45":t=new Date(t.setDate(t.getDate()+45));break;case"typecredit_60":t=new Date(t.setDate(t.getDate()+60));break;case"typecredit_90":t=new Date(t.setDate(t.getDate()+90))}qt("invoiceduedate",t.toISOString().split("T")[0])}else qt("invoiceduedate","");_t("invoiceduedate")}(null===e||void 0===e?void 0:e.domainvalue)},valueDefault:(null===M||void 0===M||null===(A=M.row)||void 0===A?void 0:A.credittype)?null===M||void 0===M||null===(T=M.row)||void 0===T?void 0:T.credittype:Rt("clientcredittype"),data:Oe.data,optionDesc:"domainvalue",optionValue:"domainvalue",error:null===kt||void 0===kt||null===(P=kt.clientcredittype)||void 0===P?void 0:P.message,uset:!0,orderbylabel:!0}),Object(xe.jsx)(p.v,{label:W(N.a.dueDate),value:Rt("invoiceduedate"),className:"col-3"}),Object(xe.jsx)(p.l,{label:W(N.a.purchaseorder),className:"col-3",valueDefault:Rt("invoicepurchaseorder"),onChange:function(e){return qt("invoicepurchaseorder",e)},error:null===kt||void 0===kt||null===(F=kt.invoicepurchaseorder)||void 0===F?void 0:F.message}),Object(xe.jsx)(p.l,{label:W(N.a.comments),className:"col-3",valueDefault:Rt("invoicecomments"),onChange:function(e){return qt("invoicecomments",e)},error:null===kt||void 0===kt||null===(V=kt.invoicecomments)||void 0===V?void 0:V.message})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.u,{className:"col-3",label:W(N.a.currency),onChange:function(e){return qt("invoicecurrency",null===e||void 0===e?void 0:e.value)},valueDefault:Rt("invoicecurrency"),data:[{value:"PEN",description:"PEN"},{value:"USD",description:"USD"}],optionDesc:"description",optionValue:"value",error:null===kt||void 0===kt||null===(L=kt.invoicecurrency)||void 0===L?void 0:L.message,orderbylabel:!0,disabled:ne}),Object(xe.jsx)(p.l,{label:W(N.a.taxbase),valueDefault:Object(m.jb)(Rt("invoicetotalamount")||0),className:"col-3",error:null===kt||void 0===kt||null===($=kt.invoicetotalamount)||void 0===$?void 0:$.message,disabled:!0}),Object(xe.jsx)(p.v,{label:W(N.a.billingtax),value:Object(m.jb)(ut||0),className:"col-3"}),Object(xe.jsx)(p.v,{label:W(N.a.totalamount),value:Object(m.jb)(Ot||0),className:"col-3"})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(Z.a,{children:Object(xe.jsxs)(ee.a,{children:[Object(xe.jsx)(te.a,{children:Object(xe.jsxs)(ae.a,{children:[Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:W(N.a.description),className:K.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:W(N.a.measureunit),className:K.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:W(N.a.unitaryprice),className:K.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:W(N.a.quantity),className:K.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:W(N.a.billingsubtotal),className:K.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsxs)(z.a,{size:"small","aria-label":"add",color:"primary",style:{marginLeft:"1rem"},onClick:function(){return Pt({productdescription:"",productcode:"S001",productmeasure:"ZZ",productquantity:0,productsubtotal:0})},disabled:ne,children:[" ",Object(xe.jsx)(U.a,{})]})})]})}),Object(xe.jsx)(ce.a,{children:Tt.map((function(e,t){var a,i,c,n,l,o,s,d,u,b,v,j;return Object(xe.jsxs)(ae.a,{children:[Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.n,{className:K.fieldView,label:"",fregister:Object(r.a)({},It("productdetail.".concat(t,".productdescription"),{validate:function(e){return e&&e.length&&e.length<=250||(e.length<250?W(N.a.field_required):W(N.a.validation250char))}})),valueDefault:Rt("productdetail.".concat(t,".productdescription")),error:null===kt||void 0===kt||null===(a=kt.productdetail)||void 0===a||null===(i=a[t])||void 0===i||null===(c=i.productdescription)||void 0===c?void 0:c.message,onChange:function(e){return qt("productdetail.".concat(t,".productdescription"),""+e)},disabled:ne})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.u,{className:K.fieldView,label:"",fregister:Object(r.a)({},It("productdetail.".concat(t,".productmeasure"),{validate:function(e){return e&&e.length||W(N.a.field_required)}})),loading:Ie.loading,onChange:function(e){return qt("productdetail.".concat(t,".productmeasure"),""+(null===e||void 0===e?void 0:e.code))},valueDefault:Rt("productdetail.".concat(t,".productmeasure")),data:Ie.data,optionDesc:"description",optionValue:"code",error:null===kt||void 0===kt||null===(n=kt.productdetail)||void 0===n||null===(l=n[t])||void 0===l||null===(o=l.productmeasure)||void 0===o?void 0:o.message,orderbylabel:!0,disabled:ne})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.n,{className:K.fieldView,label:"",fregister:Object(r.a)({},It("productdetail.".concat(t,".productsubtotal"),{validate:function(e){return e&&e>0||W(N.a.field_required)}})),valueDefault:Rt("productdetail.".concat(t,".productsubtotal")),error:null===kt||void 0===kt||null===(s=kt.productdetail)||void 0===s||null===(d=s[t])||void 0===d||null===(u=d.productsubtotal)||void 0===u?void 0:u.message,onChange:function(e){qt("productdetail.".concat(t,".productsubtotal"),""+e),Vt()},type:"number",inputProps:{step:"any"},disabled:ne})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.n,{className:K.fieldView,label:"",fregister:Object(r.a)({},It("productdetail.".concat(t,".productquantity"),{validate:function(e){return e&&e>0||W(N.a.field_required)}})),valueDefault:Rt("productdetail.".concat(t,".productquantity")),error:null===kt||void 0===kt||null===(b=kt.productdetail)||void 0===b||null===(v=b[t])||void 0===v||null===(j=v.productquantity)||void 0===j?void 0:j.message,onChange:function(e){qt("productdetail.".concat(t,".productquantity"),""+e),Vt()},type:"number",disabled:ne})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{className:K.fieldView,label:"",value:Object(m.jb)((Rt("productdetail.".concat(t,".productsubtotal"))||0)*(Rt("productdetail.".concat(t,".productquantity"))||0))})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsxs)(z.a,{size:"small","aria-label":"add",color:"primary",style:{marginLeft:"1rem"},onClick:function(){zt(t),Vt()},disabled:ne,children:[" ",Object(xe.jsx)(oe.a,{})]})})]},e.id)}))})]})})})]})]})]})})},He="IDMESSAGINGPACKAGES",Ge=function(e){var t=e.dataCorp,a=e.dataOrg,i=Object(v.c)(),c=Object(w.a)().t,n=De(),l=Object(b.b)((function(e){return e.main.mainData})),o=Object(b.b)((function(e){return e.main.memoryTable})),h=Object(b.b)((function(e){return e.login.validateToken.user})),x=Object(d.useState)([]),g=Object(s.a)(x,2),y=g[0],S=g[1],D=Object(d.useState)(!1),C=Object(s.a)(D,2),E=C[0],I=C[1],_=Object(d.useState)(null),q=Object(s.a)(_,2),R=q[0],k=q[1],A=Object(d.useState)("view-1"),T=Object(s.a)(A,2),P=T[0],z=T[1],F=Object(d.useState)({corpid:(null===h||void 0===h?void 0:h.corpid)||0,orgid:0,balanceid:0,type:"",operationtype:"",all:!0}),V=Object(s.a)(F,2),L=V[0],$=V[1],U=[{value:"HSM",description:c(N.a.HSM)},{value:"MAIL",description:c(N.a.MAIL)},{value:"SMS",description:c(N.a.SMS)},{value:"GENERAL",description:c(N.a.GENERAL)}],B=[{value:"ENVIO",description:c(N.a.ENVIO)},{value:"COMPRA",description:c(N.a.COMPRA)}],H=function(){return i(Object(O.g)(Object(m.Sg)(L)))},G=function(){return i(Object(O.g)(Object(m.Sg)(L)))};Object(d.useEffect)((function(){return H(),"PREPAGO"===(null===h||void 0===h?void 0:h.paymentmethod)&&I(!0),i(Object(O.G)({id:He})),function(){i(Object(O.a)())}}),[]);Object(d.useEffect)((function(){l.loading||l.error||S(l.data.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{typecolumn:c(e.type),descriptioncolumn:e.description?e.description:c(N.a.none),operationtypecolumn:c(e.operationtype),messagetemplatedesccolumn:e.messagetemplatedesc?e.messagetemplatedesc:c(N.a.none),documenttypecolumn:c(Y(e.invoicetype)),documentnumbercolumn:e.serie&&e.correlative?e.serie+"-"+e.correlative.toString().padStart(8,"0"):"X000-00000000"})})))}),[l]);var Y=function(e){switch(e){case"01":return"emissorinvoice";case"03":return"emissorticket";case"07":return"emissorcreditnote";default:return"emissornone"}},W=u.a.useMemo((function(){return[{Header:c(N.a.corporation),accessor:"corpdesc"},{Header:c(N.a.organization),accessor:"orgdesc"},{Header:c(N.a.transactiondate),accessor:"transactiondate"},{Header:c(N.a.user),accessor:"transactionuser"},{Header:c(N.a.transactionmessagetype),accessor:"typecolumn"},{Header:c(N.a.transactionreference),accessor:"descriptioncolumn"},{Header:c(N.a.amount),accessor:"amount",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.amount;return Object(m.jb)(t||0)}},{Header:c(N.a.transactionbalance),accessor:"balance",type:"number",sortType:"number",Cell:function(e){var t=e.cell.row.original.balance;return Object(m.jb)(t||0)}},{Header:c(N.a.transactionoperationtype),accessor:"operationtypecolumn"},{Header:c(N.a.template),accessor:"messagetemplatedesccolumn"},{Header:c(N.a.documenttype),accessor:"documenttypecolumn"},{Header:c(N.a.billingvoucher),accessor:"documentnumbercolumn",Cell:function(e){var t=e.cell.row.original.urlpdf,a=(e.cell.row.original.serie?e.cell.row.original.serie:"X000")+"-"+(e.cell.row.original.correlative?e.cell.row.original.correlative.toString().padStart(8,"0"):"00000000");return Object(xe.jsx)(d.Fragment,{children:Object(xe.jsx)("div",{children:t?Object(xe.jsx)("a",{onClick:function(e){e.stopPropagation()},href:t,target:"_blank",style:{display:"block"},rel:"noreferrer",children:a}):Object(xe.jsx)("span",{style:{display:"block"},children:a})})})}}]}),[]);return"view-1"===P?Object(xe.jsx)("div",{style:{width:"100%"},children:Object(xe.jsx)(f.f,{onClickRow:function(e){z("view-2"),k({row:e,edit:!1})},columns:W,ButtonsElement:function(){return Object(xe.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object(xe.jsx)(p.u,{label:c(N.a.corporation),className:n.fieldsfilter,valueDefault:L.corpid,variant:"outlined",onChange:function(e){return $((function(t){return Object(r.a)(Object(r.a)({},t),{},{corpid:(null===e||void 0===e?void 0:e.corpid)||0,orgid:0})}))},data:t,optionDesc:"description",optionValue:"corpid",disabled:["ADMINISTRADOR","ADMINISTRADOR P","ADMINISTRADOR LIMADERMA"].includes((null===h||void 0===h?void 0:h.roledesc)||""),orderbylabel:!0}),Object(xe.jsx)(p.u,{label:c(N.a.organization),className:n.fieldsfilter,valueDefault:L.orgid,variant:"outlined",onChange:function(e){return $((function(t){return Object(r.a)(Object(r.a)({},t),{},{orgid:(null===e||void 0===e?void 0:e.orgid)||0})}))},data:a.filter((function(e){return e.corpid===L.corpid})),optionDesc:"orgdesc",optionValue:"orgid",orderbylabel:!0}),Object(xe.jsx)(p.u,{label:c(N.a.transactionmessagetype),className:n.fieldsfilter,valueDefault:L.type,variant:"outlined",onChange:function(e){return $((function(t){return Object(r.a)(Object(r.a)({},t),{},{type:(null===e||void 0===e?void 0:e.value)||""})}))},data:U,optionDesc:"description",optionValue:"value",orderbylabel:!0}),Object(xe.jsx)(p.u,{label:c(N.a.transactionoperationtype),className:n.fieldsfilter,valueDefault:L.operationtype,variant:"outlined",onChange:function(e){return $((function(t){return Object(r.a)(Object(r.a)({},t),{},{operationtype:(null===e||void 0===e?void 0:e.value)||""})}))},data:B,optionDesc:"description",optionValue:"value",orderbylabel:!0}),Object(xe.jsx)(j.a,{disabled:l.loading||!1,variant:"contained",color:"primary",style:{width:120,backgroundColor:"#55BD84"},startIcon:Object(xe.jsx)(M.a,{style:{color:"white"}}),onClick:G,children:c(N.a.search)})]})},data:y,filterGeneral:!1,loading:l.loading,download:!0,register:E,handleRegister:function(){z("view-2"),k({row:null,edit:!0})},registertext:c(N.a.transactionbuy),pageSizeDefault:He===o.id?-1===o.pageSize?20:o.pageSize:20,initialPageIndex:He===o.id?-1===o.page?0:o.page:0,initialStateFilter:He===o.id?Object.entries(o.filters).map((function(e){var t=Object(s.a)(e,2);return{id:t[0],value:t[1]}})):void 0})}):Object(xe.jsx)(Ye,{fetchData:H,data:R,setViewSelected:z})},Ye=function(e){var t,a,i,c,n,l,o,r,u,f,h,x,g,S,D,_,q,R,k,A,T,P,z,F,V,L,M,U,B,H=e.data,G=e.setViewSelected,Y=e.fetchData,W=Object(v.c)(),X=Object(w.a)().t,Q=De(),J=Object(b.b)((function(e){return e.culqi.request})),ne=Object(b.b)((function(e){return e.culqi.requestGetExchangeRate})),le=Object(b.b)((function(e){return e.main})),oe=Object(b.b)((function(e){return e.main.multiDataAux})),re=Object(b.b)((function(e){return e.login.validateToken.user})),se=Object(d.useState)([]),de=Object(s.a)(se,2),ue=de[0],be=de[1],ve=Object(d.useState)(0),je=Object(s.a)(ve,2),Oe=je[0],pe=je[1],me=Object(d.useState)([]),fe=Object(s.a)(me,2),he=fe[0],ge=fe[1],ye=Object(d.useState)(""),we=Object(s.a)(ye,2),Ne=we[0],Ce=we[1],Ee=Object(d.useState)(0),Ie=Object(s.a)(Ee,2),_e=Ie[0],qe=Ie[1],Re=Object(d.useState)([]),ke=Object(s.a)(Re,2),Ae=ke[0],Te=ke[1],Pe=Object(d.useState)(""),ze=Object(s.a)(Pe,2),Fe=ze[0],Ve=ze[1],Le=Object(d.useState)(""),$e=Object(s.a)(Le,2),Me=$e[0],Ue=$e[1],Be=Object(d.useState)(""),He=Object(s.a)(Be,2),Ge=He[0],Ye=He[1],We=Object(d.useState)(0),Xe=Object(s.a)(We,2),Ke=Xe[0],Qe=Xe[1],Ze=Object(d.useState)(0),Je=Object(s.a)(Ze,2),et=Je[0],tt=Je[1],at=Object(d.useState)(0),it=Object(s.a)(at,2),ct=it[0],nt=it[1],lt=Object(d.useState)(""),ot=Object(s.a)(lt,2),rt=ot[0],st=ot[1],dt=Object(d.useState)(""),ut=Object(s.a)(dt,2),bt=ut[0],vt=ut[1],jt=Object(d.useState)(""),Ot=Object(s.a)(jt,2),pt=Ot[0],mt=Ot[1],ft=Object(d.useState)(""),ht=Object(s.a)(ft,2),xt=ht[0],gt=ht[1],yt=Object(d.useState)(""),wt=Object(s.a)(yt,2),Nt=wt[0],St=wt[1],Dt=Object(d.useState)(""),Ct=Object(s.a)(Dt,2),Et=Ct[0],It=Ct[1],_t=Object(d.useState)(""),qt=Object(s.a)(_t,2),Rt=qt[0],kt=qt[1],At=Object(d.useState)(!1),Tt=Object(s.a)(At,2),Pt=Tt[0],zt=Tt[1],Ft=Object(d.useState)(0),Vt=Object(s.a)(Ft,2),Lt=Vt[0],$t=Vt[1],Mt=Object(d.useState)(!1),Ut=Object(s.a)(Mt,2),Bt=Ut[0],Ht=Ut[1],Gt=Object(d.useState)(""),Yt=Object(s.a)(Gt,2),Wt=Yt[0],Xt=Yt[1],Kt=Object(d.useState)(!1),Qt=Object(s.a)(Kt,2),Zt=Qt[0],Jt=Qt[1],ea=Object(d.useState)(!0),ta=Object(s.a)(ea,2),aa=ta[0],ia=ta[1],ca=Object(d.useState)(!!(null===H||void 0===H?void 0:H.row)),na=Object(s.a)(ca,2),la=na[0],oa=na[1],ra=Object(d.useState)(!1),sa=Object(s.a)(ra,2),da=sa[0],ua=sa[1],ba=Object(d.useState)(!1),va=Object(s.a)(ba,2),ja=va[0],Oa=va[1],pa=Object(d.useState)(!1),ma=Object(s.a)(pa,2),fa=ma[0],ha=ma[1],xa=Object(d.useState)(0),ga=Object(s.a)(xa,2),ya=ga[0],wa=ga[1],Na=Object(d.useState)([]),Sa=Object(s.a)(Na,2),Da=Sa[0],Ca=Sa[1],Ea=Object(d.useState)(0),Ia=Object(s.a)(Ea,2),_a=Ia[0],qa=Ia[1],Ra=Object(d.useState)(0),ka=Object(s.a)(Ra,2),Aa=ka[0],Ta=ka[1],Pa=Object(d.useState)(0),za=Object(s.a)(Pa,2),Fa=za[0],Va=za[1],La=Object(d.useState)([]),$a=Object(s.a)(La,2),Ma=$a[0],Ua=$a[1],Ba=Object(d.useState)(0),Ha=Object(s.a)(Ba,2),Ga=Ha[0],Ya=Ha[1],Wa=Object(d.useState)(0),Xa=Object(s.a)(Wa,2),Ka=Xa[0],Qa=Xa[1],Za=Object(d.useState)(0),Ja=Object(s.a)(Za,2),ei=Ja[0],ti=Ja[1],ai=Object(d.useState)(""),ii=Object(s.a)(ai,2),ci=ii[0],ni=ii[1],li=Object(d.useState)("FAVORITE"),oi=Object(s.a)(li,2),ri=oi[0],si=oi[1],di=Object(d.useState)(0),ui=Object(s.a)(di,2),bi=ui[0],vi=ui[1],ji=Object(d.useState)(""),Oi=Object(s.a)(ji,2),pi=Oi[0],mi=Oi[1],fi=Object(d.useState)(""),hi=Object(s.a)(fi,2),xi=hi[0],gi=hi[1],yi=[{val:"FAVORITE",description:X(N.a.paymentfavorite)},{val:"CARD",description:X(N.a.paymentcard)},{val:"CULQI",description:X(N.a.paymentculqi)}],wi=function(){Y(),G("view-1")};Object(d.useEffect)((function(){var e,t,a,i,c,n,l;(Ca({loading:!0,data:[]}),ge({loading:!0,data:[]}),Te({loading:!1,data:[]}),W(Object(O.q)([Object(m.yc)(["ADMINISTRADOR","ADMINISTRADOR P","ADMINISTRADOR LIMADERMA"].includes((null===re||void 0===re?void 0:re.roledesc)||"")&&(null===re||void 0===re?void 0:re.corpid)||0),Object(m.Qb)((new Date).getFullYear(),(new Date).getMonth(),(null===re||void 0===re?void 0:re.countrycode)||""),Object(m.Ag)({corpid:(null===re||void 0===re?void 0:re.corpid)||0,id:0,orgid:0})])),null===(null===H||void 0===H?void 0:H.row))?(W(Object(O.g)(Object(m.Kb)())),W(Object(E.h)(null)),W(Object(I.d)(!0)),ua(!0)):"ENVIO"===(null===H||void 0===H||null===(e=H.row)||void 0===e?void 0:e.operationtype)&&(Ua({loading:!0,data:[]}),W(Object(O.q)([Object(m.Nb)(null===H||void 0===H||null===(t=H.row)||void 0===t?void 0:t.corpid,null===H||void 0===H||null===(a=H.row)||void 0===a?void 0:a.orgid,null===H||void 0===H||null===(i=H.row)||void 0===i?void 0:i.transactiondate,null===H||void 0===H||null===(c=H.row)||void 0===c?void 0:c.type,null===H||void 0===H||null===(n=H.row)||void 0===n?void 0:n.module,null===H||void 0===H||null===(l=H.row)||void 0===l?void 0:l.messagetemplateid)])))}),[]),Object(d.useEffect)((function(){var e=oe.data.findIndex((function(e){return"UFN_CORP_SEL"===e.key}));e>-1&&ge({loading:!1,data:oe.data[e]&&oe.data[e].success?oe.data[e].data:[]});var t=oe.data.findIndex((function(e){return"UFN_ORG_SEL"===e.key}));t>-1&&Te({loading:!1,data:oe.data[t]&&oe.data[t].success?oe.data[t].data:[]});var a=oe.data.findIndex((function(e){return"UFN_BILLINGMESSAGING_CURRENT"===e.key}));a>-1&&Ca({loading:!1,data:oe.data[a]&&oe.data[a].success?oe.data[a].data:[]});var i=oe.data.findIndex((function(e){return"UFN_BALANCE_SEL_SENT"===e.key}));i>-1&&Ua({loading:!1,data:oe.data[i]&&oe.data[i].success?oe.data[i].data:[]});var c=oe.data.findIndex((function(e){return"UFN_PAYMENTCARD_LST"===e.key}));c>-1&&be({loading:!1,data:oe.data[c]&&oe.data[c].success?oe.data[c].data:[]})}),[oe]),Object(d.useEffect)((function(){if(ue&&ue.data&&ue.data.length>0){var e=ue.data.find((function(e){return!0===e.favorite}));e&&(vi(e.paymentcardid),mi(e.cardnumber),gi(e.cardcode),ti(e.paymentcardid),ni(e.cardcode))}}),[ue]),Object(d.useEffect)((function(){ri&&("FAVORITE"===ri&&(ti(bi),ni(xi)),"CARD"!==ri&&"CULQI"!==ri||(ti(0),ni("")))}),[ri]),Object(d.useEffect)((function(){ja&&(!J.loading&&J.data?(W(Object(I.e)({show:!0,severity:"success",message:""+X(J.message||N.a.success)})),W(Object(I.d)(!1)),W(Object(E.l)()),wi&&wi(),Oa(!1)):J.error&&(W(Object(I.e)({show:!0,severity:"error",message:""+X(J.message||N.a.error_cos_unexpected)})),W(Object(I.d)(!1)),W(Object(E.l)()),Oa(!1)))}),[J,ja]),Object(d.useEffect)((function(){Da.loading||Da.data&&(Va((Da.data[0].companystartfee||0)+(Da.data[0].vcacomission||0)),qa((Da.data[0].pricepersms||0)+(Da.data[0].vcacomissionpersms||0)),Ta((Da.data[0].pricepermail||0)+(Da.data[0].vcacomissionpermail||0)))}),[Da]),Object(d.useEffect)((function(){Ni(ct)}),[Et,Rt,ct,Lt,Ka]),Object(d.useEffect)((function(){Oe&&_e&&bt.length<=150&&xt.length<=15&&Me&&ct&&ct>0&&Lt&&Lt>0?(Ht(!1),ia(!1)):(Ht(!0),ia(!0))}),[Oe,_e,bt,xt,Me,ct,Lt]),Object(d.useEffect)((function(){if(da&&!le.mainData.loading&&!ne.loading&&(W(Object(I.d)(!1)),le.mainData.data&&le.mainData.data[0])){var e=le.mainData.data[0];Xt(e.publickey)}}),[le,ne,da]);var Ni=function(e){Et&&Rt?"PE"===Et?(Qa(Math.round(100*((e||0)*(1+(le.mainData.data[0].igv||0))+Number.EPSILON))/100),"6"===Rt&&(e||0)*((null===ne||void 0===ne?void 0:ne.exchangerate)||0)>le.mainData.data[0].detractionminimum?($t(Math.round(100*((e||0)*(1+(le.mainData.data[0].igv||0))-(e||0)*(1+(le.mainData.data[0].igv||0))*(le.mainData.data[0].detraction||0)+Number.EPSILON))/100),ha(!0),wa(Math.round(100*(100*(le.mainData.data[0].detraction||0)+Number.EPSILON))/100),Ya(Math.round(100*((e||0)*(le.mainData.data[0].igv||0)+Number.EPSILON))/100)):(ha(!1),$t(Math.round(100*((e||0)*(1+(le.mainData.data[0].igv||0))+Number.EPSILON))/100),Ya(Math.round(100*((e||0)*(le.mainData.data[0].igv||0)+Number.EPSILON))/100))):(Qa(Math.round(100*((e||0)+Number.EPSILON))/100),ha(!1),$t(Math.round(100*((e||0)+Number.EPSILON))/100),Ya(0)):(Qa(Math.round(100*((e||0)+Number.EPSILON))/100),ha(!1),$t(Math.round(100*((e||0)+Number.EPSILON))/100),Ya(0));tt(Ke+Ka)},Si=[{id:"view-1",name:X(N.a.messagingpackages)},{id:"view-2",name:(null===H||void 0===H?void 0:H.edit)?X(N.a.messagingpackagesnew):X(N.a.messagingpackagesdetail)}];return Object(xe.jsx)("div",{style:{width:"100%"},children:Object(xe.jsxs)("div",{children:[Object(xe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(xe.jsxs)("div",{children:[Object(xe.jsx)(p.L,{breadcrumbs:Si,handleClick:function(e){G(e),Y()}}),Object(xe.jsx)(p.R,{title:(null===H||void 0===H?void 0:H.edit)?X(N.a.messagingpackagesnew):X(N.a.messagingpackagesdetail)})]}),Object(xe.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(xe.jsx)(j.a,{variant:"contained",type:"button",color:"primary",startIcon:Object(xe.jsx)(C.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){G("view-1"),Y()},children:X(N.a.back)}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)(j.a,{variant:"contained",type:"button",color:"primary",startIcon:Zt?Object(xe.jsx)(C.a,{color:"secondary"}):Object(xe.jsx)(y.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},onClick:function(){Zt?(Jt(!1),oa(!1)):(Jt(!0),oa(!0))},disabled:aa,children:X(Zt?N.a.cancel:N.a.transactionconfirm)}),"CULQI"===ri&&Wt&&Zt&&Object(xe.jsx)(K.a,{type:"BALANCE",invoiceid:0,title:Me,description:Me,currency:"USD",amount:Math.round(100*(100*Lt+Number.EPSILON))/100,callbackOnSuccess:function(){wi()},buttontitle:X(N.a.proceedpayment),disabled:Bt,successmessage:X(N.a.culqipaysuccess),publickey:Wt,corpid:Oe,orgid:_e,reference:Me,buyamount:ct,totalamount:Ka,comments:bt,purchaseorder:xt,totalpay:Lt}),("FAVORITE"===ri||"CARD"===ri)&&Zt&&Object(xe.jsx)(j.a,{variant:"contained",color:"primary",type:"button",startIcon:Object(xe.jsx)($.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},onClick:function(){W(Object(I.a)({visible:!0,question:X(N.a.confirmation_payment),callback:function(){W(Object(I.d)(!0)),W(Object(E.a)({invoiceid:null===H||void 0===H?void 0:H.invoiceid,settings:{title:Me,description:Me,currency:"USD",amount:Math.round(100*(100*Lt+Number.EPSILON))/100},token:null,metadata:{},corpid:Oe,orgid:_e,reference:Me,buyamount:ct,comments:bt,purchaseorder:xt,totalpay:Lt,totalamount:Ka,paymentcardid:ei,paymentcardcode:ci,iscard:!0})),Oa(!0)}}))},disabled:Bt||!ei||!ci,children:X(N.a.proceedpayment)})]})]}),Object(xe.jsxs)("div",{style:{backgroundColor:"white",padding:16},children:[(!la||!1===(null===H||void 0===H?void 0:H.edit))&&Object(xe.jsxs)("div",{children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.u,{label:X(N.a.corporation),loading:he.loading,onChange:function(e){!function(e){if(W(Object(O.q)([Object(m.yd)(0,e)])),e){var t=he.data.find((function(t){return t.corpid===e}));t&&(zt(null===t||void 0===t?void 0:t.billbyorg),!1===t.billbyorg&&(It(null===t||void 0===t?void 0:t.sunatcountry),kt(null===t||void 0===t?void 0:t.doctype)))}pe(e),Ce(e?"":X(N.a.required))}((null===e||void 0===e?void 0:e.corpid)||0)},className:"col-6",valueDefault:Oe,data:he.data,optionDesc:"description",optionValue:"corpid",error:Ne,disabled:la,orderbylabel:!0}):Object(xe.jsx)(p.v,{className:"col-6",label:X(N.a.corporation),value:null===H||void 0===H||null===(t=H.row)||void 0===t?void 0:t.corpdesc}),(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.u,{label:X(N.a.organization),loading:Ae.loading,onChange:function(e){!function(e){if(e){var t=Ae.data.find((function(t){return t.orgid===e}));t&&(Qe((null===t||void 0===t?void 0:t.balance)||0),tt(((null===t||void 0===t?void 0:t.balance)||0)+Ka),Pt&&(It(null===t||void 0===t?void 0:t.sunatcountry),kt(null===t||void 0===t?void 0:t.doctype)))}else Qe(0),tt(Ka);qe(e),Ve(e?"":X(N.a.required))}((null===e||void 0===e?void 0:e.orgid)||0)},className:"col-6",valueDefault:_e,data:Ae.data,optionDesc:"orgdesc",optionValue:"orgid",error:Fe,disabled:la,orderbylabel:!0}):Object(xe.jsx)(p.v,{className:"col-6",label:X(N.a.organization),value:null===H||void 0===H||null===(a=H.row)||void 0===a?void 0:a.orgdesc})]}),Object(xe.jsx)("div",{className:"row-zyx",children:(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.l,{label:X(N.a.transactionreference),onChange:function(e){return function(e){Ue(e),Ye(e?"":X(N.a.required))}(e)},valueDefault:Me,error:Ge,className:"col-12",disabled:la}):Object(xe.jsx)(p.v,{className:"col-12",label:X(N.a.transactionreference),value:(null===H||void 0===H||null===(i=H.row)||void 0===i?void 0:i.description)||X(N.a.none)})}),"ENVIO"!==(null===H||void 0===H||null===(c=H.row)||void 0===c?void 0:c.operationtype)&&Object(xe.jsxs)("div",{className:"row-zyx",children:[(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.l,{label:X(N.a.transactionbuyamount),onChange:function(e){return function(e){nt(parseFloat(e)),st(e&&e>0?"":X(N.a.required))}(e||0)},valueDefault:ct,error:rt,className:"col-4",type:"number",inputProps:{step:"any"},disabled:la}):Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.transactionbuyamount),value:Object(m.jb)((null===H||void 0===H||null===(n=H.row)||void 0===n?void 0:n.subtotal)||0)}),(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.billingtaxes),value:"$"+Object(m.jb)(Ga||0)}):Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.billingtaxes),value:"$"+Object(m.jb)((null===H||void 0===H||null===(l=H.row)||void 0===l?void 0:l.taxes)||0)}),(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.totalamount),value:"$"+Object(m.jb)(Ka||0)}):Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.totalamount),value:"$"+Object(m.jb)((null===H||void 0===H||null===(o=H.row)||void 0===o?void 0:o.amount)||0)})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.transactionlastbalance),value:"$"+Object(m.jb)(Ke||0)}):Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.transactionlastbalance),value:"$"+Object(m.jb)((null===H||void 0===H||null===(r=H.row)||void 0===r?void 0:r.balance)-(null===H||void 0===H||null===(u=H.row)||void 0===u?void 0:u.amount)||0)}),(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.totalamount),value:"$"+Object(m.jb)(Ka||0)}):Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.totalamount),value:"$"+Object(m.jb)((null===H||void 0===H||null===(f=H.row)||void 0===f?void 0:f.amount)||0)}),(null===H||void 0===H?void 0:H.edit)?Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.transactionafterbalance),value:"$"+Object(m.jb)(et||0)}):Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.transactionafterbalance),value:"$"+Object(m.jb)((null===H||void 0===H||null===(h=H.row)||void 0===h?void 0:h.balance)||0)})]})]}),la&&Object(xe.jsxs)("div",{children:[(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.section,label:"",value:X(N.a.paymentmethod)})}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.u,{label:X(N.a.paymentmethodtype),onChange:function(e){si((null===e||void 0===e?void 0:e.val)||0)},className:"col-6",valueDefault:ri,data:yi,optionDesc:"description",optionValue:"val",orderbylabel:!0}),"CARD"===ri&&Object(xe.jsx)(p.u,{label:X(N.a.paymentmethodcard),onChange:function(e){ni((null===e||void 0===e?void 0:e.cardcode)||""),ti((null===e||void 0===e?void 0:e.paymentcardid)||0)},className:"col-6",valueDefault:ei,data:ue.data?ue.data.filter((function(e){return!0!==e.favorite})):[],optionDesc:"cardnumber",optionValue:"paymentcardid",loading:ue.loading,orderbylabel:!0}),"FAVORITE"===ri&&Object(xe.jsx)(p.l,{className:"col-6",label:X(N.a.paymentmethodcard),valueDefault:pi,disabled:!0})]}),((null===H||void 0===H?void 0:H.edit)||"COMPRA"===(null===H||void 0===H||null===(x=H.row)||void 0===x?void 0:x.operationtype))&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.section,label:"",value:X(N.a.paymentinformation)})}),((null===H||void 0===H?void 0:H.edit)||"COMPRA"===(null===H||void 0===H||null===(g=H.row)||void 0===g?void 0:g.operationtype))&&Object(xe.jsxs)("div",{className:"row-zyx",children:[(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.servicedescription),value:X(N.a.transactionrechargetitle)+Se(new Date).split("T")[0]}),"COMPRA"===(null===H||void 0===H||null===(S=H.row)||void 0===S?void 0:S.operationtype)&&Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.servicedescription),value:X(N.a.transactionrechargetitle)+Se(new Date(null===H||void 0===H||null===(D=H.row)||void 0===D?void 0:D.createdate)).split("T")[0]}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.totalamount),value:"$"+Object(m.jb)(Ka||0)}),"COMPRA"===(null===H||void 0===H||null===(_=H.row)||void 0===_?void 0:_.operationtype)&&Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.totalamount),value:"$"+Object(m.jb)((null===H||void 0===H||null===(q=H.row)||void 0===q?void 0:q.amount)||0)}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.totaltopay),value:"$"+Object(m.jb)(Lt||0)}),"COMPRA"===(null===H||void 0===H||null===(R=H.row)||void 0===R?void 0:R.operationtype)&&Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.totaltopay),value:"$"+Object(m.jb)((null===H||void 0===H||null===(k=H.row)||void 0===k?void 0:k.culqiamount)||0)})]})]}),"COMPRA"===(null===H||void 0===H||null===(A=H.row)||void 0===A?void 0:A.operationtype)&&Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.documenttype),value:X(function(e){switch(e){case"01":return"emissorinvoice";case"03":return"emissorticket";case"07":return"emissorcreditnote";default:return"emissornone"}}(null===H||void 0===H||null===(T=H.row)||void 0===T?void 0:T.invoicetype))}),Object(xe.jsx)(p.v,{onclick:function(){var e,t;(null===H||void 0===H||null===(e=H.row)||void 0===e?void 0:e.urlpdf)&&window.open(null===H||void 0===H||null===(t=H.row)||void 0===t?void 0:t.urlpdf,"_blank")},label:X(N.a.billingvoucher),value:((null===H||void 0===H||null===(P=H.row)||void 0===P?void 0:P.serie)?null===H||void 0===H||null===(z=H.row)||void 0===z?void 0:z.serie:"X000")+"-"+((null===H||void 0===H||null===(F=H.row)||void 0===F?void 0:F.correlative)?null===H||void 0===H||null===(V=H.row)||void 0===V?void 0:V.correlative.toString().padStart(8,"0"):"00000000"),className:"col-4",styles:(null===H||void 0===H||null===(L=H.row)||void 0===L?void 0:L.urlpdf)?{cursor:"pointer",textDecoration:"underline",color:"blue"}:void 0}),Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.purchaseorder),value:(null===H||void 0===H||null===(M=H.row)||void 0===M?void 0:M.purchaseorder)||X(N.a.none)})]}),"ENVIO"===(null===H||void 0===H||null===(U=H.row)||void 0===U?void 0:U.operationtype)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(Z.a,{children:Object(xe.jsxs)(ee.a,{children:[Object(xe.jsx)(te.a,{children:Object(xe.jsxs)(ae.a,{children:[Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:X(N.a.transactionmessagetype),className:Q.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:X(N.a.transactionreceiver),className:Q.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:X(N.a.transactioncost),className:Q.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:X(N.a.transactiondatetime),className:Q.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:X(N.a.user),className:Q.fieldView})})]})}),Object(xe.jsx)(ce.a,{children:null===Ma||void 0===Ma||null===(B=Ma.data)||void 0===B?void 0:B.map((function(e){return Object(xe.jsxs)(ae.a,{children:[Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:X((null===e||void 0===e?void 0:e.type)||N.a.none),className:Q.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:null===e||void 0===e?void 0:e.receiver,className:Q.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:Object(m.kb)((null===e||void 0===e?void 0:e.amount)||0),className:Q.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:Se(new Date(null===e||void 0===e?void 0:e.createdate)).replace("T"," ").substring(0,19),className:Q.fieldView})}),Object(xe.jsx)(ie.a,{children:Object(xe.jsx)(p.v,{label:"",value:null===e||void 0===e?void 0:e.transactionuser,className:Q.fieldView})})]})}))})]})})}),!la&&Object(xe.jsxs)("div",{children:[Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.section,label:"",value:X(N.a.transactioninformation)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.pricemessagesms),value:"$"+Object(m.kb)(_a||0)}),Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.pricemessagemail),value:"$"+Object(m.kb)(Aa||0)}),Object(xe.jsx)(p.v,{className:"col-4",label:X(N.a.pricemessagehsm),value:"$"+Object(m.kb)(Fa||0)})]}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.commentary,label:"",value:X(N.a.pricemessagenote1)})}),Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.commentary,label:"",value:X(N.a.pricemessagenote2)})}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.v,{className:Q.commentary,label:"",value:X(N.a.pricemessagenote)}),Object(xe.jsx)("a",{href:"https://developers.facebook.com/docs/whatsapp/pricing",target:"_blank",style:{display:"block"},rel:"noreferrer",children:"https://developers.facebook.com/docs/whatsapp/pricing"})]})]}),la&&Object(xe.jsxs)("div",{children:[(null===H||void 0===H?void 0:H.edit)&&fa&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.commentary,label:"",value:X(N.a.detractionnotepay1)+"".concat(ya)+X(N.a.detractionnotepay2)})}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.section,label:"",value:X(N.a.additional_information)})}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.commentary,label:"",value:X(N.a.additionalinformation2)})}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.l,{label:X(N.a.purchaseorder),onChange:function(e){return function(e){gt(e),St(e.length>15?X(N.a.validation15char):"")}(e)},valueDefault:xt,error:Nt,className:"col-12",disabled:!la})}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.l,{label:X(N.a.comments),onChange:function(e){return function(e){vt(e),mt(e.length>150?X(N.a.validation150char):"")}(e)},valueDefault:bt,error:pt,className:"col-12",disabled:!la})}),(null===H||void 0===H?void 0:H.edit)&&Object(xe.jsx)("div",{className:"row-zyx",children:Object(xe.jsx)(p.v,{className:Q.commentary,label:"",value:X(N.a.additionalinformation1)})})]})]})]})})},We="IDPAYMENTMETHODS",Xe=function(){var e=Object(v.c)(),t=Object(w.a)().t,a=Object(b.b)((function(e){return e.culqi.requestCardDelete})),i=Object(b.b)((function(e){return e.main.execute})),c=Object(b.b)((function(e){return e.main.mainData})),n=Object(b.b)((function(e){return e.main.memoryTable})),l=Object(b.b)((function(e){return e.login.validateToken.user})),o=Object(d.useState)([]),j=Object(s.a)(o,2),h=j[0],x=j[1],g=Object(d.useState)({row:null,edit:!0}),y=Object(s.a)(g,2),S=y[0],D=y[1],C=Object(d.useState)("view-1"),_=Object(s.a)(C,2),q=_[0],R=_[1],k=Object(d.useState)(!1),A=Object(s.a)(k,2),T=A[0],P=A[1],z=Object(d.useState)(!1),F=Object(s.a)(z,2),V=F[0],L=F[1],$=function(){return e(Object(O.g)(Object(m.Ag)({corpid:(null===l||void 0===l?void 0:l.corpid)||0,id:0,orgid:0})))};Object(d.useEffect)((function(){return $(),e(Object(O.G)({id:We})),function(){e(Object(O.a)())}}),[]);Object(d.useEffect)((function(){c.loading||c.error||x(c.data.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{favoritecolumn:t(e.favorite?N.a.affirmative:N.a.negative)})})))}),[c]),Object(d.useEffect)((function(){T&&(a.loading||a.error?a.error&&(e(Object(I.e)({show:!0,severity:"error",message:t(a.msg||a.code||"error_unexpected_error")})),P(!1),e(Object(I.d)(!1))):(e(Object(I.e)({show:!0,severity:"success",message:t(N.a.successful_delete)})),$&&$(),P(!1),e(Object(I.d)(!1))))}),[a,T]),Object(d.useEffect)((function(){if(V)if(i.loading||i.error){if(i.error){var a=t(i.code||"error_unexpected_error",{module:t(N.a.organization_plural).toLocaleLowerCase()});e(Object(I.e)({show:!0,severity:"error",message:a})),L(!1),e(Object(I.d)(!1))}}else e(Object(I.e)({show:!0,severity:"success",message:t(N.a.markpreferred_success)})),$&&$(),L(!1),e(Object(I.d)(!1))}),[i,V]);var M=u.a.useMemo((function(){return[{NoFilter:!0,isComponent:!0,minWidth:60,width:"1%",accessor:"corpid",Cell:function(a){var i=a.cell.row.original;return Object(xe.jsx)(p.M,{deleteFunction:function(){return function(a){a.favorite?e(Object(I.e)({show:!0,severity:"error",message:t(N.a.paymentmethod_preferreddelete)})):e(Object(I.a)({visible:!0,question:t(N.a.confirmation_delete),callback:function(){e(Object(E.c)(a)),e(Object(I.d)(!0)),P(!0)}}))}(i)},extraFunction:i.favorite?void 0:function(){return function(a){a.favorite=!0,a.username=null===l||void 0===l?void 0:l.usr,e(Object(I.a)({visible:!0,question:t(N.a.confirmation_paymentcard),callback:function(){e(Object(O.c)(Object(m.Fg)(a))),e(Object(I.d)(!0)),L(!0)}}))}(i)},extraOption:i.favorite?void 0:t(N.a.markpreferred)})}},{Header:t(N.a.name_plural),accessor:"firstname"},{Header:t(N.a.ticket_lastname),accessor:"lastname"},{Header:t(N.a.ticket_email),accessor:"mail"},{Header:t(N.a.phone),accessor:"phone"},{Header:t(N.a.creditcardnumber),accessor:"cardnumber"},{Header:t(N.a.preferred),accessor:"favoritecolumn"}]}),[]);return"view-1"===q?Object(xe.jsx)("div",{style:{width:"100%"},children:Object(xe.jsx)(f.f,{onClickRow:function(e){R("view-2"),D({row:e,edit:!1})},columns:M,data:h,filterGeneral:!1,loading:c.loading,download:!0,register:!0,handleRegister:function(){R("view-2"),D({row:null,edit:!0})},registertext:t(N.a.create),pageSizeDefault:We===n.id?-1===n.pageSize?20:n.pageSize:20,initialPageIndex:We===n.id?-1===n.page?0:n.page:0,initialStateFilter:We===n.id?Object.entries(n.filters).map((function(e){var t=Object(s.a)(e,2);return{id:t[0],value:t[1]}})):void 0})}):Object(xe.jsx)(Ke,{data:S,fetchData:$,setViewSelected:R})},Ke=function(e){var t,a,i,c,n,l,o,O=e.data,m=O.edit,f=O.row,h=e.fetchData,x=e.setViewSelected,g=Object(v.c)(),D=Object(w.a)().t,_=De(),k=Object(b.b)((function(e){return e.culqi.requestCardCreate})),A=Object(d.useState)((null===f||void 0===f?void 0:f.favorite)||!1),T=Object(s.a)(A,2),z=T[0],F=T[1],V=Object(d.useState)(Object(xe.jsx)(xe.Fragment,{})),L=Object(s.a)(V,2),$=L[0],M=L[1],U=Object(d.useState)(!1),B=Object(s.a)(U,2),H=B[0],G=B[1],Y=Object(d.useMemo)((function(){return[{id:1,desc:"01"},{id:2,desc:"02"},{id:3,desc:"03"},{id:4,desc:"04"},{id:5,desc:"05"},{id:6,desc:"06"},{id:7,desc:"07"},{id:8,desc:"08"},{id:9,desc:"09"},{id:10,desc:"10"},{id:11,desc:"11"},{id:12,desc:"12"}]}),[D]),W=[{id:"view-1",name:D(N.a.paymentmethod)},{id:"view-2",name:D(N.a.paymentmethodsdetail)}],X=function(e){return 0===e.length?D(N.a.field_required):/\S+@\S+\.\S+/.test(e)?void 0:D(N.a.emailverification)},K=Object(S.d)({defaultValues:{firstname:(null===f||void 0===f?void 0:f.firstname)||"",lastname:(null===f||void 0===f?void 0:f.lastname)||"",mail:(null===f||void 0===f?void 0:f.mail)||"",cardnumber:(null===f||void 0===f?void 0:f.cardnumber)||"",securitycode:(null===f||void 0===f?void 0:f.securitycode)||"",expirationmonth:(null===f||void 0===f?void 0:f.expirationmonth)||"",expirationyear:(null===f||void 0===f?void 0:f.expirationyear)||"",phone:(null===f||void 0===f?void 0:f.phone)||"",favorite:(null===f||void 0===f?void 0:f.favorite)||!1,cardlimit:16}}),Q=K.register,Z=K.handleSubmit,J=K.setValue,ee=K.getValues,te=K.control,ae=K.formState.errors;u.a.useEffect((function(){m||(null===f||void 0===f?void 0:f.cardnumber)&&("4"===f.cardnumber.slice(0,1)?(M(Object(xe.jsx)("img",{alt:"aux",src:"https://static.culqi.com/v2/v2/static/img/visa.svg",width:"50px",style:{padding:5}})),J("cardlimit",19)):"51"===f.cardnumber.slice(0,2)||"55"===f.cardnumber.slice(0,2)?(M(Object(xe.jsx)("img",{alt:"aux",src:"https://static.culqi.com/v2/v2/static/img/mastercard.svg",width:"50px",style:{padding:5}})),J("cardlimit",19)):"37"===f.cardnumber.slice(0,2)||"34"===f.cardnumber.slice(0,2)?(M(Object(xe.jsx)("img",{alt:"aux",src:"https://static.culqi.com/v2/v2/static/img/amex.svg",width:"50px",style:{padding:5}})),J("cardlimit",18)):"36"===f.cardnumber.slice(0,2)||"38"===f.cardnumber.slice(0,2)||"300"===f.cardnumber.slice(0,3)||"305"===f.cardnumber.slice(0,3)?(M(Object(xe.jsx)("img",{alt:"aux",src:"https://static.culqi.com/v2/v2/static/img/diners.svg",width:"50px",style:{padding:5}})),J("cardlimit",17)):(M(Object(xe.jsx)(xe.Fragment,{})),J("cardlimit",10)))}),[m]),u.a.useEffect((function(){Q("firstname",{validate:function(e){return e&&e.length||D(N.a.field_required)}}),Q("lastname",{validate:function(e){return e&&e.length||D(N.a.field_required)}}),Q("mail",{validate:X,value:""}),Q("cardnumber",{validate:function(e){return e&&0!==e.length&&e.length===ee("cardlimit")||(0===e.length?D(N.a.field_required):D(N.a.creditcardvalidate))}}),Q("securitycode",{validate:function(e){return e&&e.length||D(N.a.field_required)}}),Q("expirationmonth",{validate:function(e){return e&&e.length||D(N.a.field_required)}}),Q("expirationyear",{validate:function(e){return e&&e.length&&e.length<=4||D(N.a.field_required)}}),Q("favorite"),Q("phone",{validate:function(e){return e&&e.length||D(N.a.field_required)}}),Q("cardlimit")}),[m,Q]),Object(d.useEffect)((function(){H&&(k.loading||k.error?k.error&&(g(Object(I.e)({show:!0,severity:"error",message:D(k.msg||k.code||"error_unexpected_error")})),G(!1),g(Object(I.d)(!1))):(g(Object(I.e)({show:!0,severity:"success",message:D(N.a.successful_register)})),h&&h(),G(!1),g(Object(I.d)(!1)),x("view-1")))}),[k,H]);var ie=Z((function(e){g(Object(I.a)({visible:!0,question:D(N.a.confirmation_save),callback:function(){g(Object(E.b)(e)),g(Object(I.d)(!0)),G(!0)}}))}));return Object(xe.jsx)("div",{style:{width:"100%"},children:Object(xe.jsxs)("form",{onSubmit:ie,children:[Object(xe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(xe.jsxs)("div",{children:[Object(xe.jsx)(p.L,{breadcrumbs:W,handleClick:x}),Object(xe.jsx)(p.R,{title:D(f?N.a.paymentmethod:N.a.paymentmethodnew)})]}),Object(xe.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(xe.jsx)(j.a,{variant:"contained",type:"button",color:"primary",startIcon:Object(xe.jsx)(C.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){return x("view-1")},children:D(N.a.back)}),m&&Object(xe.jsx)(j.a,{className:_.button,variant:"contained",color:"primary",type:"submit",startIcon:Object(xe.jsx)(y.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:D(N.a.save)})]})]}),Object(xe.jsxs)("div",{className:_.containerDetail,children:[Object(xe.jsx)("h3",{children:D(N.a.addpaymentmethodsub)}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.l,{label:D(N.a.firstname),onChange:function(e){return J("firstname",e)},valueDefault:ee("firstname"),error:null===ae||void 0===ae||null===(t=ae.firstname)||void 0===t?void 0:t.message,className:"col-6",disabled:!m}),Object(xe.jsx)(p.l,{label:D(N.a.lastname),onChange:function(e){return J("lastname",e)},valueDefault:ee("lastname"),error:null===ae||void 0===ae||null===(a=ae.lastname)||void 0===a?void 0:a.message,className:"col-6",disabled:!m})]}),Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(p.l,{label:D(N.a.email),onChange:function(e){return J("mail",e)},valueDefault:ee("mail"),error:null===ae||void 0===ae||null===(i=ae.mail)||void 0===i?void 0:i.message,className:"col-6",disabled:!m}),Object(xe.jsx)(S.a,{name:"phone",control:te,rules:{validate:function(e){return 0===e.length?D(N.a.field_required):e.length<10?D(N.a.validationphone):void 0}},render:function(e){var t,a=e.field,i=e.formState.errors;return Object(xe.jsx)(Ce,Object(r.a)(Object(r.a)({},a),{},{className:"col-6",variant:"outlined",margin:"normal",fullWidth:!0,size:"small",defaultCountry:"pe",label:D(N.a.phone),error:!!(null===i||void 0===i?void 0:i.phone),helperText:null===i||void 0===i||null===(t=i.phone)||void 0===t?void 0:t.message,disabled:!m}))}})]}),Object(xe.jsx)("h3",{children:D(N.a.creditcard)}),m&&Object(xe.jsxs)("div",{style:{display:"flex"},children:[Object(xe.jsx)("img",{alt:"aux2",src:"https://static.culqi.com/v2/v2/static/img/visa.svg",width:"50px",style:{padding:5}}),Object(xe.jsx)("img",{alt:"aux2",src:"https://static.culqi.com/v2/v2/static/img/mastercard.svg",width:"50px",style:{padding:5}}),Object(xe.jsx)("img",{alt:"aux2",src:"https://static.culqi.com/v2/v2/static/img/amex.svg",width:"50px",style:{padding:5}}),Object(xe.jsx)("img",{alt:"aux2",src:"https://static.culqi.com/v2/v2/static/img/diners.svg",width:"50px",style:{padding:5}})]}),Object(xe.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(xe.jsxs)("div",{style:{width:"50%"},children:[Object(xe.jsxs)("div",{className:"row-zyx",children:[Object(xe.jsx)(P.a,{variant:"outlined",margin:"normal",fullWidth:!0,size:"small",label:D(N.a.creditcard),error:!!ae.cardnumber,helperText:null===(c=ae.cardnumber)||void 0===c?void 0:c.message,disabled:!m,defaultValue:ee("cardnumber"),onPaste:function(e){e.preventDefault()},onChange:function(e){for(var t=e.target.value.replace(/[^0-9]/g,""),a=Math.floor(t.length/4),i=t.slice(0,4),c=1;c<=a;c++)i+=" "+t.slice(4*c,4*(c+1));" "===i.slice(-1)&&(i=i.slice(0,-1)),e.target.value=i,J("cardnumber",i.trim())},onInput:function(e){"4"===e.target.value.slice(0,1)?(M(Object(xe.jsx)("img",{alt:"aux",src:"https://static.culqi.com/v2/v2/static/img/visa.svg",width:"50px",style:{padding:5}})),J("cardlimit",19)):"51"===e.target.value.slice(0,2)||"55"===e.target.value.slice(0,2)?(M(Object(xe.jsx)("img",{alt:"aux",src:"https://static.culqi.com/v2/v2/static/img/mastercard.svg",width:"50px",style:{padding:5}})),J("cardlimit",19)):"37"===e.target.value.slice(0,2)||"34"===e.target.value.slice(0,2)?(M(Object(xe.jsx)("img",{alt:"aux",src:"https://static.culqi.com/v2/v2/static/img/amex.svg",width:"50px",style:{padding:5}})),J("cardlimit",18)):"36"===e.target.value.slice(0,2)||"38"===e.target.value.slice(0,2)||"300"===e.target.value.slice(0,3)||"305"===e.target.value.slice(0,3)?(M(Object(xe.jsx)("img",{alt:"aux",src:"https://static.culqi.com/v2/v2/static/img/diners.svg",width:"50px",style:{padding:5}})),J("cardlimit",17)):(M(Object(xe.jsx)(xe.Fragment,{})),J("cardlimit",10))},InputProps:{endAdornment:$},inputProps:{maxLength:ee("cardlimit")},className:"col-9"}),Object(xe.jsxs)("div",{className:"col-3",style:{paddingBottom:"3px"},children:[Object(xe.jsx)(q.a,{fontWeight:500,lineHeight:"18px",fontSize:14,mb:2,color:"textPrimary",children:D(N.a.preferred)}),Object(xe.jsx)(R.a,{style:{paddingLeft:10},control:Object(xe.jsx)(p.z,{checked:z,disabled:!m,onChange:function(e){F(e.target.checked),J("favorite",e.target.checked)}}),label:""})]})]}),m&&Object(xe.jsx)("h3",{children:D(N.a.dueDate)}),m&&Object(xe.jsxs)("div",{style:{display:"flex"},children:[Object(xe.jsx)(p.u,{onChange:function(e){J("expirationmonth",(null===e||void 0===e?void 0:e.desc)||"")},variant:"outlined",style:{marginTop:8,marginRight:10},className:"col-6",valueDefault:ee("expirationmonth"),label:"MM",error:null===(n=ae.expirationmonth)||void 0===n?void 0:n.message,data:Y,optionDesc:"desc",optionValue:"id"}),Object(xe.jsx)(P.a,{variant:"outlined",margin:"normal",fullWidth:!0,className:"col-6",style:{marginTop:8},type:"number",size:"small",label:"YYYY",error:!!ae.expirationyear,helperText:null===(l=ae.expirationyear)||void 0===l?void 0:l.message,inputProps:{maxLength:4},onChange:function(e){J("expirationyear",e.target.value)}})]}),m&&Object(xe.jsx)(P.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"password",size:"small",label:D(N.a.securitycode),error:!!ae.securitycode,helperText:null===(o=ae.securitycode)||void 0===o?void 0:o.message,inputProps:{maxLength:18===ee("cardlimit")?4:3},onChange:function(e){J("securitycode",e.target.value)}})]}),Object(xe.jsxs)("div",{style:{width:"50%"},children:[m&&Object(xe.jsx)("div",{style:{textAlign:"center",padding:"20px",border:"1px solid #7721ad",borderRadius:"15px",margin:"10px"},children:D(N.a.finishregwarn)}),m&&Object(xe.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#7721ad",margin:"10px"},children:D(N.a.finishregwarn2)})]})]})]})]})})};t.default=function(){var e=Object(v.c)(),t=Object(w.a)().t,a=Object(b.b)((function(e){return e.main.multiData})),i=Object(b.b)((function(e){return e.login.validateToken.user})),c=Object(d.useState)([]),n=Object(s.a)(c,2),l=n[0],o=n[1],r=Object(d.useState)([]),u=Object(s.a)(r,2),j=u[0],f=u[1],h=Object(d.useState)([]),x=Object(s.a)(h,2),g=x[0],y=x[1],S=Object(d.useState)([]),D=Object(s.a)(S,2),C=D[0],E=D[1],I=Object(d.useState)(0),q=Object(s.a)(I,2),R=q[0],k=q[1],A=Object(d.useState)(!1),T=Object(s.a)(A,2),P=T[0],z=T[1],F=Object(d.useState)({year:0,month:0,corpid:0,orgid:0,totalize:2}),V=Object(s.a)(F,2),L=V[0],$=V[1];return Object(d.useEffect)((function(){0!==L.corpid&&k(1)}),[L]),Object(d.useEffect)((function(){!a.loading&&P&&(z(!1),E(a.data[0]&&a.data[0].success?a.data[0].data:[]),f(a.data[1]&&a.data[1].success?a.data[1].data:[]),o(a.data[2]&&a.data[2].success?a.data[2].data:[]),y(a.data[3]&&a.data[3].success?a.data[3].data:[]))}),[a]),Object(d.useEffect)((function(){z(!0),e(Object(Q.c)()),"SUPERADMIN"===(null===i||void 0===i?void 0:i.roledesc)?e(Object(O.p)([Object(m.Qd)(),Object(m.zd)(0),Object(m.yc)(0),Object(m.Md)()])):e(Object(O.p)([Object(m.Qd)(),Object(m.zd)((null===i||void 0===i?void 0:i.corpid)||0),Object(m.zc)((null===i||void 0===i?void 0:i.corpid)||0,(null===i||void 0===i?void 0:i.orgid)||0,(null===i||void 0===i?void 0:i.usr)||""),Object(m.Md)()]))}),[]),Object(xe.jsxs)("div",{style:{width:"100%"},children:["SUPERADMIN"===(null===i||void 0===i?void 0:i.roledesc)&&Object(xe.jsxs)("div",{children:[Object(xe.jsxs)(_.a,{value:R,indicatorColor:"primary",variant:"fullWidth",style:{borderBottom:"1px solid #EBEAED",backgroundColor:"#FFF",marginTop:8},textColor:"primary",onChange:function(e,t){return k(t)},children:[Object(xe.jsx)(p.b,{label:t(N.a.costperperiod)}),Object(xe.jsx)(p.b,{label:t(N.a.periodreport)}),Object(xe.jsx)(p.b,{label:t(N.a.payments)}),Object(xe.jsx)(p.b,{label:t(N.a.invoice)}),Object(xe.jsx)(p.b,{label:t(N.a.messagingpackages)}),Object(xe.jsx)(p.b,{label:t(N.a.paymentmethods)})]}),0===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(Ie,{dataCorp:l,dataOrg:j,dataPaymentPlan:g,dataPlan:C})}),1===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(ke,{dataCorp:l,dataOrg:j,customSearch:L})}),2===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(Te,{dataCorp:l,dataOrg:j,setCustomSearch:$})}),3===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(Fe,{dataCorp:l,dataOrg:j})}),4===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(Ge,{dataCorp:l,dataOrg:j})}),5===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(Xe,{})})]}),["ADMINISTRADOR","ADMINISTRADOR P","ADMINISTRADOR LIMADERMA"].includes((null===i||void 0===i?void 0:i.roledesc)||"")&&Object(xe.jsxs)("div",{children:[Object(xe.jsxs)(_.a,{value:R,indicatorColor:"primary",variant:"fullWidth",style:{borderBottom:"1px solid #EBEAED",backgroundColor:"#FFF",marginTop:8},textColor:"primary",onChange:function(e,t){return k(t)},children:[Object(xe.jsx)(p.b,{label:t(N.a.periodreport)}),Object(xe.jsx)(p.b,{label:t(N.a.payments)}),Object(xe.jsx)(p.b,{label:t(N.a.messagingpackages)}),Object(xe.jsx)(p.b,{label:t(N.a.paymentmethods)})]}),0===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(ke,{dataCorp:l,dataOrg:j,customSearch:L})}),1===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(Te,{dataCorp:l,dataOrg:j,setCustomSearch:$})}),2===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(Ge,{dataCorp:l,dataOrg:j})}),3===R&&Object(xe.jsx)("div",{style:{marginTop:16},children:Object(xe.jsx)(Xe,{})})]})]})}},814:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return s}));var i=a(28),c=a(47),n=function(e){return{callAPI:function(){return i.d.execSub(e)},types:{loading:c.a.SIGNUP,success:c.a.SIGNUP_SUCCESS,failure:c.a.SIGNUP_FAILURE},type:null}},l=function(e){return{callAPI:function(){return i.d.validateNewUser(e)},types:{loading:c.a.ISVALID,success:c.a.ISVALID_SUCCESS,failure:c.a.ISVALID_FAILURE},type:null}},o=function(e){return{callAPI:function(){return i.d.vrfplan(e)},types:{loading:c.a.VERIFYPLAN,success:c.a.VERIFYPLAN_SUCCESS,failure:c.a.VERIFYPLAN_FAILURE},type:null}},r=function(){return{callAPI:function(){return i.d.getCurrencyList()},types:{loading:c.a.CURRENCYLIST,success:c.a.CURRENCYLIST_SUCCESS,failure:c.a.CURRENCYLIST_FAILURE},type:null}},s=function(){return{callAPI:function(){return i.d.getCountryList()},types:{loading:c.a.COUNTRYLIST,success:c.a.COUNTRYLIST_SUCCESS,failure:c.a.COUNTRYLIST_FAILURE},type:null}}},910:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"m",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"l",(function(){return r})),a.d(t,"i",(function(){return s})),a.d(t,"n",(function(){return d})),a.d(t,"p",(function(){return u})),a.d(t,"o",(function(){return b})),a.d(t,"f",(function(){return v})),a.d(t,"e",(function(){return j})),a.d(t,"j",(function(){return O})),a.d(t,"h",(function(){return p})),a.d(t,"g",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return h})),a.d(t,"k",(function(){return x}));var i=a(28),c=a(27),n=function(e){return{callAPI:function(){return i.f.charge(e)},types:{loading:c.a.CHARGE,success:c.a.CHARGE_SUCCESS,failure:c.a.CHARGE_FAILURE},type:null}},l=function(){return{type:c.a.CHARGE_RESET}},o=function(e){return{callAPI:function(){return i.f.balance(e)},types:{loading:c.a.BALANCE,success:c.a.BALANCE_SUCCESS,failure:c.a.BALANCE_FAILURE},type:null}},r=function(){return{type:c.a.BALANCE_RESET}},s=function(e){return{callAPI:function(){return i.f.paymentOrder(e)},types:{loading:c.a.PAYMENTORDER,success:c.a.PAYMENTORDER_SUCCESS,failure:c.a.PAYMENTORDER_FAILURE},type:null}},d=function(){return{type:c.a.PAYMENTORDER_RESET}},u=function(e){return{callAPI:function(){return i.f.subscribe(e)},types:{loading:c.a.SUBSCRIBE,success:c.a.SUBSCRIBE_SUCCESS,failure:c.a.SUBSCRIBE_FAILURE},type:null}},b=function(){return{type:c.a.SUBSCRIBE_RESET}},v=function(e){return{callAPI:function(){return i.f.createInvoice(e)},types:{loading:c.a.CREATE_INVOICE,success:c.a.CREATE_INVOICE_SUCCESS,failure:c.a.CREATE_INVOICE_FAILURE},type:null}},j=function(e){return{callAPI:function(){return i.f.createCreditNote(e)},types:{loading:c.a.CREATE_CREDITNOTE,success:c.a.CREATE_CREDITNOTE_SUCCESS,failure:c.a.CREATE_CREDITNOTE_FAILURE},type:null}},O=function(e){return{callAPI:function(){return i.f.regularizeInvoice(e)},types:{loading:c.a.REGULARIZE_INVOICE,success:c.a.REGULARIZE_INVOICE_SUCCESS,failure:c.a.REGULARIZE_INVOICE_FAILURE},type:null}},p=function(e){return{callAPI:function(){return i.f.getExchangeRate(e)},types:{loading:c.a.GET_EXCHANGERATE,success:c.a.GET_EXCHANGERATE_SUCCESS,failure:c.a.GET_EXCHANGERATE_FAILURE},type:null}},m=function(e){return{callAPI:function(){return i.f.emitInvoice(e)},types:{loading:c.a.EMIT_INVOICE,success:c.a.EMIT_INVOICE_SUCCESS,failure:c.a.EMIT_INVOICE_FAILURE},type:null}},f=function(e){return{callAPI:function(){return i.f.cardCreate(e)},types:{failure:c.a.CARD_CREATE_FAILURE,loading:c.a.CARD_CREATE,success:c.a.CARD_CREATE_SUCCESS},type:null}},h=function(e){return{callAPI:function(){return i.f.cardDelete(e)},types:{failure:c.a.CARD_DELETE_FAILURE,loading:c.a.CARD_DELETE,success:c.a.CARD_DELETE_SUCCESS},type:null}},x=function(e){return{callAPI:function(){return i.f.reportPdf(e)},types:{failure:c.a.DRAW_REPORTPDF_FAILURE,loading:c.a.DRAW_REPORTPDF,success:c.a.DRAW_REPORTPDF_SUCCESS},type:null}}},998:function(e,t,a){"use strict";var i=a(1),c=a(20),n=a(937),l=a.n(n),o=a(14),r=a(94),s=a(910),d=a(999),u=a(0),b=a(8),v=a(44),j=a(40),O=a(25),p=a(122),m=a(2),f=o.a.CULQIKEY;t.a=function(e){var t=e.amount,a=e.buttontitle,n=e.buyamount,o=e.callbackOnSuccess,h=e.comments,x=e.corpid,g=void 0===x?0:x,y=e.currency,w=void 0===y?"USD":y,N=e.description,S=e.disabled,D=void 0!==S&&S,C=e.interval,E=e.interval_count,I=e.invoiceid,_=e.paymentorderid,q=e.limit,R=e.metadata,k=e.options,A=void 0===k?{}:k,T=e.orgid,P=void 0===T?0:T,z=e.override,F=e.publickey,V=e.purchaseorder,L=e.reference,$=e.successmessage,M=e.title,U=e.totalamount,B=e.totalpay,H=e.type,G=void 0===H?"CHARGE":H,Y=Object(p.a)().t,W=Object(j.c)(),X=Object(O.b)((function(e){return e.culqi.request})),K=Object(u.useState)(!1),Q=Object(c.a)(K,2),Z=Q[0],J=Q[1],ee=function(){switch(G){case"BALANCE":W(Object(s.l)());break;case"CHARGE":W(Object(s.m)());break;case"PAYMENTORDER":W(Object(s.n)());break;case"SUBSCRIPTION":W(Object(s.o)())}};return Object(u.useEffect)((function(){Z&&(X.loading||X.error?X.error&&(W(Object(v.e)({show:!0,severity:"error",message:"".concat(X.message?X.message:Y("error_unexpected_error"))})),W(Object(v.d)(!1)),J(!1),ee&&ee()):(W(Object(v.e)({show:!0,severity:"success",message:"".concat($||X.message)})),W(Object(v.d)(!1)),J(!1),ee&&ee(),o&&o()))}),[X,Z]),Object(m.jsx)(d.b,{amount:t,currency:w,description:N,onError:function(e){switch(G){case"BALANCE":W(Object(s.l)());break;case"CHARGE":W(Object(s.m)());break;case"PAYMENTORDER":W(Object(s.n)());break;case"SUBSCRIPTION":W(Object(s.o)())}},onToken:function(e){switch(G){case"BALANCE":!function(e){W(Object(v.d)(!0)),W(Object(s.a)({buyamount:n,comments:h,corpid:g,invoiceid:I,metadata:R,orgid:P,purchaseorder:V,reference:L,settings:{title:M,description:N,currency:w,amount:t},token:e,totalamount:U,totalpay:B})),J(!0)}(e);break;case"CHARGE":!function(e){W(Object(v.d)(!0)),W(Object(s.d)({comments:h,corpid:g,invoiceid:I,metadata:R,orgid:P,override:z,purchaseorder:V,settings:{title:M,description:N,currency:w,amount:t},token:e})),J(!0)}(e);break;case"PAYMENTORDER":!function(e){W(Object(v.d)(!0)),W(Object(s.i)({corpid:g,metadata:R,orgid:P,paymentorderid:_,settings:{title:M,description:N,currency:w,amount:t},token:e})),J(!0)}(e);break;case"SUBSCRIPTION":!function(e){W(Object(v.d)(!0)),W(Object(s.p)({metadata:R,settings:{title:M,description:N,currency:w,amount:t,interval:C,interval_count:E,limit:q},token:e})),J(!0)}(e)}},options:{style:Object(i.a)({maincolor:"#7721AD",buttontext:"#FFFFFF",maintext:"#7721AD"},A)},publicKey:F||f,title:M,children:Object(m.jsx)(d.a,{children:function(e){var t=e.openCulqi;return Object(m.jsx)(r.a,{color:"primary",disabled:D||Z,onClick:t,startIcon:Object(m.jsx)(l.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},type:"button",variant:"contained",children:a||Y(b.a.pay)})}})})}}}]);
//# sourceMappingURL=62.f6cd7de2.chunk.js.map