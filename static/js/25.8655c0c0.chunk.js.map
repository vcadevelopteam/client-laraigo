{"version":3,"sources":["pages/dashboard/DashboardAdd.tsx","../node_modules/recharts/es6/chart/LineChart.js","../node_modules/lodash/omit.js","../node_modules/lodash/_baseUnset.js","../node_modules/lodash/_parent.js","../node_modules/lodash/_customOmitClone.js","../node_modules/lodash/_flatRest.js","../node_modules/lodash/flatten.js","../node_modules/recharts/es6/shape/Trapezoid.js","../node_modules/recharts/es6/numberAxis/Funnel.js","../node_modules/recharts/es6/chart/FunnelChart.js","pages/dashboard/DashboardLayout.tsx","components/fields/table-simple.tsx","../node_modules/@material-ui/icons/Search.js","components/fields/Graphic.tsx","../node_modules/@material-ui/icons/CloudDownload.js","../node_modules/@material-ui/icons/List.js","store/dashboard/actions.ts","../node_modules/@material-ui/icons/Edit.js","../node_modules/recharts/es6/cartesian/Line.js"],"names":["ReactGridLayout","WidthProvider","RGL","useDashboardAddStyles","makeStyles","theme","root","display","flexDirection","width","dragDropContextRow","minHeight","droppableColumn","height","droppableContainer","backgroundColor","color","item","layout","header","gap","useSubmitModalStyles","position","top","left","transform","maxWidth","maxHeight","padding","overflowY","SubmitModal","open","loading","defaultDescription","onClose","onSubmit","classes","t","useTranslation","useState","description","setDescription","_","reason","className","id","variant","component","i18nKey","langKeys","placeholder","enterDashboardDescription","value","onChange","e","target","InputProps","readOnly","disabled","length","onClick","save","useNewBtnStyles","the","overflow","justifyContent","alignItems","minWidth","addIcon","NewBtn","useLayoutItemStyles","deleteBtn","right","funnelLvlTitle","field","marginBottom","LayoutItem","key","layoutKey","edit","templates","kpis","tags","errors","getValues","setValue","register","unregister","onDelete","selectedIndex","setSelectedIndex","contentType","setContentType","tagsdata","settagsdata","columns","setColumns","useEffect","reporttemplateid","undefined","findIndex","defaultContentType","validate","mandatoryStrField","mandatoryContentType","mandatoryReportTemplate","mandatoryColumn","mandatoryNumField","columnas","JSON","parse","columnjson","summary","summaryjson","map","x","alias","summarization","find","y","columnname","function","descriptionT","join_alias","join_on","join_table","tablename","type","concat","some","field_required","invalidEntry","size","style","valueDefault","label","title","error","message","v","data","contentTypes","optionDesc","optionValue","uset","prefixTranslation","kpiid","report","groupment","groupingType","grouping","chartType","graphTypes","graph","displayinterval","desc","day","week","month","column","slice","filter","includes","tag","i","fontSize","fontWeight","level","index","newtagsdata","deleteFunnel","margin","marginRight","paddingLeft","fregister","initTags","newtagdata","float","add","CenterLoading","DashboardAdd","match","useRouteMatch","location","useLocation","dispatch","useDispatch","history","useHistory","now","Date","toString","openModal","setOpenModal","w","h","minW","minH","isResizable","isDraggable","static","setLayout","reportTemplatesAndKpis","useSelector","state","main","multiData","dashboardSave","dashboard","dashboardtemplateSave","dashboardtemplate","setDashboardTemplate","dashboardtemplateid","Number","params","push","paths","DASHBOARD","dashboardId","getDashboardTemplate","getDashboardTemplateSel","getMultiCollection","getReportTemplateSel","getKpiSel","getTagsChatflow","resetMain","resetMultiMain","resetSaveDashboardTemplate","code","module","user","toLocaleLowerCase","showSnackbar","severity","show","success","prev","Infinity","layoutjson","reset","detailjson","useForm","defaultValues","formState","handleSubmit","addItemOnClick","newKey","newlayout","addbtn","useCallback","cleanLayout","saveDashboardTemplate","getDashboardTemplateIns","stringify","status","operation","breadcrumbs","name","edit_custom_dashboard","create_custom_dashboard","handleClick","newDashboard","flexGrow","startIcon","back","empty_dashboard_form_error","console","warn","validMultiMainData","onLayoutChange","cols","rowHeight","LineChart","generateCategoricalChart","chartName","GraphicalChild","Line","axisComponents","axisType","AxisComp","XAxis","YAxis","formatAxisMap","arrayMap","require","baseClone","baseUnset","castPath","copyObject","customOmitClone","flatRest","getAllKeysIn","omit","object","result","isDeep","path","CLONE_DEEP_FLAG","exports","last","parent","toKey","baseGet","baseSlice","isPlainObject","flatten","overRest","setToString","func","baseFlatten","array","_typeof","obj","Symbol","iterator","constructor","prototype","_extends","Object","assign","arguments","source","hasOwnProperty","call","apply","this","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","getPrototypeOf","getTrapezoidPath","upperWidth","lowerWidth","widthGap","Trapezoid","_PureComponent","subClass","superClass","create","_inherits","protoProps","staticProps","_super","_this","_len","args","Array","_key","totalLength","node","getTotalLength","setState","err","_this2","_this$props","_this$props2","animationEasing","animationDuration","animationBegin","isUpdateAnimationActive","layerClass","classNames","React","createElement","Animate","canBegin","from","to","duration","isActive","_ref","currUpperWidth","currLowerWidth","currHeight","currX","currY","attributeName","begin","easing","filterProps","d","ref","PureComponent","defaultProps","_slicedToArray","arr","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","next","done","_iterableToArrayLimit","minLen","_arrayLikeToArray","n","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","Funnel","isAnimationFinished","handleAnimationEnd","onAnimationEnd","_isFunction","handleAnimationStart","onAnimationStart","nextProps","prevState","animationId","prevAnimationId","curTrapezoids","trapezoids","prevTrapezoids","option","isValidElement","cloneElement","_isPlainObject","activeIndex","indexOf","activeShape","entry","trapezoidOptions","isActiveIndex","trapezoidProps","stroke","Layer","adaptEventsOfChild","renderTrapezoidItem","_this3","isAnimationActive","stepData","_interpolatorX","interpolateNumber","_interpolatorY","_interpolatorUpperWidth","_interpolatorLowerWidth","_interpolatorHeight","interpolatorX","interpolatorY","interpolatorUpperWidth","interpolatorLowerWidth","interpolatorHeight","renderTrapezoidsStatically","_isEqual","renderTrapezoidsWithAnimation","_this$props3","hide","renderTrapezoids","LabelList","renderCallByParent","displayName","fill","legendType","labelLine","Global","isSsr","nameKey","lastShapeType","getRealFunnelData","_item$props","children","presentationProps","cells","findAllByType","Cell","payload","cell","getRealWidthHeight","offset","customWidth","bottom","realHeight","realWidth","_isNumber","_isString","parseFloat","offsetX","offsetY","getComposedData","_ref2","funnelData","_item$props2","dataKey","tooltipType","reversed","_Funnel$getRealWidthH","maxValue","Math","max","getValueByDataKey","parentViewBox","nextVal","rawVal","val","_rawVal","tooltipPayload","tooltipPosition","_omit","labelViewBox","abs","min","newY","FunnelChart","validateTooltipEventTypes","defaultTooltipEventType","months","monthColor","colors","useDashboardLayoutStyles","filtersContainer","flexWrap","spacing","styleicon","cursor","downloadiconcontainer","format","date","setHours","toISOString","split","rootLoading","paddingBottom","reponsiveContainer","errorText","textAlign","detail","dateRange","dataorigin","errorcode","alldata","onModalOpenhasChanged","onDetailChange","dataGraph","useMemo","quantity","openTableModal","setOpenTableModal","anchorEl","setAnchorEl","handleClose","formatTooltip","tot","percentage","toFixed","renderGraph","tickFormatter","tooltipFormatter","clsx","Trans","chart_dashboard_report_error","chart_dashboard_column_error","chart_dashboard_unexpected_error","Tooltip","moreOptions","IconButton","event","currentTarget","MoreVert","Menu","MenuListProps","MenuItem","seeMore","rawColumns","LayoutBar","total","modifieddata","interval","replace","listlabels","newlabel","ResponsiveContainer","BarChart","angle","textAnchor","dy","dx","domain","content","active","partialtotal","reduce","acc","Card","whiteSpace","Bar","LayoutLine","itemmodel","CartesianGrid","PIE_COLORS","LayoutFunnel","truedata","dataFunnel","then","XLSX","dataexport","Nombre","Cantidad","wb","Sheets","utils","json_to_sheet","SheetNames","excelBuffer","write","bookType","Blob","FileSaver","saveAs","formatter","parseInt","String","props2","dominantBaseline","LayoutPie","PieChart","Pie","cx","cy","innerRadius","RenderCustomizedLabel","Legend","verticalAlign","LayoutKpi","gaugeArcs","alertat","cautionat","currentvalue","ceil","percent","inverted","arcsLength","textColor","animate","needleColor","formatTextValue","TableModal","mainDynamic","Header","accessor","row","original","toLocaleString","getBody","parameters","getTimezoneOffset","summaries","filters","start","startDate","end","endDate","getCollectionDynamic","buttonText2","cancel","handleClickButton2","filterGeneral","download","CircularProgress","DashboardLayout","dashboardtemplateDelete","reportTemplates","mainData","openDatePicker","setOpenDatePicker","setDate","getFullYear","getMonth","setDateRange","tempDaterange","useRef","mustLoadagain","getCollection","resetMainDynamic","resetGetDashboard","resetGetDashboardTemplate","resetDeleteDashboardTemplate","getDashboard","startdate","enddate","current","manageConfirmation","visible","question","confirmation_delete","callback","deleteDashboardTemplate","deleteItemOnClick","getChartTitle","reportname","Box","detail_custom_dashboard","setOpen","range","onSelect","Button","border","borderRadius","Search","search","Clear","DASHBOARD_EDIT","resolve","delete","l","useStyles","footerTable","breakpoints","up","trdynamic","boxShadow","visibility","containerSearch","containerFilterGeneral","containerfloat","borderBottom","marginTop","zIndex","iconOrder","palette","text","primary","button","textTransform","containerButtons","gridGap","gridAutoFlow","containerHeader","containerHeaderColumn","iconHelpText","stringOptionsMenu","numberOptionsMenu","dateOptionsMenu","booleanOptionsMenu","BooleanOptionsMenuComponent","handleClickItemMenu","SelectFilterTmp","all","DateOptionsMenuComponent","value2","setvalue2","DateFnsUtils","locale","localesLaraigo","navigator","language","invalidDateMessage","invalid_date_format","getLocaleDateString","TimeOptionsMenuComponent","ampm","views","helperText","OptionsMenuComponent","operator","selected","TableZyx","memo","titlemodule","fetchData","handleRegister","calculate","handleCalculate","HeadComponent","ButtonsElement","triggerExportPersonalized","exportPersonalized","pageSizeDefault","importCSV","handleTemplate","useSelection","selectionKey","initialSelectedRows","setSelectedRows","allRowsSelected","setAllRowsSelected","onClickRow","toolsFooter","initialPageIndex","initialStateFilter","registertext","setDataFiltered","useFooter","heightWithCheck","checkHistoryCenter","initial","setInitial","filterCellValue","rows","filterValue","cellvalue","values","toLowerCase","defaultColumn","Filter","$setFilter","setFilter","listSelectFilter","iSF","setoperator","setMemoryTable","op","keyPress","keyCode","Fragment","isNaN","toLocaleTimeString","fullWidth","onKeyDown","PaperProps","DefaultColumnFilter","useTable","initialState","pageSize","selectedRowIds","getRowId","relativeIndex","join","useFilters","useGlobalFilter","useSortBy","usePagination","useRowSelect","hooks","visibleColumns","getToggleAllPageRowsSelectedProps","checked","isSelected","toggleRowSelected","NoFilter","getTableProps","getTableBodyProps","headerGroups","footerGroups","prepareRow","page","canPreviousPage","canNextPage","pageOptions","pageCount","gotoPage","nextPage","previousPage","setPageSize","globalFilteredRows","setGlobalFilter","pageIndex","toggleAllRowsSelected","RenderRow","getRowProps","hover","getCellProps","flex","textOverflow","render","mb","arrow","placement","marginLeft","accept","files","htmlFor","import","template","exportExcel","isComponent","activeOnHover","colorPlaceHolder","handleChangeOther","lazy","headerGroup","getHeaderGroupProps","headers","ii","getHeaderProps","getSortByToggleProps","wordWrap","isSorted","isSortedDesc","helpText","LoadingSkeleton","overflowX","direction","window","innerHeight","itemCount","itemSize","group","getFooterGroupProps","getFooterProps","tablePageOf","currentPage","totalPages","components","tableShowingRecordOfMore","tableShowingRecordOf","totalItems","disableUnderline","recordPerPage","count","items","_interopRequireDefault","_interopRequireWildcard","default","_default","container","containerDetails","media","objectFit","containerFilter","filterComponent","mb2","containerHeaderItem","randomColor","floor","random","padStart","RADIAN","PI","midAngle","outerRadius","radius","cos","sin","TableResume","graphicType","columnDesc","origin","Graphic","setView","FiltersElement","daterange","handlerSearchGraphic","withFilters","withButtons","openDateRangeModal","setOpenDateRangeModal","dataGraphic","setDataGraphic","setdateRange","mainGraphicRes","mainGraphic","objectItems","dataReady","entries","sort","a","b","startsWith","in_white","getDateCleaned","configuration","grid_view","graphic_report_of","aspect","strokeDasharray","stackId","callAPI","DashboardService","types","actionTypes","GET_DASHBOARD","GET_DASHBOARD_SUCCESS","failure","GET_DASHBOARD_FAILURE","GET_DASHBOARD_RESET","body","CommonService","GET_DASHBOARDTEMPLATE","GET_DASHBOARDTEMPLATE_SUCCESS","GET_DASHBOARDTEMPLATE_FAILURE","SET_DASHBOARDTEMPLATE","GET_DASHBOARDTEMPLATE_RESET","SAVE_DASHBOARDTEMPLATE","SAVE_DASHBOARDTEMPLATE_SUCCESS","SAVE_DASHBOARDTEMPLATE_FAILURE","SAVE_DASHBOARDTEMPLATE_RESET","DELETE_DASHBOARDTEMPLATE","DELETE_DASHBOARDTEMPLATE_SUCCESS","DELETE_DASHBOARDTEMPLATE_FAILURE","DELETE_DASHBOARDTEMPLATE_RESET","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_toConsumableArray","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","mainCurve","getStrokeDasharray","lines","lineLength","pre","remainLength","restLength","remainLines","sum","emptyLines","repeat","line","uniqueId","pathRef","curPoints","points","prevPoints","linesUnit","dotItem","Dot","curveDom","xAxis","yAxis","errorBarItems","ErrorBar","dataPointFormatter","dataPoint","errorVal","needClip","clipPathId","dot","lineProps","customDotProps","dots","dotProps","r","renderDotItem","dotsProps","clipPath","connectNulls","others","curveProps","Curve","_this$props4","animateNewValues","_this$state","prevPointsDiffFactor","prevPointIndex","renderCurveStatically","currentStrokeDasharray","curLength","interpolator","num","_this$props5","_this$state2","renderCurveWithAnimation","_this$props6","hasSinglePoint","allowDataOverflow","_isNil","renderCurve","renderErrorBar","renderDots","xAxisId","yAxisId","activeDot","strokeWidth","xAxisTicks","yAxisTicks","bandSize","displayedData","getCateCoordinateOfLine","axis","ticks","scale"],"mappings":"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","file":"static/js/25.8655c0c0.chunk.js","sourcesContent":["import { Box, Button, IconButton, makeStyles, Modal, Typography, TextField, CircularProgress } from \"@material-ui/core\";\r\nimport paths from \"common/constants/paths\";\r\nimport { FieldEdit, FieldSelect, TemplateBreadcrumbs, TitleDetail } from \"components\";\r\nimport { FC, useCallback, useEffect, useState } from \"react\";\r\nimport { useHistory, useRouteMatch, useLocation } from \"react-router\";\r\nimport RGL, { WidthProvider } from 'react-grid-layout';\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { langKeys } from \"lang/keys\";\r\nimport { Close as CloseIcon, Clear as ClearIcon, Add as AddIcon, Save as SaveIcon } from \"@material-ui/icons\";\r\nimport { FieldErrors, useForm, UseFormGetValues, UseFormRegister, UseFormSetValue, UseFormUnregister } from \"react-hook-form\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getMultiCollection, resetMain, resetMultiMain } from \"store/main/actions\";\r\nimport { getDashboardTemplateIns, getDashboardTemplateSel, getKpiSel, getReportTemplateSel, getTagsChatflow } from \"common/helpers\";\r\nimport { useSelector } from \"hooks\";\r\nimport { contentTypes, graphTypes, groupingType } from \"./constants\";\r\nimport { showSnackbar } from \"store/popus/actions\";\r\nimport { getDashboardTemplate, resetSaveDashboardTemplate, saveDashboardTemplate, setDashboardTemplate } from \"store/dashboard/actions\";\r\nimport { DashboardTemplate } from \"@types\";\r\n\r\nexport interface ReportTemplate {\r\n    columnjson: string; // array json\r\n    createdate: string;\r\n    description: string;\r\n    filterjson: string; // json\r\n    reporttemplateid: number;\r\n    status: string;\r\n    type: string;\r\n    summaryjson: string;\r\n}\r\n\r\nexport interface KpiTemplate {\r\n    description: string;\r\n    id: number;\r\n    kpiname: string;\r\n}\r\n\r\ninterface ColumnTemplate {\r\n    // filter: string;\r\n    // hasFilter: boolean;\r\n    // key: string;\r\n    // value: string;\r\n    alias: string;\r\n    columnname: string;\r\n    description: string;\r\n    descriptionT: string;\r\n    disabled: boolean;\r\n    join_alias: any;\r\n    join_on: any;\r\n    join_table: any;\r\n    tablename: string;\r\n    type: string;\r\n    function?: string;\r\n}\r\n\r\nconst ReactGridLayout = WidthProvider(RGL);\r\n\r\nconst useDashboardAddStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n    },\r\n    dragDropContextRow: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        minHeight: 500,\r\n    },\r\n    droppableColumn: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        height: '100%',\r\n    },\r\n    droppableContainer: {\r\n        display:'flex',\r\n        backgroundColor: 'red',\r\n        color: 'white',\r\n        flexDirection: 'column',\r\n        height: 'inherit',\r\n        width: 250,\r\n    },\r\n    item: {\r\n        backgroundColor: 'blue',\r\n        color: 'white',\r\n    },\r\n    layout: {\r\n        backgroundColor: 'inherit',\r\n        width: '100%',\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        gap: '1em',\r\n    },\r\n}));\r\n\r\ninterface Item {\r\n    description: string;\r\n    contentType: string;\r\n    kpiid : number;\r\n    reporttemplateid: number;\r\n    interval?: string;\r\n    grouping: string;\r\n    graph: string;\r\n    column: string;\r\n    summarizationfunction?: string;\r\n    tags?: any[];\r\n}\r\n\r\ninterface Items {\r\n    [key: string]: Item;\r\n}\r\n\r\nconst DashboardAdd: FC<{ edit?: boolean }> = ({ edit = false }) => {\r\n    const { t } = useTranslation();\r\n    const match = useRouteMatch<{ id: string }>();\r\n    const location = useLocation<DashboardTemplate | null>();\r\n    const classes = useDashboardAddStyles();\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const now = Date.now().toString();\r\n    const [openModal, setOpenModal] = useState(false);\r\n    const [layout, setLayout] = useState<RGL.Layout[]>([\r\n        {i: 'add-btn-layout', x: 3, y: 0, w: 3, h: 2, minW: 2, minH: 1, isResizable: false, isDraggable: false, static: false},\r\n        {i: now, x: 0, y: 0, w: 3, h: 2, minW: 2, minH: 1, static: false},\r\n    ]);\r\n    const reportTemplatesAndKpis = useSelector(state => state.main.multiData);\r\n    const dashboardSave = useSelector(state => state.dashboard.dashboardtemplateSave);\r\n    const dashboardtemplate = useSelector(state => state.dashboard.dashboardtemplate);\r\n\r\n    useEffect(() => {\r\n        if (edit === true && !location.state) {\r\n            const dashboardId = match.params.id;\r\n            dispatch(getDashboardTemplate(getDashboardTemplateSel(dashboardId)));\r\n        } else if (edit === true && location.state) {\r\n            dispatch(setDashboardTemplate({\r\n                ...location.state,\r\n                description: `${location.state.description}-v1`,\r\n                dashboardtemplateid: 0,\r\n            }));\r\n        } else if (edit === true && !location.state && !Number(match.params.id)) {\r\n            history.push(paths.DASHBOARD);\r\n        }\r\n\r\n        dispatch(getMultiCollection([\r\n            getReportTemplateSel(),\r\n            getKpiSel(),\r\n            getTagsChatflow(),\r\n        ]));\r\n\r\n        return () => {\r\n            dispatch(resetMain());\r\n            dispatch(resetMultiMain());\r\n            dispatch(resetSaveDashboardTemplate());\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [edit, location.state, match.params.id, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (reportTemplatesAndKpis.loading) return;\r\n        if (reportTemplatesAndKpis.error) {\r\n            const error = t(reportTemplatesAndKpis.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        }\r\n    }, [reportTemplatesAndKpis, t, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (dashboardSave.loading) return;\r\n        if (dashboardSave.error) {\r\n            const error = t(dashboardSave.code || \"error_unexpected_error\", { module: t(langKeys.dashboard).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        } else if (dashboardSave.success === true) {\r\n            dispatch(showSnackbar({\r\n                message: \"Se guard el dashboard\",\r\n                severity: \"success\",\r\n                show: true,\r\n            }));\r\n            history.push(paths.DASHBOARD);\r\n        }\r\n    }, [dashboardSave, history, t, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (edit === false || dashboardtemplate.loading) return;\r\n        if (dashboardtemplate.error) {\r\n            const error = t(dashboardtemplate.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        } else if (dashboardtemplate.value) {\r\n            setLayout(prev => ([\r\n                {\r\n                    ...prev[0], // 'add-btn-layout'\r\n                    x: (((prev.length - 1) * 3) % 12) + 3,\r\n                    y: Infinity,\r\n                },\r\n                ...(JSON.parse(dashboardtemplate.value!.layoutjson) as RGL.Layout[]),\r\n            ]));\r\n            reset(JSON.parse(dashboardtemplate.value!.detailjson) as Items);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [dashboardtemplate, edit, t, dispatch]);\r\n\r\n\r\n    const {register,unregister,formState: { errors }, getValues, setValue, handleSubmit,reset,} = useForm<Items>({\r\n        defaultValues: {\r\n            \r\n        }\r\n    });\r\n\r\n    const addItemOnClick = () => {\r\n        const newKey = Date.now().toString();\r\n        setLayout(prev => {\r\n            const newlayout = [\r\n                ...prev,\r\n                {\r\n                    i: newKey,\r\n                    x: ((prev.length - 1) * 3) % 12,\r\n                    y: Infinity,\r\n                    w: 3,\r\n                    h: 2,\r\n                    minW: 2,\r\n                    minH: 1,\r\n                    static: false,\r\n                },\r\n            ];\r\n            const addbtn = newlayout[0].i === 'add-btn-layout' && newlayout[0];\r\n            if (addbtn) {\r\n                newlayout[0] = { ...addbtn, x: (((prev.length - 1) * 3) % 12) + 3, y: Infinity };\r\n            }\r\n\r\n            return newlayout;\r\n        });\r\n    };\r\n\r\n    const deleteItemOnClick = (key: string) => {\r\n        setLayout(prev => prev.filter(e => e.i !== key));\r\n    }\r\n\r\n    const onContinue = () => {\r\n        if (layout.length <= 1) {\r\n            dispatch(showSnackbar({\r\n                message: t(langKeys.empty_dashboard_form_error),\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        } else {\r\n            handleSubmit((data) => {\r\n                setOpenModal(true);\r\n            }, e => console.warn('errores', e))();\r\n        }\r\n    }\r\n\r\n    const onSubmit = useCallback((description: string) => {\r\n        if (edit === true && !dashboardtemplate.value) return;\r\n\r\n        const data = getValues();\r\n        const [, ...cleanLayout] = layout; // quitando el boton en el index 0\r\n        dispatch(saveDashboardTemplate(getDashboardTemplateIns({\r\n            id: edit ? dashboardtemplate.value!.dashboardtemplateid : 0,\r\n            description,\r\n            detailjson: JSON.stringify(data),\r\n            layoutjson: JSON.stringify(cleanLayout),\r\n            status: 'ACTIVO',\r\n            type: 'NINGUNO',\r\n            operation: edit && dashboardtemplate.value!.dashboardtemplateid !== 0 ? 'UPDATE' : 'INSERT',\r\n        })));\r\n    }, [edit, dashboardtemplate, layout, getValues, dispatch]);\r\n\r\n    const validMultiMainData = () => {\r\n        return (\r\n            !reportTemplatesAndKpis.loading &&\r\n            reportTemplatesAndKpis.data[0]?.key === \"UFN_REPORTTEMPLATE_SEL\" &&\r\n            reportTemplatesAndKpis.data[1]?.key === \"UFN_KPI_LST\"\r\n        );\r\n    }\r\n\r\n    if (edit === true && (dashboardtemplate.loading || !dashboardtemplate.value)) {\r\n        return <CenterLoading />;\r\n    }\r\n\r\n    return (\r\n        <Box className={classes.root}>\r\n            <TemplateBreadcrumbs\r\n                breadcrumbs={[\r\n                    { id: \"view-1\", name: \"Dashboards\" },\r\n                    {\r\n                        id: \"view-2\",\r\n                        name: t(edit ? langKeys.edit_custom_dashboard : langKeys.create_custom_dashboard),\r\n                    }\r\n                ]}\r\n                handleClick={id => id === \"view-1\" && history.push(paths.DASHBOARD)}\r\n            />\r\n            <div className={classes.header}>\r\n                <TitleDetail title={edit ? dashboardtemplate.value!.description : t(langKeys.newDashboard)} />\r\n                <div style={{ flexGrow: 1 }} />\r\n                <Button\r\n                    variant=\"contained\"\r\n                    type=\"button\"\r\n                    color=\"primary\"\r\n                    startIcon={<ClearIcon color=\"secondary\" />}\r\n                    style={{ backgroundColor: \"#FB5F5F\" }}\r\n                    onClick={() => history.push(paths.DASHBOARD)}\r\n                >\r\n                    <Trans i18nKey={langKeys.back} />\r\n                </Button>\r\n                {/* <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={addItemOnClick}\r\n                >\r\n                    <Trans i18nKey={langKeys.add} />\r\n                </Button> */}\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={onContinue}\r\n                    disabled={dashboardtemplate.loading}\r\n                    style={{ backgroundColor: \"#55BD84\" }}\r\n                    startIcon={<SaveIcon color=\"secondary\" />}\r\n                >\r\n                    <Trans i18nKey={langKeys.save} />\r\n                </Button>\r\n            </div>\r\n            <div style={{ height: '1em' }} />\r\n            {!validMultiMainData() ? <CenterLoading /> : (\r\n                <ReactGridLayout\r\n                    className={classes.layout}\r\n                    layout={layout}\r\n                    onLayoutChange={setLayout}\r\n                    cols={12}\r\n                    rowHeight={140}\r\n                >\r\n                    {layout.map(e => {\r\n                        if (e.i === 'add-btn-layout') {\r\n                            return (\r\n                                <div key={e.i}>\r\n                                    <NewBtn onClick={addItemOnClick} />\r\n                                </div>\r\n                            );\r\n                        }\r\n\r\n                        return (\r\n                            <div key={e.i}>\r\n                                <LayoutItem\r\n                                    edit={edit}\r\n                                    layoutKey={e.i}\r\n                                    templates={reportTemplatesAndKpis.data[0].data as ReportTemplate[]}\r\n                                    kpis={reportTemplatesAndKpis.data[1].data as KpiTemplate[]}\r\n                                    tags={reportTemplatesAndKpis.data[2].data as any[]}\r\n                                    loading={reportTemplatesAndKpis.loading}\r\n                                    register={register}\r\n                                    unregister={unregister}\r\n                                    getValues={getValues}\r\n                                    setValue={setValue}\r\n                                    errors={errors}\r\n                                    onDelete={() => deleteItemOnClick(e.i)}\r\n                                />\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </ReactGridLayout>\r\n            )}\r\n            <SubmitModal\r\n                defaultDescription={edit === false ? '' : dashboardtemplate.value!.description}\r\n                open={openModal}\r\n                loading={dashboardSave.loading}\r\n                onClose={() => setOpenModal(false)}\r\n                onSubmit={onSubmit}\r\n            />\r\n        </Box>\r\n    );\r\n}\r\n\r\ninterface SubmitModalProps {\r\n    open: boolean;\r\n    loading: boolean;\r\n    defaultDescription?: string;\r\n    onSubmit: (description: string) => void;\r\n    onClose: () => void;\r\n}\r\n\r\nconst useSubmitModalStyles = makeStyles(theme => ({\r\n    root: {\r\n        position: 'absolute' as 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        maxWidth: \"80%\",\r\n        maxHeight: \"80%\",\r\n        width: '80%',\r\n        backgroundColor: 'white',\r\n        padding: \"16px\",\r\n        overflowY: 'auto',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '1em',\r\n    },\r\n}));\r\n\r\nconst SubmitModal: FC<SubmitModalProps> = ({ open, loading, defaultDescription = '', onClose, onSubmit }) => {\r\n    const classes = useSubmitModalStyles();\r\n    const { t } = useTranslation();\r\n    const [description, setDescription] = useState(defaultDescription);\r\n\r\n    return (\r\n        <Modal\r\n            open={open}\r\n            onClose={(_, reason) => {\r\n                if (loading) return;\r\n                onClose();\r\n            }}\r\n            aria-labelledby=\"dashboard-submit-modal-title\"\r\n            aria-describedby=\"dashboard-submit-modal-description\"\r\n        >\r\n            <Box className={classes.root}>\r\n                <Typography id=\"dashboard-submit-modal-title\" variant=\"h6\" component=\"h2\">\r\n                    <Trans i18nKey={langKeys.description} />\r\n                </Typography>\r\n                <TextField\r\n                    id=\"dashboard-submit-modal-description\"\r\n                    placeholder={t(langKeys.enterDashboardDescription)}\r\n                    value={description}\r\n                    onChange={e => setDescription(e.target.value)}\r\n                    InputProps={{ readOnly: loading }}\r\n                />\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={loading || description.length === 0}\r\n                    onClick={() => onSubmit(description)}\r\n                >\r\n                    <Trans i18nKey={langKeys.save} />\r\n                </Button>\r\n            </Box>\r\n        </Modal>\r\n    );\r\n}\r\n\r\ninterface NewBtnProps {\r\n    onClick: () => void;\r\n}\r\n\r\nconst useNewBtnStyles = makeStyles(the => ({\r\n    root: {\r\n        width: 'inherit',\r\n        height: 'inherit',\r\n        padding: '1em',\r\n        display: 'flex',\r\n        overflow: 'hidden',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n\r\n        minWidth: 'unset',\r\n        minHeight: 'unset',\r\n    },\r\n    addIcon: {\r\n        width: 42,\r\n        height: 42,\r\n    },\r\n}));\r\n\r\nconst NewBtn: FC<NewBtnProps> = ({ onClick }) => {\r\n    const classes = useNewBtnStyles();\r\n\r\n    return (\r\n        <Button className={classes.root} onClick={onClick}>\r\n            <AddIcon color=\"primary\" className={classes.addIcon} />\r\n        </Button>\r\n    );\r\n}\r\n\r\ninterface LayoutItemProps {\r\n    edit: boolean;\r\n    layoutKey: string;\r\n    templates: ReportTemplate[];\r\n    kpis: KpiTemplate[];\r\n    tags: any[];\r\n    loading?: boolean;\r\n    errors: FieldErrors<Items>;\r\n    getValues: UseFormGetValues<Items>;\r\n    setValue: UseFormSetValue<Items>;\r\n    register: UseFormRegister<Items>;\r\n    unregister: UseFormUnregister<Items>;\r\n    onDelete?: () => void;\r\n}\r\n\r\nconst useLayoutItemStyles = makeStyles(theme => ({\r\n    root: {\r\n        backgroundColor: 'white',\r\n        width: 'inherit',\r\n        height: 'inherit',\r\n        padding: '1em',\r\n        display: 'block',\r\n        overflow: 'auto',\r\n        position: 'relative',\r\n    },\r\n    deleteBtn: {\r\n        position: 'absolute',\r\n        top: 1,\r\n        right: 1,\r\n    },\r\n    funnelLvlTitle: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\"\r\n    },\r\n    field: {\r\n        marginBottom: '0.65rem',\r\n    },\r\n}));\r\n\r\nexport const LayoutItem: FC<LayoutItemProps> = ({\r\n    layoutKey: key,\r\n    edit,\r\n    loading = false,\r\n    templates = [],\r\n    kpis = [],\r\n    tags =[],\r\n    errors,\r\n    getValues,\r\n    setValue,\r\n    register,\r\n    unregister,\r\n    onDelete,\r\n}) => {\r\n    const classes = useLayoutItemStyles();\r\n    const { t } = useTranslation();\r\n    const [selectedIndex, setSelectedIndex] = useState(-1);\r\n    const [contentType, setContentType] = useState('');\r\n    const [tagsdata, settagsdata] = useState<any>(getValues(`${key}.tags`)||[]);\r\n    // const [graphicType, setgraphicType] = useState(getValues(`${key}.graph`));\r\n    const [columns, setColumns] = useState<ColumnTemplate[]>([]);\r\n\r\n    useEffect(() => {\r\n        if (edit === false) return;\r\n\r\n        const reporttemplateid = getValues(`${key}.reporttemplateid`);\r\n        if (reporttemplateid !== undefined || reporttemplateid !== null) {\r\n            setSelectedIndex(templates.findIndex(e => e.reporttemplateid === reporttemplateid));\r\n        }\r\n\r\n        const defaultContentType = getValues(`${key}.contentType`);\r\n        if (defaultContentType !== undefined || defaultContentType !== null) {\r\n            setContentType(defaultContentType);\r\n        }\r\n\r\n        const defaultGraphicType = getValues(`${key}.contentType`);\r\n        if (defaultGraphicType !== undefined || defaultGraphicType !== null) {\r\n            // setgraphicType(defaultGraphicType);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [edit, getValues]);\r\n\r\n    useEffect(() => {\r\n        register(`${key}.description`, { validate: mandatoryStrField, value: getValues(`${key}.description`) || '' });\r\n        register(`${key}.contentType`, { validate: mandatoryContentType, value: getValues(`${key}.contentType`) || '' });\r\n\r\n        return () => {\r\n            unregister(key);\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [register, unregister, t, key]);\r\n\r\n    useEffect(() => {\r\n        if (contentType === \"report\") {\r\n            unregister(`${key}.kpiid`);\r\n\r\n            register(`${key}.reporttemplateid`, { validate: mandatoryReportTemplate, value: getValues(`${key}.reporttemplateid`) || 0 });\r\n            register(`${key}.grouping`, { validate: mandatoryStrField, value: getValues(`${key}.grouping`) || '' });\r\n            register(`${key}.graph`, { validate: mandatoryStrField, value: getValues(`${key}.graph`) || '' });\r\n            register(`${key}.column`, { validate: mandatoryColumn, value: getValues(`${key}.column`) || '' });\r\n            register(`${key}.summarizationfunction`);\r\n            register(`${key}.interval`, {value: getValues(`${key}.interval`)});\r\n        } else if (contentType === \"kpi\") {\r\n            unregister(`${key}.reporttemplateid`);\r\n            unregister(`${key}.grouping`);\r\n            unregister(`${key}.graph`);\r\n            unregister(`${key}.column`);\r\n\r\n            register(`${key}.kpiid`, { validate: mandatoryNumField, value: getValues(`${key}.kpiid`) || 0 });\r\n        }\r\n        else if (contentType === \"funnel\") {\r\n            unregister(`${key}.kpiid`);\r\n            unregister(`${key}.grouping`);\r\n            unregister(`${key}.graph`);\r\n            \r\n            register(`${key}.reporttemplateid`, { validate: mandatoryReportTemplate, value: getValues(`${key}.reporttemplateid`) || 0 });\r\n            register(`${key}.column`, { validate: mandatoryColumn, value: getValues(`${key}.column`) || '' });\r\n            register(`${key}.tags`);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [contentType, columns, templates]);\r\n\r\n    useEffect(() => {\r\n        if (selectedIndex === -1) {\r\n            setColumns([]);\r\n            return;\r\n        }\r\n        let columnas= JSON.parse(templates[selectedIndex].columnjson) as ColumnTemplate[]\r\n        let summary = JSON.parse(templates[selectedIndex].summaryjson).map((x:any)=>{return {\r\n            alias: `${t(langKeys.summarization)} - ${columnas?.find(y => y.columnname === x.columnname)?.alias} (${t(\"function_\" + x.function)})`,\r\n            columnname: `${x.columnname}${x.function}`,\r\n            description: x.columnname,\r\n            descriptionT: x.columnname,\r\n            disabled: false,\r\n            join_alias: null,\r\n            join_on: null,\r\n            join_table: null,\r\n            tablename: \"\",\r\n            type: x.type,\r\n            function: x.function\r\n        }})\r\n        setColumns(summary.concat(columnas));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [selectedIndex, templates]);\r\n\r\n    const mandatoryReportTemplate = (value: number) => {\r\n        if (value === 0 || !templates.some(x => x.reporttemplateid === value)) {\r\n            return t(langKeys.field_required)\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    const mandatoryColumn = (value: string) => {\r\n        if (\r\n            !value ||\r\n            value.length === 0 ||\r\n            !columns.some(x => x.columnname === value)\r\n        ) {\r\n            return t(langKeys.field_required);\r\n        }\r\n\r\n        return  undefined;\r\n    }\r\n\r\n    const mandatoryContentType = (value: string) => {\r\n        if (!value || value.length === 0) {\r\n            return t(langKeys.field_required);\r\n        } else if (value === \"report\" || value === \"kpi\" || value === \"funnel\") {\r\n            return undefined;\r\n        }\r\n\r\n        return t(langKeys.invalidEntry);\r\n    }\r\n\r\n    const mandatoryStrField = (value: string) => {\r\n        return !value || value.length === 0 ? t(langKeys.field_required) : undefined;\r\n    }\r\n\r\n    const mandatoryNumField = (value: number) => {\r\n        return value === 0 ? t(langKeys.field_required) : undefined;\r\n    }\r\n\r\n    function deleteFunnel(index:number){\r\n        let newtagsdata=tagsdata.filter((x:any,i:number)=>i!==index)\r\n        settagsdata(newtagsdata)\r\n        setValue(`${key}.tags`,newtagsdata)\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <IconButton className={classes.deleteBtn} onClick={onDelete} size=\"small\">\r\n                <CloseIcon style={{ width: 18, height: 18 }} />\r\n            </IconButton>\r\n            <FieldEdit\r\n                className={classes.field}\r\n                valueDefault={getValues(`${key}.description`)}\r\n                label={t(langKeys.title)}\r\n                disabled={loading}\r\n                error={errors[key]?.description?.message}\r\n                onChange={(v: string) => setValue(`${key}.description`, v)}\r\n            />\r\n            <FieldSelect\r\n                className={classes.field}\r\n                label={t(langKeys.contentType)}\r\n                data={contentTypes}\r\n                optionDesc=\"key\"\r\n                optionValue=\"key\"\r\n                valueDefault={getValues(`${key}.contentType`)}\r\n                onChange={(v: typeof contentTypes[number]) => {\r\n                    const value = v?.key || '';\r\n                    setValue(`${key}.contentType`, value);\r\n                    setContentType(value);\r\n                }}\r\n                error={errors[key]?.contentType?.message}\r\n                disabled={loading}\r\n                uset\r\n                prefixTranslation=\"dashboard_contentType_\"\r\n            />\r\n            {contentType === \"kpi\" && (\r\n                <FieldSelect\r\n                    className={classes.field}\r\n                    label=\"KPI\"\r\n                    data={kpis}\r\n                    optionDesc=\"kpiname\"\r\n                    optionValue=\"id\"\r\n                    valueDefault={getValues(`${key}.kpiid`)}\r\n                    onChange={(v: KpiTemplate) => setValue(`${key}.kpiid`, v?.id || 0)}\r\n                    error={errors[key]?.kpiid?.message}\r\n                    disabled={loading}\r\n                />\r\n            )}\r\n            {contentType === \"report\" && (\r\n                <>\r\n                    <FieldSelect\r\n                        className={classes.field}\r\n                        label={t(langKeys.report)}\r\n                        data={templates}\r\n                        optionDesc=\"description\"\r\n                        optionValue=\"reporttemplateid\"\r\n                        valueDefault={getValues(`${key}.reporttemplateid`)}\r\n                        onChange={(v: ReportTemplate) => {\r\n                            const reporttemplateid = v?.reporttemplateid || 0;\r\n                            setValue(`${key}.reporttemplateid`, reporttemplateid);\r\n                            if (reporttemplateid === 0) {\r\n                                setValue(`${key}.column`, '');\r\n                            }\r\n                            setSelectedIndex(!v ? -1 : templates.findIndex(e => e === v));\r\n                        }}\r\n                        error={errors[key]?.reporttemplateid?.message}\r\n                        disabled={loading}\r\n                    />\r\n                    <FieldSelect\r\n                        className={classes.field}\r\n                        label={t(langKeys.groupment)}\r\n                        data={groupingType}\r\n                        optionDesc=\"key\"\r\n                        optionValue=\"key\"\r\n                        valueDefault={getValues(`${key}.grouping`)}\r\n                        onChange={(v: typeof groupingType[number]) => {\r\n                            setValue(`${key}.grouping`, v?.key || '')\r\n                            setValue(`${key}.interval`, \"\")\r\n                        }}\r\n                        error={errors[key]?.grouping?.message}\r\n                        disabled={loading}\r\n                        uset\r\n                        prefixTranslation=\"dashboard_groupment_\"\r\n                    />\r\n                    <FieldSelect\r\n                        className={classes.field}\r\n                        label={t(langKeys.chartType)}\r\n                        data={graphTypes}\r\n                        optionDesc=\"key\"\r\n                        optionValue=\"key\"\r\n                        valueDefault={getValues(`${key}.graph`)}\r\n                        onChange={(v: typeof graphTypes[number]) => {\r\n                            setValue(`${key}.graph`, v?.key || '')\r\n                            setValue(`${key}.interval`, \"\")\r\n                            // setgraphicType(v?.key || '')\r\n                        }}\r\n                        error={errors[key]?.graph?.message}\r\n                        disabled={loading}\r\n                        uset\r\n                        prefixTranslation=\"dashboard_chartType_\"\r\n                    />\r\n                    {(getValues(`${key}.graph`) === \"bar\" || getValues(`${key}.graph`) ===\"line\") && <FieldSelect\r\n                        className={classes.field}\r\n                        label={t(langKeys.displayinterval)}\r\n                        data={[\r\n                            {key: \"day\", desc:t(langKeys.day)},\r\n                            {key: \"week\", desc:t(langKeys.week)},\r\n                            {key: \"month\", desc:t(langKeys.month)},\r\n                        ]}\r\n                        optionDesc=\"desc\"\r\n                        optionValue=\"key\"\r\n                        valueDefault={getValues(`${key}.interval`)}\r\n                        onChange={(v)=>setValue(`${key}.interval`, v?.key || \"\")}\r\n                        disabled={loading}\r\n                    />}\r\n                    <FieldSelect\r\n                        className={classes.field}\r\n                        label={t(langKeys.column)}\r\n                        data={columns}\r\n                        optionDesc=\"alias\"\r\n                        optionValue=\"columnname\"\r\n                        valueDefault={`${getValues(`${key}.column`)}${getValues(`${key}.summarizationfunction`)|| ''}`}\r\n                        onChange={(v: ColumnTemplate) => {\r\n                            if(v?.function){\r\n                                setValue(`${key}.column`, v?.columnname?.slice(0,-(v?.function?.length||0)));\r\n                            }\r\n                            else{\r\n                                setValue(`${key}.column`, v?.columnname||'');\r\n                            }\r\n                            setValue(`${key}.summarizationfunction`, v?.function || '');\r\n                        }}\r\n                        error={errors[key]?.column?.message}\r\n                        disabled={loading || columns.length === 0}\r\n                    />\r\n                </>\r\n            )}\r\n            {contentType === \"funnel\" && (\r\n                <>\r\n                    <FieldSelect\r\n                        className={classes.field}\r\n                        label={t(langKeys.report)}\r\n                        data={templates}\r\n                        optionDesc=\"description\"\r\n                        optionValue=\"reporttemplateid\"\r\n                        valueDefault={getValues(`${key}.reporttemplateid`)}\r\n                        onChange={(v: ReportTemplate) => {\r\n                            const reporttemplateid = v?.reporttemplateid || 0;\r\n                            setValue(`${key}.reporttemplateid`, reporttemplateid);\r\n                            if (reporttemplateid === 0) {\r\n                                setValue(`${key}.column`, '');\r\n                            }\r\n                            setSelectedIndex(!v ? -1 : templates.findIndex(e => e === v));\r\n                        }}\r\n                        error={errors[key]?.reporttemplateid?.message}\r\n                        disabled={loading}\r\n                    />\r\n                    <FieldSelect\r\n                        className={classes.field}\r\n                        label={t(langKeys.column)}\r\n                        data={columns.filter(e=>e.columnname.includes(\"tag\"))}\r\n                        optionDesc=\"alias\"\r\n                        optionValue=\"columnname\"\r\n                        valueDefault={`${getValues(`${key}.column`)}${getValues(`${key}.summarizationfunction`)|| ''}`}\r\n                        onChange={(v: ColumnTemplate) => {\r\n                            if(v?.function){\r\n                                setValue(`${key}.column`, v?.columnname?.slice(0,-(v?.function?.length||0)));\r\n                            }\r\n                            else{\r\n                                setValue(`${key}.column`, v?.columnname||'');\r\n                            }\r\n                            setValue(`${key}.summarizationfunction`, v?.function || '');\r\n                        }}\r\n                        error={errors[key]?.column?.message}\r\n                        disabled={loading || columns.length === 0}\r\n                    />\r\n                    \r\n                    <>\r\n                        {tagsdata.map((tag:any, i:number) => {\r\n                            return <div key={`tagdatalevel${i+1}`}>\r\n                                <div className={classes.funnelLvlTitle}>\r\n                                    <p style={{fontSize: 14, fontWeight: 500}}>{t(langKeys.level)} {i+1}</p>\r\n                                    <IconButton onClick={()=>deleteFunnel(i)} size=\"small\" style={{ width: 18, height: 18, margin: 14, marginRight: 0 }} >\r\n                                        <CloseIcon style={{ width: 18, height: 18 }} />\r\n                                    </IconButton>\r\n                                </div>\r\n                                <div    style={{paddingLeft: 40}}>\r\n                                    <FieldSelect\r\n                                        fregister={{\r\n                                            ...register(`${key}.tags[${i}].value`, {\r\n                                                validate: (value: any) => (value && value.length) || t(langKeys.field_required)\r\n                                            })\r\n                                        }}\r\n                                        className={classes.field}\r\n                                        label={t(langKeys.value)}\r\n                                        data={tags}\r\n                                        optionDesc=\"tag\"\r\n                                        optionValue=\"tag\"\r\n                                        valueDefault={getValues(`${key}.tags[${i}].value`)}\r\n                                        onChange={(v: any) => {\r\n                                            let initTags=getValues(`${key}.tags`)||[];\r\n                                            initTags[i].value = v?.tag || \"\";\r\n                                            let newtagdata=tagsdata;\r\n                                            newtagdata[i].value = v?.tag || \"\";\r\n                                            settagsdata(newtagdata)\r\n                                            setValue(`${key}.tags`,initTags)\r\n                                        }}\r\n                                        error={errors[key]?.tags?.[i]?.value?.message}\r\n                                    />\r\n                                    <FieldEdit\r\n                                        fregister={{\r\n                                            ...register(`${key}.tags[${i}].title`, {\r\n                                                validate: (value: any) => (value && value.length) || t(langKeys.field_required)\r\n                                            })\r\n                                        }}\r\n                                        label={`${t(langKeys.title)} ${t(langKeys.level)} ${i+1}`}\r\n                                        valueDefault={getValues(`${key}.tags[${i}].title`)}\r\n                                        className={classes.field}\r\n                                        onChange={(value: any) => {\r\n                                            let initTags=getValues(`${key}.tags`)||[];\r\n                                            initTags[i].title = value || \"\";\r\n                                            let newtagdata=tagsdata;\r\n                                            newtagdata[i].title = value || \"\";\r\n                                            settagsdata(newtagdata)\r\n                                            setValue(`${key}.tags`,initTags)\r\n                                        }}\r\n                                        error={errors[key]?.tags?.[i]?.title?.message}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        })}\r\n                    </>\r\n                    <Button style={{float:\"right\"}} onClick={()=>{\r\n                        let initTags=getValues(`${key}.tags`)||[];\r\n                        settagsdata([...initTags,{value:\"\",title:\"\"}])\r\n                        setValue(`${key}.tags`,[...initTags,{value:\"\",title:\"\"}])\r\n                    }}><AddIcon/> {t(langKeys.add)} {t(langKeys.level)}</Button> \r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst CenterLoading: FC = () => {\r\n    return (\r\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', width: '100%' }}>\r\n            <CircularProgress />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DashboardAdd;\r\n","/**\n * @fileOverview Line Chart\n */\nimport { generateCategoricalChart } from './generateCategoricalChart';\nimport { Line } from '../cartesian/Line';\nimport { XAxis } from '../cartesian/XAxis';\nimport { YAxis } from '../cartesian/YAxis';\nimport { formatAxisMap } from '../util/CartesianUtils';\nexport var LineChart = generateCategoricalChart({\n  chartName: 'LineChart',\n  GraphicalChild: Line,\n  axisComponents: [{\n    axisType: 'xAxis',\n    AxisComp: XAxis\n  }, {\n    axisType: 'yAxis',\n    AxisComp: YAxis\n  }],\n  formatAxisMap: formatAxisMap\n});","var arrayMap = require('./_arrayMap'),\n    baseClone = require('./_baseClone'),\n    baseUnset = require('./_baseUnset'),\n    castPath = require('./_castPath'),\n    copyObject = require('./_copyObject'),\n    customOmitClone = require('./_customOmitClone'),\n    flatRest = require('./_flatRest'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable property paths of `object` that are not omitted.\n *\n * **Note:** This method is considerably slower than `_.pick`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = flatRest(function(object, paths) {\n  var result = {};\n  if (object == null) {\n    return result;\n  }\n  var isDeep = false;\n  paths = arrayMap(paths, function(path) {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n  }\n  var length = paths.length;\n  while (length--) {\n    baseUnset(result, paths[length]);\n  }\n  return result;\n});\n\nmodule.exports = omit;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var isPlainObject = require('./isPlainObject');\n\n/**\n * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n * objects.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} key The key of the property to inspect.\n * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n */\nfunction customOmitClone(value) {\n  return isPlainObject(value) ? undefined : value;\n}\n\nmodule.exports = customOmitClone;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * @fileOverview Rectangle\n */\nimport React, { PureComponent } from 'react';\nimport classNames from 'classnames';\nimport Animate from 'react-smooth';\nimport { filterProps } from '../util/types';\n\nvar getTrapezoidPath = function getTrapezoidPath(x, y, upperWidth, lowerWidth, height) {\n  var widthGap = upperWidth - lowerWidth;\n  var path;\n  path = \"M \".concat(x, \",\").concat(y);\n  path += \"L \".concat(x + upperWidth, \",\").concat(y);\n  path += \"L \".concat(x + upperWidth - widthGap / 2, \",\").concat(y + height);\n  path += \"L \".concat(x + upperWidth - widthGap / 2 - lowerWidth, \",\").concat(y + height);\n  path += \"L \".concat(x, \",\").concat(y, \" Z\");\n  return path;\n};\n\nexport var Trapezoid = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Trapezoid, _PureComponent);\n\n  var _super = _createSuper(Trapezoid);\n\n  function Trapezoid() {\n    var _this;\n\n    _classCallCheck(this, Trapezoid);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      totalLength: -1\n    };\n    _this.node = void 0;\n    return _this;\n  }\n\n  _createClass(Trapezoid, [{\n    key: \"componentDidMount\",\n    value:\n    /* eslint-disable  react/no-did-mount-set-state */\n    function componentDidMount() {\n      if (this.node && this.node.getTotalLength) {\n        try {\n          var totalLength = this.node.getTotalLength();\n\n          if (totalLength) {\n            this.setState({\n              totalLength: totalLength\n            });\n          }\n        } catch (err) {// calculate total length error\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          x = _this$props.x,\n          y = _this$props.y,\n          upperWidth = _this$props.upperWidth,\n          lowerWidth = _this$props.lowerWidth,\n          height = _this$props.height,\n          className = _this$props.className;\n      var totalLength = this.state.totalLength;\n      var _this$props2 = this.props,\n          animationEasing = _this$props2.animationEasing,\n          animationDuration = _this$props2.animationDuration,\n          animationBegin = _this$props2.animationBegin,\n          isUpdateAnimationActive = _this$props2.isUpdateAnimationActive;\n\n      if (x !== +x || y !== +y || upperWidth !== +upperWidth || lowerWidth !== +lowerWidth || height !== +height || upperWidth === 0 && lowerWidth === 0 || height === 0) {\n        return null;\n      }\n\n      var layerClass = classNames('recharts-trapezoid', className);\n\n      if (!isUpdateAnimationActive) {\n        return /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", _extends({}, filterProps(this.props, true), {\n          className: layerClass,\n          d: getTrapezoidPath(x, y, upperWidth, lowerWidth, height)\n        })));\n      }\n\n      return /*#__PURE__*/React.createElement(Animate, {\n        canBegin: totalLength > 0,\n        from: {\n          upperWidth: 0,\n          lowerWidth: 0,\n          height: height,\n          x: x,\n          y: y\n        },\n        to: {\n          upperWidth: upperWidth,\n          lowerWidth: lowerWidth,\n          height: height,\n          x: x,\n          y: y\n        },\n        duration: animationDuration,\n        animationEasing: animationEasing,\n        isActive: isUpdateAnimationActive\n      }, function (_ref) {\n        var currUpperWidth = _ref.upperWidth,\n            currLowerWidth = _ref.lowerWidth,\n            currHeight = _ref.height,\n            currX = _ref.x,\n            currY = _ref.y;\n        return /*#__PURE__*/React.createElement(Animate, {\n          canBegin: totalLength > 0,\n          from: \"0px \".concat(totalLength === -1 ? 1 : totalLength, \"px\"),\n          to: \"\".concat(totalLength, \"px 0px\"),\n          attributeName: \"strokeDasharray\",\n          begin: animationBegin,\n          duration: animationDuration,\n          easing: animationEasing\n        }, /*#__PURE__*/React.createElement(\"path\", _extends({}, filterProps(_this2.props, true), {\n          className: layerClass,\n          d: getTrapezoidPath(currX, currY, currUpperWidth, currLowerWidth, currHeight),\n          ref: function ref(node) {\n            _this2.node = node;\n          }\n        })));\n      });\n    }\n  }]);\n\n  return Trapezoid;\n}(PureComponent);\nTrapezoid.defaultProps = {\n  x: 0,\n  y: 0,\n  upperWidth: 0,\n  lowerWidth: 0,\n  height: 0,\n  isUpdateAnimationActive: false,\n  animationBegin: 0,\n  animationDuration: 1500,\n  animationEasing: 'ease'\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport _isEqual from \"lodash/isEqual\";\nimport _isPlainObject from \"lodash/isPlainObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _omit from \"lodash/omit\";\nimport _isString from \"lodash/isString\";\nimport _isNumber from \"lodash/isNumber\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * @fileOverview Render sectors of a funnel\n */\nimport React, { PureComponent } from 'react';\nimport Animate from 'react-smooth';\nimport classNames from 'classnames';\nimport { Layer } from '../container/Layer';\nimport { Trapezoid } from '../shape/Trapezoid';\nimport { LabelList } from '../component/LabelList';\nimport { Cell } from '../component/Cell';\nimport { findAllByType } from '../util/ReactUtils';\nimport { Global } from '../util/Global';\nimport { interpolateNumber } from '../util/DataUtils';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { filterProps, adaptEventsOfChild } from '../util/types';\nexport var Funnel = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Funnel, _PureComponent);\n\n  var _super = _createSuper(Funnel);\n\n  function Funnel() {\n    var _this;\n\n    _classCallCheck(this, Funnel);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      isAnimationFinished: false\n    };\n\n    _this.handleAnimationEnd = function () {\n      var onAnimationEnd = _this.props.onAnimationEnd;\n\n      _this.setState({\n        isAnimationFinished: true\n      });\n\n      if (_isFunction(onAnimationEnd)) {\n        onAnimationEnd();\n      }\n    };\n\n    _this.handleAnimationStart = function () {\n      var onAnimationStart = _this.props.onAnimationStart;\n\n      _this.setState({\n        isAnimationFinished: false\n      });\n\n      if (_isFunction(onAnimationStart)) {\n        onAnimationStart();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Funnel, [{\n    key: \"isActiveIndex\",\n    value: function isActiveIndex(i) {\n      var activeIndex = this.props.activeIndex;\n\n      if (Array.isArray(activeIndex)) {\n        return activeIndex.indexOf(i) !== -1;\n      }\n\n      return i === activeIndex;\n    }\n  }, {\n    key: \"renderTrapezoidsStatically\",\n    value: function renderTrapezoidsStatically(trapezoids) {\n      var _this2 = this;\n\n      var activeShape = this.props.activeShape;\n      return trapezoids.map(function (entry, i) {\n        var trapezoidOptions = _this2.isActiveIndex(i) ? activeShape : null;\n\n        var trapezoidProps = _objectSpread(_objectSpread({}, entry), {}, {\n          stroke: entry.stroke\n        });\n\n        return /*#__PURE__*/React.createElement(Layer, _extends({\n          className: \"recharts-funnel-trapezoid\"\n        }, adaptEventsOfChild(_this2.props, entry, i), {\n          key: \"trapezoid-\".concat(i) // eslint-disable-line react/no-array-index-key\n\n        }), Funnel.renderTrapezoidItem(trapezoidOptions, trapezoidProps));\n      });\n    }\n  }, {\n    key: \"renderTrapezoidsWithAnimation\",\n    value: function renderTrapezoidsWithAnimation() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          trapezoids = _this$props.trapezoids,\n          isAnimationActive = _this$props.isAnimationActive,\n          animationBegin = _this$props.animationBegin,\n          animationDuration = _this$props.animationDuration,\n          animationEasing = _this$props.animationEasing,\n          animationId = _this$props.animationId;\n      var prevTrapezoids = this.state.prevTrapezoids;\n      return /*#__PURE__*/React.createElement(Animate, {\n        begin: animationBegin,\n        duration: animationDuration,\n        isActive: isAnimationActive,\n        easing: animationEasing,\n        from: {\n          t: 0\n        },\n        to: {\n          t: 1\n        },\n        key: \"funnel-\".concat(animationId),\n        onAnimationStart: this.handleAnimationStart,\n        onAnimationEnd: this.handleAnimationEnd\n      }, function (_ref) {\n        var t = _ref.t;\n        var stepData = trapezoids.map(function (entry, index) {\n          var prev = prevTrapezoids && prevTrapezoids[index];\n\n          if (prev) {\n            var _interpolatorX = interpolateNumber(prev.x, entry.x);\n\n            var _interpolatorY = interpolateNumber(prev.y, entry.y);\n\n            var _interpolatorUpperWidth = interpolateNumber(prev.upperWidth, entry.upperWidth);\n\n            var _interpolatorLowerWidth = interpolateNumber(prev.lowerWidth, entry.lowerWidth);\n\n            var _interpolatorHeight = interpolateNumber(prev.height, entry.height);\n\n            return _objectSpread(_objectSpread({}, entry), {}, {\n              x: _interpolatorX(t),\n              y: _interpolatorY(t),\n              upperWidth: _interpolatorUpperWidth(t),\n              lowerWidth: _interpolatorLowerWidth(t),\n              height: _interpolatorHeight(t)\n            });\n          }\n\n          var interpolatorX = interpolateNumber(entry.x + entry.upperWidth / 2, entry.x);\n          var interpolatorY = interpolateNumber(entry.y + entry.height / 2, entry.y);\n          var interpolatorUpperWidth = interpolateNumber(0, entry.upperWidth);\n          var interpolatorLowerWidth = interpolateNumber(0, entry.lowerWidth);\n          var interpolatorHeight = interpolateNumber(0, entry.height);\n          return _objectSpread(_objectSpread({}, entry), {}, {\n            x: interpolatorX(t),\n            y: interpolatorY(t),\n            upperWidth: interpolatorUpperWidth(t),\n            lowerWidth: interpolatorLowerWidth(t),\n            height: interpolatorHeight(t)\n          });\n        });\n        return /*#__PURE__*/React.createElement(Layer, null, _this3.renderTrapezoidsStatically(stepData));\n      });\n    }\n  }, {\n    key: \"renderTrapezoids\",\n    value: function renderTrapezoids() {\n      var _this$props2 = this.props,\n          trapezoids = _this$props2.trapezoids,\n          isAnimationActive = _this$props2.isAnimationActive;\n      var prevTrapezoids = this.state.prevTrapezoids;\n\n      if (isAnimationActive && trapezoids && trapezoids.length && (!prevTrapezoids || !_isEqual(prevTrapezoids, trapezoids))) {\n        return this.renderTrapezoidsWithAnimation();\n      }\n\n      return this.renderTrapezoidsStatically(trapezoids);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          hide = _this$props3.hide,\n          trapezoids = _this$props3.trapezoids,\n          className = _this$props3.className,\n          isAnimationActive = _this$props3.isAnimationActive;\n      var isAnimationFinished = this.state.isAnimationFinished;\n\n      if (hide || !trapezoids || !trapezoids.length) {\n        return null;\n      }\n\n      var layerClass = classNames('recharts-trapezoids', className);\n      return /*#__PURE__*/React.createElement(Layer, {\n        className: layerClass\n      }, this.renderTrapezoids(), (!isAnimationActive || isAnimationFinished) && LabelList.renderCallByParent(this.props, trapezoids));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.animationId !== prevState.prevAnimationId) {\n        return {\n          prevAnimationId: nextProps.animationId,\n          curTrapezoids: nextProps.trapezoids,\n          prevTrapezoids: prevState.curTrapezoids\n        };\n      }\n\n      if (nextProps.trapezoids !== prevState.curTrapezoids) {\n        return {\n          curTrapezoids: nextProps.trapezoids\n        };\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderTrapezoidItem\",\n    value: function renderTrapezoidItem(option, props) {\n      if ( /*#__PURE__*/React.isValidElement(option)) {\n        return /*#__PURE__*/React.cloneElement(option, props);\n      }\n\n      if (_isFunction(option)) {\n        return option(props);\n      }\n\n      if (_isPlainObject(option)) {\n        return /*#__PURE__*/React.createElement(Trapezoid, _extends({}, props, option));\n      }\n\n      return /*#__PURE__*/React.createElement(Trapezoid, props);\n    }\n  }]);\n\n  return Funnel;\n}(PureComponent);\nFunnel.displayName = 'Funnel';\nFunnel.defaultProps = {\n  stroke: '#fff',\n  fill: '#808080',\n  legendType: 'rect',\n  labelLine: true,\n  hide: false,\n  isAnimationActive: !Global.isSsr,\n  animationBegin: 400,\n  animationDuration: 1500,\n  animationEasing: 'ease',\n  nameKey: 'name',\n  lastShapeType: 'triangle'\n};\n\nFunnel.getRealFunnelData = function (item) {\n  var _item$props = item.props,\n      data = _item$props.data,\n      children = _item$props.children;\n  var presentationProps = filterProps(item.props);\n  var cells = findAllByType(children, Cell.displayName);\n\n  if (data && data.length) {\n    return data.map(function (entry, index) {\n      return _objectSpread(_objectSpread(_objectSpread({\n        payload: entry\n      }, presentationProps), entry), cells && cells[index] && cells[index].props);\n    });\n  }\n\n  if (cells && cells.length) {\n    return cells.map(function (cell) {\n      return _objectSpread(_objectSpread({}, presentationProps), cell.props);\n    });\n  }\n\n  return [];\n};\n\nFunnel.getRealWidthHeight = function (item, offset) {\n  var customWidth = item.props.width;\n  var width = offset.width,\n      height = offset.height,\n      left = offset.left,\n      right = offset.right,\n      top = offset.top,\n      bottom = offset.bottom;\n  var realHeight = height;\n  var realWidth = width;\n\n  if (_isNumber(customWidth)) {\n    realWidth = customWidth;\n  } else if (_isString(customWidth)) {\n    realWidth = realWidth * parseFloat(customWidth) / 100;\n  }\n\n  return {\n    realWidth: realWidth - left - right - 50,\n    realHeight: realHeight - bottom - top,\n    offsetX: (width - realWidth) / 2,\n    offsetY: (height - realHeight) / 2\n  };\n};\n\nFunnel.getComposedData = function (_ref2) {\n  var item = _ref2.item,\n      offset = _ref2.offset;\n  var funnelData = Funnel.getRealFunnelData(item);\n  var _item$props2 = item.props,\n      dataKey = _item$props2.dataKey,\n      nameKey = _item$props2.nameKey,\n      tooltipType = _item$props2.tooltipType,\n      lastShapeType = _item$props2.lastShapeType,\n      reversed = _item$props2.reversed;\n  var left = offset.left,\n      top = offset.top;\n\n  var _Funnel$getRealWidthH = Funnel.getRealWidthHeight(item, offset),\n      realHeight = _Funnel$getRealWidthH.realHeight,\n      realWidth = _Funnel$getRealWidthH.realWidth,\n      offsetX = _Funnel$getRealWidthH.offsetX,\n      offsetY = _Funnel$getRealWidthH.offsetY;\n\n  var maxValue = Math.max.apply(null, funnelData.map(function (entry) {\n    return getValueByDataKey(entry, dataKey, 0);\n  }));\n  var len = funnelData.length;\n  var rowHeight = realHeight / len;\n  var parentViewBox = {\n    x: offset.left,\n    y: offset.top,\n    width: offset.width,\n    height: offset.height\n  };\n  var trapezoids = funnelData.map(function (entry, i) {\n    var rawVal = getValueByDataKey(entry, dataKey, 0);\n    var name = getValueByDataKey(entry, nameKey, i);\n    var val = rawVal;\n    var nextVal;\n\n    if (i !== len - 1) {\n      nextVal = getValueByDataKey(funnelData[i + 1], dataKey, 0);\n\n      if (nextVal instanceof Array) {\n        var _nextVal = nextVal;\n\n        var _nextVal2 = _slicedToArray(_nextVal, 1);\n\n        nextVal = _nextVal2[0];\n      }\n    } else if (rawVal instanceof Array && rawVal.length === 2) {\n      var _rawVal = _slicedToArray(rawVal, 2);\n\n      val = _rawVal[0];\n      nextVal = _rawVal[1];\n    } else if (lastShapeType === 'rectangle') {\n      nextVal = val;\n    } else {\n      nextVal = 0;\n    }\n\n    var x = (maxValue - val) * realWidth / (2 * maxValue) + top + 25 + offsetX;\n    var y = rowHeight * i + left + offsetY;\n    var upperWidth = val / maxValue * realWidth;\n    var lowerWidth = nextVal / maxValue * realWidth;\n    var tooltipPayload = [{\n      name: name,\n      value: val,\n      payload: entry,\n      dataKey: dataKey,\n      type: tooltipType\n    }];\n    var tooltipPosition = {\n      x: x + upperWidth / 2,\n      y: y + rowHeight / 2\n    };\n    return _objectSpread(_objectSpread({\n      x: x,\n      y: y,\n      width: Math.max(upperWidth, lowerWidth),\n      upperWidth: upperWidth,\n      lowerWidth: lowerWidth,\n      height: rowHeight,\n      name: name,\n      val: val,\n      tooltipPayload: tooltipPayload,\n      tooltipPosition: tooltipPosition\n    }, _omit(entry, 'width')), {}, {\n      payload: entry,\n      parentViewBox: parentViewBox,\n      labelViewBox: {\n        x: x + (upperWidth - lowerWidth) / 4,\n        y: y,\n        width: Math.abs(upperWidth - lowerWidth) / 2 + Math.min(upperWidth, lowerWidth),\n        height: rowHeight\n      }\n    });\n  });\n\n  if (reversed) {\n    trapezoids = trapezoids.map(function (entry, index) {\n      var newY = entry.y - index * rowHeight + (len - 1 - index) * rowHeight;\n      return _objectSpread(_objectSpread({}, entry), {}, {\n        upperWidth: entry.lowerWidth,\n        lowerWidth: entry.upperWidth,\n        x: entry.x - (entry.lowerWidth - entry.upperWidth) / 2,\n        y: entry.y - index * rowHeight + (len - 1 - index) * rowHeight,\n        tooltipPosition: _objectSpread(_objectSpread({}, entry.tooltipPosition), {}, {\n          y: newY + rowHeight / 2\n        }),\n        labelViewBox: _objectSpread(_objectSpread({}, entry.labelViewBox), {}, {\n          y: newY\n        })\n      });\n    });\n  }\n\n  return {\n    trapezoids: trapezoids,\n    data: funnelData\n  };\n};","/**\n * @fileOverview Funnel Chart\n */\nimport { generateCategoricalChart } from './generateCategoricalChart';\nimport { Funnel } from '../numberAxis/Funnel';\nexport var FunnelChart = generateCategoricalChart({\n  chartName: 'FunnelChart',\n  GraphicalChild: Funnel,\n  validateTooltipEventTypes: ['item'],\n  defaultTooltipEventType: 'item',\n  axisComponents: [],\n  defaultProps: {\n    layout: 'centric'\n  }\n});","import { FC, useEffect, useMemo, useState, useCallback, useRef } from \"react\";\r\nimport { Box, Button, Card, CircularProgress, IconButton, makeStyles, Menu, MenuItem, Tooltip } from \"@material-ui/core\";\r\nimport { Clear as ClearIcon, MoreVert as MoreVertIcon, Search as SearchIcon } from \"@material-ui/icons\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deleteDashboardTemplate, getDashboard, getDashboardTemplate, resetDeleteDashboardTemplate, resetGetDashboard, resetGetDashboardTemplate, resetSaveDashboardTemplate } from \"store/dashboard/actions\";\r\nimport { useSelector } from \"hooks\";\r\nimport { DateRangePicker, DialogZyx, TemplateBreadcrumbs } from \"components\";\r\nimport { useHistory, useRouteMatch } from \"react-router\";\r\nimport paths from \"common/constants/paths\";\r\nimport { langKeys } from \"lang/keys\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { manageConfirmation, showSnackbar } from \"store/popus/actions\";\r\nimport { getDashboardTemplateIns, getDashboardTemplateSel, getReportTemplateSel } from \"common/helpers\";\r\nimport RGL, { WidthProvider } from 'react-grid-layout';\r\nimport { XAxis, YAxis, ResponsiveContainer, Tooltip as ChartTooltip, BarChart, Legend, Bar, PieChart, Pie, Cell, ResponsiveContainerProps, LineChart, Line, CartesianGrid, LabelList, FunnelChart, Funnel } from 'recharts';\r\nimport { LayoutItem as NewLayoutItem, ReportTemplate } from './DashboardAdd';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { getCollection, getCollectionDynamic, resetMain, resetMainDynamic } from \"store/main/actions\";\r\nimport { Range } from \"react-date-range\";\r\nimport { CalendarIcon } from \"icons\";\r\nimport TableZyx from \"components/fields/table-simple\";\r\nimport GaugeChart from \"react-gauge-chart\";\r\nimport clsx from 'clsx';\r\nimport { RenderCustomizedLabel } from \"components/fields/Graphic\";\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\r\nimport FileSaver from 'file-saver';\r\n// import * as XLSX from 'xlsx';\r\n\r\nconst ReactGridLayout = WidthProvider(RGL);\r\n\r\ninterface Item {\r\n    description: string;\r\n    contentType: string;\r\n    kpiid: number;\r\n    reporttemplateid: number;\r\n    grouping: string;\r\n    graph: string;\r\n    column: string;\r\n}\r\n\r\ninterface Items {\r\n    [key: string]: Item;\r\n}\r\n\r\nconst months = [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"set\", \"oct\", \"nov\", \"dic\"]\r\nconst monthColor = [\"#0000ff\", \"#ff0000\", \"#ffff00\", \"#ff0080\", \"#00aae4\", \"#00ffff\", \"#76bd17\", \"#ff00ff\", \"#4c2882\", \"#804000\", \"#008f39\", \"#ff8000\"]\r\n\r\nconst colors = [\"#8884d8\", \"#82ca9d\", \"#d32248\", \"#1dc1fa\", \"#2b5ef4\", \"#7be2aa\", \"#c58725\", \"#692f32\", \"#8f97b8\", \"#57be99\"]\r\n\r\nconst useDashboardLayoutStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        gap: '1em',\r\n    },\r\n    layout: {\r\n        backgroundColor: 'inherit',\r\n        width: '100%',\r\n    },\r\n    filtersContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between',\r\n        backgroundColor: 'white',\r\n        padding: theme.spacing(1),\r\n        gap: theme.spacing(1),\r\n    },\r\n    styleicon: {\r\n        width: \"22px\",\r\n        height: \"22px\",\r\n        '&:hover': {\r\n            cursor: 'pointer',\r\n        }\r\n    },\r\n    downloadiconcontainer: {\r\n        width: \"100%\", display: \"flex\", justifyContent: \"end\"\r\n    },\r\n    label: {\r\n        fontWeight: 'bold',\r\n        fontSize: 16,\r\n    },\r\n}));\r\n\r\nconst format = (date: Date) => new Date(date.setHours(10)).toISOString().split('T')[0];\r\n\r\nconst DashboardLayout: FC = () => {\r\n    const classes = useDashboardLayoutStyles();\r\n    const { t } = useTranslation();\r\n    const history = useHistory();\r\n    const match = useRouteMatch<{ id: string }>();\r\n    const dispatch = useDispatch();\r\n    const dashboard = useSelector(state => state.dashboard.dashboard);\r\n    const dashboardtemplate = useSelector(state => state.dashboard.dashboardtemplate);\r\n    const dashboardSave = useSelector(state => state.dashboard.dashboardtemplateSave);\r\n    const dashboardtemplateDelete = useSelector(state => state.dashboard.dashboardtemplateDelete);\r\n    const reportTemplates = useSelector(state => state.main.mainData);\r\n    const [openDatePicker, setOpenDatePicker] = useState(false);\r\n    const [layout, setLayout] = useState<{ layout: RGL.Layout[], detail: Items }>({ layout: [], detail: {} });\r\n    const [dateRange, setDateRange] = useState<Range>({\r\n        startDate: new Date(new Date().setDate(1)),\r\n        endDate: new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0),\r\n        key: 'selection',\r\n    });\r\n    const tempDaterange = useRef<Range | null>(null);\r\n    const mustLoadagain = useRef(false);\r\n\r\n    const { register, unregister, formState: { errors }, getValues, setValue, reset } = useForm<Items>();\r\n\r\n    useEffect(() => {\r\n        dispatch(getDashboardTemplate(getDashboardTemplateSel(match.params.id)));\r\n        dispatch(getCollection(getReportTemplateSel()));\r\n\r\n        return () => {\r\n            dispatch(resetMain());\r\n            dispatch(resetMainDynamic()); // TableModal\r\n            dispatch(resetGetDashboard());\r\n            dispatch(resetGetDashboardTemplate());\r\n            dispatch(resetSaveDashboardTemplate());\r\n            dispatch(resetDeleteDashboardTemplate());\r\n        };\r\n    }, [match.params.id, dispatch]);\r\n\r\n    useEffect(() => {\r\n        dispatch(getDashboard({\r\n            dashboardtemplateid: match.params.id,\r\n            startdate: format(dateRange.startDate!),\r\n            enddate: format(dateRange.endDate!),\r\n            offset: (new Date().getTimezoneOffset() / 60) * -1,\r\n        }));\r\n    }, [dateRange, match.params.id, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (dashboardtemplate.loading) return;\r\n        if (dashboardtemplate.error) {\r\n            const error = t(dashboardtemplate.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        } else if (dashboardtemplate.value) {\r\n            setLayout({\r\n                layout: JSON.parse(dashboardtemplate.value.layoutjson),\r\n                detail: JSON.parse(dashboardtemplate.value.detailjson),\r\n            });\r\n        }\r\n    }, [dashboardtemplate, t, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (dashboard.loading) return;\r\n        if (dashboard.error) {\r\n            const error = t(dashboard.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        }\r\n    }, [dashboard, t, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (dashboardSave.loading) return;\r\n        if (dashboardSave.error) {\r\n            const error = t(dashboardSave.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        } else if (dashboardSave.success === true) {\r\n            dispatch(showSnackbar({\r\n                message: \"Se guard el dashboard\",\r\n                severity: \"success\",\r\n                show: true,\r\n            }));\r\n            if (mustLoadagain.current) {\r\n                mustLoadagain.current = false;\r\n\r\n                dispatch(getDashboardTemplate(getDashboardTemplateSel(match.params.id)));\r\n                setDateRange(prev => ({ ...prev })); // run getDashboard effect again\r\n                reset();\r\n            }\r\n        }\r\n    }, [dashboardSave, match.params.id, reset, t, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (dashboardtemplateDelete.loading) return;\r\n        if (dashboardtemplateDelete.error) {\r\n            const error = t(dashboardtemplateDelete.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        } else if (dashboardtemplateDelete.success) {\r\n            dispatch(showSnackbar({\r\n                message: \"Se elimin el dashboard\",\r\n                severity: \"success\",\r\n                show: true,\r\n            }));\r\n            history.push(paths.DASHBOARD);\r\n        }\r\n    }, [dashboardtemplateDelete, history, t, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (reportTemplates.loading) return;\r\n        if (reportTemplates.error) {\r\n            const error = t(reportTemplates.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        }\r\n    }, [reportTemplates, t, dispatch]);\r\n\r\n    const onDelete = useCallback(() => {\r\n        if (!dashboardtemplate.value) return;\r\n\r\n        dispatch(manageConfirmation({\r\n            visible: true,\r\n            question: t(langKeys.confirmation_delete),\r\n            callback: () => {\r\n                dispatch(deleteDashboardTemplate(getDashboardTemplateIns({\r\n                    ...dashboardtemplate.value!,\r\n                    id: match.params.id,\r\n                    status: 'ELIMINADO',\r\n                    operation: 'DELETE',\r\n                })));\r\n            },\r\n        }))\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [dashboardtemplate, match.params.id, dispatch]);\r\n\r\n    // const onSave = useCallback(() => {\r\n    //     if (!dashboardtemplate.value) return;\r\n\r\n    //     handleSubmit(data => {\r\n    //         const detail = layout.detail;\r\n    //         for(const key in data) {\r\n    //             detail[key] = data[key];\r\n    //         }\r\n\r\n    //         mustLoadagain.current = Object.keys(data).length > 0;\r\n\r\n    //         dispatch(saveDashboardTemplate(getDashboardTemplateIns({\r\n    //             ...dashboardtemplate.value!,\r\n    //             id: match.params.id,\r\n    //             operation: 'UPDATE',\r\n    //             detailjson: JSON.stringify(detail),\r\n    //             layoutjson: JSON.stringify(layout.layout),\r\n    //         })));\r\n    //     }, e => {})();\r\n    // }, [dashboardtemplate, layout, handleSubmit, match.params.id, dispatch]);\r\n\r\n    const onDetailChange = useCallback((detail: Items, type: ChangeType, key: string) => {\r\n        setLayout(prev => {\r\n            const newLayout = type === \"DELETE\" ? prev.layout.filter(x => x.i !== key) : prev.layout;\r\n            return { layout: newLayout, detail: detail };\r\n        });\r\n    }, []);\r\n\r\n    // const addItemOnClick = useCallback(() => {\r\n    //     const newKey = Date.now().toString();\r\n    //     setLayout(prev => ({\r\n    //         ...prev,\r\n    //         layout: [\r\n    //             ...prev.layout,\r\n    //             {\r\n    //                 i: newKey,\r\n    //                 x: (prev.layout.length * 3) % 12,\r\n    //                 y: Infinity,\r\n    //                 w: 3,\r\n    //                 h: 2,\r\n    //                 minW: 2,\r\n    //                 minH: 1,\r\n    //                 static: false,\r\n    //             },\r\n    //         ],\r\n    //     }));\r\n    // }, []);\r\n\r\n    const deleteItemOnClick = useCallback((key: string) => {\r\n        setLayout(prev => {\r\n            return {\r\n                ...prev,\r\n                layout: prev.layout.filter(e => e.i !== key),\r\n            };\r\n        });\r\n    }, []);\r\n\r\n    const getChartTitle = (key: string) => {\r\n        return layout.detail?.[key]?.description || dashboard.value?.[key]?.reportname || '-';\r\n    }\r\n\r\n    if (dashboardtemplate.loading || dashboard.loading) {\r\n        return <CenterLoading />;\r\n    }\r\n\r\n    if (dashboardtemplate.error || dashboard.error || !dashboardtemplate.value || !dashboard.value) {\r\n        return (\r\n            <Box className={classes.root}>\r\n                <TemplateBreadcrumbs\r\n                    breadcrumbs={[\r\n                        { id: \"view-1\", name: \"Dashboards\" },\r\n                        { id: \"view-2\", name: t(langKeys.detail_custom_dashboard) }\r\n                    ]}\r\n                    handleClick={id => id === \"view-1\" && history.push(paths.DASHBOARD)}\r\n                />\r\n                <div>ERROR</div>\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    const { description } = dashboardtemplate.value!;\r\n    return (\r\n        <Box className={classes.root}>\r\n            <TemplateBreadcrumbs\r\n                breadcrumbs={[\r\n                    { id: \"view-1\", name: \"Dashboards\" },\r\n                    { id: \"view-2\", name: description }\r\n                ]}\r\n                handleClick={id => id === \"view-1\" && history.push(paths.DASHBOARD)}\r\n            />\r\n            <div style={{ height: '1em' }} />\r\n            <div className={classes.filtersContainer}>\r\n                <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap' }}>\r\n                    <DateRangePicker\r\n                        open={openDatePicker}\r\n                        setOpen={setOpenDatePicker}\r\n                        range={dateRange}\r\n                        onSelect={v => tempDaterange.current = v}\r\n                        disabled={dashboardSave.loading || dashboardtemplate.loading || !dashboardtemplate.value}\r\n                    >\r\n                        <Button\r\n                            style={{ border: '1px solid #bfbfc0', borderRadius: 4, color: 'rgb(143, 146, 161)' }}\r\n                            startIcon={<CalendarIcon />}\r\n                            onClick={() => setOpenDatePicker(prev => !prev)}\r\n                        >\r\n                            {format(dateRange.startDate!) + \" - \" + format(dateRange.endDate!)}\r\n                        </Button>\r\n                    </DateRangePicker>\r\n                    <Button\r\n                        disabled={dashboardSave.loading || dashboardtemplate.loading || !dashboardtemplate.value}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        startIcon={<SearchIcon style={{ color: 'white' }} />}\r\n                        style={{ backgroundColor: '#55BD84', width: 120 }}\r\n                        onClick={() => {\r\n                            if (tempDaterange.current) {\r\n                                setDateRange({ ...tempDaterange.current });\r\n                            }\r\n                        }}\r\n                    >\r\n                        <Trans i18nKey={langKeys.search} />\r\n                    </Button>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap' }}>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        type=\"button\"\r\n                        color=\"primary\"\r\n                        startIcon={<ClearIcon color=\"secondary\" />}\r\n                        style={{ backgroundColor: \"#FB5F5F\" }}\r\n                        onClick={() => history.push(paths.DASHBOARD)}\r\n                    >\r\n                        <Trans i18nKey={langKeys.back} />\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        startIcon={<EditIcon color=\"secondary\" />}\r\n                        onClick={() => {\r\n                            if (!dashboardtemplate.value) return;\r\n                            const id = dashboardtemplate.value!.dashboardtemplateid;\r\n                            history.push(paths.DASHBOARD_EDIT.resolve(id));\r\n                        }}\r\n                        disabled={dashboardSave.loading || dashboardtemplate.loading || !dashboardtemplate.value}\r\n                    >\r\n                        <Trans i18nKey={langKeys.edit} />\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        startIcon={<DeleteIcon color=\"secondary\" />}\r\n                        onClick={onDelete}\r\n                        disabled={dashboardSave.loading || dashboardtemplate.loading || !dashboardtemplate.value}\r\n                    >\r\n                        <Trans i18nKey={langKeys.delete} />\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n            <div style={{ height: '0.5em' }} />\r\n            <ReactGridLayout\r\n                className={classes.layout}\r\n                layout={layout.layout}\r\n                onLayoutChange={(l) => setLayout(prev => ({ ...prev, layout: l }))}\r\n                cols={12}\r\n                rowHeight={140}\r\n                isDraggable={false}\r\n                isResizable={false}\r\n            // isDraggable={canLayoutChange && !dashboardtemplate.loading && !dashboard.loading}\r\n            // isResizable={canLayoutChange && !dashboardtemplate.loading && !dashboard.loading}\r\n            >\r\n                {layout.layout.map(e => {\r\n                    return (\r\n                        <div key={e.i}>\r\n                            {e.i in layout.detail ? (\r\n                                <LayoutItem\r\n                                    layoutKey={e.i}\r\n                                    title={getChartTitle(e.i)}\r\n                                    data={dashboard.value?.[e.i]?.data}\r\n                                    alldata={dashboard.value?.[e.i]}\r\n                                    columns={dashboard.value?.[e.i]?.columns}\r\n                                    dataorigin={dashboard.value?.[e.i]?.dataorigin}\r\n                                    type={dashboard.value?.[e.i]?.contentType === 'report' ? layout.detail[e.i]!.graph : (dashboard.value?.[e.i]?.contentType === 'funnel' ? \"funnel\" : 'kpi')}\r\n                                    groupment={layout.detail[e.i]?.grouping}\r\n                                    detail={layout.detail}\r\n                                    onDetailChange={(d, t) => onDetailChange(d, t, e.i)}\r\n                                    dateRange={dateRange}\r\n                                    onModalOpenhasChanged={v => { }}\r\n                                    error={dashboard.value?.[e.i]?.error}\r\n                                    errorcode={dashboard.value?.[e.i]?.errorcode}\r\n                                />\r\n                            ) : (\r\n                                <NewLayoutItem\r\n                                    layoutKey={e.i}\r\n                                    edit={false}\r\n                                    templates={reportTemplates.data as ReportTemplate[]}\r\n                                    kpis={[]}\r\n                                    tags={[]}\r\n                                    loading={reportTemplates.loading}\r\n                                    register={register}\r\n                                    unregister={unregister}\r\n                                    getValues={getValues}\r\n                                    setValue={setValue}\r\n                                    errors={errors}\r\n                                    onDelete={() => deleteItemOnClick(e.i)}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    )\r\n                })}\r\n            </ReactGridLayout>\r\n        </Box>\r\n    );\r\n}\r\n\r\ninterface ItemsData {\r\n    [label: string]: number;\r\n}\r\n\r\ninterface KpiData {\r\n    target: number;\r\n    cautionat: number;\r\n    alertat: number;\r\n    currentvalue: number;\r\n}\r\n\r\ninterface ChartData {\r\n    label: string;\r\n    quantity: number;\r\n}\r\n\r\ntype ChangeType = \"DELETE\" | \"UPDATE\" | \"INSERT\";\r\n\r\ninterface LayoutItemProps {\r\n    title: string;\r\n    data?: ItemsData | KpiData;\r\n    type: string;\r\n    layoutKey: string;\r\n    detail?: Items;\r\n    columns?: Column[];\r\n    dateRange: Range;\r\n    dataorigin?: string;\r\n    groupment?: string;\r\n    error?: boolean;\r\n    alldata?: any;\r\n    errorcode?: string; // REPORT_NOT_FOUND | COLUMN_NOT_FOUND\r\n    onDetailChange?: (detail: Items, type: ChangeType) => void;\r\n    onModalOpenhasChanged: (open: boolean) => void;\r\n}\r\n\r\ninterface Column {\r\n    tablename: string;\r\n    /**accessor */\r\n    columnname: string;\r\n    description: string;\r\n    type: string;\r\n    join_table: any;\r\n    join_alias: any;\r\n    join_on: any;\r\n    disabled: boolean;\r\n    /**Header */\r\n    alias: string;\r\n}\r\n\r\nconst useLayoutItemStyles = makeStyles(theme => ({\r\n    rootLoading: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        height: '100%',\r\n        width: '100%',\r\n        backgroundColor: 'white',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'hidden',\r\n        height: 'inherit',\r\n        width: 'inherit',\r\n        backgroundColor: 'white',\r\n        padding: theme.spacing(1),\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        gap: theme.spacing(1),\r\n        alignItems: 'center',\r\n        paddingBottom: '1em',\r\n    },\r\n    label: {\r\n        fontWeight: 'bold',\r\n        fontSize: 16,\r\n    },\r\n    reponsiveContainer: {\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n        flexGrow: 1,\r\n    },\r\n    errorText: {\r\n        textAlign: 'center',\r\n        fontWeight: 'bold',\r\n        fontSize: 18,\r\n        padding: '1em',\r\n    },\r\n}));\r\n\r\nconst LayoutItem: FC<LayoutItemProps> = ({\r\n    title,\r\n    data,\r\n    type,\r\n    layoutKey: key,\r\n    detail,\r\n    columns,\r\n    dateRange,\r\n    dataorigin,\r\n    groupment,\r\n    error,\r\n    errorcode,\r\n    alldata,\r\n    onDetailChange,\r\n    onModalOpenhasChanged,\r\n}) => {\r\n    const classes = useLayoutItemStyles();\r\n    const { t } = useTranslation();\r\n    const dataGraph = useMemo<any>(() => {\r\n        if (error === true || !data) return [];\r\n        if (type === \"funnel\") {\r\n            return data;\r\n        }\r\n        if (type !== 'kpi') {\r\n            return Object.keys(data as ItemsData).map(e => ({\r\n                label: e,\r\n                quantity: (data as ItemsData)[e],\r\n            }));\r\n        } else {\r\n            return data as KpiData;\r\n        }\r\n    }, [data, type, error]);\r\n    // const [graph, setGraph] = useState(type);\r\n    const [openTableModal, setOpenTableModal] = useState(false);\r\n\r\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n    const open = Boolean(anchorEl);\r\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    // const onChange = useCallback(() => {\r\n    //     if (!canChange) return;\r\n\r\n    //     const newType = graph === 'bar' ? 'pie' : 'bar';\r\n    //     setGraph(newType);\r\n    //     onDetailChange!({\r\n    //         ...detail,\r\n    //         [key]: {\r\n    //             ...detail![key],\r\n    //             graph: newType,\r\n    //         },\r\n    //     }, \"UPDATE\");\r\n    // }, [graph, canChange, key, detail, onDetailChange]);\r\n\r\n    const formatTooltip = (v: any, tot?: any) => {\r\n        if (groupment === \"percentage\") {\r\n            return `${t(langKeys.percentage)}: ${v.toFixed(2)}%`;\r\n        }\r\n\r\n        return `${t(langKeys.quantity)}: ${v}\\n${t(langKeys.percentage)}: ${(v * 100 / tot).toFixed(2)}%`;\r\n    }\r\n\r\n    const renderGraph = useCallback(() => {\r\n        switch (type) {\r\n            case 'bar':\r\n                return (\r\n                    <LayoutBar\r\n                        data={dataGraph as ChartData[]}\r\n                        tickFormatter={groupment === \"percentage\" ? v => `${Number(v).toFixed(2)}%` : undefined}\r\n                        tooltipFormatter={formatTooltip}\r\n                        alldata={alldata}\r\n                        grouping={groupment}\r\n                    />\r\n                );\r\n            case 'pie':\r\n                return (\r\n                    <LayoutPie\r\n                        data={dataGraph as ChartData[]}\r\n                        tooltipFormatter={formatTooltip}\r\n                        tickFormatter={groupment === \"percentage\" ? v => `${Number(v).toFixed(2)}%` : undefined}\r\n                        alldata={alldata}\r\n                    />\r\n                );\r\n            case 'line':\r\n                return (\r\n                    <LayoutLine\r\n                        data={dataGraph as ChartData[]}\r\n                        tickFormatter={groupment === \"percentage\" ? v => `${Number(v).toFixed(2)}%` : undefined}\r\n                        tooltipFormatter={formatTooltip}\r\n                        alldata={alldata}\r\n                        grouping={groupment}\r\n                    />\r\n                );\r\n            case 'kpi': return <LayoutKpi data={dataGraph as KpiData} />;\r\n            case 'funnel': return <LayoutFunnel\r\n                data={dataGraph}\r\n                title={title}\r\n            />\r\n            default: return null;\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [dataGraph, groupment, type]);\r\n\r\n    if (error === true && errorcode === \"REPORT_NOT_FOUND\") {\r\n        return (\r\n            <div className={clsx(classes.rootLoading, classes.errorText)}>\r\n                <Trans i18nKey={langKeys.chart_dashboard_report_error} />\r\n            </div>\r\n        );\r\n    } else if (error === true && errorcode === \"COLUMN_NOT_FOUND\") {\r\n        return (\r\n            <div className={clsx(classes.rootLoading, classes.errorText)}>\r\n                <Trans i18nKey={langKeys.chart_dashboard_column_error} />\r\n            </div>\r\n        );\r\n    } else if (error === true) {\r\n        return (\r\n            <div className={clsx(classes.rootLoading, classes.errorText)}>\r\n                <Trans i18nKey={langKeys.chart_dashboard_unexpected_error} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!data) {\r\n        return (\r\n            <div className={classes.rootLoading}>\r\n                <CenterLoading />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {type !== 'funnel' &&\r\n\r\n                <div className={classes.header}>\r\n                    <span className={classes.label}>{title}</span>\r\n                    <div style={{ flexGrow: 1 }} />\r\n                    {/* <Tooltip title=\"Intercambiar\">\r\n                    <IconButton onClick={onChange} size=\"small\">\r\n                        <SwapHorizIcon />\r\n                    </IconButton>\r\n                </Tooltip> */}\r\n                    {(type !== 'kpi' && columns && dataorigin) && (\r\n                        <>\r\n                            <Tooltip title={<Trans i18nKey={langKeys.moreOptions} />}>\r\n                                <IconButton\r\n                                    id={`more-btn-${key}`}\r\n                                    onClick={handleClick}\r\n                                    size=\"small\"\r\n                                    aria-controls={`more-menu-${key}`}\r\n                                >\r\n                                    <MoreVertIcon />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            <Menu\r\n                                id={`more-menu-${key}`}\r\n                                anchorEl={anchorEl}\r\n                                open={open}\r\n                                onClose={handleClose}\r\n                                MenuListProps={{\r\n                                    'aria-labelledby': `more-btn-${key}`,\r\n                                }}\r\n                            >\r\n                                <MenuItem\r\n                                    onClick={() => {\r\n                                        setOpenTableModal(true);\r\n                                        onModalOpenhasChanged(true);\r\n                                        handleClose();\r\n                                    }}\r\n                                >\r\n                                    <Trans i18nKey={langKeys.seeMore} />\r\n                                </MenuItem>\r\n                                {/* <MenuItem onClick={onDelete}>\r\n                                <Trans i18nKey={langKeys.delete} />\r\n                            </MenuItem> */}\r\n                            </Menu>\r\n                        </>\r\n                    )}\r\n                </div>}\r\n            <div className={classes.reponsiveContainer}>\r\n                {renderGraph()}\r\n            </div>\r\n            {(type !== 'kpi' && type !== \"funnel\") && (\r\n                <TableModal\r\n                    title={title}\r\n                    open={openTableModal}\r\n                    onClose={() => {\r\n                        setOpenTableModal(false);\r\n                        onModalOpenhasChanged(false);\r\n                    }}\r\n                    rawColumns={columns!}\r\n                    dataorigin={dataorigin!}\r\n                    dateRange={dateRange}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface IData {\r\n    label: string;\r\n    quantity: number | Object;\r\n}\r\n\r\ninterface LayoutBarProps extends Omit<ResponsiveContainerProps, 'children'> {\r\n    data: IData[];\r\n    tickFormatter?: (value: string, index: number) => string;\r\n    tooltipFormatter?: (value: any, tot?: any) => string;\r\n    alldata?: any;\r\n    grouping?: string;\r\n}\r\n\r\nconst LayoutBar: FC<LayoutBarProps> = ({ data, alldata, tickFormatter, tooltipFormatter, grouping, ...props }) => {\r\n    const { t } = useTranslation();\r\n    let total = alldata?.total;\r\n    let modifieddata = data;\r\n    let keys: any[] = []\r\n    let reversed = false\r\n    if (alldata?.interval) {\r\n        reversed = true\r\n        modifieddata = data.map(x => {\r\n            const localkeys = Object.keys(x.quantity)\r\n            localkeys.forEach((y) => {\r\n                if (!keys.includes(y)) {\r\n                    keys.push(y)\r\n                }\r\n            })\r\n            if (alldata?.interval === \"month\") {\r\n                return ({ ...Object(x.quantity), label: t(\"full\" + months[Number(x.label.split(\"-\")[1]) - 1]) + \" \" + x.label.split(\"-\")[0].replace(\"month\", ``) })\r\n            } else {\r\n                return ({ ...Object(x.quantity), label: `${t(alldata?.interval)} ${x.label.replace(alldata?.interval, \"\")}` })\r\n            }\r\n        })\r\n    } else {\r\n        let listlabels = data.map(x => x.label)[0]\r\n        if (!!listlabels) {\r\n            if (listlabels.includes(\"-\")) {\r\n                reversed = true\r\n                modifieddata = data.map(x => {\r\n                    let newlabel = x.label.replace(\"day\", \"\")\r\n                    let month = newlabel.slice(0, newlabel.indexOf(\"-\"))\r\n                    newlabel = newlabel.replace(`${month}-`, `${t(months[Number(month) - 1])} `)\r\n                    return ({ ...x, label: newlabel, color: monthColor[Number(month) - 1] })\r\n                })\r\n            }\r\n            if (listlabels.includes(\"week\")) {\r\n                reversed = true\r\n                modifieddata = data.map(x => ({ ...x, label: x.label.replace(\"month\", `${t(\"month\")} `).replace(\"week\", `${t(\"week\")} `) }))\r\n            }\r\n            if (listlabels.includes(\"month\")) {\r\n                reversed = true\r\n                modifieddata = data.map(x => ({ ...x, label: t(\"full\" + months[Number(x.label.split(\"-\")[1]) - 1]) + \" \" + x.label.split(\"-\")[0].replace(\"month\", ``) }))\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <ResponsiveContainer width={\"100%\"} {...props}>\r\n            <BarChart data={modifieddata} margin={{ top: 20, right: 10, bottom: 5, left: 10 }}>\r\n                <XAxis\r\n                    reversed={reversed}\r\n                    dataKey=\"label\"\r\n                    style={{ fontSize: '0.8em' }}\r\n                    angle={-45}\r\n                    interval={0}\r\n                    textAnchor=\"end\"\r\n                    height={160}\r\n                    dy={5}\r\n                    dx={-5}\r\n                    domain={[\"\", \"\"]}\r\n                />\r\n                <YAxis tickFormatter={tickFormatter} padding={{ top: 10 }} />\r\n                {alldata?.interval ? (\r\n                    <>\r\n\r\n                        <ChartTooltip content={({ active, payload, label }) => {\r\n                            if (active && payload && payload.length) {\r\n                                let partialtotal = payload.reduce((acc, x) => acc + Number(x.value), 0);\r\n                                return (\r\n                                    <Card key={`${label}-${payload[0].value}`} style={{ padding: '0.85em' }}>\r\n                                        {label && <label>{label}</label>}\r\n                                        {label && <br />}\r\n                                        {payload.map((x: any) => {\r\n                                            let value = x.payload[x?.dataKey]\r\n                                            if (grouping === \"percentage\") {\r\n                                                if (value) {\r\n                                                    return (\r\n                                                        <>\r\n                                                            <span key={`${label}-${x.dataKey}-${value}`} style={{ color: x.color, whiteSpace: \"break-spaces\" }}>\r\n                                                                {`${x.dataKey}: ${value}%`}\r\n                                                            </span>\r\n                                                            <br />\r\n                                                        </>\r\n                                                    )\r\n                                                }\r\n                                            } else {\r\n                                                if (value) {\r\n                                                    return (\r\n                                                        <>\r\n                                                            <span key={`${label}-${x.dataKey}-${value}`} style={{ color: x.color, whiteSpace: \"break-spaces\" }}>\r\n                                                                {`${x.dataKey}: ${value} / ${(value * 100 / partialtotal).toFixed(2)}%`}\r\n                                                            </span>\r\n                                                            <br />\r\n                                                        </>\r\n                                                    )\r\n                                                }\r\n                                            }\r\n                                            return null\r\n                                        })}\r\n                                        {grouping !== \"percentage\" &&\r\n                                            <>\r\n                                                <span style={{ whiteSpace: \"break-spaces\" }}>\r\n                                                    {`${t(langKeys.percentage)}: ${(partialtotal * 100 / total).toFixed(2)}%`}\r\n                                                </span>\r\n                                                <br />\r\n                                            </>\r\n                                        }\r\n                                    </Card>\r\n                                );\r\n                            }\r\n\r\n                            return null;\r\n                        }}\r\n                        />\r\n                        {keys.map((x, i) => (\r\n                            <Bar\r\n                                isAnimationActive={false}\r\n                                dataKey={x}\r\n                                fill={colors[i]}\r\n                                textAnchor=\"end\"\r\n                                key={x}\r\n                                type=\"monotone\"\r\n                            >\r\n                                <LabelList dataKey={x} position=\"top\" fill=\"#000\" />\r\n                            </Bar>\r\n                        ))}\r\n                    </>\r\n                ) :\r\n\r\n                    (\r\n                        <>\r\n                            <ChartTooltip\r\n                                content={({ active, payload, label }) => {\r\n                                    if (active && payload && payload.length) {\r\n                                        const { value } = payload[0];\r\n                                        return (\r\n                                            <Card key={`${label}-${value}`} style={{ padding: '0.85em' }}>\r\n                                                {label && <label>{label}</label>}\r\n                                                {label && <br />}\r\n                                                <span style={{ color: \"#8884d8\", whiteSpace: \"break-spaces\" }}>\r\n                                                    {\r\n                                                        tooltipFormatter?.(value, total) ||\r\n                                                        `quantity: ${value}`\r\n                                                    }\r\n                                                </span>\r\n                                            </Card>\r\n                                        );\r\n                                    }\r\n\r\n                                    return null;\r\n                                }}\r\n                            />\r\n                            <Bar\r\n                                isAnimationActive={false}\r\n                                dataKey=\"quantity\"\r\n                                fill=\"#8884d8\"\r\n                                textAnchor=\"end\"\r\n                                type=\"monotone\"\r\n                            >\r\n                                {modifieddata.map((entry: any, index: number) => (\r\n                                    <Cell key={`cell-${index}`} fill={entry?.color || \"#8884d8\"} />\r\n                                ))}\r\n                                <LabelList dataKey=\"quantity\" position=\"top\" fill=\"#000\" />\r\n                            </Bar>\r\n                        </>\r\n                    )\r\n                }\r\n            </BarChart>\r\n        </ResponsiveContainer>\r\n    );\r\n}\r\n\r\ninterface LayoutLineProps extends Omit<ResponsiveContainerProps, 'children'> {\r\n    data: IData[];\r\n    tickFormatter?: (value: string, index: number) => string;\r\n    tooltipFormatter?: (value: any, total?: any) => string;\r\n    alldata?: any;\r\n    grouping?: string\r\n}\r\n\r\nconst LayoutLine: FC<LayoutLineProps> = ({ data, alldata, tickFormatter, tooltipFormatter, grouping, ...props }) => {\r\n    const { t } = useTranslation();\r\n    let total = alldata?.total;\r\n    let modifieddata = data;\r\n    let keys: any[] = []\r\n    let reversed = false\r\n    if (alldata?.interval) {\r\n        reversed = true\r\n        data.forEach(x => {\r\n            const localkeys = Object.keys(x.quantity)\r\n            localkeys.forEach((y: string) => {\r\n                if (!keys.includes(y)) {\r\n                    keys.push(y)\r\n                }\r\n            })\r\n        })\r\n        let itemmodel = keys.reduce((acc, x) => { return { ...acc, [x]: 0 } }, {})\r\n        if (alldata?.interval === \"month\") {\r\n\r\n            modifieddata = data.map(x => {\r\n\r\n                return ({ ...itemmodel, ...Object(x.quantity), label: t(\"full\" + months[Number(x.label.split(\"-\")[1]) - 1]) + \" \" + x.label.split(\"-\")[0].replace(\"month\", ``) })\r\n            })\r\n        } else {\r\n            modifieddata = data.map(x => {\r\n\r\n                return ({ ...itemmodel, ...Object(x.quantity), label: `${t(alldata?.interval)} ${x.label.replace(alldata?.interval, \"\")}` })\r\n            })\r\n        }\r\n    } else {\r\n        let listlabels = data.map(x => x.label)[0]\r\n        if (!!listlabels) {\r\n            if (listlabels.includes(\"-\")) {\r\n                reversed = true\r\n                modifieddata = data.map(x => {\r\n                    let newlabel = x.label.replace(\"day\", \"\")\r\n                    let month = newlabel.slice(0, newlabel.indexOf(\"-\"))\r\n                    newlabel = newlabel.replace(`${month}-`, `${t(months[Number(month) - 1])} `)\r\n                    return ({ ...x, label: newlabel, color: monthColor[Number(month) - 1] })\r\n                })\r\n            }\r\n            if (listlabels.includes(\"week\")) {\r\n                reversed = true\r\n                modifieddata = data.map(x => ({ ...x, label: x.label.replace(\"week\", `${t(\"week\")} `) }))\r\n            }\r\n            if (listlabels.includes(\"month\")) {\r\n                reversed = true\r\n                modifieddata = data.map(x => ({ ...x, label: t(\"full\" + months[Number(x.label.split(\"-\")[1]) - 1]) + \" \" + x.label.split(\"-\")[0].replace(\"month\", ``) }))\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        <ResponsiveContainer {...props}>\r\n            <LineChart data={modifieddata} margin={{ top: 20, right: 10, bottom: 5, left: 10 }}>\r\n                <CartesianGrid stroke=\"#ccc\" />\r\n                <XAxis\r\n                    domain={[\"\", \"\"]}\r\n                    reversed={reversed}\r\n                    dataKey=\"label\"\r\n                    style={{ fontSize: '0.8em' }}\r\n                    angle={-45}\r\n                    interval={0}\r\n                    textAnchor=\"end\"\r\n                    height={160}\r\n                    dy={5}\r\n                    dx={-5}\r\n                />\r\n                <YAxis tickFormatter={tickFormatter} />\r\n\r\n                {alldata?.interval ? (\r\n                    <>\r\n                        <ChartTooltip content={({ active, payload, label }) => {\r\n                            if (active && payload && payload.length) {\r\n                                let partialtotal = payload.reduce((acc, x) => acc + Number(x.value), 0);\r\n                                return (\r\n                                    <Card key={`${label}-${payload[0].value}`} style={{ padding: '0.85em' }}>\r\n                                        {label && <label>{label}</label>}\r\n                                        {label && <br />}\r\n                                        {payload.map((x: any) => {\r\n                                            let value = x.payload[x?.dataKey]\r\n                                            if (grouping === \"percentage\") {\r\n                                                if (value) {\r\n                                                    return (\r\n                                                        <>\r\n                                                            <span key={`${label}-${x.dataKey}-${value}`} style={{ color: x.color, whiteSpace: \"break-spaces\" }}>\r\n                                                                {`${x.dataKey}: ${value}%`}\r\n                                                            </span>\r\n                                                            <br />\r\n                                                        </>\r\n                                                    )\r\n                                                }\r\n                                            } else {\r\n                                                if (value) {\r\n                                                    return (\r\n                                                        <>\r\n                                                            <span key={`${label}-${x.dataKey}-${value}`} style={{ color: x.color, whiteSpace: \"break-spaces\" }}>\r\n                                                                {`${x.dataKey}: ${value} / ${(value * 100 / partialtotal).toFixed(2)}%`}\r\n                                                            </span>\r\n                                                            <br />\r\n                                                        </>\r\n                                                    )\r\n                                                }\r\n                                            }\r\n                                            return null\r\n                                        })}\r\n                                        {grouping !== \"percentage\" &&\r\n                                            <>\r\n                                                <span style={{ whiteSpace: \"break-spaces\" }}>\r\n                                                    {`${t(langKeys.percentage)}: ${(partialtotal * 100 / total).toFixed(2)}%`}\r\n                                                </span>\r\n                                                <br />\r\n                                            </>\r\n                                        }\r\n                                    </Card>\r\n                                );\r\n                            }\r\n\r\n                            return null;\r\n                        }}\r\n                        />\r\n                        {keys.map((x, i) => (\r\n                            <Line type=\"monotone\" dataKey={x} key={x} stroke={colors[i]} >\r\n                                <LabelList dataKey={x} position=\"top\" fill=\"#000\" />\r\n                            </Line>\r\n                        ))}\r\n                    </>\r\n                ) :\r\n\r\n                    (\r\n                        <>\r\n                            <ChartTooltip\r\n                                content={({ active, payload, label }) => {\r\n                                    if (active && payload && payload.length) {\r\n                                        const { value } = payload[0];\r\n                                        return (\r\n                                            <Card key={`${label}-${value}`} style={{ padding: '0.85em' }}>\r\n                                                {label && <label>{label}</label>}\r\n                                                {label && <br />}\r\n                                                <span style={{ color: \"#8884d8\", whiteSpace: \"break-spaces\" }}>\r\n                                                    {\r\n                                                        tooltipFormatter?.(value, total) ||\r\n                                                        `quantity: ${value}`\r\n                                                    }\r\n                                                </span>\r\n                                            </Card>\r\n                                        );\r\n                                    }\r\n\r\n                                    return null;\r\n                                }}\r\n                            />\r\n                            <Line isAnimationActive={false} type=\"monotone\" dataKey=\"quantity\" stroke=\"#8884d8\">\r\n\r\n                                {modifieddata.map((entry: any, index: number) => (\r\n                                    <Cell key={`cell-${index}`} stroke={entry?.color || \"#8884d8\"} />\r\n                                ))}\r\n                                <LabelList dataKey=\"quantity\" position=\"top\" fill=\"#000\" />\r\n                            </Line>\r\n                        </>\r\n                    )\r\n                }\r\n            </LineChart>\r\n        </ResponsiveContainer>\r\n    );\r\n}\r\n\r\ninterface LayoutPieProps extends Omit<ResponsiveContainerProps, 'children'> {\r\n    data: IData[];\r\n    tickFormatter?: (value: string, index: number) => string;\r\n    tooltipFormatter?: (value: any, total?: any) => string;\r\n    alldata?: any;\r\n}\r\n\r\nconst PIE_COLORS = ['#22b66e', '#b41a1a', '#ffcd56', '#D32F2F', '#FBC02D', '#757575', '#00BCD4', '#AFB42B', '#8BC34A', '#5D4037', '#607D8B', '#03A9F4', '#303F9F', '#009688', '#388E3C', '#E64A19', '#212121'];\r\n\r\ninterface LayoutFunnelProps {\r\n    data: any;\r\n    title: string;\r\n}\r\n\r\nconst LayoutFunnel: FC<LayoutFunnelProps> = ({ data, title, ...props }) => {\r\n    let truedata = data.map((e: any, i: number) => ({ name: e.title, value: e.quantity, fill: PIE_COLORS[i] }))\r\n    let dataFunnel = data.map((e: any, i: number) => ({ name: e.title, value: data.length - i, fill: PIE_COLORS[i] }))\r\n    let total = truedata[0].value\r\n    const classes = useDashboardLayoutStyles();\r\n    function exportexcel() {\r\n        import('xlsx').then(XLSX => {\r\n            const fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n            const fileExtension = '.xlsx';\r\n            let dataexport = truedata.map((e: any, i: number) => ({ Nombre: e.name, Cantidad: e.value, \"% Representativo\": ((e.value / total) * 100).toFixed(0) }))\r\n            const ws = XLSX.utils.json_to_sheet(dataexport);\r\n            const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n            const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n            const data = new Blob([excelBuffer], { type: fileType });\r\n            FileSaver.saveAs(data, title + fileExtension);\r\n        });\r\n    }\r\n    return (\r\n        <>\r\n            <div className={classes.header}>\r\n                <span className={classes.label}>{title}</span>\r\n                <div style={{ flexGrow: 1 }} />\r\n\r\n                {total !== 0 && <CloudDownloadIcon onClick={exportexcel} className={classes.styleicon} />}\r\n            </div>\r\n            <ResponsiveContainer {...props}>\r\n                <FunnelChart margin={{ top: 10, right: (6 + Math.max(...truedata.map((x: any) => x.value))?.toString().length) * 5, bottom: 5, left: 10 }}>\r\n                    <ChartTooltip\r\n                        formatter={(value: any, name: any, props: any) => {\r\n                            return [`${truedata[truedata.length - parseInt(String(props?.value))]?.value} - ${total !== 0 ? ((Number(truedata[truedata.length - parseInt(String(props?.value))]?.value) / total) * 100).toFixed(1) : 100}%`, name]\r\n                        }}\r\n                    />\r\n                    <Funnel\r\n                        isAnimationActive={false}\r\n                        dataKey=\"value\"\r\n                        data={dataFunnel}\r\n                    >\r\n                        <LabelList position=\"right\" fill=\"#000\" stroke=\"none\" dataKey=\"name\"\r\n                            content={(props2: any) => {\r\n                                const { y, height } = props2;\r\n                                const { x, width } = props2.parentViewBox;\r\n                                if (Number(dataFunnel[props2.index].value) !== 0) {\r\n                                    return <g>\r\n                                        <text x={x + width - (6 + truedata[props2.index].value?.toString().length) * 5} y={y + height / 2}>\r\n                                            {truedata[props2.index].value} - {total !== 0 ? ((Number(truedata[props2.index].value) / total) * 100).toFixed(1) : 100}%\r\n                                        </text>\r\n                                    </g>\r\n                                } else {\r\n                                    return <g></g>\r\n                                }\r\n                            }}\r\n                        />\r\n                        <LabelList position=\"right\" fill=\"#000\" stroke=\"none\" dataKey=\"name\"\r\n                            content={(props2: any) => {\r\n                                const { value, y, height } = props2;\r\n                                const { x, width } = props2.parentViewBox;\r\n                                if (Number(dataFunnel[props2.index].value) !== 0) {\r\n                                    return <g>\r\n                                        <text x={x + width / 2} y={y + height / 2} textAnchor=\"middle\" dominantBaseline=\"middle\">\r\n                                            {value}\r\n                                        </text>\r\n                                    </g>\r\n                                } else {\r\n                                    return <g></g>\r\n                                }\r\n                            }}\r\n                        />\r\n                    </Funnel>\r\n                </FunnelChart>\r\n            </ResponsiveContainer>\r\n        </>\r\n    );\r\n}\r\nconst LayoutPie: FC<LayoutPieProps> = ({ data, alldata, tooltipFormatter, tickFormatter, ...props }) => {\r\n    let total = alldata?.total;\r\n    return (\r\n        <ResponsiveContainer {...props}>\r\n            <PieChart>\r\n                <ChartTooltip\r\n                    content={({ active, payload }) => {\r\n                        if (active && payload && payload.length) {\r\n                            const { name: label, value } = payload[0];\r\n                            return (\r\n                                <Card key={`${label}-${value}`} style={{ padding: '0.85em' }}>\r\n                                    {label && <label>{label}</label>}\r\n                                    {label && <br />}\r\n                                    <span style={{ color: \"#8884d8\", whiteSpace: \"break-spaces\" }}>\r\n                                        {\r\n                                            tooltipFormatter?.(value, total) ||\r\n                                            `quantity: ${value}`\r\n                                        }\r\n                                    </span>\r\n                                </Card>\r\n                            );\r\n                        }\r\n\r\n                        return null;\r\n                    }}\r\n                />\r\n                <Pie\r\n                    data={data}\r\n                    dataKey=\"quantity\"\r\n                    nameKey=\"label\"\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    innerRadius={40}\r\n                    fill=\"#8884d8\"\r\n                    labelLine={false}\r\n                    label={RenderCustomizedLabel}\r\n                >\r\n                    {data.map((_, i) => (\r\n                        <Cell\r\n                            key={`cell-${i}`}\r\n                            fill={PIE_COLORS[i % PIE_COLORS.length]}\r\n                        />\r\n                    ))}\r\n                </Pie>\r\n                {/* <Legend layout=\"vertical\" verticalAlign=\"top\" align=\"right\" /> */}\r\n                <Legend verticalAlign=\"bottom\" />\r\n            </PieChart>\r\n        </ResponsiveContainer>\r\n    );\r\n}\r\ninterface LayoutKpiProps {\r\n    data: KpiData;\r\n}\r\n\r\nconst LayoutKpi: FC<LayoutKpiProps> = ({ data }) => {\r\n    const gaugeArcs = useMemo(() => {\r\n        if (data.target <= data.alertat) {\r\n            return [\r\n                data.cautionat / (Math.max(data?.currentvalue, Math.ceil(data.alertat * 1.2 / 10) * 10)),\r\n                (data.alertat - data.cautionat) / (Math.max(data?.currentvalue, Math.ceil(data.alertat * 1.2 / 10) * 10)),\r\n                ((Math.max(data?.currentvalue, Math.ceil(data.alertat * 1.2 / 10) * 10)) - data.alertat) / (Math.max(data?.currentvalue, Math.ceil(data.alertat * 1.2 / 10) * 10))\r\n            ]\r\n        } else {\r\n            return [\r\n                data.alertat / (Math.max(data?.currentvalue, Math.ceil(data.target * 1.2 / 10) * 10)),\r\n                (data.cautionat - data.alertat) / (Math.max(data?.currentvalue, Math.ceil(data.target * 1.2 / 10) * 10)),\r\n                ((Math.max(data?.currentvalue, Math.ceil(data.target * 1.2 / 10) * 10)) - data.cautionat) / (Math.max(data?.currentvalue, Math.ceil(data.target * 1.2 / 10) * 10))\r\n            ];\r\n        }\r\n    }, [data]);\r\n\r\n    const percent = useMemo(() => {\r\n        return data.target < data.alertat\r\n            ? data?.currentvalue / (Math.max(data?.currentvalue, Math.ceil(data.alertat * 1.2 / 10) * 10))\r\n            : data?.currentvalue / (Math.max(data?.currentvalue, Math.ceil(data.target * 1.2 / 10) * 10));\r\n    }, [data]);\r\n\r\n    const colors = useMemo(() => {\r\n        return data.target < data.alertat\r\n            ? ['#5BE12C', '#F5CD19', '#EA4228']\r\n            : ['#EA4228', '#F5CD19', '#5BE12C'];\r\n    }, [data]);\r\n\r\n    const inverted = data.target < data.alertat;\r\n    return (\r\n        <ResponsiveContainer>\r\n            <div style={{ height: 'inherit', width: 'inherit' }}>\r\n                <GaugeChart\r\n                    arcsLength={gaugeArcs}\r\n                    colors={colors}\r\n                    textColor=\"black\"\r\n                    animate={false}\r\n                    percent={percent}\r\n                    needleColor=\"grey\"\r\n                    formatTextValue={() => `${data?.currentvalue}`}\r\n                />\r\n                <div style={{ width: '100%', display: 'flex', flexDirection: 'row', gap: 10, justifyContent: 'center' }}>\r\n                    <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\r\n                        <div style={{ width: 10, height: 10, backgroundColor: colors[0], marginRight: 4 }} />\r\n                        <span>{inverted ? data.target : data.alertat}</span>\r\n                    </div>\r\n                    <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\r\n                        <div style={{ width: 10, height: 10, backgroundColor: colors[1], marginRight: 4 }} />\r\n                        <span>{data.cautionat}</span>\r\n                    </div>\r\n                    <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\r\n                        <div style={{ width: 10, height: 10, backgroundColor: colors[2], marginRight: 4 }} />\r\n                        <span>{inverted ? data.alertat : data.target}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ResponsiveContainer>\r\n    );\r\n}\r\n\r\ninterface TableModalProps {\r\n    title: string;\r\n    open: boolean;\r\n    rawColumns: Column[];\r\n    dateRange: Range;\r\n    dataorigin: string;\r\n    onClose: () => void;\r\n}\r\n\r\nconst TableModal: FC<TableModalProps> = ({ title, open, rawColumns, dateRange, dataorigin, onClose }) => {\r\n    const dispatch = useDispatch();\r\n    const { t } = useTranslation();\r\n    const mainDynamic = useSelector(state => state.main.mainDynamic);\r\n    const columns = useMemo(() => rawColumns.map(x => ({\r\n        Header: x.alias,\r\n        accessor: x.columnname.replace(\".\", \"\"),\r\n        type: \"string\",\r\n        ...(x.type === \"timestamp without time zone\" ? {\r\n            Cell: (props: any) => {\r\n                const row = props.cell.row.original;\r\n                return row[x.columnname.replace(\".\", \"\")] ? new Date(row[x.columnname.replace(\".\", \"\")]).toLocaleString() : \"\";\r\n            }\r\n        } : {})\r\n    })), [rawColumns]);\r\n\r\n    const getBody = useCallback(() => ({\r\n        columns: rawColumns,\r\n        parameters: {\r\n            offset: (new Date().getTimezoneOffset() / 60) * -1,\r\n        },\r\n        summaries: [],\r\n        filters: [\r\n            {\r\n                columnname: `${dataorigin}.createdate`,\r\n                type: \"timestamp without time zone\",\r\n                description: \"\",\r\n                join_alias: \"\",\r\n                join_on: \"\",\r\n                join_table: \"\",\r\n                start: format(dateRange.startDate!),\r\n                end: format(dateRange.endDate!),\r\n            },\r\n\r\n        ],\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }), [dateRange, rawColumns]);\r\n\r\n    useEffect(() => {\r\n        if (!open) return;\r\n\r\n        dispatch(getCollectionDynamic(getBody()));\r\n    }, [open, getBody, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (!open || mainDynamic.loading) return;\r\n        if (mainDynamic.error) {\r\n            const error = t(mainDynamic.code || \"error_unexpected_error\", { module: t(langKeys.user).toLocaleLowerCase() });\r\n            dispatch(showSnackbar({\r\n                message: error,\r\n                severity: \"error\",\r\n                show: true,\r\n            }));\r\n        }\r\n    }, [mainDynamic, open, t, dispatch]);\r\n\r\n    return (\r\n        <DialogZyx\r\n            open={open}\r\n            title={title}\r\n            buttonText2={t(langKeys.cancel)}\r\n            handleClickButton2={onClose}\r\n            maxWidth=\"md\"\r\n        >\r\n            <TableZyx\r\n                columns={columns}\r\n                filterGeneral={false}\r\n                data={mainDynamic.data}\r\n                download={false}\r\n                loading={mainDynamic.loading}\r\n            />\r\n        </DialogZyx>\r\n    );\r\n}\r\n\r\nconst CenterLoading: FC = () => {\r\n    return (\r\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', width: '100%' }}>\r\n            <CircularProgress />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DashboardLayout;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState } from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport Button from '@material-ui/core/Button';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport { exportExcel, getLocaleDateString, localesLaraigo } from 'common/helpers';\r\nimport { setMemoryTable } from 'store/main/actions';\r\nimport { useDispatch } from 'react-redux';\r\nimport {\r\n    FirstPage,\r\n    LastPage,\r\n    NavigateNext,\r\n    NavigateBefore,\r\n    MoreVert as MoreVertIcon,\r\n    Refresh as RefreshIcon,\r\n    Add as AddIcon\r\n} from '@material-ui/icons';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport Box from '@material-ui/core/Box';\r\nimport Input from '@material-ui/core/Input';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport BackupIcon from '@material-ui/icons/Backup';\r\nimport { Dictionary, TableConfig } from '@types'\r\nimport { SearchField } from 'components';\r\nimport { DownloadIcon } from 'icons';\r\nimport ListAltIcon from '@material-ui/icons/ListAlt';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport {\r\n    useTable,\r\n    useFilters,\r\n    useGlobalFilter,\r\n    useSortBy,\r\n    usePagination,\r\n    useRowSelect\r\n} from 'react-table'\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport { langKeys } from 'lang/keys';\r\nimport { Skeleton } from '@material-ui/lab';\r\nimport { FixedSizeList } from 'react-window';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport InfoRoundedIcon from '@material-ui/icons/InfoRounded';\r\nimport {\r\n    MuiPickersUtilsProvider,\r\n    KeyboardTimePicker,\r\n    KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport { TableFooter } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    footerTable: {\r\n        display: 'block',\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'flex',\r\n            justifyContent: \"space-between\",\r\n        },\r\n        '& > div': {\r\n            display: 'block',\r\n            textAlign: 'center',\r\n            [theme.breakpoints.up('sm')]: {\r\n                display: 'flex',\r\n                alignItems: \"center\",\r\n            },\r\n        }\r\n    },\r\n    trdynamic: {\r\n        '&:hover': {\r\n            boxShadow: '0 11px 6px -9px rgb(84 84 84 / 78%)',\r\n            \"& $containerfloat\": {\r\n                visibility: 'visible'\r\n            }\r\n        },\r\n    },\r\n    containerSearch: {\r\n        width: '100%',\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: '50%',\r\n        },\r\n    },\r\n    containerFilterGeneral: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        backgroundColor: '#FFF',\r\n        padding: `${theme.spacing(1)}px`,\r\n    },\r\n    containerfloat: {\r\n        borderBottom: 'none',\r\n        backgroundColor: 'white',\r\n        marginTop: '1px',\r\n        position: 'absolute',\r\n        zIndex: 9999,\r\n        left: 0,\r\n        visibility: 'hidden'\r\n    },\r\n    iconOrder: {\r\n        width: 20,\r\n        height: 20,\r\n        color: theme.palette.text.primary,\r\n    },\r\n    button: {\r\n        padding: 12,\r\n        fontWeight: 500,\r\n        fontSize: '14px',\r\n        textTransform: 'initial'\r\n    },\r\n    title: {\r\n        fontSize: '22px',\r\n        fontWeight: 'bold',\r\n        color: theme.palette.text.primary,\r\n    },\r\n    containerButtons: {\r\n        gridGap: theme.spacing(1),\r\n        display: 'grid',\r\n        gridAutoFlow: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    containerHeader: {\r\n        display: 'block',\r\n        flexWrap: 'wrap',\r\n        gap: 8,\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'flex',\r\n        }\r\n    },\r\n    containerHeaderColumn: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n    },\r\n    iconHelpText: {\r\n        width: 15,\r\n        height: 15,\r\n        cursor: 'pointer',\r\n    }\r\n}));\r\n\r\ndeclare module \"react-table\" {\r\n    // eslint-disable-next-line\r\n    interface UseTableColumnProps<D extends object> {\r\n        listSelectFilter: Dictionary;\r\n        helpText?: string;\r\n    }\r\n}\r\n\r\nexport const stringOptionsMenu = [\r\n    { key: 'equals', value: 'equals' },\r\n    { key: 'notequals', value: 'notequals' },\r\n    { key: 'contains', value: 'contains' },\r\n    { key: 'notcontains', value: 'notcontains' },\r\n    { key: 'isempty', value: 'isempty' },\r\n    { key: 'isnotempty', value: 'isnotempty' },\r\n    // { key: 'isnull', value: 'isnull' },\r\n    // { key: 'isnotnull', value: 'isnotnull' },\r\n];\r\n\r\nexport const numberOptionsMenu = [\r\n    { key: 'equals', value: 'equals' },\r\n    { key: 'notequals', value: 'notequals' },\r\n    { key: 'greater', value: 'greater' },\r\n    { key: 'greaterorequals', value: 'greaterorequals' },\r\n    { key: 'less', value: 'less' },\r\n    { key: 'lessorequals', value: 'lessorequals' },\r\n    { key: 'isempty', value: 'isempty' },\r\n    { key: 'isnotempty', value: 'isnotempty' },\r\n    // { key: 'isnull', value: 'isnull' },\r\n    // { key: 'isnotnull', value: 'isnotnull' },\r\n];\r\n\r\nexport const dateOptionsMenu = [\r\n    { key: 'equals', value: 'equals' },\r\n    { key: 'notequals', value: 'notequals' },\r\n    { key: 'after', value: 'after' },\r\n    { key: 'afterequals', value: 'afterequals' },\r\n    { key: 'before', value: 'before' },\r\n    { key: 'beforeequals', value: 'beforeequals' },\r\n    // { key: 'isnull', value: 'isnull' },\r\n    // { key: 'isnotnull', value: 'isnotnull' },\r\n];\r\n\r\nexport const booleanOptionsMenu = [\r\n    { key: 'all', value: 'all' },\r\n    { key: 'istrue', value: 'istrue' },\r\n    { key: 'isfalse', value: 'isfalse' },\r\n    { key: 'isnull', value: 'isnull' },\r\n    { key: 'isnotnull', value: 'isnotnull' },\r\n];\r\n\r\nexport const BooleanOptionsMenuComponent: React.FC<{ value: any; handleClickItemMenu: (key: any) => void }> = ({ value, handleClickItemMenu }) => {\r\n    const { t } = useTranslation();\r\n\r\n    return (\r\n        <Select\r\n            value={value || 'all'}\r\n            onChange={(e) => handleClickItemMenu(e.target.value)}\r\n        >\r\n            {booleanOptionsMenu.map((option) => (\r\n                <MenuItem key={option.key} value={option.key}>\r\n                    {t(option.value)}\r\n                </MenuItem>\r\n            ))}\r\n        </Select>\r\n    )\r\n}\r\n\r\nexport const SelectFilterTmp: React.FC<{ value: any; data: any[]; handleClickItemMenu: (key: any) => void }> = ({ value, data, handleClickItemMenu }) => {\r\n    const { t } = useTranslation();\r\n    return (\r\n        <Select\r\n            value={value || '_ALL'}\r\n            onChange={(e) => handleClickItemMenu(e.target.value)}\r\n        >\r\n            <MenuItem value='_ALL'>\r\n                {t(langKeys.all)}\r\n            </MenuItem>\r\n            {data.map((option) => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                    {t(option.key)}\r\n                </MenuItem>\r\n            ))}\r\n        </Select>\r\n    )\r\n}\r\n\r\nexport const DateOptionsMenuComponent = (value: any, handleClickItemMenu: (key: any) => void) => {\r\n    const { t } = useTranslation();\r\n    const [value2, setvalue2] = useState(null)\r\n\r\n    useEffect(() => {\r\n        if (value === 'isnull' || value === 'isnotnull') {\r\n            setvalue2(null)\r\n        }\r\n    }, [value])\r\n\r\n    return (\r\n        <MuiPickersUtilsProvider utils={DateFnsUtils} locale={(localesLaraigo() as any)[navigator.language.split('-')[0]]}>\r\n            <KeyboardDatePicker\r\n                invalidDateMessage={t(langKeys.invalid_date_format)}\r\n                format={getLocaleDateString()}\r\n                value={value2}\r\n                onChange={(e: any) => {\r\n                    handleClickItemMenu(e);\r\n                    setvalue2(e)\r\n                }}\r\n                style={{ minWidth: '150px' }}\r\n            />\r\n        </MuiPickersUtilsProvider>\r\n    )\r\n}\r\n\r\nexport const TimeOptionsMenuComponent = (value: any, handleClickItemMenu: (key: any) => void) => {\r\n    return (\r\n        <MuiPickersUtilsProvider utils={DateFnsUtils} locale={(localesLaraigo())[navigator.language.split('-')[0]]}>\r\n            <KeyboardTimePicker\r\n                ampm={false}\r\n                views={['hours', 'minutes', 'seconds']}\r\n                format=\"HH:mm:ss\"\r\n                error={false}\r\n                helperText={''}\r\n                value={value === '' ? null : value}\r\n                onChange={(e: any) => handleClickItemMenu(e)}\r\n                style={{ minWidth: '150px' }}\r\n            />\r\n        </MuiPickersUtilsProvider>\r\n\r\n    )\r\n}\r\n\r\nexport const OptionsMenuComponent = (type: string, operator: string, handleClickItemMenu: (key: any) => void) => {\r\n    const { t } = useTranslation();\r\n    switch (type) {\r\n        case \"number\": case \"number-centered\":\r\n            return (\r\n                numberOptionsMenu.map((option) => (\r\n                    <MenuItem key={option.key} selected={option.key === operator} onClick={() => handleClickItemMenu(option.key)}>\r\n                        {t(option.value)}\r\n                    </MenuItem>\r\n                ))\r\n            )\r\n        case \"date\": case \"datetime-local\": case \"time\":\r\n            return (\r\n                dateOptionsMenu.map((option) => (\r\n                    <MenuItem key={option.key} selected={option.key === operator} onClick={() => handleClickItemMenu(option.key)}>\r\n                        {t(option.value)}\r\n                    </MenuItem>\r\n                ))\r\n            )\r\n        case \"string\": case \"color\":\r\n        default:\r\n            return (\r\n                stringOptionsMenu.map((option) => (\r\n                    <MenuItem key={option.key} selected={option.key === operator} onClick={() => handleClickItemMenu(option.key)}>\r\n                        {t(option.value)}\r\n                    </MenuItem>\r\n                ))\r\n            )\r\n    }\r\n}\r\n\r\nconst TableZyx = React.memo(({\r\n    titlemodule,\r\n    columns,\r\n    data,\r\n    fetchData,\r\n    download = true,\r\n    register,\r\n    handleRegister,\r\n    calculate = false,\r\n    handleCalculate,\r\n    HeadComponent,\r\n    ButtonsElement,\r\n    triggerExportPersonalized,\r\n    exportPersonalized,\r\n    pageSizeDefault = 20,\r\n    importCSV,\r\n    handleTemplate,\r\n    filterGeneral = true,\r\n    loading = false,\r\n    useSelection,\r\n    selectionKey,\r\n    initialSelectedRows,\r\n    setSelectedRows,\r\n    allRowsSelected,\r\n    setAllRowsSelected,\r\n    onClickRow,\r\n    toolsFooter = true,\r\n    initialPageIndex = 0,\r\n    helperText = \"\",\r\n    initialStateFilter,\r\n    registertext,\r\n    setDataFiltered,\r\n    useFooter = false,\r\n    heightWithCheck = 43,\r\n    checkHistoryCenter = false\r\n}: TableConfig) => {\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const [initial, setInitial] = useState(true);\r\n\r\n    const DefaultColumnFilter = ({\r\n        column: { id: header, setFilter: $setFilter, listSelectFilter = [], type = \"string\" },\r\n    }: any) => {\r\n        const iSF = initialStateFilter?.filter(x => x.id === header)[0];\r\n        const [value, setValue] = useState(iSF?.value.value || '');\r\n        const [anchorEl, setAnchorEl] = useState(null);\r\n        const open = Boolean(anchorEl);\r\n        const [operator, setoperator] = useState(iSF?.value.operator || \"contains\");\r\n\r\n        const setFilter = (filter: any) => {\r\n            $setFilter(filter);\r\n\r\n            dispatch(setMemoryTable({\r\n                filter: {\r\n                    [header]: {\r\n                        value: filter.value,\r\n                        operator: filter.operator,\r\n                        type: filter.type\r\n                    }\r\n                }\r\n            }));\r\n        }\r\n\r\n        const handleCloseMenu = () => {\r\n            setAnchorEl(null);\r\n        };\r\n        const handleClickItemMenu = (op: any) => {\r\n            setAnchorEl(null);\r\n            if (type === 'boolean') {\r\n                setoperator(op)\r\n                setValue(op);\r\n                setFilter({ value: op, operator: op, type });\r\n            } else if (type === \"select\") {\r\n                setValue(op);\r\n                setFilter({ value: op, operator: op, type });\r\n            } else {\r\n                if (['isempty', 'isnotempty', 'isnull', 'isnotnull'].includes(op) || !!value) {\r\n                    setFilter({ value, operator: op, type });\r\n                }\r\n                setoperator(op)\r\n            }\r\n        };\r\n        const handleClickMenu = (event: any) => {\r\n            setAnchorEl(event.currentTarget);\r\n        };\r\n        const keyPress = React.useCallback((e) => {\r\n            if (e.keyCode === 13) {\r\n                setFilter({ value, operator, type });\r\n            }\r\n            // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        }, [value, operator])\r\n        const handleDate = (date: Date) => {\r\n            if (date === null || (date instanceof Date && !isNaN(date.valueOf()))) {\r\n                setValue(date?.toISOString() || '');\r\n                setFilter({\r\n                    value: date?.toISOString().split('T')[0] || '',\r\n                    operator,\r\n                    type\r\n                })\r\n            }\r\n        }\r\n        const handleTime = (date: Date) => {\r\n            if (date === null || (date instanceof Date && !isNaN(date.valueOf()))) {\r\n                setValue(date?.toISOString() || '');\r\n                setFilter({\r\n                    value: date?.toLocaleTimeString(),\r\n                    operator,\r\n                    type\r\n                })\r\n            }\r\n        }\r\n\r\n        useEffect(() => {\r\n            if (!initialStateFilter?.filter(x => x.id === header)[0]) {\r\n                switch (type) {\r\n                    case \"number\": case \"number-centered\":\r\n                    case \"date\":\r\n                    case \"datetime-local\":\r\n                    case \"time\":\r\n                    case \"select\":\r\n                        setoperator(\"equals\");\r\n                        break;\r\n                    case \"boolean\":\r\n                        setoperator(\"all\");\r\n                        break;\r\n                    case \"string\": case \"color\":\r\n                    default:\r\n                        setoperator(\"contains\");\r\n                        break;\r\n                }\r\n            }\r\n        }, [type]);\r\n\r\n        return (\r\n            <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n                {type === 'boolean' ? (\r\n                    <BooleanOptionsMenuComponent\r\n                        value={value}\r\n                        handleClickItemMenu={handleClickItemMenu}\r\n                    />)\r\n                    : (type === \"select\" ?\r\n                        <SelectFilterTmp\r\n                            value={value}\r\n                            handleClickItemMenu={handleClickItemMenu}\r\n                            data={listSelectFilter}\r\n                        /> :\r\n                        <React.Fragment>\r\n                            {type === 'date' && DateOptionsMenuComponent(value, handleDate)}\r\n                            {type === 'time' && TimeOptionsMenuComponent(value, handleTime)}\r\n                            {!['date', 'time'].includes(type) &&\r\n                                <Input\r\n                                    // disabled={loading}\r\n                                    type={type}\r\n                                    style={{ fontSize: '15px', minWidth: '100px' }}\r\n                                    fullWidth\r\n                                    value={value}\r\n                                    onKeyDown={keyPress}\r\n                                    onChange={e => {\r\n                                        setValue(e.target.value || '');\r\n                                        if (['date'].includes(type)) {\r\n                                            setFilter({ value: e.target.value, operator, type });\r\n                                        }\r\n                                    }}\r\n                                />}\r\n                            <IconButton\r\n                                onClick={handleClickMenu}\r\n                                size=\"small\"\r\n                            >\r\n                                <MoreVertIcon\r\n                                    style={{ cursor: 'pointer' }}\r\n                                    aria-label=\"more\"\r\n                                    aria-controls=\"long-menu\"\r\n                                    aria-haspopup=\"true\"\r\n                                    color=\"action\"\r\n                                    fontSize=\"small\"\r\n                                />\r\n                            </IconButton>\r\n                            <Menu\r\n                                id=\"long-menu\"\r\n                                anchorEl={anchorEl}\r\n                                open={open}\r\n                                onClose={handleCloseMenu}\r\n                                PaperProps={{\r\n                                    style: {\r\n                                        maxHeight: 48 * 4.5,\r\n                                        width: '20ch',\r\n                                    },\r\n                                }}\r\n                            >\r\n                                {OptionsMenuComponent(type, operator, handleClickItemMenu)}\r\n                            </Menu>\r\n                        </React.Fragment>)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const filterCellValue = React.useCallback((rows, id, filterValue) => {\r\n        const { value, operator, type } = filterValue;\r\n        return rows.filter((row: any) => {\r\n            const cellvalue = row.values[id] === null || row.values[id] === undefined ? \"\" : row.values[id];\r\n            // if (cellvalue === undefined)\r\n            //     return false;\r\n\r\n            // if (!(['isempty', 'isnotempty', 'isnull', 'isnotnull'].includes(operator) || type === 'boolean') && (value || '') === '')\r\n            //     return true;\r\n\r\n            if (value === '' && !['isempty', 'isnotempty', 'isnull', 'isnotnull'].includes(operator))\r\n                return true;\r\n\r\n            switch (type) {\r\n                case \"number\": case \"number-centered\":\r\n                    switch (operator) {\r\n                        case 'greater':\r\n                            return cellvalue > Number(value);\r\n                        case 'greaterorequals':\r\n                            return cellvalue >= Number(value);\r\n                        case 'less':\r\n                            return cellvalue < Number(value);\r\n                        case 'lessorequals':\r\n                            return cellvalue <= Number(value);\r\n                        case 'isnull':\r\n                            return cellvalue === \"\";\r\n                        case 'isnotnull':\r\n                            return cellvalue !== \"\";\r\n                        case 'notequals':\r\n                            return cellvalue !== Number(value);\r\n                        case 'equals':\r\n                        default:\r\n                            return cellvalue === Number(value);\r\n                    }\r\n                case \"date\": case \"datetime-local\": case \"time\":\r\n                    switch (operator) {\r\n                        case 'after':\r\n                            return cellvalue > value;\r\n                        case 'afterequals':\r\n                            return cellvalue >= value;\r\n                        case 'before':\r\n                            return cellvalue < value;\r\n                        case 'beforeequals':\r\n                            return cellvalue <= value;\r\n                        case 'isnull':\r\n                            return cellvalue === \"\";\r\n                        case 'isnotnull':\r\n                            return cellvalue !== \"\";\r\n                        case 'notequals':\r\n                            return cellvalue !== value;\r\n                        case 'equals':\r\n                        default:\r\n                            return cellvalue === value;\r\n                    }\r\n                case \"boolean\":\r\n                    switch (operator) {\r\n                        case 'istrue':\r\n                            return typeof (cellvalue) === 'string' ? cellvalue === 'true' : cellvalue === true;\r\n                        case 'isfalse':\r\n                            return typeof (cellvalue) === 'string' ? cellvalue === 'false' : cellvalue === false;\r\n                        case 'isnull':\r\n                            return cellvalue === \"\";\r\n                        case 'isnotnull':\r\n                            return cellvalue !== \"\";\r\n                        case 'all':\r\n                        default:\r\n                            return true;\r\n                    }\r\n                case \"select\":\r\n                    switch (operator) {\r\n                        default:\r\n                            return value === '_ALL' ? true : cellvalue === value;\r\n                    }\r\n                case \"string\":\r\n                default:\r\n                    switch (operator) {\r\n                        case 'equals':\r\n                            return cellvalue === value;\r\n                        case 'notequals':\r\n                            return cellvalue !== value;\r\n                        case 'isempty':\r\n                            return cellvalue === '';\r\n                        case 'isnotempty':\r\n                            return cellvalue !== '';\r\n                        case 'isnull':\r\n                            return cellvalue == null;\r\n                        case 'isnotnull':\r\n                            return cellvalue != null;\r\n                        case 'notcontains':\r\n                            return !(cellvalue + \"\").toLowerCase().includes(value.toLowerCase());\r\n                        case 'contains':\r\n                        default:\r\n                            return (cellvalue + \"\").toLowerCase().includes(value.toLowerCase());\r\n                    }\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const defaultColumn = React.useMemo(\r\n        () => ({\r\n            // Let's set up our default Filter UI\r\n            Filter: (props: any) => DefaultColumnFilter({ ...props, data }),\r\n            filter: filterCellValue,\r\n        }),\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        []\r\n    );\r\n\r\n    const {\r\n        getTableProps,\r\n        getTableBodyProps,\r\n        headerGroups,\r\n        footerGroups,\r\n        prepareRow,\r\n        page, // Instead of using 'rows', we'll use page,\r\n        canPreviousPage,\r\n        canNextPage,\r\n        pageOptions,\r\n        pageCount,\r\n        gotoPage,\r\n        nextPage,\r\n        previousPage,\r\n        setPageSize,\r\n        globalFilteredRows,\r\n        setGlobalFilter,\r\n        state: { pageIndex, pageSize, selectedRowIds },\r\n        toggleAllRowsSelected\r\n    } = useTable({\r\n        columns,\r\n        data,\r\n        initialState: { pageSize: pageSizeDefault, selectedRowIds: initialSelectedRows || {}, filters: initialStateFilter || [] },\r\n        defaultColumn,\r\n        getRowId: (row, relativeIndex: any, parent: any) => selectionKey\r\n            ? (parent ? [row[selectionKey], parent].join('.') : row[selectionKey])\r\n            : (parent ? [parent.id, relativeIndex].join('.') : relativeIndex),\r\n    },\r\n        useFilters,\r\n        useGlobalFilter,\r\n        useSortBy,\r\n        usePagination,\r\n        useRowSelect,\r\n        hooks => {\r\n            useSelection && hooks.visibleColumns.push(columns => [\r\n                {\r\n                    id: 'selection',\r\n                    width: 80,\r\n                    Header: ({ getToggleAllPageRowsSelectedProps }: any) => (\r\n                        <div>\r\n                            <Checkbox\r\n                                color=\"primary\"\r\n                                style={{ padding: '0 24px 0 16px' }}\r\n                                {...getToggleAllPageRowsSelectedProps()}\r\n                            />\r\n                        </div>\r\n                    ),\r\n                    Cell: ({ row }: any) => (\r\n\r\n                        <div>\r\n                            {checkHistoryCenter === true ? <Checkbox\r\n                                color=\"primary\"\r\n                                style={{ padding: '0 24px 0 16px', height: 68 }}\r\n                                checked={row.isSelected}\r\n                                onChange={(e) => row.toggleRowSelected()}\r\n                            /> :\r\n                                <Checkbox\r\n                                    color=\"primary\"\r\n                                    style={{ padding: '0 24px 0 16px' }}\r\n                                    checked={row.isSelected}\r\n                                    onChange={(e) => row.toggleRowSelected()}\r\n                                />}\r\n                        </div>\r\n                    ),\r\n                    NoFilter: true,\r\n                } as any,\r\n                ...columns,\r\n            ])\r\n        }\r\n    )\r\n\r\n    useEffect(() => {\r\n        setDataFiltered && setDataFiltered(globalFilteredRows.map(x => x.original));\r\n    }, [globalFilteredRows])\r\n\r\n\r\n    useEffect(() => {\r\n        if (initialStateFilter) {\r\n            if (initial) {\r\n                gotoPage(initialPageIndex);\r\n                setInitial(false)\r\n            } else {\r\n                dispatch(setMemoryTable({\r\n                    page: 0\r\n                }));\r\n            }\r\n        }\r\n    }, [data])\r\n\r\n    useEffect(() => {\r\n        let next = true;\r\n        if (fetchData && next) {\r\n            fetchData();\r\n        }\r\n    }, [fetchData])\r\n\r\n    useEffect(() => {\r\n        setSelectedRows && setSelectedRows(selectedRowIds)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [selectedRowIds]);\r\n\r\n    useEffect(() => {\r\n        if (allRowsSelected) {\r\n            toggleAllRowsSelected(true);\r\n            setAllRowsSelected && setAllRowsSelected(false);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [allRowsSelected])\r\n\r\n    const RenderRow = React.useCallback(\r\n        ({ index, style }) => {\r\n            style = { ...style, display: 'flex', alignItems: 'flex-end', cursor: onClickRow ? 'pointer' : 'default' }\r\n            const row = page[index]\r\n            prepareRow(row);\r\n            return (\r\n                <TableRow\r\n                    {...row.getRowProps({ style })}\r\n                    hover\r\n                >\r\n                    {row.cells.map((cell, _) =>\r\n                        <TableCell\r\n                            {...cell.getCellProps({\r\n                                style: {\r\n                                    ...(cell.column.width === 'auto' ? {\r\n                                        flex: 1,\r\n                                    } : {\r\n                                        minWidth: cell.column.minWidth,\r\n                                        width: cell.column.width,\r\n                                        maxWidth: cell.column.maxWidth,\r\n                                    }),\r\n                                    overflow: 'hidden',\r\n                                    textOverflow: 'ellipsis',\r\n                                    whiteSpace: 'nowrap',\r\n                                    textAlign: cell.column.type === \"number\" ? \"right\" : (cell.column.type?.includes('centered') ? \"center\" : \"left\"),\r\n                                },\r\n                            })}\r\n                            onClick={() => cell.column.id !== \"selection\" ? onClickRow && onClickRow(row.original, cell?.column?.id) : null}\r\n                        >\r\n                            {cell.render('Cell')}\r\n                        </TableCell>\r\n                    )}\r\n                </TableRow>\r\n            )\r\n        },\r\n        [headerGroups, prepareRow, page]\r\n    )\r\n\r\n    return (\r\n        <Box width={1} >\r\n            <Box className={classes.containerHeader} justifyContent=\"space-between\" alignItems=\"center\" mb={1}>\r\n                {titlemodule ? <span className={classes.title}>\r\n                    {titlemodule}\r\n                    {helperText !== \"\" ? <Tooltip title={<div style={{ fontSize: 12 }}>{helperText}</div>} arrow placement=\"top\" >\r\n                        <InfoRoundedIcon color=\"action\" className={classes.iconHelpText} />\r\n                    </Tooltip> : \"\"}\r\n                </span> : (<div style={{ flexGrow: 1 }}>\r\n                    {ButtonsElement && <ButtonsElement />}\r\n                </div>)}\r\n                <span className={classes.containerButtons}>\r\n                    {fetchData && (\r\n                        <Tooltip title=\"Refresh\">\r\n                            <Fab\r\n                                size=\"small\"\r\n                                aria-label=\"add\"\r\n                                color=\"primary\"\r\n                                disabled={loading}\r\n                                style={{ marginLeft: '1rem' }}\r\n                                onClick={() => fetchData && fetchData({})}\r\n                            >\r\n                                <RefreshIcon />\r\n                            </Fab>\r\n                        </Tooltip>\r\n                    )}\r\n                    {(ButtonsElement && !!titlemodule) && <ButtonsElement />}\r\n                    {importCSV && (\r\n                        <>\r\n                            <input\r\n                                name=\"file\"\r\n                                accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,.csv\"\r\n                                id=\"laraigo-upload-csv-file\"\r\n                                type=\"file\"\r\n                                style={{ display: 'none' }}\r\n                                onChange={(e) => importCSV(e.target.files)}\r\n                            />\r\n                            <label htmlFor=\"laraigo-upload-csv-file\">\r\n                                <Button\r\n                                    className={classes.button}\r\n                                    variant=\"contained\"\r\n                                    component=\"span\"\r\n                                    color=\"primary\"\r\n                                    disabled={loading}\r\n                                    startIcon={<BackupIcon color=\"secondary\" />}\r\n                                    style={{ backgroundColor: \"#55BD84\" }}\r\n                                ><Trans i18nKey={langKeys.import} />\r\n                                </Button>\r\n                            </label>\r\n                            {\r\n                                handleTemplate &&\r\n                                <Button\r\n                                    className={classes.button}\r\n                                    variant=\"contained\"\r\n                                    component=\"span\"\r\n                                    color=\"primary\"\r\n                                    disabled={loading}\r\n                                    startIcon={<ListAltIcon color=\"secondary\" />}\r\n                                    onClick={handleTemplate}\r\n                                    style={{ backgroundColor: \"#55BD84\" }}\r\n                                ><Trans i18nKey={langKeys.template} />\r\n                                </Button>\r\n                            }\r\n                        </>\r\n                    )}\r\n                    {register && (\r\n                        <Button\r\n                            className={classes.button}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            disabled={loading}\r\n                            startIcon={<AddIcon color=\"secondary\" />}\r\n                            onClick={handleRegister}\r\n                            style={{ backgroundColor: \"#55BD84\" }}\r\n                        ><Trans i18nKey={registertext || langKeys.register} />\r\n                        </Button>\r\n                    )}\r\n                    {calculate && (\r\n                        <Button\r\n                            className={classes.button}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            disabled={loading}\r\n                            startIcon={<RefreshIcon color=\"secondary\" />}\r\n                            onClick={handleCalculate}\r\n                            style={{ backgroundColor: \"#55BD84\" }}\r\n                        ><Trans i18nKey={langKeys.calculate} />\r\n                        </Button>\r\n                    )}\r\n                    {download && (\r\n                        <Button\r\n                            className={classes.button}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            disabled={loading}\r\n                            onClick={() => triggerExportPersonalized ? exportPersonalized && exportPersonalized() : exportExcel(String(titlemodule || '') + \"Report\", globalFilteredRows.map(x => x.original), columns.filter((x: any) => (!x.isComponent && !x.activeOnHover)))}\r\n                            startIcon={<DownloadIcon />}\r\n                        ><Trans i18nKey={langKeys.download} />\r\n                        </Button>\r\n                    )}\r\n                </span>\r\n            </Box>\r\n            {filterGeneral && (\r\n                <Box className={classes.containerFilterGeneral}>\r\n                    <span></span>\r\n                    <div className={classes.containerSearch}>\r\n                        <SearchField\r\n                            disabled={loading}\r\n                            colorPlaceHolder='#FFF'\r\n                            handleChangeOther={setGlobalFilter}\r\n                            lazy\r\n                        />\r\n                    </div>\r\n                </Box>\r\n            )}\r\n\r\n            {HeadComponent && <HeadComponent />}\r\n\r\n            <TableContainer style={{ position: \"relative\" }}>\r\n                <Box overflow=\"auto\" >\r\n                    <Table size=\"small\" {...getTableProps()} aria-label=\"enhanced table\" aria-labelledby=\"tableTitle\">\r\n                        <TableHead style={{ display: 'table-header-group' }}>\r\n                            {headerGroups.map((headerGroup) => (\r\n                                <TableRow  {...headerGroup.getHeaderGroupProps()} style={useSelection ? { display: 'flex' } : {}}>\r\n                                    {headerGroup.headers.map((column, ii) => (\r\n                                        column.activeOnHover ?\r\n                                            <th style={{ width: \"0px\" }} key=\"header-floating\"></th> :\r\n                                            <TableCell key={ii} style={useSelection ? {\r\n                                                ...(column.width === 'auto' ? {\r\n                                                    flex: 1,\r\n                                                } : {\r\n                                                    minWidth: column.minWidth,\r\n                                                    width: column.width,\r\n                                                    maxWidth: column.maxWidth,\r\n                                                })\r\n                                            } : {}}>\r\n                                                {column.isComponent ?\r\n                                                    column.render('Header') :\r\n                                                    (<>\r\n                                                        <div className={classes.containerHeaderColumn}>\r\n                                                            <Box\r\n\r\n                                                                {...column.getHeaderProps(column.getSortByToggleProps({ title: 'ordenar' }))}\r\n                                                                style={{\r\n                                                                    whiteSpace: 'nowrap',\r\n                                                                    wordWrap: 'break-word',\r\n                                                                    display: 'flex',\r\n                                                                    cursor: 'pointer',\r\n                                                                    alignItems: 'center',\r\n                                                                }}\r\n                                                            >\r\n                                                                {column.render('Header')}\r\n                                                                {column.isSorted && (\r\n                                                                    column.isSortedDesc ?\r\n                                                                        <ArrowDownwardIcon className={classes.iconOrder} color=\"action\" />\r\n                                                                        :\r\n                                                                        <ArrowUpwardIcon className={classes.iconOrder} color=\"action\" />\r\n                                                                )}\r\n                                                            </Box>\r\n                                                            {!!column.helpText && (\r\n                                                                <Tooltip title={<div style={{ fontSize: 12 }}>{column.helpText}</div>} arrow placement=\"top\" >\r\n                                                                    <InfoRoundedIcon color=\"action\" className={classes.iconHelpText} />\r\n                                                                </Tooltip>\r\n                                                            )}\r\n                                                        </div>\r\n                                                        <div>{!column.NoFilter && column.render('Filter')}</div>\r\n                                                    </>)\r\n                                                }\r\n                                            </TableCell>\r\n                                    ))}\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableHead>\r\n                        <TableBody\r\n                            {...getTableBodyProps()}\r\n                            style={{ backgroundColor: 'white' }}\r\n                        >\r\n                            {loading ?\r\n                                <LoadingSkeleton columns={headerGroups[0].headers.length} /> :\r\n                                useSelection ?\r\n                                    <FixedSizeList\r\n                                        style={{ overflowX: 'hidden' }}\r\n                                        direction=\"vertical\"\r\n                                        width=\"auto\"\r\n                                        height={window.innerHeight - 470}\r\n                                        itemCount={page.length}\r\n                                        itemSize={heightWithCheck}\r\n                                    >\r\n                                        {RenderRow}\r\n                                    </FixedSizeList>\r\n                                    :\r\n                                    page.map(row => {\r\n                                        prepareRow(row);\r\n                                        return (\r\n                                            <TableRow\r\n                                                {...row.getRowProps()}\r\n                                                hover\r\n                                                style={{ cursor: onClickRow ? 'pointer' : 'default' }}\r\n                                            >\r\n                                                {row.cells.map((cell, i) =>\r\n                                                    <TableCell\r\n                                                        {...cell.getCellProps({\r\n                                                            style: {\r\n                                                                minWidth: cell.column.minWidth,\r\n                                                                width: cell.column.width,\r\n                                                                maxWidth: cell.column.maxWidth,\r\n                                                                overflow: 'hidden',\r\n                                                                textOverflow: 'ellipsis',\r\n                                                                whiteSpace: 'nowrap',\r\n                                                                ...(toolsFooter ? {} : { padding: '0px' }),\r\n                                                                textAlign: cell.column.type === \"number\" ? \"right\" : (cell.column.type?.includes('centered') ? \"center\" : \"left\"),\r\n                                                            },\r\n                                                        })}\r\n                                                        onClick={() => cell.column.id !== \"selection\" ? onClickRow && onClickRow(row.original, cell?.column?.id) : null}\r\n                                                    >\r\n                                                        {cell.render('Cell')}\r\n                                                    </TableCell>\r\n                                                )}\r\n                                            </TableRow>\r\n                                        )\r\n                                    })\r\n                            }\r\n                        </TableBody>\r\n                        {useFooter && <TableFooter>\r\n                            {footerGroups.map(group => (\r\n                                <TableRow {...group.getFooterGroupProps()}>\r\n                                    {group.headers.map(column => (\r\n                                        <TableCell {...column.getFooterProps({\r\n                                            style: {\r\n                                                fontWeight: \"bold\",\r\n                                                color: \"black\",\r\n                                                textAlign: column.type === \"number\" ? \"right\" : (column.type?.includes('centered') ? \"center\" : \"left\"),\r\n                                            }\r\n                                        })}>\r\n                                            {column.render('Footer')}\r\n                                        </TableCell>\r\n                                    ))}\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableFooter>}\r\n                    </Table>\r\n                </Box>\r\n                {toolsFooter && (\r\n                    <Box className={classes.footerTable}>\r\n                        <Box>\r\n                            <IconButton\r\n                                onClick={() => {\r\n                                    gotoPage(0);\r\n                                    dispatch(setMemoryTable({\r\n                                        page: 0\r\n                                    }));\r\n                                }}\r\n                                disabled={!canPreviousPage || loading}\r\n                            >\r\n                                <FirstPage />\r\n                            </IconButton>\r\n                            <IconButton\r\n                                onClick={() => {\r\n                                    previousPage();\r\n                                    dispatch(setMemoryTable({\r\n                                        page: pageIndex - 1\r\n                                    }));\r\n                                }}\r\n                                disabled={!canPreviousPage || loading}\r\n                            >\r\n                                <NavigateBefore />\r\n                            </IconButton>\r\n                            <IconButton\r\n                                onClick={() => {\r\n                                    nextPage();\r\n                                    dispatch(setMemoryTable({\r\n                                        page: pageIndex + 1\r\n                                    }));\r\n                                }}\r\n                                disabled={!canNextPage || loading}\r\n                            >\r\n                                <NavigateNext />\r\n                            </IconButton>\r\n                            <IconButton\r\n                                onClick={() => {\r\n                                    gotoPage(pageCount - 1);\r\n                                    dispatch(setMemoryTable({\r\n                                        page: pageCount - 1\r\n                                    }));\r\n                                }}\r\n                                disabled={!canNextPage || loading}\r\n                            >\r\n                                <LastPage />\r\n                            </IconButton>\r\n                            <Box component=\"span\" fontSize={14}>\r\n                                <Trans\r\n                                    i18nKey={langKeys.tablePageOf}\r\n                                    values={{ currentPage: (pageOptions.length === 0 ? 0 : pageIndex + 1), totalPages: pageOptions.length }}\r\n                                    components={[<Box fontWeight=\"700\" component=\"span\"></Box>, <Box fontWeight=\"700\" component=\"span\"></Box>]}\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                        <Box>\r\n                            <Trans\r\n                                i18nKey={(globalFilteredRows || []).length === 100000 ? langKeys.tableShowingRecordOfMore : langKeys.tableShowingRecordOf}\r\n                                values={{ itemCount: page.length, totalItems: globalFilteredRows.length }}\r\n                            />\r\n                        </Box>\r\n                        <Box>\r\n                            <Select\r\n                                disableUnderline\r\n                                style={{ display: 'inline-flex' }}\r\n                                value={pageSize}\r\n                                disabled={loading}\r\n                                onChange={e => {\r\n                                    setPageSize(Number(e.target.value));\r\n                                    dispatch(setMemoryTable({\r\n                                        pageSize: Number(e.target.value)\r\n                                    }));\r\n                                }}\r\n                            >\r\n                                {[5, 10, 20, 50, 100].map(pageSize => (\r\n                                    <MenuItem key={pageSize} value={pageSize}>\r\n                                        {pageSize}\r\n                                    </MenuItem >\r\n                                ))}\r\n                            </Select>\r\n                            <Box fontSize={14} display=\"inline\" style={{ marginRight: '1rem' }}>\r\n                                <Trans i18nKey={langKeys.recordPerPage} count={pageSize} />\r\n                            </Box>\r\n                        </Box>\r\n                    </Box>\r\n                )}\r\n            </TableContainer>\r\n        </Box>\r\n    )\r\n});\r\n\r\nexport default TableZyx;\r\n\r\nconst LoadingSkeleton: React.FC<{ columns: number }> = ({ columns }) => {\r\n    const items: React.ReactNode[] = [];\r\n    for (let i = 0; i < columns; i++) {\r\n        items.push(<TableCell key={`table-simple-skeleton-${i}`}><Skeleton /></TableCell>);\r\n    }\r\n    return (\r\n        <>\r\n            <TableRow key=\"1aux1\">\r\n                {items}\r\n            </TableRow>\r\n            <TableRow key=\"2aux2\">\r\n                {items}\r\n            </TableRow>\r\n        </>\r\n    );\r\n};","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n}), 'Search');\n\nexports.default = _default;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { FC, ReactElement, Fragment, useEffect, useState } from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { langKeys } from 'lang/keys';\r\nimport { useSelector } from 'hooks';\r\nimport { Dictionary } from \"@types\";\r\nimport { getDateCleaned } from 'common/helpers';\r\nimport TableZyx from 'components/fields/table-simple';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Range } from 'react-date-range';\r\nimport { CalendarIcon } from 'icons';\r\nimport { DateRangePicker } from 'components';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport { XAxis, YAxis, ResponsiveContainer, Tooltip as ChartTooltip, BarChart, Bar, PieChart, Pie, Cell, CartesianGrid, LabelList } from 'recharts';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        width: '100%'\r\n    },\r\n    containerDetails: {\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    media: {\r\n        objectFit: \"contain\"\r\n    },\r\n    containerSearch: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        gap: theme.spacing(1),\r\n        alignItems: 'center',\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: '50%',\r\n        },\r\n    },\r\n    containerFilter: {\r\n        width: '100%',\r\n        marginBottom: theme.spacing(2),\r\n        display: 'flex',\r\n        gap: 16,\r\n        flexWrap: 'wrap'\r\n    },\r\n    filterComponent: {\r\n        minWidth: '220px',\r\n        maxWidth: '260px'\r\n    },\r\n    containerFilterGeneral: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        backgroundColor: '#FFF',\r\n        padding: theme.spacing(1),\r\n    },\r\n    title: {\r\n        fontSize: '22px',\r\n        fontWeight: 'bold',\r\n        color: theme.palette.text.primary,\r\n    },\r\n    containerHeader: {\r\n        display: 'block',\r\n        marginBottom: 0,\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'flex',\r\n        },\r\n    },\r\n    mb2: {\r\n        marginBottom: theme.spacing(4),\r\n    },\r\n    button: {\r\n        padding: 12,\r\n        fontWeight: 500,\r\n        fontSize: '14px',\r\n        textTransform: 'initial'\r\n    },\r\n    containerHeaderItem: {\r\n        backgroundColor: '#FFF',\r\n        padding: 8,\r\n        display: 'block',\r\n        flexWrap: 'wrap',\r\n        gap: 8,\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'flex',\r\n        }\r\n    },\r\n}));\r\n\r\nvar randomColor = () => Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');\r\ninterface IGraphic {\r\n    graphicType: string;\r\n    column: string;\r\n    FiltersElement?: ReactElement;\r\n    openModal: boolean;\r\n    setOpenModal: (value: boolean) => void;\r\n    setView: (value: string) => void;\r\n    daterange: any;\r\n    handlerSearchGraphic: (value: any, value1: any) => void;\r\n    row?: Dictionary;\r\n    withFilters?: boolean;\r\n    withButtons?: boolean;\r\n    data?: Dictionary[];\r\n    loading?: boolean;\r\n    columnDesc?: string;\r\n}\r\n\r\nconst RADIAN = Math.PI / 180;\r\nexport const RenderCustomizedLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent, summary, ...rest }: Dictionary) => {\r\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n    return (\r\n        <text x={x} y={y} fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\">\r\n            {summary}\r\n        </text>\r\n    );\r\n};\r\n\r\nconst TableResume: FC<{ row?: Dictionary; column: string; graphicType: string; data: Dictionary[]; columnDesc?: string }> = ({ row, column, data, graphicType, columnDesc }) => {\r\n    const { t } = useTranslation();\r\n\r\n    const columns = React.useMemo(\r\n        () => [\r\n            {\r\n                Header: !!columnDesc ? columnDesc : t('report_' + row?.origin + '_' + column),\r\n                accessor: 'columnname',\r\n                NoFilter: true,\r\n                Cell: (props: any) => {\r\n                    const row = props.cell.row.original;\r\n\r\n                    if (graphicType === \"BAR\")\r\n                        return row?.columnname;\r\n                    return (\r\n                        <div style={{ display: 'flex', gap: 4 }}>\r\n                            <div style={{ width: 15, height: 15, backgroundColor: row.color }}></div>\r\n                            {row?.columnname}\r\n                        </div>\r\n                    )\r\n                }\r\n            },\r\n            {\r\n                Header: t(langKeys.quantity),\r\n                accessor: 'summary',\r\n                NoFilter: true,\r\n                type: 'number'\r\n            },\r\n            {\r\n                Header: t(langKeys.percentage),\r\n                accessor: 'percentage',\r\n                NoFilter: true,\r\n                type: 'number',\r\n                Cell: (props: any) => {\r\n                    const row = props.cell.row.original;\r\n                    return row.percentage + \"%\";\r\n                }\r\n            },\r\n        ],\r\n        []\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <TableZyx\r\n                columns={columns}\r\n                data={data}\r\n                download={false}\r\n                pageSizeDefault={100}\r\n                filterGeneral={false}\r\n                toolsFooter={false}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Graphic: FC<IGraphic> = ({ graphicType, column, setOpenModal, setView, FiltersElement, row, daterange, handlerSearchGraphic, withFilters = true, withButtons = true, data, loading, columnDesc }) => {\r\n    const classes = useStyles();\r\n    const { t } = useTranslation();\r\n    const [openDateRangeModal, setOpenDateRangeModal] = useState(false);\r\n    const [dataGraphic, setDataGraphic] = useState<Dictionary[]>([])\r\n\r\n    const [dateRange, setdateRange] = useState<Range>({\r\n        startDate: new Date(`${daterange.startDate} 10:00:00`),\r\n        endDate: new Date(`${daterange.endDate} 10:00:00`),\r\n        key: 'selection'\r\n    });\r\n    const mainGraphicRes = useSelector(state => state.main.mainGraphic);\r\n    useEffect(() => {\r\n        if (data) {\r\n            if (!loading) {\r\n                const objectItems = data.reduce((acc, item) => ({\r\n                    ...acc,\r\n                    [item[column] || \"\"]: (acc[item[column] || \"\"] || 0) + 1\r\n                }), {})\r\n    \r\n                const dataReady = Object.entries(objectItems).map(([key, value]) => ({\r\n                    columnname: key,\r\n                    summary: value,\r\n                }));\r\n    \r\n                const total = dataReady.reduce((acc, item) => acc + parseInt(item.summary), 0)\r\n                setDataGraphic(dataReady.sort((a, b) => parseInt(a.summary) < parseInt(b.summary) ? 1 : -1).map(x => ({\r\n                    ...x,\r\n                    columnname: x.columnname?.startsWith('report_') ? t((langKeys as any)[x.columnname]) : (x.columnname === '' ? `(${t(langKeys.in_white)})` : x.columnname),\r\n                    summary: parseInt(x.summary),\r\n                    percentage: parseFloat(((parseInt(x.summary) / total) * 100).toFixed(2)),\r\n                    color: `#${randomColor()}`\r\n                })));\r\n            }\r\n        } else {\r\n            if (!mainGraphicRes.loading && !mainGraphicRes.error) {\r\n                const total = mainGraphicRes.data.reduce((acc, item) => acc + parseInt(item.summary), 0)\r\n                setDataGraphic(mainGraphicRes.data.sort((a, b) => parseInt(a.summary) < parseInt(b.summary) ? 1 : -1).map(x => ({\r\n                    ...x,\r\n                    columnname: x.columnname?.startsWith('report_') ? t((langKeys as any)[x.columnname]) : (x.columnname === '' ? `(${t(langKeys.in_white)})` : x.columnname),\r\n                    summary: parseInt(x.summary),\r\n                    percentage: parseFloat(((parseInt(x.summary) / total) * 100).toFixed(2)),\r\n                    color: `#${randomColor()}`\r\n                })));\r\n            }\r\n        }\r\n    }, [mainGraphicRes, data, loading])\r\n\r\n    return (\r\n        <>\r\n            {(withFilters || withButtons) && (\r\n                <Box className={classes.containerHeaderItem} justifyContent=\"space-between\" alignItems=\"center\" >\r\n                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>\r\n                        {withFilters &&\r\n                            (\r\n                                <>\r\n                                    <DateRangePicker\r\n                                        open={openDateRangeModal}\r\n                                        setOpen={setOpenDateRangeModal}\r\n                                        range={dateRange}\r\n                                        onSelect={setdateRange}\r\n                                    >\r\n                                        <Button\r\n                                            disabled={mainGraphicRes.loading}\r\n                                            style={{ border: '1px solid #bfbfc0', borderRadius: 4, color: 'rgb(143, 146, 161)' }}\r\n                                            startIcon={<CalendarIcon />}\r\n                                            onClick={() => setOpenDateRangeModal(!openDateRangeModal)}\r\n                                        >\r\n                                            {getDateCleaned(dateRange.startDate!) + \" - \" + getDateCleaned(dateRange.endDate!)}\r\n                                        </Button>\r\n                                    </DateRangePicker>\r\n                                    {FiltersElement && FiltersElement}\r\n                                    <Button\r\n                                        disabled={mainGraphicRes.loading}\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        startIcon={<SearchIcon style={{ color: 'white' }} />}\r\n                                        style={{ backgroundColor: '#55BD84', width: 120 }}\r\n                                        onClick={() => handlerSearchGraphic(dateRange, column)}\r\n                                    >\r\n                                        {t(langKeys.search)}\r\n                                    </Button>\r\n                                </>\r\n\r\n                            )}\r\n                    </div>\r\n                    <div style={{ display: 'flex', gap: 8 }}>\r\n                        {withButtons && (\r\n                            <>\r\n                                <Button\r\n                                    className={classes.button}\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={() => setOpenModal(true)}\r\n                                    startIcon={<SettingsIcon />}\r\n                                >\r\n                                    {t(langKeys.configuration)}\r\n                                </Button>\r\n                                <Button\r\n                                    className={classes.button}\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={() => setView('GRID')}\r\n                                    startIcon={<ListIcon />}\r\n                                >\r\n                                    {t(langKeys.grid_view)}\r\n                                </Button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </Box>\r\n            )}\r\n            {!data && (\r\n                <div style={{ fontWeight: 500, padding: 16 }}>\r\n                    {t(langKeys.graphic_report_of, { report: t('report_' + row?.origin), column: t('report_' + row?.origin + '_' + column) })}\r\n                </div>\r\n            )}\r\n            {(loading || mainGraphicRes.loading) ? (\r\n                <div style={{ flex: 1, height: '400px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                    <CircularProgress />\r\n                </div>\r\n            ) : (graphicType === \"BAR\" ? (\r\n                <div style={{ display: 'flex' }}>\r\n                    <div style={{ flex: '0 0 70%', height: 500 }}>\r\n                        <ResponsiveContainer aspect={4.0 / 2}>\r\n                            <BarChart\r\n                                data={dataGraphic}\r\n                                margin={{\r\n                                    top: 20,\r\n                                    right: 30,\r\n                                    left: 20,\r\n                                    bottom: 5,\r\n                                }}\r\n                            >\r\n                                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                                <XAxis dataKey=\"columnname\" style={{ fontSize: \"0.8em\" }} angle={315} interval={0} textAnchor=\"end\" height={160} dy={5} dx={-5} />\r\n\r\n                                <YAxis />\r\n                                <ChartTooltip formatter={(value:any, name:any)=> [value,t(name)]} />\r\n                                <Bar dataKey=\"summary\" fill=\"#8884d8\" textAnchor=\"end\" stackId=\"a\" type=\"monotone\" >\r\n                                    <LabelList dataKey=\"summary\" position=\"top\" />\r\n                                </Bar>\r\n                            </BarChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                    <div style={{ overflowX: 'auto' }}>\r\n                        <TableResume\r\n                            row={row}\r\n                            column={column}\r\n                            graphicType={graphicType}\r\n                            data={dataGraphic}\r\n                            columnDesc={columnDesc}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div style={{ display: 'flex' }}>\r\n                    <div style={{ flex: '0 0 65%', height: 500 }}>\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <PieChart>\r\n                                <ChartTooltip />\r\n                                <Pie\r\n                                    data={dataGraphic}\r\n                                    dataKey=\"summary\"\r\n                                    labelLine={false}\r\n                                    label={RenderCustomizedLabel}\r\n                                    nameKey=\"columnname\"\r\n                                    cx=\"50%\"\r\n                                    cy=\"50%\"\r\n                                    innerRadius={40}\r\n                                    fill=\"#8884d8\"\r\n                                >\r\n                                    {dataGraphic.map((item, i) => (\r\n                                        <Cell\r\n                                            key={item.columnname}\r\n                                            fill={item.color}\r\n                                        />\r\n                                    ))}\r\n                                </Pie>\r\n                            </PieChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                    <div style={{ overflowX: 'auto' }}>\r\n                        <TableResume\r\n                            row={row}\r\n                            column={column}\r\n                            graphicType={graphicType}\r\n                            columnDesc={columnDesc}\r\n                            data={dataGraphic}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default Graphic;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\"\n}), 'CloudDownload');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\"\n}), 'List');\n\nexports.default = _default;","import { DashboardTemplate, IActionCall, IRequestBody } from \"@types\";\r\nimport { DashboardService, CommonService } from \"network\";\r\nimport actionTypes from \"./actionTypes\";\r\n\r\ninterface GetDashboardParams {\r\n    dashboardtemplateid: number | string;\r\n    startdate: string;\r\n    enddate: string;\r\n    offset: number;\r\n}\r\n\r\nexport const getDashboard = (parameters: GetDashboardParams): IActionCall => ({\r\n    callAPI: () => DashboardService.getDashboard({ parameters }),\r\n    types: {\r\n        loading: actionTypes.GET_DASHBOARD,\r\n        success: actionTypes.GET_DASHBOARD_SUCCESS,\r\n        failure: actionTypes.GET_DASHBOARD_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetGetDashboard = (): IActionCall => ({type: actionTypes.GET_DASHBOARD_RESET});\r\n\r\nexport const getDashboardTemplate = (body: IRequestBody): IActionCall => ({\r\n    callAPI: () => CommonService.main(body),\r\n    types: {\r\n        loading: actionTypes.GET_DASHBOARDTEMPLATE,\r\n        success: actionTypes.GET_DASHBOARDTEMPLATE_SUCCESS,\r\n        failure: actionTypes.GET_DASHBOARDTEMPLATE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const setDashboardTemplate = (payload: DashboardTemplate): IActionCall => ({\r\n    payload,\r\n    type: actionTypes.SET_DASHBOARDTEMPLATE,\r\n});\r\n\r\nexport const resetGetDashboardTemplate = (): IActionCall => ({type: actionTypes.GET_DASHBOARDTEMPLATE_RESET});\r\n\r\nexport const saveDashboardTemplate = (body: IRequestBody): IActionCall => ({\r\n    callAPI: () => CommonService.main(body),\r\n    types: {\r\n        loading: actionTypes.SAVE_DASHBOARDTEMPLATE,\r\n        success: actionTypes.SAVE_DASHBOARDTEMPLATE_SUCCESS,\r\n        failure: actionTypes.SAVE_DASHBOARDTEMPLATE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetSaveDashboardTemplate = (): IActionCall => ({type: actionTypes.SAVE_DASHBOARDTEMPLATE_RESET});\r\n\r\nexport const deleteDashboardTemplate = (body: IRequestBody): IActionCall => ({\r\n    callAPI: () => CommonService.main(body),\r\n    types: {\r\n        loading: actionTypes.DELETE_DASHBOARDTEMPLATE,\r\n        success: actionTypes.DELETE_DASHBOARDTEMPLATE_SUCCESS,\r\n        failure: actionTypes.DELETE_DASHBOARDTEMPLATE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetDeleteDashboardTemplate = (): IActionCall => ({type: actionTypes.DELETE_DASHBOARDTEMPLATE_RESET});\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');\n\nexports.default = _default;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport _isEqual from \"lodash/isEqual\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * @fileOverview Line\n */\nimport React, { PureComponent } from 'react';\nimport Animate from 'react-smooth';\nimport classNames from 'classnames';\nimport { Curve } from '../shape/Curve';\nimport { Dot } from '../shape/Dot';\nimport { Layer } from '../container/Layer';\nimport { LabelList } from '../component/LabelList';\nimport { ErrorBar } from './ErrorBar';\nimport { uniqueId, interpolateNumber } from '../util/DataUtils';\nimport { findAllByType } from '../util/ReactUtils';\nimport { Global } from '../util/Global';\nimport { getCateCoordinateOfLine, getValueByDataKey } from '../util/ChartUtils';\nimport { filterProps } from '../util/types';\nexport var Line = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Line, _PureComponent);\n\n  var _super = _createSuper(Line);\n\n  function Line() {\n    var _this;\n\n    _classCallCheck(this, Line);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.mainCurve = void 0;\n    _this.state = {\n      isAnimationFinished: true,\n      totalLength: 0\n    };\n\n    _this.getStrokeDasharray = function (length, totalLength, lines) {\n      var lineLength = lines.reduce(function (pre, next) {\n        return pre + next;\n      });\n      var count = Math.floor(length / lineLength);\n      var remainLength = length % lineLength;\n      var restLength = totalLength - length;\n      var remainLines = [];\n\n      for (var i = 0, sum = 0;; sum += lines[i], ++i) {\n        if (sum + lines[i] > remainLength) {\n          remainLines = [].concat(_toConsumableArray(lines.slice(0, i)), [remainLength - sum]);\n          break;\n        }\n      }\n\n      var emptyLines = remainLines.length % 2 === 0 ? [0, restLength] : [restLength];\n      return [].concat(_toConsumableArray(Line.repeat(lines, count)), _toConsumableArray(remainLines), emptyLines).map(function (line) {\n        return \"\".concat(line, \"px\");\n      }).join(', ');\n    };\n\n    _this.id = uniqueId('recharts-line-');\n\n    _this.pathRef = function (node) {\n      _this.mainCurve = node;\n    };\n\n    _this.handleAnimationEnd = function () {\n      _this.setState({\n        isAnimationFinished: true\n      });\n\n      if (_this.props.onAnimationEnd) {\n        _this.props.onAnimationEnd();\n      }\n    };\n\n    _this.handleAnimationStart = function () {\n      _this.setState({\n        isAnimationFinished: false\n      });\n\n      if (_this.props.onAnimationStart) {\n        _this.props.onAnimationStart();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Line, [{\n    key: \"componentDidMount\",\n    value:\n    /* eslint-disable  react/no-did-mount-set-state */\n    function componentDidMount() {\n      if (!this.props.isAnimationActive) {\n        return;\n      }\n\n      var totalLength = this.getTotalLength();\n      this.setState({\n        totalLength: totalLength\n      });\n    }\n  }, {\n    key: \"getTotalLength\",\n    value: function getTotalLength() {\n      var curveDom = this.mainCurve;\n\n      try {\n        return curveDom && curveDom.getTotalLength && curveDom.getTotalLength() || 0;\n      } catch (err) {\n        return 0;\n      }\n    }\n  }, {\n    key: \"renderErrorBar\",\n    value: function renderErrorBar() {\n      if (this.props.isAnimationActive && !this.state.isAnimationFinished) {\n        return null;\n      }\n\n      var _this$props = this.props,\n          points = _this$props.points,\n          xAxis = _this$props.xAxis,\n          yAxis = _this$props.yAxis,\n          layout = _this$props.layout,\n          children = _this$props.children;\n      var errorBarItems = findAllByType(children, ErrorBar.displayName);\n\n      if (!errorBarItems) {\n        return null;\n      }\n\n      function dataPointFormatter(dataPoint, dataKey) {\n        return {\n          x: dataPoint.x,\n          y: dataPoint.y,\n          value: dataPoint.value,\n          errorVal: getValueByDataKey(dataPoint.payload, dataKey)\n        };\n      }\n\n      return errorBarItems.map(function (item, i) {\n        return /*#__PURE__*/React.cloneElement(item, {\n          // eslint-disable-next-line react/no-array-index-key\n          key: \"bar-\".concat(i),\n          data: points,\n          xAxis: xAxis,\n          yAxis: yAxis,\n          layout: layout,\n          dataPointFormatter: dataPointFormatter\n        });\n      });\n    }\n  }, {\n    key: \"renderDots\",\n    value: function renderDots(needClip, clipPathId) {\n      var isAnimationActive = this.props.isAnimationActive;\n\n      if (isAnimationActive && !this.state.isAnimationFinished) {\n        return null;\n      }\n\n      var _this$props2 = this.props,\n          dot = _this$props2.dot,\n          points = _this$props2.points,\n          dataKey = _this$props2.dataKey;\n      var lineProps = filterProps(this.props);\n      var customDotProps = filterProps(dot, true);\n      var dots = points.map(function (entry, i) {\n        var dotProps = _objectSpread(_objectSpread(_objectSpread({\n          key: \"dot-\".concat(i),\n          r: 3\n        }, lineProps), customDotProps), {}, {\n          value: entry.value,\n          dataKey: dataKey,\n          cx: entry.x,\n          cy: entry.y,\n          index: i,\n          payload: entry.payload\n        });\n\n        return Line.renderDotItem(dot, dotProps);\n      });\n      var dotsProps = {\n        clipPath: needClip ? \"url(#clipPath-\".concat(clipPathId, \")\") : null\n      };\n      return /*#__PURE__*/React.createElement(Layer, _extends({\n        className: \"recharts-line-dots\",\n        key: \"dots\"\n      }, dotsProps), dots);\n    }\n  }, {\n    key: \"renderCurveStatically\",\n    value: function renderCurveStatically(points, needClip, clipPathId, props) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      var _this$props3 = this.props,\n          type = _this$props3.type,\n          layout = _this$props3.layout,\n          connectNulls = _this$props3.connectNulls,\n          ref = _this$props3.ref,\n          others = _objectWithoutProperties(_this$props3, [\"type\", \"layout\", \"connectNulls\", \"ref\"]);\n\n      var curveProps = _objectSpread(_objectSpread(_objectSpread({}, filterProps(others, true)), {}, {\n        fill: 'none',\n        className: 'recharts-line-curve',\n        clipPath: needClip ? \"url(#clipPath-\".concat(clipPathId, \")\") : null,\n        points: points\n      }, props), {}, {\n        type: type,\n        layout: layout,\n        connectNulls: connectNulls\n      });\n\n      return /*#__PURE__*/React.createElement(Curve, _extends({}, curveProps, {\n        pathRef: this.pathRef\n      }));\n    }\n  }, {\n    key: \"renderCurveWithAnimation\",\n    value: function renderCurveWithAnimation(needClip, clipPathId) {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          points = _this$props4.points,\n          strokeDasharray = _this$props4.strokeDasharray,\n          isAnimationActive = _this$props4.isAnimationActive,\n          animationBegin = _this$props4.animationBegin,\n          animationDuration = _this$props4.animationDuration,\n          animationEasing = _this$props4.animationEasing,\n          animationId = _this$props4.animationId,\n          animateNewValues = _this$props4.animateNewValues,\n          width = _this$props4.width,\n          height = _this$props4.height;\n      var _this$state = this.state,\n          prevPoints = _this$state.prevPoints,\n          totalLength = _this$state.totalLength;\n      return /*#__PURE__*/React.createElement(Animate, {\n        begin: animationBegin,\n        duration: animationDuration,\n        isActive: isAnimationActive,\n        easing: animationEasing,\n        from: {\n          t: 0\n        },\n        to: {\n          t: 1\n        },\n        key: \"line-\".concat(animationId),\n        onAnimationEnd: this.handleAnimationEnd,\n        onAnimationStart: this.handleAnimationStart\n      }, function (_ref) {\n        var t = _ref.t;\n\n        if (prevPoints) {\n          var prevPointsDiffFactor = prevPoints.length / points.length;\n          var stepData = points.map(function (entry, index) {\n            var prevPointIndex = Math.floor(index * prevPointsDiffFactor);\n\n            if (prevPoints[prevPointIndex]) {\n              var prev = prevPoints[prevPointIndex];\n              var interpolatorX = interpolateNumber(prev.x, entry.x);\n              var interpolatorY = interpolateNumber(prev.y, entry.y);\n              return _objectSpread(_objectSpread({}, entry), {}, {\n                x: interpolatorX(t),\n                y: interpolatorY(t)\n              });\n            } // magic number of faking previous x and y location\n\n\n            if (animateNewValues) {\n              var _interpolatorX = interpolateNumber(width * 2, entry.x);\n\n              var _interpolatorY = interpolateNumber(height / 2, entry.y);\n\n              return _objectSpread(_objectSpread({}, entry), {}, {\n                x: _interpolatorX(t),\n                y: _interpolatorY(t)\n              });\n            }\n\n            return _objectSpread(_objectSpread({}, entry), {}, {\n              x: entry.x,\n              y: entry.y\n            });\n          });\n          return _this2.renderCurveStatically(stepData, needClip, clipPathId);\n        }\n\n        var interpolator = interpolateNumber(0, totalLength);\n        var curLength = interpolator(t);\n        var currentStrokeDasharray;\n\n        if (strokeDasharray) {\n          var lines = \"\".concat(strokeDasharray).split(/[,\\s]+/gim).map(function (num) {\n            return parseFloat(num);\n          });\n          currentStrokeDasharray = _this2.getStrokeDasharray(curLength, totalLength, lines);\n        } else {\n          currentStrokeDasharray = \"\".concat(curLength, \"px \").concat(totalLength - curLength, \"px\");\n        }\n\n        return _this2.renderCurveStatically(points, needClip, clipPathId, {\n          strokeDasharray: currentStrokeDasharray\n        });\n      });\n    }\n  }, {\n    key: \"renderCurve\",\n    value: function renderCurve(needClip, clipPathId) {\n      var _this$props5 = this.props,\n          points = _this$props5.points,\n          isAnimationActive = _this$props5.isAnimationActive;\n      var _this$state2 = this.state,\n          prevPoints = _this$state2.prevPoints,\n          totalLength = _this$state2.totalLength;\n\n      if (isAnimationActive && points && points.length && (!prevPoints && totalLength > 0 || !_isEqual(prevPoints, points))) {\n        return this.renderCurveWithAnimation(needClip, clipPathId);\n      }\n\n      return this.renderCurveStatically(points, needClip, clipPathId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props6 = this.props,\n          hide = _this$props6.hide,\n          dot = _this$props6.dot,\n          points = _this$props6.points,\n          className = _this$props6.className,\n          xAxis = _this$props6.xAxis,\n          yAxis = _this$props6.yAxis,\n          top = _this$props6.top,\n          left = _this$props6.left,\n          width = _this$props6.width,\n          height = _this$props6.height,\n          isAnimationActive = _this$props6.isAnimationActive,\n          id = _this$props6.id;\n\n      if (hide || !points || !points.length) {\n        return null;\n      }\n\n      var isAnimationFinished = this.state.isAnimationFinished;\n      var hasSinglePoint = points.length === 1;\n      var layerClass = classNames('recharts-line', className);\n      var needClip = xAxis && xAxis.allowDataOverflow || yAxis && yAxis.allowDataOverflow;\n      var clipPathId = _isNil(id) ? this.id : id;\n      return /*#__PURE__*/React.createElement(Layer, {\n        className: layerClass\n      }, needClip ? /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n        id: \"clipPath-\".concat(clipPathId)\n      }, /*#__PURE__*/React.createElement(\"rect\", {\n        x: left,\n        y: top,\n        width: width,\n        height: height\n      }))) : null, !hasSinglePoint && this.renderCurve(needClip, clipPathId), this.renderErrorBar(), (hasSinglePoint || dot) && this.renderDots(needClip, clipPathId), (!isAnimationActive || isAnimationFinished) && LabelList.renderCallByParent(this.props, points));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.animationId !== prevState.prevAnimationId) {\n        return {\n          prevAnimationId: nextProps.animationId,\n          curPoints: nextProps.points,\n          prevPoints: prevState.curPoints\n        };\n      }\n\n      if (nextProps.points !== prevState.curPoints) {\n        return {\n          curPoints: nextProps.points\n        };\n      }\n\n      return null;\n    }\n  }, {\n    key: \"repeat\",\n    value: function repeat(lines, count) {\n      var linesUnit = lines.length % 2 !== 0 ? [].concat(_toConsumableArray(lines), [0]) : lines;\n      var result = [];\n\n      for (var i = 0; i < count; ++i) {\n        result = [].concat(_toConsumableArray(result), _toConsumableArray(linesUnit));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"renderDotItem\",\n    value: function renderDotItem(option, props) {\n      var dotItem;\n\n      if ( /*#__PURE__*/React.isValidElement(option)) {\n        dotItem = /*#__PURE__*/React.cloneElement(option, props);\n      } else if (_isFunction(option)) {\n        dotItem = option(props);\n      } else {\n        var className = classNames('recharts-line-dot', option ? option.className : '');\n        dotItem = /*#__PURE__*/React.createElement(Dot, _extends({}, props, {\n          className: className\n        }));\n      }\n\n      return dotItem;\n    }\n  }]);\n\n  return Line;\n}(PureComponent);\nLine.displayName = 'Line';\nLine.defaultProps = {\n  xAxisId: 0,\n  yAxisId: 0,\n  connectNulls: false,\n  activeDot: true,\n  dot: true,\n  legendType: 'line',\n  stroke: '#3182bd',\n  strokeWidth: 1,\n  fill: '#fff',\n  points: [],\n  isAnimationActive: !Global.isSsr,\n  animateNewValues: true,\n  animationBegin: 0,\n  animationDuration: 1500,\n  animationEasing: 'ease',\n  hide: false\n};\n\nLine.getComposedData = function (_ref2) {\n  var props = _ref2.props,\n      xAxis = _ref2.xAxis,\n      yAxis = _ref2.yAxis,\n      xAxisTicks = _ref2.xAxisTicks,\n      yAxisTicks = _ref2.yAxisTicks,\n      dataKey = _ref2.dataKey,\n      bandSize = _ref2.bandSize,\n      displayedData = _ref2.displayedData,\n      offset = _ref2.offset;\n  var layout = props.layout;\n  var points = displayedData.map(function (entry, index) {\n    var value = getValueByDataKey(entry, dataKey);\n\n    if (layout === 'horizontal') {\n      return {\n        x: getCateCoordinateOfLine({\n          axis: xAxis,\n          ticks: xAxisTicks,\n          bandSize: bandSize,\n          entry: entry,\n          index: index\n        }),\n        y: _isNil(value) ? null : yAxis.scale(value),\n        value: value,\n        payload: entry\n      };\n    }\n\n    return {\n      x: _isNil(value) ? null : xAxis.scale(value),\n      y: getCateCoordinateOfLine({\n        axis: yAxis,\n        ticks: yAxisTicks,\n        bandSize: bandSize,\n        entry: entry,\n        index: index\n      }),\n      value: value,\n      payload: entry\n    };\n  });\n  return _objectSpread({\n    points: points,\n    layout: layout\n  }, offset);\n};"],"sourceRoot":""}