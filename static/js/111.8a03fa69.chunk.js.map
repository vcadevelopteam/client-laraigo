{"version":3,"sources":["../node_modules/@codemirror/commands/dist/index.js","../node_modules/@codemirror/theme-one-dark/dist/index.js","../node_modules/crelt/index.es.js","../node_modules/@codemirror/search/dist/index.js","../node_modules/@codemirror/lint/dist/index.js","../../src/basicSetup.ts","../../src/useCodeMirror.ts","../../src/index.tsx"],"names":["command","f","option","state","dispatch","readOnly","tr","update","toggleLineComment","changeLineComment","toggleBlockComment","changeBlockComment","toggleBlockCommentByLine","o","s","ranges","selection","r","fromLine","doc","lineAt","from","toLine","to","last","length","push","selectedLineRanges","getConfig","pos","main","head","data","languageDataAt","findBlockComment","startText","endText","open","close","textBefore","sliceDoc","textAfter","spaceBefore","exec","spaceAfter","beforeOff","slice","margin","startSpace","endSpace","endOff","test","charAt","tokens","map","block","every","c","comments","i","changes","range","insert","some","comment","token","lines","prevLine","startI","minIndent","line","indent","text","empty","single","l","changeSet","fromHistory","Annotation","define","isolateHistory","invertedEffects","Facet","historyConfig","combine","configs","combineConfig","minDepth","newGroupDelay","Math","max","min","historyField_","StateField","create","HistoryState","config","facet","fromHist","annotation","docChanged","EditorSelection","end","iterChangedRanges","_","changeEnd","undefined","item","HistEvent","fromTransaction","side","other","undone","done","updateBranch","addSelection","startState","rest","isolate","Transaction","addToHistory","addMapping","desc","event","time","userEvent","addChanges","toJSON","value","e","fromJSON","json","cmd","historyState","field","pop","undo","redo","undoSelection","redoSelection","effects","mapped","startSelection","selectionsAfter","this","after","_a","_b","_c","ChangeSet","ChangeDesc","none","result","invert","concat","selections","branch","maxLen","newEvent","start","newBranch","conc","a","b","lastEvent","sels","eq","setSelAfter","popSelection","addMappingToBranch","mapping","mapEvent","extraSelections","mappedChanges","before","mapDesc","fullMapping","composeDesc","StateEffect","mapEffects","joinableUserEvent","prevTime","prevUserEvent","isAdjacent","t","_f","_t","compose","filter","annotations","of","scrollIntoView","historyKeymap","key","run","preventDefault","mac","linux","updateSel","sel","by","mainIndex","setSel","moveSel","how","rangeEnd","forward","cursor","cursorByChar","view","moveByChar","ltrAtCursor","textDirectionAt","Direction","LTR","cursorCharLeft","cursorCharRight","cursorByGroup","moveByGroup","interestingNode","node","bracketProp","type","prop","len","firstChild","moveBySyntax","syntaxTree","resolveInner","NodeProp","closedBy","openedBy","at","next","childAfter","childBefore","match","newPos","matchBrackets","matched","cursorByLine","moved","moveVertically","moveToLineBoundary","cursorLineUp","cursorLineDown","pageHeight","defaultLineHeight","dom","clientHeight","innerHeight","cursorByPage","effect","startPos","coordsAtPos","scrollRect","scrollDOM","getBoundingClientRect","top","bottom","scrollHeight","scrollTop","EditorView","y","yMargin","cursorPageUp","cursorPageDown","moveByLineBoundary","lineBlockAt","space","cursorLineBoundaryForward","cursorLineBoundaryBackward","toMatchingBracket","extend","found","matching","anchor","extendSel","goalColumn","selectByChar","selectCharLeft","selectCharRight","selectByGroup","selectByLine","selectLineUp","selectLineDown","selectByPage","selectPageUp","selectPageDown","selectLineBoundaryForward","selectLineBoundaryBackward","cursorDocStart","cursorDocEnd","selectDocStart","selectDocEnd","deleteBy","changeByRange","towards","announce","phrase","skipAtomic","target","atomicRanges","between","deleteByChar","targetPos","drop","countColumn","tabSize","getIndentUnit","findClusterBreak","number","deleteCharBackward","deleteCharForward","deleteByGroup","categorize","charCategorizer","cat","nextChar","nextCat","deleteGroupBackward","deleteToLineEnd","lineEnd","selectedLineBlocks","blocks","upto","startLine","endLine","prev","moveLine","nextLine","size","lineBreak","copyLine","insertNewlineAndIndent","newlineAndIndent","atEof","explode","context","indexOf","name","isBetweenBrackets","cx","IndentContext","simulateBreak","simulateDoubleBreak","getIndentation","indentString","lineIndent","Text","changeBySelectedLine","atLine","mapPos","indentMore","indentUnit","indentLess","col","keep","charCodeAt","defaultKeymap","shift","cur","parent","updated","Object","overrideIndentation","norm","lineStart","append","indentWithTab","coral","ivory","stone","whiskey","highlightBackground","background","tooltipBackground","oneDarkTheme","theme","color","backgroundColor","caretColor","borderLeftColor","borderBottom","borderTop","outline","border","borderTopColor","borderBottomColor","dark","oneDarkHighlightStyle","HighlightStyle","tag","tags","keyword","deleted","character","propertyName","macroName","function","variableName","labelName","constant","standard","definition","separator","typeName","className","changed","modifier","self","namespace","operator","operatorKeyword","url","escape","regexp","link","special","string","meta","strong","fontWeight","emphasis","fontStyle","strikethrough","textDecoration","heading","atom","bool","processingInstruction","inserted","invalid","oneDark","syntaxHighlighting","crelt","elt","arguments","document","createElement","nodeType","Array","isArray","prototype","hasOwnProperty","call","setAttribute","add","child","appendChild","createTextNode","RangeError","basicNormalize","String","normalize","x","SearchCursor","query","matches","buffer","bufferPos","iter","iterRange","bufferStart","codePointAt","nextOverlapping","peek","str","fromCodePoint","codePointSize","code","index","splice","Symbol","iterator","baseFlags","unicode","RegExpCursor","options","curLine","MultilineRegExpCursor","re","RegExp","ignoreCase","curLineStart","matchPos","getLine","skip","off","lastIndex","flattened","WeakMap","FlattenedDoc","cached","get","flat","sliceString","set","cachedFrom","chunkEnd","createLineDialog","input","class","go","sign","ln","cl","percent","pc","round","docLine","dialogEffect","focus","onkeydown","keyCode","onsubmit","dialogField","is","provide","showPanel","val","baseTheme$1","baseTheme","padding","fontSize","defaultHighlightOptions","highlightWordAroundCursor","minSelectionLength","maxMatches","wholeWords","highlightConfig","matchDeco","Decoration","mark","mainMatchDeco","insideWordBoundaries","check","CharCategory","Word","matchHighlighter","ViewPlugin","fromClass","decorations","getDeco","selectionSet","viewportChanged","conf","word","wordAt","insideWord","trim","deco","visibleRanges","part","v","defaultTheme","searchConfigFacet","reduce","caseSensitive","createPanel","find","SearchPanel","SearchQuery","search","replace","valid","source","validRegExp","unquoted","literal","ch","RegExpQuery","StringQuery","regexpCursor","stringCursor","QueryType","spec","toLowerCase","curFrom","curTo","prevMatchInRange","_result","limit","m","setSearchQuery","togglePanel","searchState","SearchState","defaultQuery","panel","createSearchPanel","matchMark","selectedMatchMark","searchHighlighter","highlight","builder","RangeSetBuilder","selected","finish","searchCommand","openSearchPanel","findNext","nextMatch","announceMatch","findPrevious","prevMatch","selectMatches","matchAll","replaceNext","replacement","toText","getReplacement","replaceAll","announceText","fallback","selText","getPanel","searchInput","querySelector","root","activeElement","select","appendConfig","searchExtensions","closeSearchPanel","contains","searchKeymap","scope","newSel","selectWord","searchedText","fullWord","cycled","findNextOccurrence","addRange","button","onclick","content","commit","bind","searchField","placeholder","onchange","onkeyup","replaceField","caseField","checked","reField","keydown","runScopeHandlers","shiftKey","transactions","setQuery","Break","position","right","font","marginRight","whiteSpace","Prec","lowest","SelectedDiagnostic","diagnostic","LintState","diagnostics","markedDiagnostics","diagnosticFilter","lintConfig","markerFilter","d","widget","DiagnosticWidget","attributes","severity","findDiagnostic","hideTooltip","tooltip","setDiagnosticsEffect","touchesRange","maybeEnableLint","lintState","compute","activeMark","hoverTooltip","lintTooltip","hideOn","movePanelSelection","selPos","init","LintPanel","stackStart","stackEnd","tooltipFilter","above","diagnosticsTooltip","renderDiagnostic","closeLintPanel","lintKeymap","lintPlugin","timeout","delay","lintTime","Date","now","setTimeout","sources","Promise","all","resolve","then","setDiagnostics","error","logException","clearTimeout","assign","enables","assignKeys","actions","assigned","inPanel","keys","renderMessage","message","action","click","apply","keyIndex","nameElt","onmousedown","WidgetType","PanelItem","id","floor","random","toString","items","list","tabIndex","role","moveSelection","selectedIndex","toUpperCase","needsSync","newSelectedItem","_start","_end","j","hasAttribute","removeAttribute","requestMeasure","read","write","sync","domPos","rm","nextSibling","remove","parentNode","insertBefore","svg","attrs","encodeURIComponent","underline","marginLeft","display","borderLeft","borderRadius","opacity","backgroundPosition","backgroundRepeat","paddingBottom","backgroundImage","left","borderRight","maxHeight","overflowY","background_fallback","color_fallback","GutterMarker","setLintGutterTooltip","lintGutterTooltip","showTooltip","lintGutterConfig","hoverTime","basicSetup","keymaps","closeBracketsKeymap","foldKeymap","completionKeymap","extensions","lineNumbers","highlightActiveLineGutter","highlightSpecialChars","history","domEventHandlers","beforeinput","inputType","foldGutter","drawSelection","dropCursor","allowMultipleSelections","EditorState","indentOnInput","defaultHighlightStyle","bracketMatching","closeBrackets","autocompletion","rectangularSelection","crosshairCursor","highlightActiveLine","highlightSelectionMatches","ext","keymap","Boolean","useCodeMirror","props","onChange","onUpdate","autoFocus","height","minHeight","placeholderStr","width","minWidth","maxWidth","editable","defaultIndentWithTab","defaultBasicSetup","useState","container","setContainer","setView","setState","defaultLightThemeOption","defaultThemeOption","getExtensions","updateListener","vu","unshift","useEffect","stateCurrent","viewCurrent","destroy","reconfigure","currentValue","ReactCodeMirror","React","forwardRef","ref","editor","useRef","current","useImperativeHandle","Error","defaultClassNames","_jsx","displayName"],"mappings":"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","file":"static/js/111.8a03fa69.chunk.js","sourcesContent":["import { Annotation, Facet, combineConfig, StateField, EditorSelection, Transaction, ChangeSet, ChangeDesc, StateEffect, Text, findClusterBreak, countColumn, CharCategory } from '@codemirror/state';\nimport { EditorView, Direction } from '@codemirror/view';\nimport { IndentContext, getIndentation, indentString, indentUnit, getIndentUnit, matchBrackets, syntaxTree } from '@codemirror/language';\nimport { NodeProp } from '@lezer/common';\n\n/**\nComment or uncomment the current selection. Will use line comments\nif available, otherwise falling back to block comments.\n*/\nconst toggleComment = target => {\n    let config = getConfig(target.state);\n    return config.line ? toggleLineComment(target) : config.block ? toggleBlockCommentByLine(target) : false;\n};\nfunction command(f, option) {\n    return ({ state, dispatch }) => {\n        if (state.readOnly)\n            return false;\n        let tr = f(option, state);\n        if (!tr)\n            return false;\n        dispatch(state.update(tr));\n        return true;\n    };\n}\n/**\nComment or uncomment the current selection using line comments.\nThe line comment syntax is taken from the\n[`commentTokens`](https://codemirror.net/6/docs/ref/#commands.CommentTokens) [language\ndata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt).\n*/\nconst toggleLineComment = /*@__PURE__*/command(changeLineComment, 0 /* Toggle */);\n/**\nComment the current selection using line comments.\n*/\nconst lineComment = /*@__PURE__*/command(changeLineComment, 1 /* Comment */);\n/**\nUncomment the current selection using line comments.\n*/\nconst lineUncomment = /*@__PURE__*/command(changeLineComment, 2 /* Uncomment */);\n/**\nComment or uncomment the current selection using block comments.\nThe block comment syntax is taken from the\n[`commentTokens`](https://codemirror.net/6/docs/ref/#commands.CommentTokens) [language\ndata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt).\n*/\nconst toggleBlockComment = /*@__PURE__*/command(changeBlockComment, 0 /* Toggle */);\n/**\nComment the current selection using block comments.\n*/\nconst blockComment = /*@__PURE__*/command(changeBlockComment, 1 /* Comment */);\n/**\nUncomment the current selection using block comments.\n*/\nconst blockUncomment = /*@__PURE__*/command(changeBlockComment, 2 /* Uncomment */);\n/**\nComment or uncomment the lines around the current selection using\nblock comments.\n*/\nconst toggleBlockCommentByLine = /*@__PURE__*/command((o, s) => changeBlockComment(o, s, selectedLineRanges(s)), 0 /* Toggle */);\nfunction getConfig(state, pos = state.selection.main.head) {\n    let data = state.languageDataAt(\"commentTokens\", pos);\n    return data.length ? data[0] : {};\n}\nconst SearchMargin = 50;\n/**\nDetermines if the given range is block-commented in the given\nstate.\n*/\nfunction findBlockComment(state, { open, close }, from, to) {\n    let textBefore = state.sliceDoc(from - SearchMargin, from);\n    let textAfter = state.sliceDoc(to, to + SearchMargin);\n    let spaceBefore = /\\s*$/.exec(textBefore)[0].length, spaceAfter = /^\\s*/.exec(textAfter)[0].length;\n    let beforeOff = textBefore.length - spaceBefore;\n    if (textBefore.slice(beforeOff - open.length, beforeOff) == open &&\n        textAfter.slice(spaceAfter, spaceAfter + close.length) == close) {\n        return { open: { pos: from - spaceBefore, margin: spaceBefore && 1 },\n            close: { pos: to + spaceAfter, margin: spaceAfter && 1 } };\n    }\n    let startText, endText;\n    if (to - from <= 2 * SearchMargin) {\n        startText = endText = state.sliceDoc(from, to);\n    }\n    else {\n        startText = state.sliceDoc(from, from + SearchMargin);\n        endText = state.sliceDoc(to - SearchMargin, to);\n    }\n    let startSpace = /^\\s*/.exec(startText)[0].length, endSpace = /\\s*$/.exec(endText)[0].length;\n    let endOff = endText.length - endSpace - close.length;\n    if (startText.slice(startSpace, startSpace + open.length) == open &&\n        endText.slice(endOff, endOff + close.length) == close) {\n        return { open: { pos: from + startSpace + open.length,\n                margin: /\\s/.test(startText.charAt(startSpace + open.length)) ? 1 : 0 },\n            close: { pos: to - endSpace - close.length,\n                margin: /\\s/.test(endText.charAt(endOff - 1)) ? 1 : 0 } };\n    }\n    return null;\n}\nfunction selectedLineRanges(state) {\n    let ranges = [];\n    for (let r of state.selection.ranges) {\n        let fromLine = state.doc.lineAt(r.from);\n        let toLine = r.to <= fromLine.to ? fromLine : state.doc.lineAt(r.to);\n        let last = ranges.length - 1;\n        if (last >= 0 && ranges[last].to > fromLine.from)\n            ranges[last].to = toLine.to;\n        else\n            ranges.push({ from: fromLine.from, to: toLine.to });\n    }\n    return ranges;\n}\n// Performs toggle, comment and uncomment of block comments in\n// languages that support them.\nfunction changeBlockComment(option, state, ranges = state.selection.ranges) {\n    let tokens = ranges.map(r => getConfig(state, r.from).block);\n    if (!tokens.every(c => c))\n        return null;\n    let comments = ranges.map((r, i) => findBlockComment(state, tokens[i], r.from, r.to));\n    if (option != 2 /* Uncomment */ && !comments.every(c => c)) {\n        return { changes: state.changes(ranges.map((range, i) => {\n                if (comments[i])\n                    return [];\n                return [{ from: range.from, insert: tokens[i].open + \" \" }, { from: range.to, insert: \" \" + tokens[i].close }];\n            })) };\n    }\n    else if (option != 1 /* Comment */ && comments.some(c => c)) {\n        let changes = [];\n        for (let i = 0, comment; i < comments.length; i++)\n            if (comment = comments[i]) {\n                let token = tokens[i], { open, close } = comment;\n                changes.push({ from: open.pos - token.open.length, to: open.pos + open.margin }, { from: close.pos - close.margin, to: close.pos + token.close.length });\n            }\n        return { changes };\n    }\n    return null;\n}\n// Performs toggle, comment and uncomment of line comments.\nfunction changeLineComment(option, state, ranges = state.selection.ranges) {\n    let lines = [];\n    let prevLine = -1;\n    for (let { from, to } of ranges) {\n        let startI = lines.length, minIndent = 1e9;\n        for (let pos = from; pos <= to;) {\n            let line = state.doc.lineAt(pos);\n            if (line.from > prevLine && (from == to || to > line.from)) {\n                prevLine = line.from;\n                let token = getConfig(state, pos).line;\n                if (!token)\n                    continue;\n                let indent = /^\\s*/.exec(line.text)[0].length;\n                let empty = indent == line.length;\n                let comment = line.text.slice(indent, indent + token.length) == token ? indent : -1;\n                if (indent < line.text.length && indent < minIndent)\n                    minIndent = indent;\n                lines.push({ line, comment, token, indent, empty, single: false });\n            }\n            pos = line.to + 1;\n        }\n        if (minIndent < 1e9)\n            for (let i = startI; i < lines.length; i++)\n                if (lines[i].indent < lines[i].line.text.length)\n                    lines[i].indent = minIndent;\n        if (lines.length == startI + 1)\n            lines[startI].single = true;\n    }\n    if (option != 2 /* Uncomment */ && lines.some(l => l.comment < 0 && (!l.empty || l.single))) {\n        let changes = [];\n        for (let { line, token, indent, empty, single } of lines)\n            if (single || !empty)\n                changes.push({ from: line.from + indent, insert: token + \" \" });\n        let changeSet = state.changes(changes);\n        return { changes: changeSet, selection: state.selection.map(changeSet, 1) };\n    }\n    else if (option != 1 /* Comment */ && lines.some(l => l.comment >= 0)) {\n        let changes = [];\n        for (let { line, comment, token } of lines)\n            if (comment >= 0) {\n                let from = line.from + comment, to = from + token.length;\n                if (line.text[to - line.from] == \" \")\n                    to++;\n                changes.push({ from, to });\n            }\n        return { changes };\n    }\n    return null;\n}\n\nconst fromHistory = /*@__PURE__*/Annotation.define();\n/**\nTransaction annotation that will prevent that transaction from\nbeing combined with other transactions in the undo history. Given\n`\"before\"`, it'll prevent merging with previous transactions. With\n`\"after\"`, subsequent transactions won't be combined with this\none. With `\"full\"`, the transaction is isolated on both sides.\n*/\nconst isolateHistory = /*@__PURE__*/Annotation.define();\n/**\nThis facet provides a way to register functions that, given a\ntransaction, provide a set of effects that the history should\nstore when inverting the transaction. This can be used to\nintegrate some kinds of effects in the history, so that they can\nbe undone (and redone again).\n*/\nconst invertedEffects = /*@__PURE__*/Facet.define();\nconst historyConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            minDepth: 100,\n            newGroupDelay: 500\n        }, { minDepth: Math.max, newGroupDelay: Math.min });\n    }\n});\nfunction changeEnd(changes) {\n    let end = 0;\n    changes.iterChangedRanges((_, to) => end = to);\n    return end;\n}\nconst historyField_ = /*@__PURE__*/StateField.define({\n    create() {\n        return HistoryState.empty;\n    },\n    update(state, tr) {\n        let config = tr.state.facet(historyConfig);\n        let fromHist = tr.annotation(fromHistory);\n        if (fromHist) {\n            let selection = tr.docChanged ? EditorSelection.single(changeEnd(tr.changes)) : undefined;\n            let item = HistEvent.fromTransaction(tr, selection), from = fromHist.side;\n            let other = from == 0 /* Done */ ? state.undone : state.done;\n            if (item)\n                other = updateBranch(other, other.length, config.minDepth, item);\n            else\n                other = addSelection(other, tr.startState.selection);\n            return new HistoryState(from == 0 /* Done */ ? fromHist.rest : other, from == 0 /* Done */ ? other : fromHist.rest);\n        }\n        let isolate = tr.annotation(isolateHistory);\n        if (isolate == \"full\" || isolate == \"before\")\n            state = state.isolate();\n        if (tr.annotation(Transaction.addToHistory) === false)\n            return !tr.changes.empty ? state.addMapping(tr.changes.desc) : state;\n        let event = HistEvent.fromTransaction(tr);\n        let time = tr.annotation(Transaction.time), userEvent = tr.annotation(Transaction.userEvent);\n        if (event)\n            state = state.addChanges(event, time, userEvent, config.newGroupDelay, config.minDepth);\n        else if (tr.selection)\n            state = state.addSelection(tr.startState.selection, time, userEvent, config.newGroupDelay);\n        if (isolate == \"full\" || isolate == \"after\")\n            state = state.isolate();\n        return state;\n    },\n    toJSON(value) {\n        return { done: value.done.map(e => e.toJSON()), undone: value.undone.map(e => e.toJSON()) };\n    },\n    fromJSON(json) {\n        return new HistoryState(json.done.map(HistEvent.fromJSON), json.undone.map(HistEvent.fromJSON));\n    }\n});\n/**\nCreate a history extension with the given configuration.\n*/\nfunction history(config = {}) {\n    return [\n        historyField_,\n        historyConfig.of(config),\n        EditorView.domEventHandlers({\n            beforeinput(e, view) {\n                let command = e.inputType == \"historyUndo\" ? undo : e.inputType == \"historyRedo\" ? redo : null;\n                if (!command)\n                    return false;\n                e.preventDefault();\n                return command(view);\n            }\n        })\n    ];\n}\n/**\nThe state field used to store the history data. Should probably\nonly be used when you want to\n[serialize](https://codemirror.net/6/docs/ref/#state.EditorState.toJSON) or\n[deserialize](https://codemirror.net/6/docs/ref/#state.EditorState^fromJSON) state objects in a way\nthat preserves history.\n*/\nconst historyField = historyField_;\nfunction cmd(side, selection) {\n    return function ({ state, dispatch }) {\n        if (!selection && state.readOnly)\n            return false;\n        let historyState = state.field(historyField_, false);\n        if (!historyState)\n            return false;\n        let tr = historyState.pop(side, state, selection);\n        if (!tr)\n            return false;\n        dispatch(tr);\n        return true;\n    };\n}\n/**\nUndo a single group of history events. Returns false if no group\nwas available.\n*/\nconst undo = /*@__PURE__*/cmd(0 /* Done */, false);\n/**\nRedo a group of history events. Returns false if no group was\navailable.\n*/\nconst redo = /*@__PURE__*/cmd(1 /* Undone */, false);\n/**\nUndo a change or selection change.\n*/\nconst undoSelection = /*@__PURE__*/cmd(0 /* Done */, true);\n/**\nRedo a change or selection change.\n*/\nconst redoSelection = /*@__PURE__*/cmd(1 /* Undone */, true);\nfunction depth(side) {\n    return function (state) {\n        let histState = state.field(historyField_, false);\n        if (!histState)\n            return 0;\n        let branch = side == 0 /* Done */ ? histState.done : histState.undone;\n        return branch.length - (branch.length && !branch[0].changes ? 1 : 0);\n    };\n}\n/**\nThe amount of undoable change events available in a given state.\n*/\nconst undoDepth = /*@__PURE__*/depth(0 /* Done */);\n/**\nThe amount of redoable change events available in a given state.\n*/\nconst redoDepth = /*@__PURE__*/depth(1 /* Undone */);\n// History events store groups of changes or effects that need to be\n// undone/redone together.\nclass HistEvent {\n    constructor(\n    // The changes in this event. Normal events hold at least one\n    // change or effect. But it may be necessary to store selection\n    // events before the first change, in which case a special type of\n    // instance is created which doesn't hold any changes, with\n    // changes == startSelection == undefined\n    changes, \n    // The effects associated with this event\n    effects, \n    // Accumulated mapping (from addToHistory==false) that should be\n    // applied to events below this one.\n    mapped, \n    // The selection before this event\n    startSelection, \n    // Stores selection changes after this event, to be used for\n    // selection undo/redo.\n    selectionsAfter) {\n        this.changes = changes;\n        this.effects = effects;\n        this.mapped = mapped;\n        this.startSelection = startSelection;\n        this.selectionsAfter = selectionsAfter;\n    }\n    setSelAfter(after) {\n        return new HistEvent(this.changes, this.effects, this.mapped, this.startSelection, after);\n    }\n    toJSON() {\n        var _a, _b, _c;\n        return {\n            changes: (_a = this.changes) === null || _a === void 0 ? void 0 : _a.toJSON(),\n            mapped: (_b = this.mapped) === null || _b === void 0 ? void 0 : _b.toJSON(),\n            startSelection: (_c = this.startSelection) === null || _c === void 0 ? void 0 : _c.toJSON(),\n            selectionsAfter: this.selectionsAfter.map(s => s.toJSON())\n        };\n    }\n    static fromJSON(json) {\n        return new HistEvent(json.changes && ChangeSet.fromJSON(json.changes), [], json.mapped && ChangeDesc.fromJSON(json.mapped), json.startSelection && EditorSelection.fromJSON(json.startSelection), json.selectionsAfter.map(EditorSelection.fromJSON));\n    }\n    // This does not check `addToHistory` and such, it assumes the\n    // transaction needs to be converted to an item. Returns null when\n    // there are no changes or effects in the transaction.\n    static fromTransaction(tr, selection) {\n        let effects = none;\n        for (let invert of tr.startState.facet(invertedEffects)) {\n            let result = invert(tr);\n            if (result.length)\n                effects = effects.concat(result);\n        }\n        if (!effects.length && tr.changes.empty)\n            return null;\n        return new HistEvent(tr.changes.invert(tr.startState.doc), effects, undefined, selection || tr.startState.selection, none);\n    }\n    static selection(selections) {\n        return new HistEvent(undefined, none, undefined, undefined, selections);\n    }\n}\nfunction updateBranch(branch, to, maxLen, newEvent) {\n    let start = to + 1 > maxLen + 20 ? to - maxLen - 1 : 0;\n    let newBranch = branch.slice(start, to);\n    newBranch.push(newEvent);\n    return newBranch;\n}\nfunction isAdjacent(a, b) {\n    let ranges = [], isAdjacent = false;\n    a.iterChangedRanges((f, t) => ranges.push(f, t));\n    b.iterChangedRanges((_f, _t, f, t) => {\n        for (let i = 0; i < ranges.length;) {\n            let from = ranges[i++], to = ranges[i++];\n            if (t >= from && f <= to)\n                isAdjacent = true;\n        }\n    });\n    return isAdjacent;\n}\nfunction eqSelectionShape(a, b) {\n    return a.ranges.length == b.ranges.length &&\n        a.ranges.filter((r, i) => r.empty != b.ranges[i].empty).length === 0;\n}\nfunction conc(a, b) {\n    return !a.length ? b : !b.length ? a : a.concat(b);\n}\nconst none = [];\nconst MaxSelectionsPerEvent = 200;\nfunction addSelection(branch, selection) {\n    if (!branch.length) {\n        return [HistEvent.selection([selection])];\n    }\n    else {\n        let lastEvent = branch[branch.length - 1];\n        let sels = lastEvent.selectionsAfter.slice(Math.max(0, lastEvent.selectionsAfter.length - MaxSelectionsPerEvent));\n        if (sels.length && sels[sels.length - 1].eq(selection))\n            return branch;\n        sels.push(selection);\n        return updateBranch(branch, branch.length - 1, 1e9, lastEvent.setSelAfter(sels));\n    }\n}\n// Assumes the top item has one or more selectionAfter values\nfunction popSelection(branch) {\n    let last = branch[branch.length - 1];\n    let newBranch = branch.slice();\n    newBranch[branch.length - 1] = last.setSelAfter(last.selectionsAfter.slice(0, last.selectionsAfter.length - 1));\n    return newBranch;\n}\n// Add a mapping to the top event in the given branch. If this maps\n// away all the changes and effects in that item, drop it and\n// propagate the mapping to the next item.\nfunction addMappingToBranch(branch, mapping) {\n    if (!branch.length)\n        return branch;\n    let length = branch.length, selections = none;\n    while (length) {\n        let event = mapEvent(branch[length - 1], mapping, selections);\n        if (event.changes && !event.changes.empty || event.effects.length) { // Event survived mapping\n            let result = branch.slice(0, length);\n            result[length - 1] = event;\n            return result;\n        }\n        else { // Drop this event, since there's no changes or effects left\n            mapping = event.mapped;\n            length--;\n            selections = event.selectionsAfter;\n        }\n    }\n    return selections.length ? [HistEvent.selection(selections)] : none;\n}\nfunction mapEvent(event, mapping, extraSelections) {\n    let selections = conc(event.selectionsAfter.length ? event.selectionsAfter.map(s => s.map(mapping)) : none, extraSelections);\n    // Change-less events don't store mappings (they are always the last event in a branch)\n    if (!event.changes)\n        return HistEvent.selection(selections);\n    let mappedChanges = event.changes.map(mapping), before = mapping.mapDesc(event.changes, true);\n    let fullMapping = event.mapped ? event.mapped.composeDesc(before) : before;\n    return new HistEvent(mappedChanges, StateEffect.mapEffects(event.effects, mapping), fullMapping, event.startSelection.map(before), selections);\n}\nconst joinableUserEvent = /^(input\\.type|delete)($|\\.)/;\nclass HistoryState {\n    constructor(done, undone, prevTime = 0, prevUserEvent = undefined) {\n        this.done = done;\n        this.undone = undone;\n        this.prevTime = prevTime;\n        this.prevUserEvent = prevUserEvent;\n    }\n    isolate() {\n        return this.prevTime ? new HistoryState(this.done, this.undone) : this;\n    }\n    addChanges(event, time, userEvent, newGroupDelay, maxLen) {\n        let done = this.done, lastEvent = done[done.length - 1];\n        if (lastEvent && lastEvent.changes && !lastEvent.changes.empty && event.changes &&\n            (!userEvent || joinableUserEvent.test(userEvent)) &&\n            ((!lastEvent.selectionsAfter.length &&\n                time - this.prevTime < newGroupDelay &&\n                isAdjacent(lastEvent.changes, event.changes)) ||\n                // For compose (but not compose.start) events, always join with previous event\n                userEvent == \"input.type.compose\")) {\n            done = updateBranch(done, done.length - 1, maxLen, new HistEvent(event.changes.compose(lastEvent.changes), conc(event.effects, lastEvent.effects), lastEvent.mapped, lastEvent.startSelection, none));\n        }\n        else {\n            done = updateBranch(done, done.length, maxLen, event);\n        }\n        return new HistoryState(done, none, time, userEvent);\n    }\n    addSelection(selection, time, userEvent, newGroupDelay) {\n        let last = this.done.length ? this.done[this.done.length - 1].selectionsAfter : none;\n        if (last.length > 0 &&\n            time - this.prevTime < newGroupDelay &&\n            userEvent == this.prevUserEvent && userEvent && /^select($|\\.)/.test(userEvent) &&\n            eqSelectionShape(last[last.length - 1], selection))\n            return this;\n        return new HistoryState(addSelection(this.done, selection), this.undone, time, userEvent);\n    }\n    addMapping(mapping) {\n        return new HistoryState(addMappingToBranch(this.done, mapping), addMappingToBranch(this.undone, mapping), this.prevTime, this.prevUserEvent);\n    }\n    pop(side, state, selection) {\n        let branch = side == 0 /* Done */ ? this.done : this.undone;\n        if (branch.length == 0)\n            return null;\n        let event = branch[branch.length - 1];\n        if (selection && event.selectionsAfter.length) {\n            return state.update({\n                selection: event.selectionsAfter[event.selectionsAfter.length - 1],\n                annotations: fromHistory.of({ side, rest: popSelection(branch) }),\n                userEvent: side == 0 /* Done */ ? \"select.undo\" : \"select.redo\",\n                scrollIntoView: true\n            });\n        }\n        else if (!event.changes) {\n            return null;\n        }\n        else {\n            let rest = branch.length == 1 ? none : branch.slice(0, branch.length - 1);\n            if (event.mapped)\n                rest = addMappingToBranch(rest, event.mapped);\n            return state.update({\n                changes: event.changes,\n                selection: event.startSelection,\n                effects: event.effects,\n                annotations: fromHistory.of({ side, rest }),\n                filter: false,\n                userEvent: side == 0 /* Done */ ? \"undo\" : \"redo\",\n                scrollIntoView: true\n            });\n        }\n    }\n}\nHistoryState.empty = /*@__PURE__*/new HistoryState(none, none);\n/**\nDefault key bindings for the undo history.\n\n- Mod-z: [`undo`](https://codemirror.net/6/docs/ref/#commands.undo).\n- Mod-y (Mod-Shift-z on macOS) + Ctrl-Shift-z on Linux: [`redo`](https://codemirror.net/6/docs/ref/#commands.redo).\n- Mod-u: [`undoSelection`](https://codemirror.net/6/docs/ref/#commands.undoSelection).\n- Alt-u (Mod-Shift-u on macOS): [`redoSelection`](https://codemirror.net/6/docs/ref/#commands.redoSelection).\n*/\nconst historyKeymap = [\n    { key: \"Mod-z\", run: undo, preventDefault: true },\n    { key: \"Mod-y\", mac: \"Mod-Shift-z\", run: redo, preventDefault: true },\n    { linux: \"Ctrl-Shift-z\", run: redo, preventDefault: true },\n    { key: \"Mod-u\", run: undoSelection, preventDefault: true },\n    { key: \"Alt-u\", mac: \"Mod-Shift-u\", run: redoSelection, preventDefault: true }\n];\n\nfunction updateSel(sel, by) {\n    return EditorSelection.create(sel.ranges.map(by), sel.mainIndex);\n}\nfunction setSel(state, selection) {\n    return state.update({ selection, scrollIntoView: true, userEvent: \"select\" });\n}\nfunction moveSel({ state, dispatch }, how) {\n    let selection = updateSel(state.selection, how);\n    if (selection.eq(state.selection))\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\nfunction rangeEnd(range, forward) {\n    return EditorSelection.cursor(forward ? range.to : range.from);\n}\nfunction cursorByChar(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByChar(range, forward) : rangeEnd(range, forward));\n}\nfunction ltrAtCursor(view) {\n    return view.textDirectionAt(view.state.selection.main.head) == Direction.LTR;\n}\n/**\nMove the selection one character to the left (which is backward in\nleft-to-right text, forward in right-to-left text).\n*/\nconst cursorCharLeft = view => cursorByChar(view, !ltrAtCursor(view));\n/**\nMove the selection one character to the right.\n*/\nconst cursorCharRight = view => cursorByChar(view, ltrAtCursor(view));\n/**\nMove the selection one character forward.\n*/\nconst cursorCharForward = view => cursorByChar(view, true);\n/**\nMove the selection one character backward.\n*/\nconst cursorCharBackward = view => cursorByChar(view, false);\nfunction cursorByGroup(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByGroup(range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection to the left across one group of word or\nnon-word (but also non-space) characters.\n*/\nconst cursorGroupLeft = view => cursorByGroup(view, !ltrAtCursor(view));\n/**\nMove the selection one group to the right.\n*/\nconst cursorGroupRight = view => cursorByGroup(view, ltrAtCursor(view));\n/**\nMove the selection one group forward.\n*/\nconst cursorGroupForward = view => cursorByGroup(view, true);\n/**\nMove the selection one group backward.\n*/\nconst cursorGroupBackward = view => cursorByGroup(view, false);\nfunction moveBySubword(view, range, forward) {\n    let categorize = view.state.charCategorizer(range.from);\n    return view.moveByChar(range, forward, start => {\n        let cat = CharCategory.Space, pos = range.from;\n        let done = false, sawUpper = false, sawLower = false;\n        let step = (next) => {\n            if (done)\n                return false;\n            pos += forward ? next.length : -next.length;\n            let nextCat = categorize(next), ahead;\n            if (cat == CharCategory.Space)\n                cat = nextCat;\n            if (cat != nextCat)\n                return false;\n            if (cat == CharCategory.Word) {\n                if (next.toLowerCase() == next) {\n                    if (!forward && sawUpper)\n                        return false;\n                    sawLower = true;\n                }\n                else if (sawLower) {\n                    if (forward)\n                        return false;\n                    done = true;\n                }\n                else {\n                    if (sawUpper && forward && categorize(ahead = view.state.sliceDoc(pos, pos + 1)) == CharCategory.Word &&\n                        ahead.toLowerCase() == ahead)\n                        return false;\n                    sawUpper = true;\n                }\n            }\n            return true;\n        };\n        step(start);\n        return step;\n    });\n}\nfunction cursorBySubword(view, forward) {\n    return moveSel(view, range => range.empty ? moveBySubword(view, range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection one group or camel-case subword forward.\n*/\nconst cursorSubwordForward = view => cursorBySubword(view, true);\n/**\nMove the selection one group or camel-case subword backward.\n*/\nconst cursorSubwordBackward = view => cursorBySubword(view, false);\nfunction interestingNode(state, node, bracketProp) {\n    if (node.type.prop(bracketProp))\n        return true;\n    let len = node.to - node.from;\n    return len && (len > 2 || /[^\\s,.;:]/.test(state.sliceDoc(node.from, node.to))) || node.firstChild;\n}\nfunction moveBySyntax(state, start, forward) {\n    let pos = syntaxTree(state).resolveInner(start.head);\n    let bracketProp = forward ? NodeProp.closedBy : NodeProp.openedBy;\n    // Scan forward through child nodes to see if there's an interesting\n    // node ahead.\n    for (let at = start.head;;) {\n        let next = forward ? pos.childAfter(at) : pos.childBefore(at);\n        if (!next)\n            break;\n        if (interestingNode(state, next, bracketProp))\n            pos = next;\n        else\n            at = forward ? next.to : next.from;\n    }\n    let bracket = pos.type.prop(bracketProp), match, newPos;\n    if (bracket && (match = forward ? matchBrackets(state, pos.from, 1) : matchBrackets(state, pos.to, -1)) && match.matched)\n        newPos = forward ? match.end.to : match.end.from;\n    else\n        newPos = forward ? pos.to : pos.from;\n    return EditorSelection.cursor(newPos, forward ? -1 : 1);\n}\n/**\nMove the cursor over the next syntactic element to the left.\n*/\nconst cursorSyntaxLeft = view => moveSel(view, range => moveBySyntax(view.state, range, !ltrAtCursor(view)));\n/**\nMove the cursor over the next syntactic element to the right.\n*/\nconst cursorSyntaxRight = view => moveSel(view, range => moveBySyntax(view.state, range, ltrAtCursor(view)));\nfunction cursorByLine(view, forward) {\n    return moveSel(view, range => {\n        if (!range.empty)\n            return rangeEnd(range, forward);\n        let moved = view.moveVertically(range, forward);\n        return moved.head != range.head ? moved : view.moveToLineBoundary(range, forward);\n    });\n}\n/**\nMove the selection one line up.\n*/\nconst cursorLineUp = view => cursorByLine(view, false);\n/**\nMove the selection one line down.\n*/\nconst cursorLineDown = view => cursorByLine(view, true);\nfunction pageHeight(view) {\n    return Math.max(view.defaultLineHeight, Math.min(view.dom.clientHeight, innerHeight) - 5);\n}\nfunction cursorByPage(view, forward) {\n    let { state } = view, selection = updateSel(state.selection, range => {\n        return range.empty ? view.moveVertically(range, forward, pageHeight(view)) : rangeEnd(range, forward);\n    });\n    if (selection.eq(state.selection))\n        return false;\n    let startPos = view.coordsAtPos(state.selection.main.head);\n    let scrollRect = view.scrollDOM.getBoundingClientRect();\n    let effect;\n    if (startPos && startPos.top > scrollRect.top && startPos.bottom < scrollRect.bottom &&\n        startPos.top - scrollRect.top <= view.scrollDOM.scrollHeight - view.scrollDOM.scrollTop - view.scrollDOM.clientHeight)\n        effect = EditorView.scrollIntoView(selection.main.head, { y: \"start\", yMargin: startPos.top - scrollRect.top });\n    view.dispatch(setSel(state, selection), { effects: effect });\n    return true;\n}\n/**\nMove the selection one page up.\n*/\nconst cursorPageUp = view => cursorByPage(view, false);\n/**\nMove the selection one page down.\n*/\nconst cursorPageDown = view => cursorByPage(view, true);\nfunction moveByLineBoundary(view, start, forward) {\n    let line = view.lineBlockAt(start.head), moved = view.moveToLineBoundary(start, forward);\n    if (moved.head == start.head && moved.head != (forward ? line.to : line.from))\n        moved = view.moveToLineBoundary(start, forward, false);\n    if (!forward && moved.head == line.from && line.length) {\n        let space = /^\\s*/.exec(view.state.sliceDoc(line.from, Math.min(line.from + 100, line.to)))[0].length;\n        if (space && start.head != line.from + space)\n            moved = EditorSelection.cursor(line.from + space);\n    }\n    return moved;\n}\n/**\nMove the selection to the next line wrap point, or to the end of\nthe line if there isn't one left on this line.\n*/\nconst cursorLineBoundaryForward = view => moveSel(view, range => moveByLineBoundary(view, range, true));\n/**\nMove the selection to previous line wrap point, or failing that to\nthe start of the line. If the line is indented, and the cursor\nisn't already at the end of the indentation, this will move to the\nend of the indentation instead of the start of the line.\n*/\nconst cursorLineBoundaryBackward = view => moveSel(view, range => moveByLineBoundary(view, range, false));\n/**\nMove the selection to the start of the line.\n*/\nconst cursorLineStart = view => moveSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).from, 1));\n/**\nMove the selection to the end of the line.\n*/\nconst cursorLineEnd = view => moveSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).to, -1));\nfunction toMatchingBracket(state, dispatch, extend) {\n    let found = false, selection = updateSel(state.selection, range => {\n        let matching = matchBrackets(state, range.head, -1)\n            || matchBrackets(state, range.head, 1)\n            || (range.head > 0 && matchBrackets(state, range.head - 1, 1))\n            || (range.head < state.doc.length && matchBrackets(state, range.head + 1, -1));\n        if (!matching || !matching.end)\n            return range;\n        found = true;\n        let head = matching.start.from == range.head ? matching.end.to : matching.end.from;\n        return extend ? EditorSelection.range(range.anchor, head) : EditorSelection.cursor(head);\n    });\n    if (!found)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\n/**\nMove the selection to the bracket matching the one it is currently\non, if any.\n*/\nconst cursorMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, false);\n/**\nExtend the selection to the bracket matching the one the selection\nhead is currently on, if any.\n*/\nconst selectMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, true);\nfunction extendSel(view, how) {\n    let selection = updateSel(view.state.selection, range => {\n        let head = how(range);\n        return EditorSelection.range(range.anchor, head.head, head.goalColumn);\n    });\n    if (selection.eq(view.state.selection))\n        return false;\n    view.dispatch(setSel(view.state, selection));\n    return true;\n}\nfunction selectByChar(view, forward) {\n    return extendSel(view, range => view.moveByChar(range, forward));\n}\n/**\nMove the selection head one character to the left, while leaving\nthe anchor in place.\n*/\nconst selectCharLeft = view => selectByChar(view, !ltrAtCursor(view));\n/**\nMove the selection head one character to the right.\n*/\nconst selectCharRight = view => selectByChar(view, ltrAtCursor(view));\n/**\nMove the selection head one character forward.\n*/\nconst selectCharForward = view => selectByChar(view, true);\n/**\nMove the selection head one character backward.\n*/\nconst selectCharBackward = view => selectByChar(view, false);\nfunction selectByGroup(view, forward) {\n    return extendSel(view, range => view.moveByGroup(range, forward));\n}\n/**\nMove the selection head one [group](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) to\nthe left.\n*/\nconst selectGroupLeft = view => selectByGroup(view, !ltrAtCursor(view));\n/**\nMove the selection head one group to the right.\n*/\nconst selectGroupRight = view => selectByGroup(view, ltrAtCursor(view));\n/**\nMove the selection head one group forward.\n*/\nconst selectGroupForward = view => selectByGroup(view, true);\n/**\nMove the selection head one group backward.\n*/\nconst selectGroupBackward = view => selectByGroup(view, false);\nfunction selectBySubword(view, forward) {\n    return extendSel(view, range => moveBySubword(view, range, forward));\n}\n/**\nMove the selection head one group or camel-case subword forward.\n*/\nconst selectSubwordForward = view => selectBySubword(view, true);\n/**\nMove the selection head one group or subword backward.\n*/\nconst selectSubwordBackward = view => selectBySubword(view, false);\n/**\nMove the selection head over the next syntactic element to the left.\n*/\nconst selectSyntaxLeft = view => extendSel(view, range => moveBySyntax(view.state, range, !ltrAtCursor(view)));\n/**\nMove the selection head over the next syntactic element to the right.\n*/\nconst selectSyntaxRight = view => extendSel(view, range => moveBySyntax(view.state, range, ltrAtCursor(view)));\nfunction selectByLine(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward));\n}\n/**\nMove the selection head one line up.\n*/\nconst selectLineUp = view => selectByLine(view, false);\n/**\nMove the selection head one line down.\n*/\nconst selectLineDown = view => selectByLine(view, true);\nfunction selectByPage(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward, pageHeight(view)));\n}\n/**\nMove the selection head one page up.\n*/\nconst selectPageUp = view => selectByPage(view, false);\n/**\nMove the selection head one page down.\n*/\nconst selectPageDown = view => selectByPage(view, true);\n/**\nMove the selection head to the next line boundary.\n*/\nconst selectLineBoundaryForward = view => extendSel(view, range => moveByLineBoundary(view, range, true));\n/**\nMove the selection head to the previous line boundary.\n*/\nconst selectLineBoundaryBackward = view => extendSel(view, range => moveByLineBoundary(view, range, false));\n/**\nMove the selection head to the start of the line.\n*/\nconst selectLineStart = view => extendSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).from));\n/**\nMove the selection head to the end of the line.\n*/\nconst selectLineEnd = view => extendSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).to));\n/**\nMove the selection to the start of the document.\n*/\nconst cursorDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: 0 }));\n    return true;\n};\n/**\nMove the selection to the end of the document.\n*/\nconst cursorDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.doc.length }));\n    return true;\n};\n/**\nMove the selection head to the start of the document.\n*/\nconst selectDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.main.anchor, head: 0 }));\n    return true;\n};\n/**\nMove the selection head to the end of the document.\n*/\nconst selectDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.main.anchor, head: state.doc.length }));\n    return true;\n};\n/**\nSelect the entire document.\n*/\nconst selectAll = ({ state, dispatch }) => {\n    dispatch(state.update({ selection: { anchor: 0, head: state.doc.length }, userEvent: \"select\" }));\n    return true;\n};\n/**\nExpand the selection to cover entire lines.\n*/\nconst selectLine = ({ state, dispatch }) => {\n    let ranges = selectedLineBlocks(state).map(({ from, to }) => EditorSelection.range(from, Math.min(to + 1, state.doc.length)));\n    dispatch(state.update({ selection: EditorSelection.create(ranges), userEvent: \"select\" }));\n    return true;\n};\n/**\nSelect the next syntactic construct that is larger than the\nselection. Note that this will only work insofar as the language\n[provider](https://codemirror.net/6/docs/ref/#language.language) you use builds up a full\nsyntax tree.\n*/\nconst selectParentSyntax = ({ state, dispatch }) => {\n    let selection = updateSel(state.selection, range => {\n        var _a;\n        let context = syntaxTree(state).resolveInner(range.head, 1);\n        while (!((context.from < range.from && context.to >= range.to) ||\n            (context.to > range.to && context.from <= range.from) ||\n            !((_a = context.parent) === null || _a === void 0 ? void 0 : _a.parent)))\n            context = context.parent;\n        return EditorSelection.range(context.to, context.from);\n    });\n    dispatch(setSel(state, selection));\n    return true;\n};\n/**\nSimplify the current selection. When multiple ranges are selected,\nreduce it to its main range. Otherwise, if the selection is\nnon-empty, convert it to a cursor selection.\n*/\nconst simplifySelection = ({ state, dispatch }) => {\n    let cur = state.selection, selection = null;\n    if (cur.ranges.length > 1)\n        selection = EditorSelection.create([cur.main]);\n    else if (!cur.main.empty)\n        selection = EditorSelection.create([EditorSelection.cursor(cur.main.head)]);\n    if (!selection)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n};\nfunction deleteBy({ state, dispatch }, by) {\n    if (state.readOnly)\n        return false;\n    let event = \"delete.selection\";\n    let changes = state.changeByRange(range => {\n        let { from, to } = range;\n        if (from == to) {\n            let towards = by(from);\n            if (towards < from)\n                event = \"delete.backward\";\n            else if (towards > from)\n                event = \"delete.forward\";\n            from = Math.min(from, towards);\n            to = Math.max(to, towards);\n        }\n        return from == to ? { range } : { changes: { from, to }, range: EditorSelection.cursor(from) };\n    });\n    if (changes.changes.empty)\n        return false;\n    dispatch(state.update(changes, {\n        scrollIntoView: true,\n        userEvent: event,\n        effects: event == \"delete.selection\" ? EditorView.announce.of(state.phrase(\"Selection deleted\")) : undefined\n    }));\n    return true;\n}\nfunction skipAtomic(target, pos, forward) {\n    if (target instanceof EditorView)\n        for (let ranges of target.state.facet(EditorView.atomicRanges).map(f => f(target)))\n            ranges.between(pos, pos, (from, to) => {\n                if (from < pos && to > pos)\n                    pos = forward ? to : from;\n            });\n    return pos;\n}\nconst deleteByChar = (target, forward) => deleteBy(target, pos => {\n    let { state } = target, line = state.doc.lineAt(pos), before, targetPos;\n    if (!forward && pos > line.from && pos < line.from + 200 &&\n        !/[^ \\t]/.test(before = line.text.slice(0, pos - line.from))) {\n        if (before[before.length - 1] == \"\\t\")\n            return pos - 1;\n        let col = countColumn(before, state.tabSize), drop = col % getIndentUnit(state) || getIndentUnit(state);\n        for (let i = 0; i < drop && before[before.length - 1 - i] == \" \"; i++)\n            pos--;\n        targetPos = pos;\n    }\n    else {\n        targetPos = findClusterBreak(line.text, pos - line.from, forward, forward) + line.from;\n        if (targetPos == pos && line.number != (forward ? state.doc.lines : 1))\n            targetPos += forward ? 1 : -1;\n    }\n    return skipAtomic(target, targetPos, forward);\n});\n/**\nDelete the selection, or, for cursor selections, the character\nbefore the cursor.\n*/\nconst deleteCharBackward = view => deleteByChar(view, false);\n/**\nDelete the selection or the character after the cursor.\n*/\nconst deleteCharForward = view => deleteByChar(view, true);\nconst deleteByGroup = (target, forward) => deleteBy(target, start => {\n    let pos = start, { state } = target, line = state.doc.lineAt(pos);\n    let categorize = state.charCategorizer(pos);\n    for (let cat = null;;) {\n        if (pos == (forward ? line.to : line.from)) {\n            if (pos == start && line.number != (forward ? state.doc.lines : 1))\n                pos += forward ? 1 : -1;\n            break;\n        }\n        let next = findClusterBreak(line.text, pos - line.from, forward) + line.from;\n        let nextChar = line.text.slice(Math.min(pos, next) - line.from, Math.max(pos, next) - line.from);\n        let nextCat = categorize(nextChar);\n        if (cat != null && nextCat != cat)\n            break;\n        if (nextChar != \" \" || pos != start)\n            cat = nextCat;\n        pos = next;\n    }\n    return skipAtomic(target, pos, forward);\n});\n/**\nDelete the selection or backward until the end of the next\n[group](https://codemirror.net/6/docs/ref/#view.EditorView.moveByGroup), only skipping groups of\nwhitespace when they consist of a single space.\n*/\nconst deleteGroupBackward = target => deleteByGroup(target, false);\n/**\nDelete the selection or forward until the end of the next group.\n*/\nconst deleteGroupForward = target => deleteByGroup(target, true);\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe end of the line. If the cursor is directly at the end of the\nline, delete the line break after it.\n*/\nconst deleteToLineEnd = view => deleteBy(view, pos => {\n    let lineEnd = view.lineBlockAt(pos).to;\n    return skipAtomic(view, pos < lineEnd ? lineEnd : Math.min(view.state.doc.length, pos + 1), true);\n});\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe start of the line. If the cursor is directly at the start of the\nline, delete the line break before it.\n*/\nconst deleteToLineStart = view => deleteBy(view, pos => {\n    let lineStart = view.lineBlockAt(pos).from;\n    return skipAtomic(view, pos > lineStart ? lineStart : Math.max(0, pos - 1), false);\n});\n/**\nDelete all whitespace directly before a line end from the\ndocument.\n*/\nconst deleteTrailingWhitespace = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = [];\n    for (let pos = 0, prev = \"\", iter = state.doc.iter();;) {\n        iter.next();\n        if (iter.lineBreak || iter.done) {\n            let trailing = prev.search(/\\s+$/);\n            if (trailing > -1)\n                changes.push({ from: pos - (prev.length - trailing), to: pos });\n            if (iter.done)\n                break;\n            prev = \"\";\n        }\n        else {\n            prev = iter.value;\n        }\n        pos += iter.value.length;\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({ changes, userEvent: \"delete\" }));\n    return true;\n};\n/**\nReplace each selection range with a line break, leaving the cursor\non the line before the break.\n*/\nconst splitLine = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = state.changeByRange(range => {\n        return { changes: { from: range.from, to: range.to, insert: Text.of([\"\", \"\"]) },\n            range: EditorSelection.cursor(range.from) };\n    });\n    dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\n/**\nFlip the characters before and after the cursor(s).\n*/\nconst transposeChars = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = state.changeByRange(range => {\n        if (!range.empty || range.from == 0 || range.from == state.doc.length)\n            return { range };\n        let pos = range.from, line = state.doc.lineAt(pos);\n        let from = pos == line.from ? pos - 1 : findClusterBreak(line.text, pos - line.from, false) + line.from;\n        let to = pos == line.to ? pos + 1 : findClusterBreak(line.text, pos - line.from, true) + line.from;\n        return { changes: { from, to, insert: state.doc.slice(pos, to).append(state.doc.slice(from, pos)) },\n            range: EditorSelection.cursor(to) };\n    });\n    if (changes.changes.empty)\n        return false;\n    dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"move.character\" }));\n    return true;\n};\nfunction selectedLineBlocks(state) {\n    let blocks = [], upto = -1;\n    for (let range of state.selection.ranges) {\n        let startLine = state.doc.lineAt(range.from), endLine = state.doc.lineAt(range.to);\n        if (!range.empty && range.to == endLine.from)\n            endLine = state.doc.lineAt(range.to - 1);\n        if (upto >= startLine.number) {\n            let prev = blocks[blocks.length - 1];\n            prev.to = endLine.to;\n            prev.ranges.push(range);\n        }\n        else {\n            blocks.push({ from: startLine.from, to: endLine.to, ranges: [range] });\n        }\n        upto = endLine.number + 1;\n    }\n    return blocks;\n}\nfunction moveLine(state, dispatch, forward) {\n    if (state.readOnly)\n        return false;\n    let changes = [], ranges = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward ? block.to == state.doc.length : block.from == 0)\n            continue;\n        let nextLine = state.doc.lineAt(forward ? block.to + 1 : block.from - 1);\n        let size = nextLine.length + 1;\n        if (forward) {\n            changes.push({ from: block.to, to: nextLine.to }, { from: block.from, insert: nextLine.text + state.lineBreak });\n            for (let r of block.ranges)\n                ranges.push(EditorSelection.range(Math.min(state.doc.length, r.anchor + size), Math.min(state.doc.length, r.head + size)));\n        }\n        else {\n            changes.push({ from: nextLine.from, to: block.from }, { from: block.to, insert: state.lineBreak + nextLine.text });\n            for (let r of block.ranges)\n                ranges.push(EditorSelection.range(r.anchor - size, r.head - size));\n        }\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({\n        changes,\n        scrollIntoView: true,\n        selection: EditorSelection.create(ranges, state.selection.mainIndex),\n        userEvent: \"move.line\"\n    }));\n    return true;\n}\n/**\nMove the selected lines up one line.\n*/\nconst moveLineUp = ({ state, dispatch }) => moveLine(state, dispatch, false);\n/**\nMove the selected lines down one line.\n*/\nconst moveLineDown = ({ state, dispatch }) => moveLine(state, dispatch, true);\nfunction copyLine(state, dispatch, forward) {\n    if (state.readOnly)\n        return false;\n    let changes = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward)\n            changes.push({ from: block.from, insert: state.doc.slice(block.from, block.to) + state.lineBreak });\n        else\n            changes.push({ from: block.to, insert: state.lineBreak + state.doc.slice(block.from, block.to) });\n    }\n    dispatch(state.update({ changes, scrollIntoView: true, userEvent: \"input.copyline\" }));\n    return true;\n}\n/**\nCreate a copy of the selected lines. Keep the selection in the top copy.\n*/\nconst copyLineUp = ({ state, dispatch }) => copyLine(state, dispatch, false);\n/**\nCreate a copy of the selected lines. Keep the selection in the bottom copy.\n*/\nconst copyLineDown = ({ state, dispatch }) => copyLine(state, dispatch, true);\n/**\nDelete selected lines.\n*/\nconst deleteLine = view => {\n    if (view.state.readOnly)\n        return false;\n    let { state } = view, changes = state.changes(selectedLineBlocks(state).map(({ from, to }) => {\n        if (from > 0)\n            from--;\n        else if (to < state.doc.length)\n            to++;\n        return { from, to };\n    }));\n    let selection = updateSel(state.selection, range => view.moveVertically(range, true)).map(changes);\n    view.dispatch({ changes, selection, scrollIntoView: true, userEvent: \"delete.line\" });\n    return true;\n};\n/**\nReplace the selection with a newline.\n*/\nconst insertNewline = ({ state, dispatch }) => {\n    dispatch(state.update(state.replaceSelection(state.lineBreak), { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\nfunction isBetweenBrackets(state, pos) {\n    if (/\\(\\)|\\[\\]|\\{\\}/.test(state.sliceDoc(pos - 1, pos + 1)))\n        return { from: pos, to: pos };\n    let context = syntaxTree(state).resolveInner(pos);\n    let before = context.childBefore(pos), after = context.childAfter(pos), closedBy;\n    if (before && after && before.to <= pos && after.from >= pos &&\n        (closedBy = before.type.prop(NodeProp.closedBy)) && closedBy.indexOf(after.name) > -1 &&\n        state.doc.lineAt(before.to).from == state.doc.lineAt(after.from).from)\n        return { from: before.to, to: after.from };\n    return null;\n}\n/**\nReplace the selection with a newline and indent the newly created\nline(s). If the current line consists only of whitespace, this\nwill also delete that whitespace. When the cursor is between\nmatching brackets, an additional newline will be inserted after\nthe cursor.\n*/\nconst insertNewlineAndIndent = /*@__PURE__*/newlineAndIndent(false);\n/**\nCreate a blank, indented line below the current line.\n*/\nconst insertBlankLine = /*@__PURE__*/newlineAndIndent(true);\nfunction newlineAndIndent(atEof) {\n    return ({ state, dispatch }) => {\n        if (state.readOnly)\n            return false;\n        let changes = state.changeByRange(range => {\n            let { from, to } = range, line = state.doc.lineAt(from);\n            let explode = !atEof && from == to && isBetweenBrackets(state, from);\n            if (atEof)\n                from = to = (to <= line.to ? line : state.doc.lineAt(to)).to;\n            let cx = new IndentContext(state, { simulateBreak: from, simulateDoubleBreak: !!explode });\n            let indent = getIndentation(cx, from);\n            if (indent == null)\n                indent = /^\\s*/.exec(state.doc.lineAt(from).text)[0].length;\n            while (to < line.to && /\\s/.test(line.text[to - line.from]))\n                to++;\n            if (explode)\n                ({ from, to } = explode);\n            else if (from > line.from && from < line.from + 100 && !/\\S/.test(line.text.slice(0, from)))\n                from = line.from;\n            let insert = [\"\", indentString(state, indent)];\n            if (explode)\n                insert.push(indentString(state, cx.lineIndent(line.from, -1)));\n            return { changes: { from, to, insert: Text.of(insert) },\n                range: EditorSelection.cursor(from + 1 + insert[1].length) };\n        });\n        dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"input\" }));\n        return true;\n    };\n}\nfunction changeBySelectedLine(state, f) {\n    let atLine = -1;\n    return state.changeByRange(range => {\n        let changes = [];\n        for (let pos = range.from; pos <= range.to;) {\n            let line = state.doc.lineAt(pos);\n            if (line.number > atLine && (range.empty || range.to > line.from)) {\n                f(line, changes, range);\n                atLine = line.number;\n            }\n            pos = line.to + 1;\n        }\n        let changeSet = state.changes(changes);\n        return { changes,\n            range: EditorSelection.range(changeSet.mapPos(range.anchor, 1), changeSet.mapPos(range.head, 1)) };\n    });\n}\n/**\nAuto-indent the selected lines. This uses the [indentation service\nfacet](https://codemirror.net/6/docs/ref/#language.indentService) as source for auto-indent\ninformation.\n*/\nconst indentSelection = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let updated = Object.create(null);\n    let context = new IndentContext(state, { overrideIndentation: start => {\n            let found = updated[start];\n            return found == null ? -1 : found;\n        } });\n    let changes = changeBySelectedLine(state, (line, changes, range) => {\n        let indent = getIndentation(context, line.from);\n        if (indent == null)\n            return;\n        if (!/\\S/.test(line.text))\n            indent = 0;\n        let cur = /^\\s*/.exec(line.text)[0];\n        let norm = indentString(state, indent);\n        if (cur != norm || range.from < line.from + cur.length) {\n            updated[line.from] = indent;\n            changes.push({ from: line.from, to: line.from + cur.length, insert: norm });\n        }\n    });\n    if (!changes.changes.empty)\n        dispatch(state.update(changes, { userEvent: \"indent\" }));\n    return true;\n};\n/**\nAdd a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation to all selected\nlines.\n*/\nconst indentMore = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        changes.push({ from: line.from, insert: state.facet(indentUnit) });\n    }), { userEvent: \"input.indent\" }));\n    return true;\n};\n/**\nRemove a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation from all\nselected lines.\n*/\nconst indentLess = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        let space = /^\\s*/.exec(line.text)[0];\n        if (!space)\n            return;\n        let col = countColumn(space, state.tabSize), keep = 0;\n        let insert = indentString(state, Math.max(0, col - getIndentUnit(state)));\n        while (keep < space.length && keep < insert.length && space.charCodeAt(keep) == insert.charCodeAt(keep))\n            keep++;\n        changes.push({ from: line.from + keep, to: line.from + space.length, insert: insert.slice(keep) });\n    }), { userEvent: \"delete.dedent\" }));\n    return true;\n};\n/**\nInsert a tab character at the cursor or, if something is selected,\nuse [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore) to indent the entire\nselection.\n*/\nconst insertTab = ({ state, dispatch }) => {\n    if (state.selection.ranges.some(r => !r.empty))\n        return indentMore({ state, dispatch });\n    dispatch(state.update(state.replaceSelection(\"\\t\"), { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\n/**\nArray of key bindings containing the Emacs-style bindings that are\navailable on macOS by default.\n\n - Ctrl-b: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - Ctrl-f: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-p: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - Ctrl-n: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Ctrl-a: [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Ctrl-e: [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - Ctrl-d: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-h: [`deleteCharBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCharBackward)\n - Ctrl-k: [`deleteToLineEnd`](https://codemirror.net/6/docs/ref/#commands.deleteToLineEnd)\n - Ctrl-Alt-h: [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-o: [`splitLine`](https://codemirror.net/6/docs/ref/#commands.splitLine)\n - Ctrl-t: [`transposeChars`](https://codemirror.net/6/docs/ref/#commands.transposeChars)\n - Ctrl-v: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown)\n - Alt-v: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp)\n*/\nconst emacsStyleKeymap = [\n    { key: \"Ctrl-b\", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },\n    { key: \"Ctrl-f\", run: cursorCharRight, shift: selectCharRight },\n    { key: \"Ctrl-p\", run: cursorLineUp, shift: selectLineUp },\n    { key: \"Ctrl-n\", run: cursorLineDown, shift: selectLineDown },\n    { key: \"Ctrl-a\", run: cursorLineStart, shift: selectLineStart },\n    { key: \"Ctrl-e\", run: cursorLineEnd, shift: selectLineEnd },\n    { key: \"Ctrl-d\", run: deleteCharForward },\n    { key: \"Ctrl-h\", run: deleteCharBackward },\n    { key: \"Ctrl-k\", run: deleteToLineEnd },\n    { key: \"Ctrl-Alt-h\", run: deleteGroupBackward },\n    { key: \"Ctrl-o\", run: splitLine },\n    { key: \"Ctrl-t\", run: transposeChars },\n    { key: \"Ctrl-v\", run: cursorPageDown },\n];\n/**\nAn array of key bindings closely sticking to platform-standard or\nwidely used bindings. (This includes the bindings from\n[`emacsStyleKeymap`](https://codemirror.net/6/docs/ref/#commands.emacsStyleKeymap), with their `key`\nproperty changed to `mac`.)\n\n - ArrowLeft: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - ArrowRight: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-ArrowLeft (Alt-ArrowLeft on macOS): [`cursorGroupLeft`](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) ([`selectGroupLeft`](https://codemirror.net/6/docs/ref/#commands.selectGroupLeft) with Shift)\n - Ctrl-ArrowRight (Alt-ArrowRight on macOS): [`cursorGroupRight`](https://codemirror.net/6/docs/ref/#commands.cursorGroupRight) ([`selectGroupRight`](https://codemirror.net/6/docs/ref/#commands.selectGroupRight) with Shift)\n - Cmd-ArrowLeft (on macOS): [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Cmd-ArrowRight (on macOS): [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - ArrowUp: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - ArrowDown: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Cmd-ArrowUp (on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Cmd-ArrowDown (on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Ctrl-ArrowUp (on macOS): [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - Ctrl-ArrowDown (on macOS): [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - PageUp: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - PageDown: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - Home: [`cursorLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryBackward) ([`selectLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryBackward) with Shift)\n - End: [`cursorLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryForward) ([`selectLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryForward) with Shift)\n - Ctrl-Home (Cmd-Home on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Ctrl-End (Cmd-Home on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Enter: [`insertNewlineAndIndent`](https://codemirror.net/6/docs/ref/#commands.insertNewlineAndIndent)\n - Ctrl-a (Cmd-a on macOS): [`selectAll`](https://codemirror.net/6/docs/ref/#commands.selectAll)\n - Backspace: [`deleteCharBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCharBackward)\n - Delete: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-Backspace (Alt-Backspace on macOS): [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-Delete (Alt-Delete on macOS): [`deleteGroupForward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupForward)\n - Cmd-Backspace (macOS): [`deleteToLineStart`](https://codemirror.net/6/docs/ref/#commands.deleteToLineStart).\n - Cmd-Delete (macOS): [`deleteToLineEnd`](https://codemirror.net/6/docs/ref/#commands.deleteToLineEnd).\n*/\nconst standardKeymap = /*@__PURE__*/[\n    { key: \"ArrowLeft\", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },\n    { key: \"Mod-ArrowLeft\", mac: \"Alt-ArrowLeft\", run: cursorGroupLeft, shift: selectGroupLeft },\n    { mac: \"Cmd-ArrowLeft\", run: cursorLineBoundaryBackward, shift: selectLineBoundaryBackward },\n    { key: \"ArrowRight\", run: cursorCharRight, shift: selectCharRight, preventDefault: true },\n    { key: \"Mod-ArrowRight\", mac: \"Alt-ArrowRight\", run: cursorGroupRight, shift: selectGroupRight },\n    { mac: \"Cmd-ArrowRight\", run: cursorLineBoundaryForward, shift: selectLineBoundaryForward },\n    { key: \"ArrowUp\", run: cursorLineUp, shift: selectLineUp, preventDefault: true },\n    { mac: \"Cmd-ArrowUp\", run: cursorDocStart, shift: selectDocStart },\n    { mac: \"Ctrl-ArrowUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"ArrowDown\", run: cursorLineDown, shift: selectLineDown, preventDefault: true },\n    { mac: \"Cmd-ArrowDown\", run: cursorDocEnd, shift: selectDocEnd },\n    { mac: \"Ctrl-ArrowDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"PageUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"PageDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"Home\", run: cursorLineBoundaryBackward, shift: selectLineBoundaryBackward, preventDefault: true },\n    { key: \"Mod-Home\", run: cursorDocStart, shift: selectDocStart },\n    { key: \"End\", run: cursorLineBoundaryForward, shift: selectLineBoundaryForward, preventDefault: true },\n    { key: \"Mod-End\", run: cursorDocEnd, shift: selectDocEnd },\n    { key: \"Enter\", run: insertNewlineAndIndent },\n    { key: \"Mod-a\", run: selectAll },\n    { key: \"Backspace\", run: deleteCharBackward, shift: deleteCharBackward },\n    { key: \"Delete\", run: deleteCharForward },\n    { key: \"Mod-Backspace\", mac: \"Alt-Backspace\", run: deleteGroupBackward },\n    { key: \"Mod-Delete\", mac: \"Alt-Delete\", run: deleteGroupForward },\n    { mac: \"Mod-Backspace\", run: deleteToLineStart },\n    { mac: \"Mod-Delete\", run: deleteToLineEnd }\n].concat(/*@__PURE__*/emacsStyleKeymap.map(b => ({ mac: b.key, run: b.run, shift: b.shift })));\n/**\nThe default keymap. Includes all bindings from\n[`standardKeymap`](https://codemirror.net/6/docs/ref/#commands.standardKeymap) plus the following:\n\n- Alt-ArrowLeft (Ctrl-ArrowLeft on macOS): [`cursorSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxLeft) ([`selectSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxLeft) with Shift)\n- Alt-ArrowRight (Ctrl-ArrowRight on macOS): [`cursorSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxRight) ([`selectSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxRight) with Shift)\n- Alt-ArrowUp: [`moveLineUp`](https://codemirror.net/6/docs/ref/#commands.moveLineUp)\n- Alt-ArrowDown: [`moveLineDown`](https://codemirror.net/6/docs/ref/#commands.moveLineDown)\n- Shift-Alt-ArrowUp: [`copyLineUp`](https://codemirror.net/6/docs/ref/#commands.copyLineUp)\n- Shift-Alt-ArrowDown: [`copyLineDown`](https://codemirror.net/6/docs/ref/#commands.copyLineDown)\n- Escape: [`simplifySelection`](https://codemirror.net/6/docs/ref/#commands.simplifySelection)\n- Ctrl-Enter (Comd-Enter on macOS): [`insertBlankLine`](https://codemirror.net/6/docs/ref/#commands.insertBlankLine)\n- Alt-l (Ctrl-l on macOS): [`selectLine`](https://codemirror.net/6/docs/ref/#commands.selectLine)\n- Ctrl-i (Cmd-i on macOS): [`selectParentSyntax`](https://codemirror.net/6/docs/ref/#commands.selectParentSyntax)\n- Ctrl-[ (Cmd-[ on macOS): [`indentLess`](https://codemirror.net/6/docs/ref/#commands.indentLess)\n- Ctrl-] (Cmd-] on macOS): [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore)\n- Ctrl-Alt-\\\\ (Cmd-Alt-\\\\ on macOS): [`indentSelection`](https://codemirror.net/6/docs/ref/#commands.indentSelection)\n- Shift-Ctrl-k (Shift-Cmd-k on macOS): [`deleteLine`](https://codemirror.net/6/docs/ref/#commands.deleteLine)\n- Shift-Ctrl-\\\\ (Shift-Cmd-\\\\ on macOS): [`cursorMatchingBracket`](https://codemirror.net/6/docs/ref/#commands.cursorMatchingBracket)\n- Ctrl-/ (Cmd-/ on macOS): [`toggleComment`](https://codemirror.net/6/docs/ref/#commands.toggleComment).\n- Shift-Alt-a: [`toggleBlockComment`](https://codemirror.net/6/docs/ref/#commands.toggleBlockComment).\n*/\nconst defaultKeymap = /*@__PURE__*/[\n    { key: \"Alt-ArrowLeft\", mac: \"Ctrl-ArrowLeft\", run: cursorSyntaxLeft, shift: selectSyntaxLeft },\n    { key: \"Alt-ArrowRight\", mac: \"Ctrl-ArrowRight\", run: cursorSyntaxRight, shift: selectSyntaxRight },\n    { key: \"Alt-ArrowUp\", run: moveLineUp },\n    { key: \"Shift-Alt-ArrowUp\", run: copyLineUp },\n    { key: \"Alt-ArrowDown\", run: moveLineDown },\n    { key: \"Shift-Alt-ArrowDown\", run: copyLineDown },\n    { key: \"Escape\", run: simplifySelection },\n    { key: \"Mod-Enter\", run: insertBlankLine },\n    { key: \"Alt-l\", mac: \"Ctrl-l\", run: selectLine },\n    { key: \"Mod-i\", run: selectParentSyntax, preventDefault: true },\n    { key: \"Mod-[\", run: indentLess },\n    { key: \"Mod-]\", run: indentMore },\n    { key: \"Mod-Alt-\\\\\", run: indentSelection },\n    { key: \"Shift-Mod-k\", run: deleteLine },\n    { key: \"Shift-Mod-\\\\\", run: cursorMatchingBracket },\n    { key: \"Mod-/\", run: toggleComment },\n    { key: \"Alt-A\", run: toggleBlockComment }\n].concat(standardKeymap);\n/**\nA binding that binds Tab to [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore) and\nShift-Tab to [`indentLess`](https://codemirror.net/6/docs/ref/#commands.indentLess).\nPlease see the [Tab example](../../examples/tab/) before using\nthis.\n*/\nconst indentWithTab = { key: \"Tab\", run: indentMore, shift: indentLess };\n\nexport { blockComment, blockUncomment, copyLineDown, copyLineUp, cursorCharBackward, cursorCharForward, cursorCharLeft, cursorCharRight, cursorDocEnd, cursorDocStart, cursorGroupBackward, cursorGroupForward, cursorGroupLeft, cursorGroupRight, cursorLineBoundaryBackward, cursorLineBoundaryForward, cursorLineDown, cursorLineEnd, cursorLineStart, cursorLineUp, cursorMatchingBracket, cursorPageDown, cursorPageUp, cursorSubwordBackward, cursorSubwordForward, cursorSyntaxLeft, cursorSyntaxRight, defaultKeymap, deleteCharBackward, deleteCharForward, deleteGroupBackward, deleteGroupForward, deleteLine, deleteToLineEnd, deleteToLineStart, deleteTrailingWhitespace, emacsStyleKeymap, history, historyField, historyKeymap, indentLess, indentMore, indentSelection, indentWithTab, insertBlankLine, insertNewline, insertNewlineAndIndent, insertTab, invertedEffects, isolateHistory, lineComment, lineUncomment, moveLineDown, moveLineUp, redo, redoDepth, redoSelection, selectAll, selectCharBackward, selectCharForward, selectCharLeft, selectCharRight, selectDocEnd, selectDocStart, selectGroupBackward, selectGroupForward, selectGroupLeft, selectGroupRight, selectLine, selectLineBoundaryBackward, selectLineBoundaryForward, selectLineDown, selectLineEnd, selectLineStart, selectLineUp, selectMatchingBracket, selectPageDown, selectPageUp, selectParentSyntax, selectSubwordBackward, selectSubwordForward, selectSyntaxLeft, selectSyntaxRight, simplifySelection, splitLine, standardKeymap, toggleBlockComment, toggleBlockCommentByLine, toggleComment, toggleLineComment, transposeChars, undo, undoDepth, undoSelection };\n","import { EditorView } from '@codemirror/view';\nimport { HighlightStyle, syntaxHighlighting } from '@codemirror/language';\nimport { tags } from '@lezer/highlight';\n\n// Using https://github.com/one-dark/vscode-one-dark-theme/ as reference for the colors\nconst chalky = \"#e5c07b\", coral = \"#e06c75\", cyan = \"#56b6c2\", invalid = \"#ffffff\", ivory = \"#abb2bf\", stone = \"#7d8799\", // Brightened compared to original to increase contrast\nmalibu = \"#61afef\", sage = \"#98c379\", whiskey = \"#d19a66\", violet = \"#c678dd\", darkBackground = \"#21252b\", highlightBackground = \"#2c313a\", background = \"#282c34\", tooltipBackground = \"#353a42\", selection = \"#3E4451\", cursor = \"#528bff\";\n/**\nThe editor theme styles for One Dark.\n*/\nconst oneDarkTheme = /*@__PURE__*/EditorView.theme({\n    \"&\": {\n        color: ivory,\n        backgroundColor: background\n    },\n    \".cm-content\": {\n        caretColor: cursor\n    },\n    \".cm-cursor, .cm-dropCursor\": { borderLeftColor: cursor },\n    \"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection\": { backgroundColor: selection },\n    \".cm-panels\": { backgroundColor: darkBackground, color: ivory },\n    \".cm-panels.cm-panels-top\": { borderBottom: \"2px solid black\" },\n    \".cm-panels.cm-panels-bottom\": { borderTop: \"2px solid black\" },\n    \".cm-searchMatch\": {\n        backgroundColor: \"#72a1ff59\",\n        outline: \"1px solid #457dff\"\n    },\n    \".cm-searchMatch.cm-searchMatch-selected\": {\n        backgroundColor: \"#6199ff2f\"\n    },\n    \".cm-activeLine\": { backgroundColor: highlightBackground },\n    \".cm-selectionMatch\": { backgroundColor: \"#aafe661a\" },\n    \"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket\": {\n        backgroundColor: \"#bad0f847\",\n        outline: \"1px solid #515a6b\"\n    },\n    \".cm-gutters\": {\n        backgroundColor: background,\n        color: stone,\n        border: \"none\"\n    },\n    \".cm-activeLineGutter\": {\n        backgroundColor: highlightBackground\n    },\n    \".cm-foldPlaceholder\": {\n        backgroundColor: \"transparent\",\n        border: \"none\",\n        color: \"#ddd\"\n    },\n    \".cm-tooltip\": {\n        border: \"none\",\n        backgroundColor: tooltipBackground\n    },\n    \".cm-tooltip .cm-tooltip-arrow:before\": {\n        borderTopColor: \"transparent\",\n        borderBottomColor: \"transparent\"\n    },\n    \".cm-tooltip .cm-tooltip-arrow:after\": {\n        borderTopColor: tooltipBackground,\n        borderBottomColor: tooltipBackground\n    },\n    \".cm-tooltip-autocomplete\": {\n        \"& > ul > li[aria-selected]\": {\n            backgroundColor: highlightBackground,\n            color: ivory\n        }\n    }\n}, { dark: true });\n/**\nThe highlighting style for code in the One Dark theme.\n*/\nconst oneDarkHighlightStyle = /*@__PURE__*/HighlightStyle.define([\n    { tag: tags.keyword,\n        color: violet },\n    { tag: [tags.name, tags.deleted, tags.character, tags.propertyName, tags.macroName],\n        color: coral },\n    { tag: [/*@__PURE__*/tags.function(tags.variableName), tags.labelName],\n        color: malibu },\n    { tag: [tags.color, /*@__PURE__*/tags.constant(tags.name), /*@__PURE__*/tags.standard(tags.name)],\n        color: whiskey },\n    { tag: [/*@__PURE__*/tags.definition(tags.name), tags.separator],\n        color: ivory },\n    { tag: [tags.typeName, tags.className, tags.number, tags.changed, tags.annotation, tags.modifier, tags.self, tags.namespace],\n        color: chalky },\n    { tag: [tags.operator, tags.operatorKeyword, tags.url, tags.escape, tags.regexp, tags.link, /*@__PURE__*/tags.special(tags.string)],\n        color: cyan },\n    { tag: [tags.meta, tags.comment],\n        color: stone },\n    { tag: tags.strong,\n        fontWeight: \"bold\" },\n    { tag: tags.emphasis,\n        fontStyle: \"italic\" },\n    { tag: tags.strikethrough,\n        textDecoration: \"line-through\" },\n    { tag: tags.link,\n        color: stone,\n        textDecoration: \"underline\" },\n    { tag: tags.heading,\n        fontWeight: \"bold\",\n        color: coral },\n    { tag: [tags.atom, tags.bool, /*@__PURE__*/tags.special(tags.variableName)],\n        color: whiskey },\n    { tag: [tags.processingInstruction, tags.string, tags.inserted],\n        color: sage },\n    { tag: tags.invalid,\n        color: invalid },\n]);\n/**\nExtension to enable the One Dark theme (both the editor theme and\nthe highlight style).\n*/\nconst oneDark = [oneDarkTheme, /*@__PURE__*/syntaxHighlighting(oneDarkHighlightStyle)];\n\nexport { oneDark, oneDarkHighlightStyle, oneDarkTheme };\n","export default function crelt() {\n  var elt = arguments[0]\n  if (typeof elt == \"string\") elt = document.createElement(elt)\n  var i = 1, next = arguments[1]\n  if (next && typeof next == \"object\" && next.nodeType == null && !Array.isArray(next)) {\n    for (var name in next) if (Object.prototype.hasOwnProperty.call(next, name)) {\n      var value = next[name]\n      if (typeof value == \"string\") elt.setAttribute(name, value)\n      else if (value != null) elt[name] = value\n    }\n    i++\n  }\n  for (; i < arguments.length; i++) add(elt, arguments[i])\n  return elt\n}\n\nfunction add(elt, child) {\n  if (typeof child == \"string\") {\n    elt.appendChild(document.createTextNode(child))\n  } else if (child == null) {\n  } else if (child.nodeType != null) {\n    elt.appendChild(child)\n  } else if (Array.isArray(child)) {\n    for (var i = 0; i < child.length; i++) add(elt, child[i])\n  } else {\n    throw new RangeError(\"Unsupported child node: \" + child)\n  }\n}\n","import { showPanel, EditorView, getPanel, Decoration, ViewPlugin, runScopeHandlers } from '@codemirror/view';\nimport { codePointAt, fromCodePoint, codePointSize, StateEffect, StateField, EditorSelection, Facet, combineConfig, CharCategory, RangeSetBuilder, Prec } from '@codemirror/state';\nimport elt from 'crelt';\n\nconst basicNormalize = typeof String.prototype.normalize == \"function\"\n    ? x => x.normalize(\"NFKD\") : x => x;\n/**\nA search cursor provides an iterator over text matches in a\ndocument.\n*/\nclass SearchCursor {\n    /**\n    Create a text cursor. The query is the search string, `from` to\n    `to` provides the region to search.\n    \n    When `normalize` is given, it will be called, on both the query\n    string and the content it is matched against, before comparing.\n    You can, for example, create a case-insensitive search by\n    passing `s => s.toLowerCase()`.\n    \n    Text is always normalized with\n    [`.normalize(\"NFKD\")`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)\n    (when supported).\n    */\n    constructor(text, query, from = 0, to = text.length, normalize) {\n        /**\n        The current match (only holds a meaningful value after\n        [`next`](https://codemirror.net/6/docs/ref/#search.SearchCursor.next) has been called and when\n        `done` is false).\n        */\n        this.value = { from: 0, to: 0 };\n        /**\n        Whether the end of the iterated region has been reached.\n        */\n        this.done = false;\n        this.matches = [];\n        this.buffer = \"\";\n        this.bufferPos = 0;\n        this.iter = text.iterRange(from, to);\n        this.bufferStart = from;\n        this.normalize = normalize ? x => normalize(basicNormalize(x)) : basicNormalize;\n        this.query = this.normalize(query);\n    }\n    peek() {\n        if (this.bufferPos == this.buffer.length) {\n            this.bufferStart += this.buffer.length;\n            this.iter.next();\n            if (this.iter.done)\n                return -1;\n            this.bufferPos = 0;\n            this.buffer = this.iter.value;\n        }\n        return codePointAt(this.buffer, this.bufferPos);\n    }\n    /**\n    Look for the next match. Updates the iterator's\n    [`value`](https://codemirror.net/6/docs/ref/#search.SearchCursor.value) and\n    [`done`](https://codemirror.net/6/docs/ref/#search.SearchCursor.done) properties. Should be called\n    at least once before using the cursor.\n    */\n    next() {\n        while (this.matches.length)\n            this.matches.pop();\n        return this.nextOverlapping();\n    }\n    /**\n    The `next` method will ignore matches that partially overlap a\n    previous match. This method behaves like `next`, but includes\n    such matches.\n    */\n    nextOverlapping() {\n        for (;;) {\n            let next = this.peek();\n            if (next < 0) {\n                this.done = true;\n                return this;\n            }\n            let str = fromCodePoint(next), start = this.bufferStart + this.bufferPos;\n            this.bufferPos += codePointSize(next);\n            let norm = this.normalize(str);\n            for (let i = 0, pos = start;; i++) {\n                let code = norm.charCodeAt(i);\n                let match = this.match(code, pos);\n                if (match) {\n                    this.value = match;\n                    return this;\n                }\n                if (i == norm.length - 1)\n                    break;\n                if (pos == start && i < str.length && str.charCodeAt(i) == code)\n                    pos++;\n            }\n        }\n    }\n    match(code, pos) {\n        let match = null;\n        for (let i = 0; i < this.matches.length; i += 2) {\n            let index = this.matches[i], keep = false;\n            if (this.query.charCodeAt(index) == code) {\n                if (index == this.query.length - 1) {\n                    match = { from: this.matches[i + 1], to: pos + 1 };\n                }\n                else {\n                    this.matches[i]++;\n                    keep = true;\n                }\n            }\n            if (!keep) {\n                this.matches.splice(i, 2);\n                i -= 2;\n            }\n        }\n        if (this.query.charCodeAt(0) == code) {\n            if (this.query.length == 1)\n                match = { from: pos, to: pos + 1 };\n            else\n                this.matches.push(1, pos);\n        }\n        return match;\n    }\n}\nif (typeof Symbol != \"undefined\")\n    SearchCursor.prototype[Symbol.iterator] = function () { return this; };\n\nconst empty = { from: -1, to: -1, match: /*@__PURE__*//.*/.exec(\"\") };\nconst baseFlags = \"gm\" + (/x/.unicode == null ? \"\" : \"u\");\n/**\nThis class is similar to [`SearchCursor`](https://codemirror.net/6/docs/ref/#search.SearchCursor)\nbut searches for a regular expression pattern instead of a plain\nstring.\n*/\nclass RegExpCursor {\n    /**\n    Create a cursor that will search the given range in the given\n    document. `query` should be the raw pattern (as you'd pass it to\n    `new RegExp`).\n    */\n    constructor(text, query, options, from = 0, to = text.length) {\n        this.to = to;\n        this.curLine = \"\";\n        /**\n        Set to `true` when the cursor has reached the end of the search\n        range.\n        */\n        this.done = false;\n        /**\n        Will contain an object with the extent of the match and the\n        match object when [`next`](https://codemirror.net/6/docs/ref/#search.RegExpCursor.next)\n        sucessfully finds a match.\n        */\n        this.value = empty;\n        if (/\\\\[sWDnr]|\\n|\\r|\\[\\^/.test(query))\n            return new MultilineRegExpCursor(text, query, options, from, to);\n        this.re = new RegExp(query, baseFlags + ((options === null || options === void 0 ? void 0 : options.ignoreCase) ? \"i\" : \"\"));\n        this.iter = text.iter();\n        let startLine = text.lineAt(from);\n        this.curLineStart = startLine.from;\n        this.matchPos = from;\n        this.getLine(this.curLineStart);\n    }\n    getLine(skip) {\n        this.iter.next(skip);\n        if (this.iter.lineBreak) {\n            this.curLine = \"\";\n        }\n        else {\n            this.curLine = this.iter.value;\n            if (this.curLineStart + this.curLine.length > this.to)\n                this.curLine = this.curLine.slice(0, this.to - this.curLineStart);\n            this.iter.next();\n        }\n    }\n    nextLine() {\n        this.curLineStart = this.curLineStart + this.curLine.length + 1;\n        if (this.curLineStart > this.to)\n            this.curLine = \"\";\n        else\n            this.getLine(0);\n    }\n    /**\n    Move to the next match, if there is one.\n    */\n    next() {\n        for (let off = this.matchPos - this.curLineStart;;) {\n            this.re.lastIndex = off;\n            let match = this.matchPos <= this.to && this.re.exec(this.curLine);\n            if (match) {\n                let from = this.curLineStart + match.index, to = from + match[0].length;\n                this.matchPos = to + (from == to ? 1 : 0);\n                if (from == this.curLine.length)\n                    this.nextLine();\n                if (from < to || from > this.value.to) {\n                    this.value = { from, to, match };\n                    return this;\n                }\n                off = this.matchPos - this.curLineStart;\n            }\n            else if (this.curLineStart + this.curLine.length < this.to) {\n                this.nextLine();\n                off = 0;\n            }\n            else {\n                this.done = true;\n                return this;\n            }\n        }\n    }\n}\nconst flattened = /*@__PURE__*/new WeakMap();\n// Reusable (partially) flattened document strings\nclass FlattenedDoc {\n    constructor(from, text) {\n        this.from = from;\n        this.text = text;\n    }\n    get to() { return this.from + this.text.length; }\n    static get(doc, from, to) {\n        let cached = flattened.get(doc);\n        if (!cached || cached.from >= to || cached.to <= from) {\n            let flat = new FlattenedDoc(from, doc.sliceString(from, to));\n            flattened.set(doc, flat);\n            return flat;\n        }\n        if (cached.from == from && cached.to == to)\n            return cached;\n        let { text, from: cachedFrom } = cached;\n        if (cachedFrom > from) {\n            text = doc.sliceString(from, cachedFrom) + text;\n            cachedFrom = from;\n        }\n        if (cached.to < to)\n            text += doc.sliceString(cached.to, to);\n        flattened.set(doc, new FlattenedDoc(cachedFrom, text));\n        return new FlattenedDoc(from, text.slice(from - cachedFrom, to - cachedFrom));\n    }\n}\nclass MultilineRegExpCursor {\n    constructor(text, query, options, from, to) {\n        this.text = text;\n        this.to = to;\n        this.done = false;\n        this.value = empty;\n        this.matchPos = from;\n        this.re = new RegExp(query, baseFlags + ((options === null || options === void 0 ? void 0 : options.ignoreCase) ? \"i\" : \"\"));\n        this.flat = FlattenedDoc.get(text, from, this.chunkEnd(from + 5000 /* Base */));\n    }\n    chunkEnd(pos) {\n        return pos >= this.to ? this.to : this.text.lineAt(pos).to;\n    }\n    next() {\n        for (;;) {\n            let off = this.re.lastIndex = this.matchPos - this.flat.from;\n            let match = this.re.exec(this.flat.text);\n            // Skip empty matches directly after the last match\n            if (match && !match[0] && match.index == off) {\n                this.re.lastIndex = off + 1;\n                match = this.re.exec(this.flat.text);\n            }\n            // If a match goes almost to the end of a noncomplete chunk, try\n            // again, since it'll likely be able to match more\n            if (match && this.flat.to < this.to && match.index + match[0].length > this.flat.text.length - 10)\n                match = null;\n            if (match) {\n                let from = this.flat.from + match.index, to = from + match[0].length;\n                this.value = { from, to, match };\n                this.matchPos = to + (from == to ? 1 : 0);\n                return this;\n            }\n            else {\n                if (this.flat.to == this.to) {\n                    this.done = true;\n                    return this;\n                }\n                // Grow the flattened doc\n                this.flat = FlattenedDoc.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + this.flat.text.length * 2));\n            }\n        }\n    }\n}\nif (typeof Symbol != \"undefined\") {\n    RegExpCursor.prototype[Symbol.iterator] = MultilineRegExpCursor.prototype[Symbol.iterator] =\n        function () { return this; };\n}\nfunction validRegExp(source) {\n    try {\n        new RegExp(source, baseFlags);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\n\nfunction createLineDialog(view) {\n    let input = elt(\"input\", { class: \"cm-textfield\", name: \"line\" });\n    let dom = elt(\"form\", {\n        class: \"cm-gotoLine\",\n        onkeydown: (event) => {\n            if (event.keyCode == 27) { // Escape\n                event.preventDefault();\n                view.dispatch({ effects: dialogEffect.of(false) });\n                view.focus();\n            }\n            else if (event.keyCode == 13) { // Enter\n                event.preventDefault();\n                go();\n            }\n        },\n        onsubmit: (event) => {\n            event.preventDefault();\n            go();\n        }\n    }, elt(\"label\", view.state.phrase(\"Go to line\"), \": \", input), \" \", elt(\"button\", { class: \"cm-button\", type: \"submit\" }, view.state.phrase(\"go\")));\n    function go() {\n        let match = /^([+-])?(\\d+)?(:\\d+)?(%)?$/.exec(input.value);\n        if (!match)\n            return;\n        let { state } = view, startLine = state.doc.lineAt(state.selection.main.head);\n        let [, sign, ln, cl, percent] = match;\n        let col = cl ? +cl.slice(1) : 0;\n        let line = ln ? +ln : startLine.number;\n        if (ln && percent) {\n            let pc = line / 100;\n            if (sign)\n                pc = pc * (sign == \"-\" ? -1 : 1) + (startLine.number / state.doc.lines);\n            line = Math.round(state.doc.lines * pc);\n        }\n        else if (ln && sign) {\n            line = line * (sign == \"-\" ? -1 : 1) + startLine.number;\n        }\n        let docLine = state.doc.line(Math.max(1, Math.min(state.doc.lines, line)));\n        view.dispatch({\n            effects: dialogEffect.of(false),\n            selection: EditorSelection.cursor(docLine.from + Math.max(0, Math.min(col, docLine.length))),\n            scrollIntoView: true\n        });\n        view.focus();\n    }\n    return { dom };\n}\nconst dialogEffect = /*@__PURE__*/StateEffect.define();\nconst dialogField = /*@__PURE__*/StateField.define({\n    create() { return true; },\n    update(value, tr) {\n        for (let e of tr.effects)\n            if (e.is(dialogEffect))\n                value = e.value;\n        return value;\n    },\n    provide: f => showPanel.from(f, val => val ? createLineDialog : null)\n});\n/**\nCommand that shows a dialog asking the user for a line number, and\nwhen a valid position is provided, moves the cursor to that line.\n\nSupports line numbers, relative line offsets prefixed with `+` or\n`-`, document percentages suffixed with `%`, and an optional\ncolumn position by adding `:` and a second number after the line\nnumber.\n\nThe dialog can be styled with the `panel.gotoLine` theme\nselector.\n*/\nconst gotoLine = view => {\n    let panel = getPanel(view, createLineDialog);\n    if (!panel) {\n        let effects = [dialogEffect.of(true)];\n        if (view.state.field(dialogField, false) == null)\n            effects.push(StateEffect.appendConfig.of([dialogField, baseTheme$1]));\n        view.dispatch({ effects });\n        panel = getPanel(view, createLineDialog);\n    }\n    if (panel)\n        panel.dom.querySelector(\"input\").focus();\n    return true;\n};\nconst baseTheme$1 = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-panel.cm-gotoLine\": {\n        padding: \"2px 6px 4px\",\n        \"& label\": { fontSize: \"80%\" }\n    }\n});\n\nconst defaultHighlightOptions = {\n    highlightWordAroundCursor: false,\n    minSelectionLength: 1,\n    maxMatches: 100,\n    wholeWords: false\n};\nconst highlightConfig = /*@__PURE__*/Facet.define({\n    combine(options) {\n        return combineConfig(options, defaultHighlightOptions, {\n            highlightWordAroundCursor: (a, b) => a || b,\n            minSelectionLength: Math.min,\n            maxMatches: Math.min\n        });\n    }\n});\n/**\nThis extension highlights text that matches the selection. It uses\nthe `\"cm-selectionMatch\"` class for the highlighting. When\n`highlightWordAroundCursor` is enabled, the word at the cursor\nitself will be highlighted with `\"cm-selectionMatch-main\"`.\n*/\nfunction highlightSelectionMatches(options) {\n    let ext = [defaultTheme, matchHighlighter];\n    if (options)\n        ext.push(highlightConfig.of(options));\n    return ext;\n}\nconst matchDeco = /*@__PURE__*/Decoration.mark({ class: \"cm-selectionMatch\" });\nconst mainMatchDeco = /*@__PURE__*/Decoration.mark({ class: \"cm-selectionMatch cm-selectionMatch-main\" });\n// Whether the characters directly outside the given positions are non-word characters\nfunction insideWordBoundaries(check, state, from, to) {\n    return (from == 0 || check(state.sliceDoc(from - 1, from)) != CharCategory.Word) &&\n        (to == state.doc.length || check(state.sliceDoc(to, to + 1)) != CharCategory.Word);\n}\n// Whether the characters directly at the given positions are word characters\nfunction insideWord(check, state, from, to) {\n    return check(state.sliceDoc(from, from + 1)) == CharCategory.Word\n        && check(state.sliceDoc(to - 1, to)) == CharCategory.Word;\n}\nconst matchHighlighter = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.decorations = this.getDeco(view);\n    }\n    update(update) {\n        if (update.selectionSet || update.docChanged || update.viewportChanged)\n            this.decorations = this.getDeco(update.view);\n    }\n    getDeco(view) {\n        let conf = view.state.facet(highlightConfig);\n        let { state } = view, sel = state.selection;\n        if (sel.ranges.length > 1)\n            return Decoration.none;\n        let range = sel.main, query, check = null;\n        if (range.empty) {\n            if (!conf.highlightWordAroundCursor)\n                return Decoration.none;\n            let word = state.wordAt(range.head);\n            if (!word)\n                return Decoration.none;\n            check = state.charCategorizer(range.head);\n            query = state.sliceDoc(word.from, word.to);\n        }\n        else {\n            let len = range.to - range.from;\n            if (len < conf.minSelectionLength || len > 200)\n                return Decoration.none;\n            if (conf.wholeWords) {\n                query = state.sliceDoc(range.from, range.to); // TODO: allow and include leading/trailing space?\n                check = state.charCategorizer(range.head);\n                if (!(insideWordBoundaries(check, state, range.from, range.to)\n                    && insideWord(check, state, range.from, range.to)))\n                    return Decoration.none;\n            }\n            else {\n                query = state.sliceDoc(range.from, range.to).trim();\n                if (!query)\n                    return Decoration.none;\n            }\n        }\n        let deco = [];\n        for (let part of view.visibleRanges) {\n            let cursor = new SearchCursor(state.doc, query, part.from, part.to);\n            while (!cursor.next().done) {\n                let { from, to } = cursor.value;\n                if (!check || insideWordBoundaries(check, state, from, to)) {\n                    if (range.empty && from <= range.from && to >= range.to)\n                        deco.push(mainMatchDeco.range(from, to));\n                    else if (from >= range.to || to <= range.from)\n                        deco.push(matchDeco.range(from, to));\n                    if (deco.length > conf.maxMatches)\n                        return Decoration.none;\n                }\n            }\n        }\n        return Decoration.set(deco);\n    }\n}, {\n    decorations: v => v.decorations\n});\nconst defaultTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-selectionMatch\": { backgroundColor: \"#99ff7780\" },\n    \".cm-searchMatch .cm-selectionMatch\": { backgroundColor: \"transparent\" }\n});\n// Select the words around the cursors.\nconst selectWord = ({ state, dispatch }) => {\n    let { selection } = state;\n    let newSel = EditorSelection.create(selection.ranges.map(range => state.wordAt(range.head) || EditorSelection.cursor(range.head)), selection.mainIndex);\n    if (newSel.eq(selection))\n        return false;\n    dispatch(state.update({ selection: newSel }));\n    return true;\n};\n// Find next occurrence of query relative to last cursor. Wrap around\n// the document if there are no more matches.\nfunction findNextOccurrence(state, query) {\n    let { main, ranges } = state.selection;\n    let word = state.wordAt(main.head), fullWord = word && word.from == main.from && word.to == main.to;\n    for (let cycled = false, cursor = new SearchCursor(state.doc, query, ranges[ranges.length - 1].to);;) {\n        cursor.next();\n        if (cursor.done) {\n            if (cycled)\n                return null;\n            cursor = new SearchCursor(state.doc, query, 0, Math.max(0, ranges[ranges.length - 1].from - 1));\n            cycled = true;\n        }\n        else {\n            if (cycled && ranges.some(r => r.from == cursor.value.from))\n                continue;\n            if (fullWord) {\n                let word = state.wordAt(cursor.value.from);\n                if (!word || word.from != cursor.value.from || word.to != cursor.value.to)\n                    continue;\n            }\n            return cursor.value;\n        }\n    }\n}\n/**\nSelect next occurrence of the current selection. Expand selection\nto the surrounding word when the selection is empty.\n*/\nconst selectNextOccurrence = ({ state, dispatch }) => {\n    let { ranges } = state.selection;\n    if (ranges.some(sel => sel.from === sel.to))\n        return selectWord({ state, dispatch });\n    let searchedText = state.sliceDoc(ranges[0].from, ranges[0].to);\n    if (state.selection.ranges.some(r => state.sliceDoc(r.from, r.to) != searchedText))\n        return false;\n    let range = findNextOccurrence(state, searchedText);\n    if (!range)\n        return false;\n    dispatch(state.update({\n        selection: state.selection.addRange(EditorSelection.range(range.from, range.to), false),\n        effects: EditorView.scrollIntoView(range.to)\n    }));\n    return true;\n};\n\nconst searchConfigFacet = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        var _a;\n        return {\n            top: configs.reduce((val, conf) => val !== null && val !== void 0 ? val : conf.top, undefined) || false,\n            caseSensitive: configs.reduce((val, conf) => val !== null && val !== void 0 ? val : conf.caseSensitive, undefined) || false,\n            createPanel: ((_a = configs.find(c => c.createPanel)) === null || _a === void 0 ? void 0 : _a.createPanel) || (view => new SearchPanel(view))\n        };\n    }\n});\n/**\nAdd search state to the editor configuration, and optionally\nconfigure the search extension.\n([`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel) will automatically\nenable this if it isn't already on).\n*/\nfunction search(config) {\n    return config ? [searchConfigFacet.of(config), searchExtensions] : searchExtensions;\n}\n/**\nA search query. Part of the editor's search state.\n*/\nclass SearchQuery {\n    /**\n    Create a query object.\n    */\n    constructor(config) {\n        this.search = config.search;\n        this.caseSensitive = !!config.caseSensitive;\n        this.regexp = !!config.regexp;\n        this.replace = config.replace || \"\";\n        this.valid = !!this.search && (!this.regexp || validRegExp(this.search));\n        this.unquoted = config.literal ? this.search : this.search.replace(/\\\\([nrt\\\\])/g, (_, ch) => ch == \"n\" ? \"\\n\" : ch == \"r\" ? \"\\r\" : ch == \"t\" ? \"\\t\" : \"\\\\\");\n    }\n    /**\n    Compare this query to another query.\n    */\n    eq(other) {\n        return this.search == other.search && this.replace == other.replace &&\n            this.caseSensitive == other.caseSensitive && this.regexp == other.regexp;\n    }\n    /**\n    @internal\n    */\n    create() {\n        return this.regexp ? new RegExpQuery(this) : new StringQuery(this);\n    }\n    /**\n    Get a search cursor for this query, searching through the given\n    range in the given document.\n    */\n    getCursor(doc, from = 0, to = doc.length) {\n        return this.regexp ? regexpCursor(this, doc, from, to) : stringCursor(this, doc, from, to);\n    }\n}\nclass QueryType {\n    constructor(spec) {\n        this.spec = spec;\n    }\n}\nfunction stringCursor(spec, doc, from, to) {\n    return new SearchCursor(doc, spec.unquoted, from, to, spec.caseSensitive ? undefined : x => x.toLowerCase());\n}\nclass StringQuery extends QueryType {\n    constructor(spec) {\n        super(spec);\n    }\n    nextMatch(doc, curFrom, curTo) {\n        let cursor = stringCursor(this.spec, doc, curTo, doc.length).nextOverlapping();\n        if (cursor.done)\n            cursor = stringCursor(this.spec, doc, 0, curFrom).nextOverlapping();\n        return cursor.done ? null : cursor.value;\n    }\n    // Searching in reverse is, rather than implementing inverted search\n    // cursor, done by scanning chunk after chunk forward.\n    prevMatchInRange(doc, from, to) {\n        for (let pos = to;;) {\n            let start = Math.max(from, pos - 10000 /* ChunkSize */ - this.spec.unquoted.length);\n            let cursor = stringCursor(this.spec, doc, start, pos), range = null;\n            while (!cursor.nextOverlapping().done)\n                range = cursor.value;\n            if (range)\n                return range;\n            if (start == from)\n                return null;\n            pos -= 10000 /* ChunkSize */;\n        }\n    }\n    prevMatch(doc, curFrom, curTo) {\n        return this.prevMatchInRange(doc, 0, curFrom) ||\n            this.prevMatchInRange(doc, curTo, doc.length);\n    }\n    getReplacement(_result) { return this.spec.replace; }\n    matchAll(doc, limit) {\n        let cursor = stringCursor(this.spec, doc, 0, doc.length), ranges = [];\n        while (!cursor.next().done) {\n            if (ranges.length >= limit)\n                return null;\n            ranges.push(cursor.value);\n        }\n        return ranges;\n    }\n    highlight(doc, from, to, add) {\n        let cursor = stringCursor(this.spec, doc, Math.max(0, from - this.spec.unquoted.length), Math.min(to + this.spec.unquoted.length, doc.length));\n        while (!cursor.next().done)\n            add(cursor.value.from, cursor.value.to);\n    }\n}\nfunction regexpCursor(spec, doc, from, to) {\n    return new RegExpCursor(doc, spec.search, spec.caseSensitive ? undefined : { ignoreCase: true }, from, to);\n}\nclass RegExpQuery extends QueryType {\n    nextMatch(doc, curFrom, curTo) {\n        let cursor = regexpCursor(this.spec, doc, curTo, doc.length).next();\n        if (cursor.done)\n            cursor = regexpCursor(this.spec, doc, 0, curFrom).next();\n        return cursor.done ? null : cursor.value;\n    }\n    prevMatchInRange(doc, from, to) {\n        for (let size = 1;; size++) {\n            let start = Math.max(from, to - size * 10000 /* ChunkSize */);\n            let cursor = regexpCursor(this.spec, doc, start, to), range = null;\n            while (!cursor.next().done)\n                range = cursor.value;\n            if (range && (start == from || range.from > start + 10))\n                return range;\n            if (start == from)\n                return null;\n        }\n    }\n    prevMatch(doc, curFrom, curTo) {\n        return this.prevMatchInRange(doc, 0, curFrom) ||\n            this.prevMatchInRange(doc, curTo, doc.length);\n    }\n    getReplacement(result) {\n        return this.spec.replace.replace(/\\$([$&\\d+])/g, (m, i) => i == \"$\" ? \"$\"\n            : i == \"&\" ? result.match[0]\n                : i != \"0\" && +i < result.match.length ? result.match[i]\n                    : m);\n    }\n    matchAll(doc, limit) {\n        let cursor = regexpCursor(this.spec, doc, 0, doc.length), ranges = [];\n        while (!cursor.next().done) {\n            if (ranges.length >= limit)\n                return null;\n            ranges.push(cursor.value);\n        }\n        return ranges;\n    }\n    highlight(doc, from, to, add) {\n        let cursor = regexpCursor(this.spec, doc, Math.max(0, from - 250 /* HighlightMargin */), Math.min(to + 250 /* HighlightMargin */, doc.length));\n        while (!cursor.next().done)\n            add(cursor.value.from, cursor.value.to);\n    }\n}\n/**\nA state effect that updates the current search query. Note that\nthis only has an effect if the search state has been initialized\n(by including [`search`](https://codemirror.net/6/docs/ref/#search.search) in your configuration or\nby running [`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel) at least\nonce).\n*/\nconst setSearchQuery = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst searchState = /*@__PURE__*/StateField.define({\n    create(state) {\n        return new SearchState(defaultQuery(state).create(), null);\n    },\n    update(value, tr) {\n        for (let effect of tr.effects) {\n            if (effect.is(setSearchQuery))\n                value = new SearchState(effect.value.create(), value.panel);\n            else if (effect.is(togglePanel))\n                value = new SearchState(value.query, effect.value ? createSearchPanel : null);\n        }\n        return value;\n    },\n    provide: f => showPanel.from(f, val => val.panel)\n});\n/**\nGet the current search query from an editor state.\n*/\nfunction getSearchQuery(state) {\n    let curState = state.field(searchState, false);\n    return curState ? curState.query.spec : defaultQuery(state);\n}\nclass SearchState {\n    constructor(query, panel) {\n        this.query = query;\n        this.panel = panel;\n    }\n}\nconst matchMark = /*@__PURE__*/Decoration.mark({ class: \"cm-searchMatch\" }), selectedMatchMark = /*@__PURE__*/Decoration.mark({ class: \"cm-searchMatch cm-searchMatch-selected\" });\nconst searchHighlighter = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.decorations = this.highlight(view.state.field(searchState));\n    }\n    update(update) {\n        let state = update.state.field(searchState);\n        if (state != update.startState.field(searchState) || update.docChanged || update.selectionSet || update.viewportChanged)\n            this.decorations = this.highlight(state);\n    }\n    highlight({ query, panel }) {\n        if (!panel || !query.spec.valid)\n            return Decoration.none;\n        let { view } = this;\n        let builder = new RangeSetBuilder();\n        for (let i = 0, ranges = view.visibleRanges, l = ranges.length; i < l; i++) {\n            let { from, to } = ranges[i];\n            while (i < l - 1 && to > ranges[i + 1].from - 2 * 250 /* HighlightMargin */)\n                to = ranges[++i].to;\n            query.highlight(view.state.doc, from, to, (from, to) => {\n                let selected = view.state.selection.ranges.some(r => r.from == from && r.to == to);\n                builder.add(from, to, selected ? selectedMatchMark : matchMark);\n            });\n        }\n        return builder.finish();\n    }\n}, {\n    decorations: v => v.decorations\n});\nfunction searchCommand(f) {\n    return view => {\n        let state = view.state.field(searchState, false);\n        return state && state.query.spec.valid ? f(view, state) : openSearchPanel(view);\n    };\n}\n/**\nOpen the search panel if it isn't already open, and move the\nselection to the first match after the current main selection.\nWill wrap around to the start of the document when it reaches the\nend.\n*/\nconst findNext = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { from, to } = view.state.selection.main;\n    let next = query.nextMatch(view.state.doc, from, to);\n    if (!next || next.from == from && next.to == to)\n        return false;\n    view.dispatch({\n        selection: { anchor: next.from, head: next.to },\n        scrollIntoView: true,\n        effects: announceMatch(view, next),\n        userEvent: \"select.search\"\n    });\n    return true;\n});\n/**\nMove the selection to the previous instance of the search query,\nbefore the current main selection. Will wrap past the start\nof the document to start searching at the end again.\n*/\nconst findPrevious = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { state } = view, { from, to } = state.selection.main;\n    let range = query.prevMatch(state.doc, from, to);\n    if (!range)\n        return false;\n    view.dispatch({\n        selection: { anchor: range.from, head: range.to },\n        scrollIntoView: true,\n        effects: announceMatch(view, range),\n        userEvent: \"select.search\"\n    });\n    return true;\n});\n/**\nSelect all instances of the search query.\n*/\nconst selectMatches = /*@__PURE__*/searchCommand((view, { query }) => {\n    let ranges = query.matchAll(view.state.doc, 1000);\n    if (!ranges || !ranges.length)\n        return false;\n    view.dispatch({\n        selection: EditorSelection.create(ranges.map(r => EditorSelection.range(r.from, r.to))),\n        userEvent: \"select.search.matches\"\n    });\n    return true;\n});\n/**\nSelect all instances of the currently selected text.\n*/\nconst selectSelectionMatches = ({ state, dispatch }) => {\n    let sel = state.selection;\n    if (sel.ranges.length > 1 || sel.main.empty)\n        return false;\n    let { from, to } = sel.main;\n    let ranges = [], main = 0;\n    for (let cur = new SearchCursor(state.doc, state.sliceDoc(from, to)); !cur.next().done;) {\n        if (ranges.length > 1000)\n            return false;\n        if (cur.value.from == from)\n            main = ranges.length;\n        ranges.push(EditorSelection.range(cur.value.from, cur.value.to));\n    }\n    dispatch(state.update({\n        selection: EditorSelection.create(ranges, main),\n        userEvent: \"select.search.matches\"\n    }));\n    return true;\n};\n/**\nReplace the current match of the search query.\n*/\nconst replaceNext = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { state } = view, { from, to } = state.selection.main;\n    if (state.readOnly)\n        return false;\n    let next = query.nextMatch(state.doc, from, from);\n    if (!next)\n        return false;\n    let changes = [], selection, replacement;\n    let announce = [];\n    if (next.from == from && next.to == to) {\n        replacement = state.toText(query.getReplacement(next));\n        changes.push({ from: next.from, to: next.to, insert: replacement });\n        next = query.nextMatch(state.doc, next.from, next.to);\n        announce.push(EditorView.announce.of(state.phrase(\"replaced match on line $\", state.doc.lineAt(from).number) + \".\"));\n    }\n    if (next) {\n        let off = changes.length == 0 || changes[0].from >= next.to ? 0 : next.to - next.from - replacement.length;\n        selection = { anchor: next.from - off, head: next.to - off };\n        announce.push(announceMatch(view, next));\n    }\n    view.dispatch({\n        changes, selection,\n        scrollIntoView: !!selection,\n        effects: announce,\n        userEvent: \"input.replace\"\n    });\n    return true;\n});\n/**\nReplace all instances of the search query with the given\nreplacement.\n*/\nconst replaceAll = /*@__PURE__*/searchCommand((view, { query }) => {\n    if (view.state.readOnly)\n        return false;\n    let changes = query.matchAll(view.state.doc, 1e9).map(match => {\n        let { from, to } = match;\n        return { from, to, insert: query.getReplacement(match) };\n    });\n    if (!changes.length)\n        return false;\n    let announceText = view.state.phrase(\"replaced $ matches\", changes.length) + \".\";\n    view.dispatch({\n        changes,\n        effects: EditorView.announce.of(announceText),\n        userEvent: \"input.replace.all\"\n    });\n    return true;\n});\nfunction createSearchPanel(view) {\n    return view.state.facet(searchConfigFacet).createPanel(view);\n}\nfunction defaultQuery(state, fallback) {\n    var _a;\n    let sel = state.selection.main;\n    let selText = sel.empty || sel.to > sel.from + 100 ? \"\" : state.sliceDoc(sel.from, sel.to);\n    let caseSensitive = (_a = fallback === null || fallback === void 0 ? void 0 : fallback.caseSensitive) !== null && _a !== void 0 ? _a : state.facet(searchConfigFacet).caseSensitive;\n    return fallback && !selText ? fallback : new SearchQuery({ search: selText.replace(/\\n/g, \"\\\\n\"), caseSensitive });\n}\n/**\nMake sure the search panel is open and focused.\n*/\nconst openSearchPanel = view => {\n    let state = view.state.field(searchState, false);\n    if (state && state.panel) {\n        let panel = getPanel(view, createSearchPanel);\n        if (!panel)\n            return false;\n        let searchInput = panel.dom.querySelector(\"[main-field]\");\n        if (searchInput && searchInput != view.root.activeElement) {\n            let query = defaultQuery(view.state, state.query.spec);\n            if (query.valid)\n                view.dispatch({ effects: setSearchQuery.of(query) });\n            searchInput.focus();\n            searchInput.select();\n        }\n    }\n    else {\n        view.dispatch({ effects: [\n                togglePanel.of(true),\n                state ? setSearchQuery.of(defaultQuery(view.state, state.query.spec)) : StateEffect.appendConfig.of(searchExtensions)\n            ] });\n    }\n    return true;\n};\n/**\nClose the search panel.\n*/\nconst closeSearchPanel = view => {\n    let state = view.state.field(searchState, false);\n    if (!state || !state.panel)\n        return false;\n    let panel = getPanel(view, createSearchPanel);\n    if (panel && panel.dom.contains(view.root.activeElement))\n        view.focus();\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nDefault search-related key bindings.\n\n - Mod-f: [`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel)\n - F3, Mod-g: [`findNext`](https://codemirror.net/6/docs/ref/#search.findNext)\n - Shift-F3, Shift-Mod-g: [`findPrevious`](https://codemirror.net/6/docs/ref/#search.findPrevious)\n - Alt-g: [`gotoLine`](https://codemirror.net/6/docs/ref/#search.gotoLine)\n - Mod-d: [`selectNextOccurrence`](https://codemirror.net/6/docs/ref/#search.selectNextOccurrence)\n*/\nconst searchKeymap = [\n    { key: \"Mod-f\", run: openSearchPanel, scope: \"editor search-panel\" },\n    { key: \"F3\", run: findNext, shift: findPrevious, scope: \"editor search-panel\", preventDefault: true },\n    { key: \"Mod-g\", run: findNext, shift: findPrevious, scope: \"editor search-panel\", preventDefault: true },\n    { key: \"Escape\", run: closeSearchPanel, scope: \"editor search-panel\" },\n    { key: \"Mod-Shift-l\", run: selectSelectionMatches },\n    { key: \"Alt-g\", run: gotoLine },\n    { key: \"Mod-d\", run: selectNextOccurrence, preventDefault: true },\n];\nclass SearchPanel {\n    constructor(view) {\n        this.view = view;\n        let query = this.query = view.state.field(searchState).query.spec;\n        this.commit = this.commit.bind(this);\n        this.searchField = elt(\"input\", {\n            value: query.search,\n            placeholder: phrase(view, \"Find\"),\n            \"aria-label\": phrase(view, \"Find\"),\n            class: \"cm-textfield\",\n            name: \"search\",\n            \"main-field\": \"true\",\n            onchange: this.commit,\n            onkeyup: this.commit\n        });\n        this.replaceField = elt(\"input\", {\n            value: query.replace,\n            placeholder: phrase(view, \"Replace\"),\n            \"aria-label\": phrase(view, \"Replace\"),\n            class: \"cm-textfield\",\n            name: \"replace\",\n            onchange: this.commit,\n            onkeyup: this.commit\n        });\n        this.caseField = elt(\"input\", {\n            type: \"checkbox\",\n            name: \"case\",\n            checked: query.caseSensitive,\n            onchange: this.commit\n        });\n        this.reField = elt(\"input\", {\n            type: \"checkbox\",\n            name: \"re\",\n            checked: query.regexp,\n            onchange: this.commit\n        });\n        function button(name, onclick, content) {\n            return elt(\"button\", { class: \"cm-button\", name, onclick, type: \"button\" }, content);\n        }\n        this.dom = elt(\"div\", { onkeydown: (e) => this.keydown(e), class: \"cm-search\" }, [\n            this.searchField,\n            button(\"next\", () => findNext(view), [phrase(view, \"next\")]),\n            button(\"prev\", () => findPrevious(view), [phrase(view, \"previous\")]),\n            button(\"select\", () => selectMatches(view), [phrase(view, \"all\")]),\n            elt(\"label\", null, [this.caseField, phrase(view, \"match case\")]),\n            elt(\"label\", null, [this.reField, phrase(view, \"regexp\")]),\n            ...view.state.readOnly ? [] : [\n                elt(\"br\"),\n                this.replaceField,\n                button(\"replace\", () => replaceNext(view), [phrase(view, \"replace\")]),\n                button(\"replaceAll\", () => replaceAll(view), [phrase(view, \"replace all\")]),\n                elt(\"button\", {\n                    name: \"close\",\n                    onclick: () => closeSearchPanel(view),\n                    \"aria-label\": phrase(view, \"close\"),\n                    type: \"button\"\n                }, [\"×\"])\n            ]\n        ]);\n    }\n    commit() {\n        let query = new SearchQuery({\n            search: this.searchField.value,\n            caseSensitive: this.caseField.checked,\n            regexp: this.reField.checked,\n            replace: this.replaceField.value\n        });\n        if (!query.eq(this.query)) {\n            this.query = query;\n            this.view.dispatch({ effects: setSearchQuery.of(query) });\n        }\n    }\n    keydown(e) {\n        if (runScopeHandlers(this.view, e, \"search-panel\")) {\n            e.preventDefault();\n        }\n        else if (e.keyCode == 13 && e.target == this.searchField) {\n            e.preventDefault();\n            (e.shiftKey ? findPrevious : findNext)(this.view);\n        }\n        else if (e.keyCode == 13 && e.target == this.replaceField) {\n            e.preventDefault();\n            replaceNext(this.view);\n        }\n    }\n    update(update) {\n        for (let tr of update.transactions)\n            for (let effect of tr.effects) {\n                if (effect.is(setSearchQuery) && !effect.value.eq(this.query))\n                    this.setQuery(effect.value);\n            }\n    }\n    setQuery(query) {\n        this.query = query;\n        this.searchField.value = query.search;\n        this.replaceField.value = query.replace;\n        this.caseField.checked = query.caseSensitive;\n        this.reField.checked = query.regexp;\n    }\n    mount() {\n        this.searchField.select();\n    }\n    get pos() { return 80; }\n    get top() { return this.view.state.facet(searchConfigFacet).top; }\n}\nfunction phrase(view, phrase) { return view.state.phrase(phrase); }\nconst AnnounceMargin = 30;\nconst Break = /[\\s\\.,:;?!]/;\nfunction announceMatch(view, { from, to }) {\n    let line = view.state.doc.lineAt(from), lineEnd = view.state.doc.lineAt(to).to;\n    let start = Math.max(line.from, from - AnnounceMargin), end = Math.min(lineEnd, to + AnnounceMargin);\n    let text = view.state.sliceDoc(start, end);\n    if (start != line.from) {\n        for (let i = 0; i < AnnounceMargin; i++)\n            if (!Break.test(text[i + 1]) && Break.test(text[i])) {\n                text = text.slice(i);\n                break;\n            }\n    }\n    if (end != lineEnd) {\n        for (let i = text.length - 1; i > text.length - AnnounceMargin; i--)\n            if (!Break.test(text[i - 1]) && Break.test(text[i])) {\n                text = text.slice(0, i);\n                break;\n            }\n    }\n    return EditorView.announce.of(`${view.state.phrase(\"current match\")}. ${text} ${view.state.phrase(\"on line\")} ${line.number}.`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-panel.cm-search\": {\n        padding: \"2px 6px 4px\",\n        position: \"relative\",\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"4px\",\n            backgroundColor: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        },\n        \"& input, & button, & label\": {\n            margin: \".2em .6em .2em 0\"\n        },\n        \"& input[type=checkbox]\": {\n            marginRight: \".2em\"\n        },\n        \"& label\": {\n            fontSize: \"80%\",\n            whiteSpace: \"pre\"\n        }\n    },\n    \"&light .cm-searchMatch\": { backgroundColor: \"#ffff0054\" },\n    \"&dark .cm-searchMatch\": { backgroundColor: \"#00ffff8a\" },\n    \"&light .cm-searchMatch-selected\": { backgroundColor: \"#ff6a0054\" },\n    \"&dark .cm-searchMatch-selected\": { backgroundColor: \"#ff00ff8a\" }\n});\nconst searchExtensions = [\n    searchState,\n    /*@__PURE__*/Prec.lowest(searchHighlighter),\n    baseTheme\n];\n\nexport { RegExpCursor, SearchCursor, SearchQuery, closeSearchPanel, findNext, findPrevious, getSearchQuery, gotoLine, highlightSelectionMatches, openSearchPanel, replaceAll, replaceNext, search, searchKeymap, selectMatches, selectNextOccurrence, selectSelectionMatches, setSearchQuery };\n","import { Decoration, showPanel, EditorView, ViewPlugin, hoverTooltip, logException, gutter, showTooltip, getPanel, WidgetType, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet } from '@codemirror/state';\nimport elt from 'crelt';\n\nclass SelectedDiagnostic {\n    constructor(from, to, diagnostic) {\n        this.from = from;\n        this.to = to;\n        this.diagnostic = diagnostic;\n    }\n}\nclass LintState {\n    constructor(diagnostics, panel, selected) {\n        this.diagnostics = diagnostics;\n        this.panel = panel;\n        this.selected = selected;\n    }\n    static init(diagnostics, panel, state) {\n        // Filter the list of diagnostics for which to create markers\n        let markedDiagnostics = diagnostics;\n        let diagnosticFilter = state.facet(lintConfig).markerFilter;\n        if (diagnosticFilter)\n            markedDiagnostics = diagnosticFilter(markedDiagnostics);\n        let ranges = Decoration.set(markedDiagnostics.map((d) => {\n            // For zero-length ranges or ranges covering only a line break, create a widget\n            return d.from == d.to || (d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from)\n                ? Decoration.widget({\n                    widget: new DiagnosticWidget(d),\n                    diagnostic: d\n                }).range(d.from)\n                : Decoration.mark({\n                    attributes: { class: \"cm-lintRange cm-lintRange-\" + d.severity },\n                    diagnostic: d\n                }).range(d.from, d.to);\n        }), true);\n        return new LintState(ranges, panel, findDiagnostic(ranges));\n    }\n}\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\n    let found = null;\n    diagnostics.between(after, 1e9, (from, to, { spec }) => {\n        if (diagnostic && spec.diagnostic != diagnostic)\n            return;\n        found = new SelectedDiagnostic(from, to, spec.diagnostic);\n        return false;\n    });\n    return found;\n}\nfunction hideTooltip(tr, tooltip) {\n    return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(tooltip.pos));\n}\nfunction maybeEnableLint(state, effects) {\n    return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of([\n        lintState,\n        EditorView.decorations.compute([lintState], state => {\n            let { selected, panel } = state.field(lintState);\n            return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([\n                activeMark.range(selected.from, selected.to)\n            ]);\n        }),\n        hoverTooltip(lintTooltip, { hideOn: hideTooltip }),\n        baseTheme\n    ]));\n}\n/**\nReturns a transaction spec which updates the current set of\ndiagnostics, and enables the lint extension if if wasn't already\nactive.\n*/\nfunction setDiagnostics(state, diagnostics) {\n    return {\n        effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n    };\n}\n/**\nThe state effect that updates the set of active diagnostics. Can\nbe useful when writing an extension that needs to track these.\n*/\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\nconst lintState = /*@__PURE__*/StateField.define({\n    create() {\n        return new LintState(Decoration.none, null, null);\n    },\n    update(value, tr) {\n        if (tr.docChanged) {\n            let mapped = value.diagnostics.map(tr.changes), selected = null;\n            if (value.selected) {\n                let selPos = tr.changes.mapPos(value.selected.from, 1);\n                selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n            }\n            value = new LintState(mapped, value.panel, selected);\n        }\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                value = LintState.init(effect.value, value.panel, tr.state);\n            }\n            else if (effect.is(togglePanel)) {\n                value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n            }\n            else if (effect.is(movePanelSelection)) {\n                value = new LintState(value.diagnostics, value.panel, effect.value);\n            }\n        }\n        return value;\n    },\n    provide: f => [showPanel.from(f, val => val.panel),\n        EditorView.decorations.from(f, s => s.diagnostics)]\n});\n/**\nReturns the number of active lint diagnostics in the given state.\n*/\nfunction diagnosticCount(state) {\n    let lint = state.field(lintState, false);\n    return lint ? lint.diagnostics.size : 0;\n}\nconst activeMark = /*@__PURE__*/Decoration.mark({ class: \"cm-lintRange cm-lintRange-active\" });\nfunction lintTooltip(view, pos, side) {\n    let { diagnostics } = view.state.field(lintState);\n    let found = [], stackStart = 2e8, stackEnd = 0;\n    diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, { spec }) => {\n        if (pos >= from && pos <= to &&\n            (from == to || ((pos > from || side > 0) && (pos < to || side < 0)))) {\n            found.push(spec.diagnostic);\n            stackStart = Math.min(from, stackStart);\n            stackEnd = Math.max(to, stackEnd);\n        }\n    });\n    let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n    if (diagnosticFilter)\n        found = diagnosticFilter(found);\n    if (!found.length)\n        return null;\n    return {\n        pos: stackStart,\n        end: stackEnd,\n        above: view.state.doc.lineAt(stackStart).to < stackEnd,\n        create() {\n            return { dom: diagnosticsTooltip(view, found) };\n        }\n    };\n}\nfunction diagnosticsTooltip(view, diagnostics) {\n    return elt(\"ul\", { class: \"cm-tooltip-lint\" }, diagnostics.map(d => renderDiagnostic(view, d, false)));\n}\n/**\nCommand to open and focus the lint panel.\n*/\nconst openLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        view.dispatch({ effects: maybeEnableLint(view.state, [togglePanel.of(true)]) });\n    let panel = getPanel(view, LintPanel.open);\n    if (panel)\n        panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n    return true;\n};\n/**\nCommand to close the lint panel, when open.\n*/\nconst closeLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        return false;\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nMove the selection to the next diagnostic.\n*/\nconst nextDiagnostic = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = view.state.selection.main, next = field.diagnostics.iter(sel.to + 1);\n    if (!next.value) {\n        next = field.diagnostics.iter(0);\n        if (!next.value || next.from == sel.from && next.to == sel.to)\n            return false;\n    }\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\n    return true;\n};\n/**\nA set of default key bindings for the lint functionality.\n\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\n*/\nconst lintKeymap = [\n    { key: \"Mod-Shift-m\", run: openLintPanel },\n    { key: \"F8\", run: nextDiagnostic }\n];\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.timeout = -1;\n        this.set = true;\n        let { delay } = view.state.facet(lintConfig);\n        this.lintTime = Date.now() + delay;\n        this.run = this.run.bind(this);\n        this.timeout = setTimeout(this.run, delay);\n    }\n    run() {\n        let now = Date.now();\n        if (now < this.lintTime - 10) {\n            setTimeout(this.run, this.lintTime - now);\n        }\n        else {\n            this.set = false;\n            let { state } = this.view, { sources } = state.facet(lintConfig);\n            Promise.all(sources.map(source => Promise.resolve(source(this.view)))).then(annotations => {\n                let all = annotations.reduce((a, b) => a.concat(b));\n                if (this.view.state.doc == state.doc)\n                    this.view.dispatch(setDiagnostics(this.view.state, all));\n            }, error => { logException(this.view.state, error); });\n        }\n    }\n    update(update) {\n        let config = update.state.facet(lintConfig);\n        if (update.docChanged || config != update.startState.facet(lintConfig)) {\n            this.lintTime = Date.now() + config.delay;\n            if (!this.set) {\n                this.set = true;\n                this.timeout = setTimeout(this.run, config.delay);\n            }\n        }\n    }\n    force() {\n        if (this.set) {\n            this.lintTime = Date.now();\n            this.run();\n        }\n    }\n    destroy() {\n        clearTimeout(this.timeout);\n    }\n});\nconst lintConfig = /*@__PURE__*/Facet.define({\n    combine(input) {\n        return Object.assign({ sources: input.map(i => i.source) }, combineConfig(input.map(i => i.config), {\n            delay: 750,\n            markerFilter: null,\n            tooltipFilter: null\n        }));\n    },\n    enables: lintPlugin\n});\n/**\nGiven a diagnostic source, this function returns an extension that\nenables linting with that source. It will be called whenever the\neditor is idle (after its content changed).\n*/\nfunction linter(source, config = {}) {\n    return lintConfig.of({ source, config });\n}\n/**\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\neditor is idle to run right away.\n*/\nfunction forceLinting(view) {\n    let plugin = view.plugin(lintPlugin);\n    if (plugin)\n        plugin.force();\n}\nfunction assignKeys(actions) {\n    let assigned = [];\n    if (actions)\n        actions: for (let { name } of actions) {\n            for (let i = 0; i < name.length; i++) {\n                let ch = name[i];\n                if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\n                    assigned.push(ch);\n                    continue actions;\n                }\n            }\n            assigned.push(\"\");\n        }\n    return assigned;\n}\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n    var _a;\n    let keys = inPanel ? assignKeys(diagnostic.actions) : [];\n    return elt(\"li\", { class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity }, elt(\"span\", { class: \"cm-diagnosticText\" }, diagnostic.renderMessage ? diagnostic.renderMessage() : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\n        let click = (e) => {\n            e.preventDefault();\n            let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n            if (found)\n                action.apply(view, found.from, found.to);\n        };\n        let { name } = action, keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n        let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex),\n            elt(\"u\", name.slice(keyIndex, keyIndex + 1)),\n            name.slice(keyIndex + 1)];\n        return elt(\"button\", {\n            type: \"button\",\n            class: \"cm-diagnosticAction\",\n            onclick: click,\n            onmousedown: click,\n            \"aria-label\": ` Action: ${name}${keyIndex < 0 ? \"\" : ` (access key \"${keys[i]})\"`}.`\n        }, nameElt);\n    }), diagnostic.source && elt(\"div\", { class: \"cm-diagnosticSource\" }, diagnostic.source));\n}\nclass DiagnosticWidget extends WidgetType {\n    constructor(diagnostic) {\n        super();\n        this.diagnostic = diagnostic;\n    }\n    eq(other) { return other.diagnostic == this.diagnostic; }\n    toDOM() {\n        return elt(\"span\", { class: \"cm-lintPoint cm-lintPoint-\" + this.diagnostic.severity });\n    }\n}\nclass PanelItem {\n    constructor(view, diagnostic) {\n        this.diagnostic = diagnostic;\n        this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n        this.dom = renderDiagnostic(view, diagnostic, true);\n        this.dom.id = this.id;\n        this.dom.setAttribute(\"role\", \"option\");\n    }\n}\nclass LintPanel {\n    constructor(view) {\n        this.view = view;\n        this.items = [];\n        let onkeydown = (event) => {\n            if (event.keyCode == 27) { // Escape\n                closeLintPanel(this.view);\n                this.view.focus();\n            }\n            else if (event.keyCode == 38 || event.keyCode == 33) { // ArrowUp, PageUp\n                this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n            }\n            else if (event.keyCode == 40 || event.keyCode == 34) { // ArrowDown, PageDown\n                this.moveSelection((this.selectedIndex + 1) % this.items.length);\n            }\n            else if (event.keyCode == 36) { // Home\n                this.moveSelection(0);\n            }\n            else if (event.keyCode == 35) { // End\n                this.moveSelection(this.items.length - 1);\n            }\n            else if (event.keyCode == 13) { // Enter\n                this.view.focus();\n            }\n            else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) { // A-Z\n                let { diagnostic } = this.items[this.selectedIndex], keys = assignKeys(diagnostic.actions);\n                for (let i = 0; i < keys.length; i++)\n                    if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n                        let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\n                        if (found)\n                            diagnostic.actions[i].apply(view, found.from, found.to);\n                    }\n            }\n            else {\n                return;\n            }\n            event.preventDefault();\n        };\n        let onclick = (event) => {\n            for (let i = 0; i < this.items.length; i++) {\n                if (this.items[i].dom.contains(event.target))\n                    this.moveSelection(i);\n            }\n        };\n        this.list = elt(\"ul\", {\n            tabIndex: 0,\n            role: \"listbox\",\n            \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n            onkeydown,\n            onclick\n        });\n        this.dom = elt(\"div\", { class: \"cm-panel-lint\" }, this.list, elt(\"button\", {\n            type: \"button\",\n            name: \"close\",\n            \"aria-label\": this.view.state.phrase(\"close\"),\n            onclick: () => closeLintPanel(this.view)\n        }, \"×\"));\n        this.update();\n    }\n    get selectedIndex() {\n        let selected = this.view.state.field(lintState).selected;\n        if (!selected)\n            return -1;\n        for (let i = 0; i < this.items.length; i++)\n            if (this.items[i].diagnostic == selected.diagnostic)\n                return i;\n        return -1;\n    }\n    update() {\n        let { diagnostics, selected } = this.view.state.field(lintState);\n        let i = 0, needsSync = false, newSelectedItem = null;\n        diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {\n            let found = -1, item;\n            for (let j = i; j < this.items.length; j++)\n                if (this.items[j].diagnostic == spec.diagnostic) {\n                    found = j;\n                    break;\n                }\n            if (found < 0) {\n                item = new PanelItem(this.view, spec.diagnostic);\n                this.items.splice(i, 0, item);\n                needsSync = true;\n            }\n            else {\n                item = this.items[found];\n                if (found > i) {\n                    this.items.splice(i, found - i);\n                    needsSync = true;\n                }\n            }\n            if (selected && item.diagnostic == selected.diagnostic) {\n                if (!item.dom.hasAttribute(\"aria-selected\")) {\n                    item.dom.setAttribute(\"aria-selected\", \"true\");\n                    newSelectedItem = item;\n                }\n            }\n            else if (item.dom.hasAttribute(\"aria-selected\")) {\n                item.dom.removeAttribute(\"aria-selected\");\n            }\n            i++;\n        });\n        while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n            needsSync = true;\n            this.items.pop();\n        }\n        if (this.items.length == 0) {\n            this.items.push(new PanelItem(this.view, {\n                from: -1, to: -1,\n                severity: \"info\",\n                message: this.view.state.phrase(\"No diagnostics\")\n            }));\n            needsSync = true;\n        }\n        if (newSelectedItem) {\n            this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n            this.view.requestMeasure({\n                key: this,\n                read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),\n                write: ({ sel, panel }) => {\n                    if (sel.top < panel.top)\n                        this.list.scrollTop -= panel.top - sel.top;\n                    else if (sel.bottom > panel.bottom)\n                        this.list.scrollTop += sel.bottom - panel.bottom;\n                }\n            });\n        }\n        else if (this.selectedIndex < 0) {\n            this.list.removeAttribute(\"aria-activedescendant\");\n        }\n        if (needsSync)\n            this.sync();\n    }\n    sync() {\n        let domPos = this.list.firstChild;\n        function rm() {\n            let prev = domPos;\n            domPos = prev.nextSibling;\n            prev.remove();\n        }\n        for (let item of this.items) {\n            if (item.dom.parentNode == this.list) {\n                while (domPos != item.dom)\n                    rm();\n                domPos = item.dom.nextSibling;\n            }\n            else {\n                this.list.insertBefore(item.dom, domPos);\n            }\n        }\n        while (domPos)\n            rm();\n    }\n    moveSelection(selectedIndex) {\n        if (this.selectedIndex < 0)\n            return;\n        let field = this.view.state.field(lintState);\n        let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n        if (!selection)\n            return;\n        this.view.dispatch({\n            selection: { anchor: selection.from, head: selection.to },\n            scrollIntoView: true,\n            effects: movePanelSelection.of(selection)\n        });\n    }\n    static open(view) { return new LintPanel(view); }\n}\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n    return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`;\n}\nfunction underline(color) {\n    return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`, `width=\"6\" height=\"3\"`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-diagnostic\": {\n        padding: \"3px 6px 3px 8px\",\n        marginLeft: \"-1px\",\n        display: \"block\",\n        whiteSpace: \"pre-wrap\"\n    },\n    \".cm-diagnostic-error\": { borderLeft: \"5px solid #d11\" },\n    \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\n    \".cm-diagnostic-info\": { borderLeft: \"5px solid #999\" },\n    \".cm-diagnosticAction\": {\n        font: \"inherit\",\n        border: \"none\",\n        padding: \"2px 4px\",\n        backgroundColor: \"#444\",\n        color: \"white\",\n        borderRadius: \"3px\",\n        marginLeft: \"8px\"\n    },\n    \".cm-diagnosticSource\": {\n        fontSize: \"70%\",\n        opacity: .7\n    },\n    \".cm-lintRange\": {\n        backgroundPosition: \"left bottom\",\n        backgroundRepeat: \"repeat-x\",\n        paddingBottom: \"0.7px\",\n    },\n    \".cm-lintRange-error\": { backgroundImage: /*@__PURE__*/underline(\"#d11\") },\n    \".cm-lintRange-warning\": { backgroundImage: /*@__PURE__*/underline(\"orange\") },\n    \".cm-lintRange-info\": { backgroundImage: /*@__PURE__*/underline(\"#999\") },\n    \".cm-lintRange-active\": { backgroundColor: \"#ffdd9980\" },\n    \".cm-tooltip-lint\": {\n        padding: 0,\n        margin: 0\n    },\n    \".cm-lintPoint\": {\n        position: \"relative\",\n        \"&:after\": {\n            content: '\"\"',\n            position: \"absolute\",\n            bottom: 0,\n            left: \"-2px\",\n            borderLeft: \"3px solid transparent\",\n            borderRight: \"3px solid transparent\",\n            borderBottom: \"4px solid #d11\"\n        }\n    },\n    \".cm-lintPoint-warning\": {\n        \"&:after\": { borderBottomColor: \"orange\" }\n    },\n    \".cm-lintPoint-info\": {\n        \"&:after\": { borderBottomColor: \"#999\" }\n    },\n    \".cm-panel.cm-panel-lint\": {\n        position: \"relative\",\n        \"& ul\": {\n            maxHeight: \"100px\",\n            overflowY: \"auto\",\n            \"& [aria-selected]\": {\n                backgroundColor: \"#ddd\",\n                \"& u\": { textDecoration: \"underline\" }\n            },\n            \"&:focus [aria-selected]\": {\n                background_fallback: \"#bdf\",\n                backgroundColor: \"Highlight\",\n                color_fallback: \"white\",\n                color: \"HighlightText\"\n            },\n            \"& u\": { textDecoration: \"none\" },\n            padding: 0,\n            margin: 0\n        },\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"2px\",\n            background: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        }\n    }\n});\nclass LintGutterMarker extends GutterMarker {\n    constructor(diagnostics) {\n        super();\n        this.diagnostics = diagnostics;\n        this.severity = diagnostics.reduce((max, d) => {\n            let s = d.severity;\n            return s == \"error\" || s == \"warning\" && max == \"info\" ? s : max;\n        }, \"info\");\n    }\n    toDOM(view) {\n        let elt = document.createElement(\"div\");\n        elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n        let diagnostics = this.diagnostics;\n        let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n        if (diagnosticsFilter)\n            diagnostics = diagnosticsFilter(diagnostics);\n        if (diagnostics.length)\n            elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\n        return elt;\n    }\n}\nfunction trackHoverOn(view, marker) {\n    let mousemove = (event) => {\n        let rect = marker.getBoundingClientRect();\n        if (event.clientX > rect.left - 10 /* Margin */ && event.clientX < rect.right + 10 /* Margin */ &&\n            event.clientY > rect.top - 10 /* Margin */ && event.clientY < rect.bottom + 10 /* Margin */)\n            return;\n        for (let target = event.target; target; target = target.parentNode) {\n            if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\"))\n                return;\n        }\n        window.removeEventListener(\"mousemove\", mousemove);\n        if (view.state.field(lintGutterTooltip))\n            view.dispatch({ effects: setLintGutterTooltip.of(null) });\n    };\n    window.addEventListener(\"mousemove\", mousemove);\n}\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n    function hovered() {\n        let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n        const linePos = view.coordsAtPos(line.from);\n        if (linePos) {\n            view.dispatch({ effects: setLintGutterTooltip.of({\n                    pos: line.from,\n                    above: false,\n                    create() {\n                        return {\n                            dom: diagnosticsTooltip(view, diagnostics),\n                            getCoords: () => marker.getBoundingClientRect()\n                        };\n                    }\n                }) });\n        }\n        marker.onmouseout = marker.onmousemove = null;\n        trackHoverOn(view, marker);\n    }\n    let { hoverTime } = view.state.facet(lintGutterConfig);\n    let hoverTimeout = setTimeout(hovered, hoverTime);\n    marker.onmouseout = () => {\n        clearTimeout(hoverTimeout);\n        marker.onmouseout = marker.onmousemove = null;\n    };\n    marker.onmousemove = () => {\n        clearTimeout(hoverTimeout);\n        hoverTimeout = setTimeout(hovered, hoverTime);\n    };\n}\nfunction markersForDiagnostics(doc, diagnostics) {\n    let byLine = Object.create(null);\n    for (let diagnostic of diagnostics) {\n        let line = doc.lineAt(diagnostic.from);\n        (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\n    }\n    let markers = [];\n    for (let line in byLine) {\n        markers.push(new LintGutterMarker(byLine[line]).range(+line));\n    }\n    return RangeSet.of(markers, true);\n}\nconst lintGutterExtension = /*@__PURE__*/gutter({\n    class: \"cm-gutter-lint\",\n    markers: view => view.state.field(lintGutterMarkers),\n});\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\n    create() {\n        return RangeSet.empty;\n    },\n    update(markers, tr) {\n        markers = markers.map(tr.changes);\n        let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let diagnostics = effect.value;\n                if (diagnosticFilter)\n                    diagnostics = diagnosticFilter(diagnostics || []);\n                markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n            }\n        }\n        return markers;\n    }\n});\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(tooltip, tr) {\n        if (tooltip && tr.docChanged)\n            tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), { pos: tr.changes.mapPos(tooltip.pos) });\n        return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\n    },\n    provide: field => showTooltip.from(field)\n});\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-gutter-lint\": {\n        width: \"1.4em\",\n        \"& .cm-gutterElement\": {\n            padding: \".2em\"\n        }\n    },\n    \".cm-lint-marker\": {\n        width: \"1em\",\n        height: \"1em\"\n    },\n    \".cm-lint-marker-info\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>`)\n    },\n    \".cm-lint-marker-warning\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>`),\n    },\n    \".cm-lint-marker-error:before\": {\n        content: /*@__PURE__*/svg(`<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>`)\n    },\n});\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            hoverTime: 300 /* Time */,\n            markerFilter: null,\n            tooltipFilter: null\n        });\n    }\n});\n/**\nReturns an extension that installs a gutter showing markers for\neach line that has diagnostics, which can be hovered over to see\nthe diagnostics.\n*/\nfunction lintGutter(config = {}) {\n    return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n\nexport { closeLintPanel, diagnosticCount, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, setDiagnostics, setDiagnosticsEffect };\n","import {\n  KeyBinding,\n  lineNumbers,\n  highlightActiveLineGutter,\n  highlightSpecialChars,\n  drawSelection,\n  dropCursor,\n  rectangularSelection,\n  crosshairCursor,\n  highlightActiveLine,\n  keymap,\n} from '@codemirror/view';\nimport { EditorState, Extension } from '@codemirror/state';\nimport { history, defaultKeymap, historyKeymap } from '@codemirror/commands';\nimport { highlightSelectionMatches, searchKeymap } from '@codemirror/search';\nimport { closeBrackets, autocompletion, closeBracketsKeymap, completionKeymap } from '@codemirror/autocomplete';\nimport {\n  foldGutter,\n  indentOnInput,\n  syntaxHighlighting,\n  defaultHighlightStyle,\n  bracketMatching,\n  foldKeymap,\n} from '@codemirror/language';\nimport { lintKeymap } from '@codemirror/lint';\n\nexport interface BasicSetupOptions {\n  lineNumbers?: boolean;\n  highlightActiveLineGutter?: boolean;\n  highlightSpecialChars?: boolean;\n  history?: boolean;\n  foldGutter?: boolean;\n  drawSelection?: boolean;\n  dropCursor?: boolean;\n  allowMultipleSelections?: boolean;\n  indentOnInput?: boolean;\n  syntaxHighlighting?: boolean;\n  bracketMatching?: boolean;\n  closeBrackets?: boolean;\n  autocompletion?: boolean;\n  rectangularSelection?: boolean;\n  crosshairCursor?: boolean;\n  highlightActiveLine?: boolean;\n  highlightSelectionMatches?: boolean;\n\n  closeBracketsKeymap?: boolean;\n  defaultKeymap?: boolean;\n  searchKeymap?: boolean;\n  historyKeymap?: boolean;\n  foldKeymap?: boolean;\n  completionKeymap?: boolean;\n  lintKeymap?: boolean;\n}\n\n/**\nThis is an extension value that just pulls together a number of\nextensions that you might want in a basic editor. It is meant as a\nconvenient helper to quickly set up CodeMirror without installing\nand importing a lot of separate packages.\n\nSpecifically, it includes...\n\n - [the default command bindings](https://codemirror.net/6/docs/ref/#commands.defaultKeymap)\n - [line numbers](https://codemirror.net/6/docs/ref/#view.lineNumbers)\n - [special character highlighting](https://codemirror.net/6/docs/ref/#view.highlightSpecialChars)\n - [the undo history](https://codemirror.net/6/docs/ref/#commands.history)\n - [a fold gutter](https://codemirror.net/6/docs/ref/#language.foldGutter)\n - [custom selection drawing](https://codemirror.net/6/docs/ref/#view.drawSelection)\n - [drop cursor](https://codemirror.net/6/docs/ref/#view.dropCursor)\n - [multiple selections](https://codemirror.net/6/docs/ref/#state.EditorState^allowMultipleSelections)\n - [reindentation on input](https://codemirror.net/6/docs/ref/#language.indentOnInput)\n - [the default highlight style](https://codemirror.net/6/docs/ref/#language.defaultHighlightStyle) (as fallback)\n - [bracket matching](https://codemirror.net/6/docs/ref/#language.bracketMatching)\n - [bracket closing](https://codemirror.net/6/docs/ref/#autocomplete.closeBrackets)\n - [autocompletion](https://codemirror.net/6/docs/ref/#autocomplete.autocompletion)\n - [rectangular selection](https://codemirror.net/6/docs/ref/#view.rectangularSelection) and [crosshair cursor](https://codemirror.net/6/docs/ref/#view.crosshairCursor)\n - [active line highlighting](https://codemirror.net/6/docs/ref/#view.highlightActiveLine)\n - [active line gutter highlighting](https://codemirror.net/6/docs/ref/#view.highlightActiveLineGutter)\n - [selection match highlighting](https://codemirror.net/6/docs/ref/#search.highlightSelectionMatches)\n - [search](https://codemirror.net/6/docs/ref/#search.searchKeymap)\n - [linting](https://codemirror.net/6/docs/ref/#lint.lintKeymap)\n\n(You'll probably want to add some language package to your setup\ntoo.)\n\nThis extension does not allow customization. The idea is that,\nonce you decide you want to configure your editor more precisely,\nyou take this package's source (which is just a bunch of imports\nand an array literal), copy it into your own code, and adjust it\nas desired.\n*/\nexport const basicSetup = (options: BasicSetupOptions = {}): Extension[] => {\n  const keymaps: KeyBinding[][] = [];\n  if (options.closeBracketsKeymap !== false) {\n    keymaps.push([...closeBracketsKeymap]);\n  }\n  if (options.defaultKeymap !== false) {\n    keymaps.push([...defaultKeymap]);\n  }\n  if (options.searchKeymap !== false) {\n    keymaps.push([...searchKeymap]);\n  }\n  if (options.historyKeymap !== false) {\n    keymaps.push([...historyKeymap]);\n  }\n  if (options.foldKeymap !== false) {\n    keymaps.push([...foldKeymap]);\n  }\n  if (options.completionKeymap !== false) {\n    keymaps.push([...completionKeymap]);\n  }\n  if (options.lintKeymap !== false) {\n    keymaps.push([...lintKeymap]);\n  }\n  const extensions: Extension[] = [];\n  if (options.lineNumbers !== false) extensions.push(lineNumbers());\n  if (options.highlightActiveLineGutter !== false) extensions.push(highlightActiveLineGutter());\n  if (options.highlightSpecialChars !== false) extensions.push(highlightSpecialChars());\n  if (options.history !== false) extensions.push(history());\n  if (options.foldGutter !== false) extensions.push(foldGutter());\n  if (options.drawSelection !== false) extensions.push(drawSelection());\n  if (options.dropCursor !== false) extensions.push(dropCursor());\n  if (options.allowMultipleSelections !== false) extensions.push(EditorState.allowMultipleSelections.of(true));\n  if (options.indentOnInput !== false) extensions.push(indentOnInput());\n  if (options.syntaxHighlighting !== false)\n    extensions.push(syntaxHighlighting(defaultHighlightStyle, { fallback: true }));\n  if (options.bracketMatching !== false) extensions.push(bracketMatching());\n  if (options.closeBrackets !== false) extensions.push(closeBrackets());\n  if (options.autocompletion !== false) extensions.push(autocompletion());\n  if (options.rectangularSelection !== false) extensions.push(rectangularSelection());\n  if (options.crosshairCursor !== false) extensions.push(crosshairCursor());\n  if (options.highlightActiveLine !== false) extensions.push(highlightActiveLine());\n  if (options.highlightSelectionMatches !== false) extensions.push(highlightSelectionMatches());\n\n  return [...extensions, keymap.of(keymaps.flat())].filter(Boolean);\n};\n","import { useEffect, useState } from 'react';\nimport { EditorState, StateEffect } from '@codemirror/state';\nimport { indentWithTab } from '@codemirror/commands';\nimport { EditorView, keymap, ViewUpdate, placeholder } from '@codemirror/view';\nimport { oneDark } from '@codemirror/theme-one-dark';\nimport { basicSetup } from './basicSetup';\nimport { ReactCodeMirrorProps } from '.';\n\nexport interface UseCodeMirror extends ReactCodeMirrorProps {\n  container?: HTMLDivElement | null;\n}\n\nexport function useCodeMirror(props: UseCodeMirror) {\n  const {\n    value,\n    selection,\n    onChange,\n    onUpdate,\n    extensions = [],\n    autoFocus,\n    theme = 'light',\n    height = '',\n    minHeight = '',\n    maxHeight = '',\n    placeholder: placeholderStr = '',\n    width = '',\n    minWidth = '',\n    maxWidth = '',\n    editable = true,\n    readOnly = false,\n    indentWithTab: defaultIndentWithTab = true,\n    basicSetup: defaultBasicSetup = true,\n    root,\n  } = props;\n  const [container, setContainer] = useState(props.container);\n  const [view, setView] = useState<EditorView>();\n  const [state, setState] = useState<EditorState>();\n  const defaultLightThemeOption = EditorView.theme(\n    {\n      '&': {\n        backgroundColor: '#fff',\n      },\n    },\n    {\n      dark: false,\n    },\n  );\n  const defaultThemeOption = EditorView.theme({\n    '&': {\n      height,\n      minHeight,\n      maxHeight,\n      width,\n      minWidth,\n      maxWidth,\n    },\n  });\n  const updateListener = EditorView.updateListener.of((vu: ViewUpdate) => {\n    if (vu.docChanged && typeof onChange === 'function') {\n      const doc = vu.state.doc;\n      const value = doc.toString();\n      onChange(value, vu);\n    }\n  });\n\n  let getExtensions = [updateListener, defaultThemeOption];\n  if (defaultIndentWithTab) {\n    getExtensions.unshift(keymap.of([indentWithTab]));\n  }\n  if (defaultBasicSetup) {\n    if (typeof defaultBasicSetup === 'boolean') {\n      getExtensions.unshift(basicSetup());\n    } else {\n      getExtensions.unshift(basicSetup(defaultBasicSetup));\n    }\n  }\n\n  if (placeholderStr) {\n    getExtensions.unshift(placeholder(placeholderStr));\n  }\n\n  switch (theme) {\n    case 'light':\n      getExtensions.push(defaultLightThemeOption);\n      break;\n    case 'dark':\n      getExtensions.push(oneDark);\n      break;\n    default:\n      getExtensions.push(theme);\n      break;\n  }\n\n  if (editable === false) {\n    getExtensions.push(EditorView.editable.of(false));\n  }\n  if (readOnly) {\n    getExtensions.push(EditorState.readOnly.of(true));\n  }\n\n  if (onUpdate && typeof onUpdate === 'function') {\n    getExtensions.push(EditorView.updateListener.of(onUpdate));\n  }\n  getExtensions = getExtensions.concat(extensions);\n\n  useEffect(() => {\n    if (container && !state) {\n      const stateCurrent = EditorState.create({\n        doc: value,\n        selection,\n        extensions: getExtensions,\n      });\n      setState(stateCurrent);\n      if (!view) {\n        const viewCurrent = new EditorView({\n          state: stateCurrent,\n          parent: container,\n          root,\n        });\n        setView(viewCurrent);\n      }\n    }\n    return () => {\n      if (view) {\n        setView(undefined);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [container, state]);\n\n  useEffect(\n    () => () => {\n      if (view) {\n        view.destroy();\n        setView(undefined);\n      }\n    },\n    [view],\n  );\n\n  useEffect(() => {\n    if (autoFocus && view) {\n      view.focus();\n    }\n  }, [autoFocus, view]);\n\n  useEffect(() => {\n    if (view) {\n      view.dispatch({ effects: StateEffect.reconfigure.of(getExtensions) });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    theme,\n    extensions,\n    height,\n    minHeight,\n    maxHeight,\n    width,\n    minWidth,\n    maxWidth,\n    placeholderStr,\n    editable,\n    readOnly,\n    defaultIndentWithTab,\n    defaultBasicSetup,\n    onChange,\n    onUpdate,\n  ]);\n\n  useEffect(() => {\n    const currentValue = view ? view.state.doc.toString() : '';\n    if (view && value !== currentValue) {\n      view.dispatch({\n        changes: { from: 0, to: currentValue.length, insert: value || '' },\n      });\n    }\n  }, [value, view]);\n\n  return { state, setState, view, setView, container, setContainer };\n}\n","import React, { useEffect, useRef, useImperativeHandle } from 'react';\nimport { EditorState, EditorStateConfig, Extension } from '@codemirror/state';\nimport { EditorView, ViewUpdate } from '@codemirror/view';\nimport { useCodeMirror } from './useCodeMirror';\nimport { BasicSetupOptions } from './basicSetup';\n\nexport * from './basicSetup';\nexport * from './useCodeMirror';\n\nexport interface ReactCodeMirrorProps\n  extends Omit<EditorStateConfig, 'doc' | 'extensions'>,\n    Omit<React.HTMLAttributes<HTMLDivElement>, 'onChange' | 'placeholder'> {\n  /** value of the auto created model in the editor. */\n  value?: string;\n  height?: string;\n  minHeight?: string;\n  maxHeight?: string;\n  width?: string;\n  minWidth?: string;\n  maxWidth?: string;\n  /** focus on the editor. */\n  autoFocus?: boolean;\n  /** Enables a placeholder—a piece of example content to show when the editor is empty. */\n  placeholder?: string | HTMLElement;\n  /**\n   * `light` / `dark` / `Extension` Defaults to `light`.\n   * @default light\n   */\n  theme?: 'light' | 'dark' | Extension;\n  /**\n   * Whether to optional basicSetup by default\n   * @default true\n   */\n  basicSetup?: boolean | BasicSetupOptions;\n  /**\n   * This disables editing of the editor content by the user.\n   * @default true\n   */\n  editable?: boolean;\n  /**\n   * This disables editing of the editor content by the user.\n   * @default false\n   */\n  readOnly?: boolean;\n  /**\n   * Whether to optional basicSetup by default\n   * @default true\n   */\n  indentWithTab?: boolean;\n  /** Fired whenever a change occurs to the document. */\n  onChange?(value: string, viewUpdate: ViewUpdate): void;\n  /** Fired whenever any state change occurs within the editor, including non-document changes like lint results. */\n  onUpdate?(viewUpdate: ViewUpdate): void;\n  /**\n   * Extension values can be [provided](https://codemirror.net/6/docs/ref/#state.EditorStateConfig.extensions) when creating a state to attach various kinds of configuration and behavior information.\n   * They can either be built-in extension-providing objects,\n   * such as [state fields](https://codemirror.net/6/docs/ref/#state.StateField) or [facet providers](https://codemirror.net/6/docs/ref/#state.Facet.of),\n   * or objects with an extension in its `extension` property. Extensions can be nested in arrays arbitrarily deep—they will be flattened when processed.\n   */\n  extensions?: Extension[];\n  /**\n   * If the view is going to be mounted in a shadow root or document other than the one held by the global variable document (the default), you should pass it here.\n   * Originally from the [config of EditorView](https://codemirror.net/6/docs/ref/#view.EditorView.constructor%5Econfig.root)\n   */\n  root?: ShadowRoot | Document;\n}\n\nexport interface ReactCodeMirrorRef {\n  editor?: HTMLDivElement | null;\n  state?: EditorState;\n  view?: EditorView;\n}\n\nconst ReactCodeMirror = React.forwardRef<ReactCodeMirrorRef, ReactCodeMirrorProps>((props, ref) => {\n  const {\n    className,\n    value = '',\n    selection,\n    extensions = [],\n    onChange,\n    onUpdate,\n    autoFocus,\n    theme = 'light',\n    height,\n    minHeight,\n    maxHeight,\n    width,\n    minWidth,\n    maxWidth,\n    basicSetup,\n    placeholder,\n    indentWithTab,\n    editable,\n    readOnly,\n    root,\n    ...other\n  } = props;\n  const editor = useRef<HTMLDivElement>(null);\n  const { state, view, container, setContainer } = useCodeMirror({\n    container: editor.current,\n    root,\n    value,\n    autoFocus,\n    theme,\n    height,\n    minHeight,\n    maxHeight,\n    width,\n    minWidth,\n    maxWidth,\n    basicSetup,\n    placeholder,\n    indentWithTab,\n    editable,\n    readOnly,\n    selection,\n    onChange,\n    onUpdate,\n    extensions,\n  });\n  useImperativeHandle(ref, () => ({ editor: container, state, view }), [container, state, view]);\n  useEffect(() => {\n    setContainer(editor.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // check type of value\n  if (typeof value !== 'string') {\n    throw new Error(`value must be typeof string but got ${typeof value}`);\n  }\n\n  const defaultClassNames = typeof theme === 'string' ? `cm-theme-${theme}` : 'cm-theme';\n  return <div ref={editor} className={`${defaultClassNames}${className ? ` ${className}` : ''}`} {...other}></div>;\n});\n\nReactCodeMirror.displayName = 'CodeMirror';\n\nexport default ReactCodeMirror;\n"],"sourceRoot":""}