(this["webpackJsonpclient-laraigo"]=this["webpackJsonpclient-laraigo"]||[]).push([[105],{1497:function(e,t,a){"use strict";a.r(t),a.d(t,"GetLocations",(function(){return S}));var n=a(0),r=a.n(n),c=a(24),o=a.n(c),i=a(1),s=a(39),l=a(20),u=a(3),d=a(865),b=a(1254),p=a(1353),f=a(46),m=a(169),j=a(28),g=a(199),h=function(e){return{callAPI:function(){return j.a.getLocations(e)},types:{loading:g.a.GETLOCATION,success:g.a.GETLOCATION_SUCCESS,failure:g.a.GETLOCATION_FAILURE},type:null}},O=a(40),x=a(25),v=a(122),y=a(8),w=a(101),k=a(94),C=a(14),L=(a(1e3),a(2)),z=Object(m.a)((function(e){return{containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"},searchLocationContainer:{height:"50vh",width:"100%"},searchLocationTitle:Object(u.a)({color:"white",fontSize:"12px",textAlign:"center",paddingLeft:"10px",paddingRight:"10px",backgroundColor:"rgb(235, 0, 43)",paddingTop:"5px",paddingBottom:"5px"},"@media (min-width:600px)",{fontSize:"18px",paddingTop:"8px",paddingBottom:"8px",borderTopLeftRadius:"20px",borderTopRightRadius:"20px"}),containersearch:{marginTop:"10px",maxWidth:"80%",marginLeft:"auto",marginRight:"auto"},textlabel:{marginBottom:"10px",fontWeight:"bold",color:"rgb(235, 0, 43)"},formControl:{display:"block",width:"100%",height:"calc(1.5em + 0.75rem + 2px)",padding:"18.5px 14px",fontSize:"1rem",lineHeight:"1.5",color:"#495057",backgroundColor:"#fff",backgroundClip:"padding-box",border:"1px solid #ced4da",borderRadius:"0.25rem"},colxs12colmd6:Object(u.a)({position:"relative",width:"100%",paddingRight:"15px",paddingLeft:"15px"},"@media (min-width:760px)",{flex:"0 0 50%",maxWidth:"50%"})}})),N=["places"],T={height:"50vh",width:"100vw"},_={disableDefaultUI:!0,zoomControl:!0};function D(){var e=Object(f.i)().token,t=Object(d.d)({googleMapsApiKey:"AIzaSyAqrFCH95Tbqwo6opvVPcdtrVd-1fnBLr4",libraries:N}),a=t.isLoaded,c=t.loadError,u=r.a.useState({department:"",province:"",district:"",zone:"",zipcode:"",reference:"",street:"",streetNumber:"",movedmarker:!1,searchLocation:"",token:e}),b=Object(l.a)(u,2),p=b[0],m=b[1],j=r.a.useState({lat:0,lng:0,time:new Date}),g=Object(l.a)(j,2),h=g[0],O=g[1],x=r.a.useState({lat:0,lng:0,time:new Date}),v=Object(l.a)(x,2),y=v[0],w=v[1];function k(e){return z.apply(this,arguments)}function z(){return(z=Object(s.a)(o.a.mark((function e(t){var a,n,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.coords.latitude,n=t.coords.longitude,w({lat:a,lng:n,time:new Date}),O({lat:a,lng:n}),r="".concat(C.a.GETGEOCODE,"?lat=").concat(a,"&lng=").concat(n),e.next=7,fetch(r,{method:"GET"});case 7:if(!(c=e.sent).ok){e.next=18;break}return e.prev=9,e.next=12,c.json();case 12:"OK"===(s=e.sent).status&&s.results&&s.results instanceof Array&&s.results.length>0&&(D(s.results[0].address_components),m((function(e){return Object(i.a)(Object(i.a)({},e),{},{movedmarker:!0,searchLocation:s.results[0].formatted_address})}))),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:case"end":return e.stop()}}),e,null,[[9,16]])})))).apply(this,arguments)}function D(e){var t=e.find((function(e){return e.types.includes("street_number")})),a=e.find((function(e){return e.types.includes("postal_code")})),n=e.find((function(e){return e.types.includes("route")})),r=e.find((function(e){return e.types.includes("administrative_area_level_1")})),c=e.find((function(e){return e.types.includes("administrative_area_level_2")})),o=e.find((function(e){return e.types.includes("locality")})),s=e.find((function(e){return e.types.includes("sublocality_level_1")}));m((function(e){return Object(i.a)(Object(i.a)({},e),{},{department:r?r.long_name:"",province:c?c.long_name:"",district:o?o.long_name:"",zone:s?s.long_name:"",zipcode:a?a.long_name:"",street:n?n.long_name:"",streetNumber:t?t.long_name:""})}))}function S(){return(S=Object(s.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(C.a.GETGEOCODE,"?lat=").concat(t.latLng.lat(),"&lng=").concat(t.latLng.lng()),e.next=3,fetch(a,{method:"GET"});case 3:if(!(n=e.sent).ok){e.next=14;break}return e.prev=5,e.next=8,n.json();case 8:"OK"===(r=e.sent).status&&r.results&&r.results instanceof Array&&r.results.length>0&&(D(r.results[0].address_components),m((function(e){return Object(i.a)(Object(i.a)({},e),{},{movedmarker:!0,searchLocation:r.results[0].formatted_address})}))),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:w({lat:t.latLng.lat(),lng:t.latLng.lng(),time:new Date});case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}Object(n.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(k):console.error("Geolocation not supported by this browser")}),[]);var A=r.a.useRef(),G=r.a.useCallback((function(e){A.current=e}),[]),R=r.a.useCallback((function(e){var t=e.lat,a=e.lng;A.current.panTo({lat:t,lng:a}),A.current.setZoom(14)}),[]);return c?Object(L.jsx)("div",{children:'"Error"'}):a?Object(L.jsxs)("div",{children:[Object(L.jsx)(d.a,{id:"map",mapContainerStyle:T,zoom:11,center:h,options:_,onLoad:G,onClick:function(e){return S.apply(this,arguments)},children:Object(L.jsx)(d.b,{position:{lat:y.lat,lng:y.lng}},"".concat(y.lat,"-").concat(y.lng))}),Object(L.jsx)(E,{panTo:R,setMarker:w,directionData:p,setDirectionData:m,cleanDataAddres:D,marker:y})]}):Object(L.jsx)("div",{children:"Loading..."})}function E(e){var t=e.panTo,a=e.setMarker,c=e.directionData,u=e.setDirectionData,d=e.cleanDataAddres,f=e.marker,m=z(),j=Object(v.a)().t,g=Object(x.b)((function(e){return e.getlocations})),C=Object(O.c)();function N(){return(N=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(!0),C(h(Object(i.a)({lon:f.lng,lat:f.lat},c)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){g.getLocations.success&&window.close()}),[g]);var T=Object(b.a)({requestOptions:{location:{lat:function(){return 43.6532},lng:function(){return-79.3832}},radius:1e5}}),_=T.ready,D=T.value,E=T.suggestions,S=E.status,A=E.data,G=T.setValue,R=T.clearSuggestions,B=r.a.useState(!1),I=Object(l.a)(B,2),K=I[0],W=I[1];Object(n.useEffect)((function(){c.movedmarker&&(u((function(e){return Object(i.a)(Object(i.a)({},e),{},{movedmarker:!1})})),G(c.searchLocation))}),[c.movedmarker]);var q=function(){var e=Object(s.a)(o.a.mark((function e(n){var r,c,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(n,!1),u((function(e){return Object(i.a)(Object(i.a)({},e),{},{searchLocation:n})})),R(),e.prev=3,e.next=6,Object(b.b)({address:n});case 6:return r=e.sent,e.next=9,Object(b.c)(r[0]);case 9:c=e.sent,s=c.lat,l=c.lng,r&&d(r[0].address_components),a({lat:s,lng:l,time:new Date}),t({lat:s,lng:l}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.warn("\ud83d\ude31 Error: ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsxs)("div",{style:{width:"100%"},children:[Object(L.jsx)("div",{className:m.searchLocationTitle,children:j(y.a.searchLocationTitle)}),Object(L.jsx)("div",{className:"search",children:Object(L.jsxs)("div",{className:m.containersearch,children:[Object(L.jsx)("div",{className:m.textlabel,children:j(y.a.firstDataLocation)}),Object(L.jsxs)(p.a,{onSelect:q,style:{width:"100%"},children:[Object(L.jsx)(p.b,{value:D,className:m.formControl,onChange:function(e){G(e.target.value)},disabled:!_,placeholder:j(y.a.searchyourlocation)}),Object(L.jsx)(p.e,{children:Object(L.jsx)(p.c,{children:"OK"===S&&A.map((function(e){var t=e.id,a=e.description;return Object(L.jsx)(p.d,{value:a},t)}))})})]}),Object(L.jsx)("div",{className:m.textlabel,children:j(y.a.secondDataLocation)}),Object(L.jsxs)("div",{className:"row-zyx",style:{marginBottom:"0px"},children:[Object(L.jsx)(w.a,{label:j(y.a.department),variant:"outlined",size:"small",className:"col-6",value:c.department,onChange:function(e){u((function(t){return Object(i.a)(Object(i.a)({},t),{},{department:e.target.value})}))}}),Object(L.jsx)(w.a,{label:j(y.a.province),variant:"outlined",size:"small",className:"col-6",value:c.province,onChange:function(e){u((function(t){return Object(i.a)(Object(i.a)({},t),{},{province:e.target.value})}))}})]}),Object(L.jsxs)("div",{className:"row-zyx",style:{marginBottom:"0px"},children:[Object(L.jsx)(w.a,{label:j(y.a.district),variant:"outlined",size:"small",className:"col-6",value:c.district,onChange:function(e){u((function(t){return Object(i.a)(Object(i.a)({},t),{},{district:e.target.value})}))}}),Object(L.jsx)(w.a,{label:j(y.a.zone),variant:"outlined",size:"small",className:"col-6",value:c.zone,onChange:function(e){u((function(t){return Object(i.a)(Object(i.a)({},t),{},{zone:e.target.value})}))}})]}),Object(L.jsxs)("div",{className:"row-zyx",style:{marginBottom:"0px"},children:[Object(L.jsx)(w.a,{label:j(y.a.street),variant:"outlined",size:"small",className:"col-6",value:c.street,onChange:function(e){u((function(t){return Object(i.a)(Object(i.a)({},t),{},{street:e.target.value})}))}}),Object(L.jsx)(w.a,{label:"N\xb0 ".concat(j(y.a.street)),variant:"outlined",size:"small",className:"col-6",value:c.streetNumber,onChange:function(e){u((function(t){return Object(i.a)(Object(i.a)({},t),{},{streetNumber:e.target.value})}))}})]}),Object(L.jsx)("div",{className:"row-zyx",style:{marginBottom:"0px"},children:Object(L.jsx)(w.a,{label:j(y.a.postalcode),variant:"outlined",size:"small",className:"col-6",value:c.zipcode,onChange:function(e){u((function(t){return Object(i.a)(Object(i.a)({},t),{},{zipcode:e.target.value})}))}})}),Object(L.jsx)("div",{className:"row-zyx",style:{marginBottom:"0px"},children:Object(L.jsx)(w.a,{label:j(y.a.extraInformation),multiline:!0,variant:"outlined",size:"small",style:{width:"100%"},maxRows:4,value:c.reference,onChange:function(e){u((function(t){return Object(i.a)(Object(i.a)({},t),{},{reference:e.target.value})}))}})}),Object(L.jsx)("div",{style:{marginLeft:"auto",paddingTop:"10px",marginRight:"auto",display:"block",width:"10%"},children:Object(L.jsx)(k.a,{variant:"contained",type:"button",color:"primary",onClick:function(){return function(){return N.apply(this,arguments)}()},disabled:K,style:{backgroundColor:"#eb002b"},children:j(y.a.send)})})]})})]})}var S=function(){return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(D,{})})};t.default=S}}]);
//# sourceMappingURL=105.c9fb4253.chunk.js.map