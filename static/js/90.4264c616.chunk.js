(this["webpackJsonpclient-laraigo"]=this["webpackJsonpclient-laraigo"]||[]).push([[90],{1421:function(e,n,t){"use strict";t.r(n),t.d(n,"Channels",(function(){return T}));var a=t(1),r=t(20),c=t(779),i=t(46),u=t(10),o=t(778),l=t.n(o),s=t(40),d=t(25),E=t(0),f=t.n(E),A=t(8),p=t(122),S=t(44),b=t(94),N=t(48),C=t(83),_=t(328),I=t(781),O=t(2),T=function(){var e=Object(s.c)(),n=Object(p.a)().t,t=Object(d.b)((function(e){return e.channel.checkPaymentPlan})),o=Object(d.b)((function(e){return e.channel.channelList})),T=Object(d.b)((function(e){return e.main})),m=Object(d.b)((function(e){return e.login.validateToken.user})),L=(null===m||void 0===m?void 0:m.roledesc)||"",v=Object(E.useState)("DIALOG"),h=Object(r.a)(v,2),P=h[0],y=h[1],j=Object(E.useState)(!1),g=Object(r.a)(j,2),F=g[0],H=g[1],R=Object(E.useState)(!1),M=Object(r.a)(R,2),D=M[0],U=M[1],w=Object(E.useState)(!1),x=Object(r.a)(w,2),G=x[0],k=x[1],K=Object(i.g)(),B=[{id:"view-0",name:n(A.a.configuration_plural)},{id:"view-1",name:n(A.a.channel_plural)}];var W=function(){return e(Object(C.g)(Object(_.Fb)(0)))};Object(E.useEffect)((function(){if(G)if(o.loading||o.error){if(o.error){var t=n(o.code||"error_unexpected_error",{module:n(A.a.property).toLocaleLowerCase()});e(Object(S.e)({show:!0,severity:"error",message:t})),e(Object(S.d)(!1)),k(!1)}}else e(Object(S.e)({show:!0,severity:"success",message:n(A.a.successful_delete)})),W(),e(Object(S.d)(!1)),k(!1)}),[o,G]);var Y=function(e){if("WHAT"===e.type&&"PENDIENTE"===e.status&&"SUPERADMIN"===L){var n={typeWhatsApp:"SMOOCH",row:e};K.push({pathname:u.a.CHANNELS_EDIT_WHATSAPP.resolve(e.communicationchannelid),state:n})}else{var t="CHAZ"===e.type?u.a.CHANNELS_EDIT_CHATWEB.resolve(e.communicationchannelid):u.a.CHANNELS_EDIT.resolve(e.communicationchannelid);K.push({pathname:t,state:e})}},Z=f.a.useMemo((function(){return[{accessor:"communicationchannelid",NoFilter:!0,isComponent:!0,minWidth:60,width:"1%",Cell:function(t){var r=t.cell.row.original;return Object(O.jsx)(N.M,{viewFunction:function(){},deleteFunction:function(){return function(t){e(Object(S.a)({visible:!0,question:n(A.a.confirmation_delete),callback:function(){e(Object(I.d)({method:"UFN_COMMUNICATIONCHANNEL_INS",parameters:Object(a.a)(Object(a.a)({},t),{},{id:t.communicationchannelid,description:t.communicationchanneldesc,operation:"DELETE",status:"ELIMINADO",voximplantcallsupervision:!1})})),e(Object(S.d)(!0)),k(!0)}}))}(r)},editFunction:function(){return Y(r)}})}},{Header:n(A.a.corporation),accessor:"corpdesc",NoFilter:!0},{Header:n(A.a.organization),accessor:"orgdesc",NoFilter:!0},{Header:n(A.a.communicationchannel),accessor:"typedesc",NoFilter:!0},{Header:n(A.a.communicationchanneldesc),accessor:"communicationchanneldesc",NoFilter:!0},{Header:n(A.a.status),accessor:"status",NoFilter:!0,prefixTranslation:"status_",Cell:function(e){var t=e.cell.row.original.status;return(n("status_".concat(t).toLowerCase())||"").toUpperCase()}}]}),[]);return Object(E.useEffect)((function(){return W(),function(){e(Object(C.t)())}}),[]),Object(E.useEffect)((function(){if(D)if(t.loading||t.error){if(t.error){var a=n(t.code||"error_unexpected_error",{module:n(A.a.property).toLocaleLowerCase()});e(Object(S.e)({show:!0,severity:"error",message:a})),e(Object(S.d)(!1)),U(!1)}}else t.value&&(y(t.value.providerWhatsApp),H(t.value.createChannel),t.value.createChannel||(e(Object(S.e)({show:!0,severity:"error",message:n(A.a.channellimit)})),e(Object(S.d)(!1)),U(!1)))}),[t,D]),Object(E.useEffect)((function(){if(F){H(!1);var e={typeWhatsApp:P,row:null};K.push(u.a.CHANNELS_ADD,e)}}),[F]),Object(O.jsxs)("div",{style:{width:"100%"},children:[Object(O.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:Object(O.jsx)(N.L,{breadcrumbs:B,handleClick:function(e){"view-0"!==e||K.push(u.a.CONFIGURATION)}})}),Object(O.jsx)(c.f,{columns:Z,titlemodule:n(A.a.channel_plural,{count:2}),ButtonsElement:function(){return Object(O.jsx)(b.a,{disabled:T.mainData.loading,variant:"contained",type:"button",color:"primary",startIcon:Object(O.jsx)(l.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){return K.push(u.a.CONFIGURATION)},children:n(A.a.back)})},data:T.mainData.data,download:!0,onClickRow:Y,loading:T.mainData.loading,register:!0,hoverShadow:!0,handleRegister:function(){return e(Object(I.c)({method:"UFN_COMMUNICATIONCHANNEL_PAYMENTPLAN_CHECK",parameters:{corpid:(null===m||void 0===m?void 0:m.corpid)||0,orgid:(null===m||void 0===m?void 0:m.orgid)||0}})),void U(!0)}})]})};n.default=T},778:function(e,n,t){"use strict";var a=t(45),r=t(61);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=r(t(0)),i=(0,a(t(62)).default)(c.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");n.default=i},781:function(e,n,t){"use strict";t.d(n,"g",(function(){return o})),t.d(n,"m",(function(){return l})),t.d(n,"a",(function(){return s})),t.d(n,"d",(function(){return d})),t.d(n,"c",(function(){return E})),t.d(n,"n",(function(){return f})),t.d(n,"t",(function(){return A})),t.d(n,"f",(function(){return p})),t.d(n,"o",(function(){return S})),t.d(n,"h",(function(){return b})),t.d(n,"p",(function(){return N})),t.d(n,"k",(function(){return C})),t.d(n,"s",(function(){return _})),t.d(n,"j",(function(){return I})),t.d(n,"r",(function(){return O})),t.d(n,"i",(function(){return T})),t.d(n,"q",(function(){return m})),t.d(n,"u",(function(){return L})),t.d(n,"b",(function(){return v})),t.d(n,"e",(function(){return h})),t.d(n,"l",(function(){return P}));var a=t(24),r=t.n(a),c=t(39),i=t(28),u=t(30),o=function(e,n){return{callAPI:function(){return i.d.getPagelist(e,n)},types:{loading:u.a.CHANNELS,success:u.a.CHANNELS_SUCCESS,failure:u.a.CHANNELS_FAILURE},type:null}},l=function(e){return{callAPI:function(){return i.d.insertchnl(e)},types:{loading:u.a.CHANNELS,success:u.a.CHANNELS_INSERTSUCCESS,failure:u.a.CHANNELS_FAILURE},type:null}},s=function(e){return{callAPI:function(){return i.d.activateChannel(e)},types:{loading:u.a.ACTIVATECHANNEL,success:u.a.ACTIVATECHANNEL_SUCCESS,failure:u.a.ACTIVATECHANNEL_FAILURE},type:null}},d=function(e){return{callAPI:function(){return i.d.deletechnl(e)},types:{loading:u.a.CHANNELS,success:u.a.CHANNELS_INSERTSUCCESS,failure:u.a.CHANNELS_FAILURE},type:null}},E=function(e){return{callAPI:function(){return i.d.checkPaymentPlan(e)},types:{loading:u.a.CHECK_PAYMENTPLAN,success:u.a.CHECK_PAYMENTPLAN_SUCCESS,failure:u.a.CHECK_PAYMENTPLAN_FAILURE},type:null}},f=function(e){return{callAPI:function(){var n=Object(c.a)(r.a.mark((function n(){var t,a,c,u,o,l,s,d,E,f,A,p;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.service.interface.iconbutton,a=e.service.interface.iconheader,c=e.service.interface.iconbot,u=e.service.bubble.iconbubble,o="",l="",s="",d="",!t){n.next=14;break}return(E=new FormData).append("file",t,t.name),n.next=13,i.e.uploadFile(E);case 13:o=n.sent.data.url;case 14:if(!a){n.next=20;break}return(f=new FormData).append("file",a,a.name),n.next=19,i.e.uploadFile(f);case 19:l=n.sent.data.url;case 20:if(!c){n.next=26;break}return(A=new FormData).append("file",c,c.name),n.next=25,i.e.uploadFile(A);case 25:s=n.sent.data.url;case 26:if(!u){n.next=32;break}return(p=new FormData).append("file",u,u.name),n.next=31,i.e.uploadFile(p);case 31:d=n.sent.data.url;case 32:return e.service.interface.iconbutton=o,e.service.interface.iconheader=l,e.service.interface.iconbot=s,e.service.bubble.iconbubble=d,n.abrupt("return",i.d.insertchnl(e));case 37:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),types:{loading:u.a.INSERT_CHANNEL,failure:u.a.INSERT_CHANNEL_FAILURE,success:u.a.INSERT_CHANNEL_SUCCESS},type:null}},A=function(){return{type:u.a.INSERT_CHANNEL_RESET}},p=function(e,n){return{callAPI:function(){var t=Object(c.a)(r.a.mark((function t(){var a,c,u,o,l,s,d,E,f;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("CHAZ"!==n&&"SMOOCHANDROID"!==n){t.next=35;break}if(a=e.service,c=a.interface.iconbutton,u=a.interface.iconheader,o=a.interface.iconbot,l=a.bubble.iconbubble,!c||"object"!==typeof c){t.next=12;break}return(s=new FormData).append("file",c,c.name),t.next=11,i.e.uploadFile(s);case 11:c=t.sent.data.url;case 12:if(!u||"object"!==typeof u){t.next=18;break}return(d=new FormData).append("file",u,u.name),t.next=17,i.e.uploadFile(d);case 17:u=t.sent.data.url;case 18:if(!o||"object"!==typeof o){t.next=24;break}return(E=new FormData).append("file",o,o.name),t.next=23,i.e.uploadFile(E);case 23:o=t.sent.data.url;case 24:if(!l||"object"!==typeof l){t.next=30;break}return(f=new FormData).append("file",l,l.name),t.next=29,i.e.uploadFile(f);case 29:l=t.sent.data.url;case 30:return e.service.interface.iconbutton=c,e.service.interface.iconheader=u,e.service.interface.iconbot=o,e.service.bubble.iconbubble=l,t.abrupt("return",i.d.editchnl(e));case 35:return t.abrupt("return",i.e.main(e));case 36:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),types:{loading:u.a.EDIT_CHANNEL,failure:u.a.EDIT_CHANNEL_FAILURE,success:u.a.EDIT_CHANNEL_SUCCESS},type:null}},S=function(){return{type:u.a.EDIT_CHANNEL_RESET}},b=function(e,n){return{callAPI:function(){return i.d.getPagelistSub(e,n)},types:{loading:u.a.FACEBOOK_PAGES,success:u.a.FACEBOOK_PAGES_SUCCESS,failure:u.a.FACEBOOK_PAGES_FAILURE},type:null}},N=function(){return{type:u.a.FACEBOOK_PAGES_RESET}},C=function(e,n){return{callAPI:function(){return i.d.getPagelistSub(e,n)},types:{loading:u.a.MESSENGER_PAGES,success:u.a.MESSENGER_PAGES_SUCCESS,failure:u.a.MESSENGER_PAGES_FAILURE},type:null}},_=function(){return{type:u.a.MESSENGER_PAGES_RESET}},I=function(e,n){return{callAPI:function(){return i.d.getPagelistSub(e,n)},types:{loading:u.a.INSTAGRAM_PAGES,success:u.a.INSTAGRAM_PAGES_SUCCESS,failure:u.a.INSTAGRAM_PAGES_FAILURE},type:null}},O=function(){return{type:u.a.INSTAGRAM_PAGES_RESET}},T=function(e,n){return{callAPI:function(){return i.d.getPagelistSub(e,n)},types:{loading:u.a.INSTAGRAMDM_PAGES,success:u.a.INSTAGRAMDM_PAGES_SUCCESS,failure:u.a.INSTAGRAMDM_PAGES_FAILURE},type:null}},m=function(){return{type:u.a.INSTAGRAMDM_PAGES_RESET}},L=function(e){return{callAPI:function(){return i.d.synchronizeTemplate(e)},types:{failure:u.a.SYNCHRONIZE_TEMPLATE_FAILURE,loading:u.a.SYNCHRONIZE_TEMPLATE,success:u.a.SYNCHRONIZE_TEMPLATE_SUCCESS},type:null}},v=function(e){return{callAPI:function(){return i.d.addTemplate(e)},types:{failure:u.a.ADD_TEMPLATE_FAILURE,loading:u.a.ADD_TEMPLATE,success:u.a.ADD_TEMPLATE_SUCCESS},type:null}},h=function(e){return{callAPI:function(){return i.d.deleteTemplate(e)},types:{failure:u.a.DELETE_TEMPLATE_FAILURE,loading:u.a.DELETE_TEMPLATE,success:u.a.DELETE_TEMPLATE_SUCCESS},type:null}},P=function(e){return{callAPI:function(){return i.d.getPhoneList(e)},types:{loading:u.a.PHONE_LIST,success:u.a.PHONE_LIST_SUCCESS,failure:u.a.PHONE_LIST_FAILURE},type:null}}}}]);
//# sourceMappingURL=90.4264c616.chunk.js.map