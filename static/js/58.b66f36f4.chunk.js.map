{"version":3,"sources":["pages/PaymentOrder.tsx","store/culqi/actions.ts","../node_modules/@material-ui/icons/AttachMoney.js","components/fields/CulqiModal.tsx","../node_modules/react-culqi/dist/index.esm.js"],"names":["useStyles","makeStyles","theme","containerMain","display","alignItems","back","justifyContent","containerSuccess","minHeight","marginTop","backgroundColor","borderRadius","boxShadow","width","minWidth","padding","spacing","breakpoints","down","containerFinish","textTitle","border","background","fontWeight","color","overflowWrap","textField","PaymentOrder","dispatch","useDispatch","t","useTranslation","classes","mainResult","useSelector","state","main","mainData","culqiResult","culqi","request","useParams","corpid","orgid","ordercode","useState","paymentData","setPaymentData","publicKey","setPublicKey","waitData","setWaitData","waitPay","setWaitPay","fetchData","useRef","window","innerWidth","getCollectionPaymentOrder","paymentOrderSel","conversationid","personid","paymentorderid","useEffect","loading","error","showSnackbar","show","severity","message","code","module","langKeys","organization_plural","toLocaleLowerCase","showBackdrop","success","data","length","publickey","error_cos_unexpected","className","paymentstatus","style","height","margin","fontSize","marginBottom","paymentorder_success","flexDirection","flexWrap","flexBasis","flex","paymentorder_code","concept","paymentorder_concept","userfirstname","paymentorder_firstname","userlastname","paymentorder_lastname","userphone","paymentorder_phone","usermail","paymentorder_mail","usercountry","paymentorder_country","usercity","paymentorder_city","useraddress","paymentorder_address","currency","paymentorder_currency","totalamount","paymentorder_totalamount","formatNumber","amount","Math","round","Number","EPSILON","buttontitle","proceedpayment","callbackOnSuccess","description","disabled","successmessage","title","type","paymentorder_paid","textAlign","paymentorder_paid_description","paymentorder_notfound","paymentorder_notfound_description","charge","callAPI","CulqiService","types","actionTypes","CHARGE","CHARGE_SUCCESS","failure","CHARGE_FAILURE","resetCharge","CHARGE_RESET","balance","BALANCE","BALANCE_SUCCESS","BALANCE_FAILURE","resetBalance","BALANCE_RESET","paymentOrder","PAYMENTORDER","PAYMENTORDER_SUCCESS","PAYMENTORDER_FAILURE","resetPaymentOrder","PAYMENTORDER_RESET","subscribe","SUBSCRIBE","SUBSCRIBE_SUCCESS","SUBSCRIBE_FAILURE","resetSubscribe","SUBSCRIBE_RESET","createInvoice","CREATE_INVOICE","CREATE_INVOICE_SUCCESS","CREATE_INVOICE_FAILURE","createCreditNote","CREATE_CREDITNOTE","CREATE_CREDITNOTE_SUCCESS","CREATE_CREDITNOTE_FAILURE","regularizeInvoice","REGULARIZE_INVOICE","REGULARIZE_INVOICE_SUCCESS","REGULARIZE_INVOICE_FAILURE","getExchangeRate","GET_EXCHANGERATE","GET_EXCHANGERATE_SUCCESS","GET_EXCHANGERATE_FAILURE","emitInvoice","EMIT_INVOICE","EMIT_INVOICE_SUCCESS","EMIT_INVOICE_FAILURE","cardCreate","CARD_CREATE_FAILURE","CARD_CREATE","CARD_CREATE_SUCCESS","cardDelete","CARD_DELETE_FAILURE","CARD_DELETE","CARD_DELETE_SUCCESS","reportPdf","DRAW_REPORTPDF_FAILURE","DRAW_REPORTPDF","DRAW_REPORTPDF_SUCCESS","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","globalpublickey","apiUrls","CULQIKEY","CulqiModal","buyamount","comments","interval","interval_count","invoiceid","limit","metadata","options","override","purchaseorder","reference","totalpay","culqiSelector","resetRequest","onError","onToken","token","settings","createBalance","createCharge","createPaymentOrder","createSubscription","maincolor","buttontext","maintext","openCulqi","onClick","startIcon","variant","pay","CulqiContext","createContext","Culqi","Consumer","culqiMessages","baseCulqiUrl","CulqiCheckout","_Component","subClass","superClass","_this","_len","arguments","args","Array","_key","call","apply","this","concat","props","getCulqiSettings","_this$props","_this$props$currency","_this$props$descripti","_this$props$title","initCulqi","_this$props2","_this$props2$options","culqiSettings","setCulqiOptions","requestAnimationFrame","setCulqiSettings","onCulqiLoad","e","onCulqiEvent","messageEvent","origin","_this$props3","onClose","object","setState","open","userOptions","keys","setAmount","prototype","create","constructor","__proto__","_proto","componentDidMount","script","document","id","src","async","onload","culqiScript","body","appendChild","addEventListener","componentDidUpdate","prevProps","prevState","componentWillUnmount","parentNode","removeChild","removeEventListener","undefined","render","Error","Provider","children","Component"],"mappings":"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","file":"static/js/58.b66f36f4.chunk.js","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport CulqiModal from 'components/fields/CulqiModal';\r\nimport Container from '@material-ui/core/Container';\r\nimport Popus from 'components/layout/Popus';\r\n\r\nimport { FC, useEffect, useState,useRef } from 'react';\r\nimport { langKeys } from 'lang/keys';\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { useParams } from 'react-router';\r\nimport { useSelector } from 'hooks';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Dictionary } from '@types';\r\nimport { getCollectionPaymentOrder } from 'store/main/actions';\r\nimport { paymentOrderSel } from 'common/helpers';\r\nimport { showSnackbar, showBackdrop } from 'store/popus/actions';\r\nimport { LaraigoLogo } from 'icons';\r\nimport { formatNumber } from 'common/helpers';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    containerMain: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    back: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    containerSuccess: {\r\n        minHeight: \"90vh\",\r\n        marginTop: 20,\r\n        backgroundColor: 'white',\r\n        display: 'flex',\r\n        borderRadius: 8,\r\n        boxShadow: '0 1px 8px 0 rgb(0 0 0 / 8%)',\r\n        width: '420px',\r\n        minWidth: '380px',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: theme.spacing(3),\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '70vw',\r\n        },\r\n        flexDirection: 'column',\r\n        flexWrap: 'wrap',\r\n    },\r\n    containerFinish: {\r\n        minHeight: 600,\r\n        backgroundColor: 'white',\r\n        display: 'flex',\r\n        borderRadius: 8,\r\n        boxShadow: '0 1px 8px 0 rgb(0 0 0 / 8%)',\r\n        width: '80vw',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: theme.spacing(3),\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '100vw',\r\n        },\r\n        flexDirection: 'column',\r\n    },\r\n    textTitle: {\r\n        border: '1px solid #7721AD',\r\n        background: '#7721AD',\r\n        padding: '8px',\r\n        fontWeight: 'bold',\r\n        color: 'white',\r\n        overflowWrap: 'break-word'\r\n    },\r\n    textField: {\r\n        border: '1px solid #EBEAED',\r\n        padding: '8px',\r\n        overflowWrap: 'break-word'\r\n    }\r\n}));\r\n\r\nexport const PaymentOrder: FC = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const { t } = useTranslation();\r\n\r\n    const classes = useStyles();\r\n    const mainResult = useSelector(state => state.main.mainData);\r\n    const culqiResult = useSelector(state => state.culqi.request);\r\n\r\n    const { corpid, orgid, ordercode }: any = useParams();\r\n\r\n    const [paymentData, setPaymentData] = useState<Dictionary | null>(null);\r\n    const [publicKey, setPublicKey] = useState('');\r\n    const [waitData, setWaitData] = useState(false);\r\n    const [waitPay, setWaitPay] = useState(false);\r\n    const windowWidth = useRef(window.innerWidth);\r\n\r\n    const fetchData = () => {\r\n        dispatch(getCollectionPaymentOrder(paymentOrderSel({ corpid: corpid, orgid: orgid, conversationid: 0, personid: 0, paymentorderid: 0, ordercode: ordercode })));\r\n        setWaitData(true);\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (waitData) {\r\n            if (!mainResult.loading && !mainResult.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(langKeys.success) }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitData(false);\r\n\r\n                if (mainResult.data.length) {\r\n                        setPaymentData(mainResult.data[0]);\r\n                        setPublicKey(mainResult.data[0].publickey);\r\n                }\r\n            } else if (mainResult.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: t(mainResult.code || \"error_unexpected_error\", { module: t(langKeys.organization_plural).toLocaleLowerCase() }) }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitData(false);\r\n            }\r\n        }\r\n    }, [mainResult, waitData])\r\n\r\n    useEffect(() => {\r\n        if (waitPay) {\r\n            if (!culqiResult.loading && culqiResult.data) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: '' + t(culqiResult.message || langKeys.success) }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitPay(false);\r\n            }\r\n            else if (culqiResult.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: '' + t(culqiResult.message || langKeys.error_cos_unexpected) }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitPay(false);\r\n            }\r\n        }\r\n    }, [culqiResult, waitPay]);\r\n\r\n    if (mainResult.loading) {\r\n        return (\r\n            <div className={classes.back}>\r\n                <CircularProgress />\r\n            </div>\r\n        )\r\n    }\r\n    else {\r\n        if (paymentData) {\r\n            if (paymentData.paymentstatus === \"PENDING\") {\r\n                return (\r\n                    <div className={classes.back}>\r\n                            <div className={classes.containerSuccess}>\r\n                                <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                    <LaraigoLogo style={{ height: 120, margin: '20px', width: \"auto\" }} />\r\n                                </div>\r\n                                <div style={{ fontWeight: 'bold', fontSize: 20, marginBottom: '20px' }}>{t(langKeys.paymentorder_success)}</div>\r\n                                {paymentData.ordercode && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_code)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.ordercode}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.concept && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_concept)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.concept}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.userfirstname && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_firstname)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.userfirstname}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.userlastname && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_lastname)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.userlastname}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.userphone && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_phone)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.userphone}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.usermail && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_mail)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.usermail}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.usercountry && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_country)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.usercountry}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.usercity && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_city)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.usercity}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.useraddress && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_address)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.useraddress}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.currency && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '2px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_currency)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {paymentData?.currency}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {paymentData.totalamount && <div style={{ display: 'flex', flexDirection: 'row', flexWrap: 'wrap', width: '100%', marginBottom: '20px' }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textTitle}>\r\n                                            {t(langKeys.paymentorder_totalamount)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', flexBasis: '100%', flex: 1 }}>\r\n                                        <div className={classes.textField}>\r\n                                            {formatNumber(paymentData?.totalamount || 0)}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n                                {(publicKey && paymentData.totalamount) && <CulqiModal\r\n                                    amount={Math.round(((paymentData.totalamount * 100) + Number.EPSILON) * 100) / 100}\r\n                                    buttontitle={t(langKeys.proceedpayment)}\r\n                                    callbackOnSuccess={fetchData}\r\n                                    corpid={paymentData.corpid}\r\n                                    currency={paymentData.currency}\r\n                                    description={paymentData.concept}\r\n                                    disabled={false}\r\n                                    paymentorderid={paymentData.paymentorderid}\r\n                                    orgid={paymentData.orgid}\r\n                                    publickey={publicKey}\r\n                                    successmessage={t(langKeys.success)}\r\n                                    title={paymentData.description}\r\n                                    type=\"PAYMENTORDER\"\r\n                                >\r\n                                </CulqiModal>}\r\n                        </div>\r\n                        <Popus />\r\n                    </div>\r\n                )\r\n            }\r\n            else {\r\n                return (\r\n                    <div className={classes.back}>\r\n                        <div className={classes.containerFinish}>\r\n                            <div style={{ fontWeight: 'bold', fontSize: 20 }}>{t(langKeys.paymentorder_paid)}</div>\r\n                            <div style={{ marginTop: 16, textAlign: 'center' }} >{t(langKeys.paymentorder_paid_description)}</div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n        else {\r\n            return (\r\n                <div className={classes.back}>\r\n                    <div className={classes.containerFinish}>\r\n                        <div style={{ fontWeight: 'bold', fontSize: 20 }}>{t(langKeys.paymentorder_notfound)}</div>\r\n                        <div style={{ marginTop: 16, textAlign: 'center' }} >{t(langKeys.paymentorder_notfound_description)}</div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default PaymentOrder;","import { IActionCall } from \"@types\";\r\nimport { CulqiService } from \"network\";\r\nimport actionTypes from \"./actionTypes\";\r\n\r\nexport const charge = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.charge(request),\r\n    types: {\r\n        loading: actionTypes.CHARGE,\r\n        success: actionTypes.CHARGE_SUCCESS,\r\n        failure: actionTypes.CHARGE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetCharge = (): IActionCall => ({ type: actionTypes.CHARGE_RESET });\r\n\r\nexport const balance = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.balance(request),\r\n    types: {\r\n        loading: actionTypes.BALANCE,\r\n        success: actionTypes.BALANCE_SUCCESS,\r\n        failure: actionTypes.BALANCE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetBalance = (): IActionCall => ({ type: actionTypes.BALANCE_RESET });\r\n\r\nexport const paymentOrder = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.paymentOrder(request),\r\n    types: {\r\n        loading: actionTypes.PAYMENTORDER,\r\n        success: actionTypes.PAYMENTORDER_SUCCESS,\r\n        failure: actionTypes.PAYMENTORDER_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetPaymentOrder = (): IActionCall => ({ type: actionTypes.PAYMENTORDER_RESET });\r\n\r\nexport const subscribe = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.subscribe(request),\r\n    types: {\r\n        loading: actionTypes.SUBSCRIBE,\r\n        success: actionTypes.SUBSCRIBE_SUCCESS,\r\n        failure: actionTypes.SUBSCRIBE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetSubscribe = (): IActionCall => ({ type: actionTypes.SUBSCRIBE_RESET });\r\n\r\nexport const unsubscribe = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.unsubscribe(request),\r\n    types: {\r\n        loading: actionTypes.UNSUBSCRIBE,\r\n        success: actionTypes.UNSUBSCRIBE_SUCCESS,\r\n        failure: actionTypes.UNSUBSCRIBE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetUnsubscribe = (): IActionCall => ({ type: actionTypes.UNSUBSCRIBE_RESET });\r\n\r\nexport const sendInvoice = (invoiceid: number): IActionCall => ({\r\n    callAPI: () => CulqiService.sendInvoice({ parameters: { invoiceid } }),\r\n    types: {\r\n        loading: actionTypes.SEND_INVOICE,\r\n        success: actionTypes.SEND_INVOICE_SUCCESS,\r\n        failure: actionTypes.SEND_INVOICE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetSendInvoice = (): IActionCall => ({ type: actionTypes.SEND_INVOICE_RESET });\r\n\r\nexport const createInvoice = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.createInvoice(request),\r\n    types: {\r\n        loading: actionTypes.CREATE_INVOICE,\r\n        success: actionTypes.CREATE_INVOICE_SUCCESS,\r\n        failure: actionTypes.CREATE_INVOICE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetcreateInvoice = (): IActionCall => ({ type: actionTypes.CREATE_INVOICE_RESET });\r\n\r\nexport const createCreditNote = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.createCreditNote(request),\r\n    types: {\r\n        loading: actionTypes.CREATE_CREDITNOTE,\r\n        success: actionTypes.CREATE_CREDITNOTE_SUCCESS,\r\n        failure: actionTypes.CREATE_CREDITNOTE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetCreateCreditNote = (): IActionCall => ({ type: actionTypes.CREATE_CREDITNOTE_RESET });\r\n\r\nexport const regularizeInvoice = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.regularizeInvoice(request),\r\n    types: {\r\n        loading: actionTypes.REGULARIZE_INVOICE,\r\n        success: actionTypes.REGULARIZE_INVOICE_SUCCESS,\r\n        failure: actionTypes.REGULARIZE_INVOICE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetRegularizeInvoice = (): IActionCall => ({ type: actionTypes.REGULARIZE_INVOICE_RESET });\r\n\r\nexport const getExchangeRate = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.getExchangeRate(request),\r\n    types: {\r\n        loading: actionTypes.GET_EXCHANGERATE,\r\n        success: actionTypes.GET_EXCHANGERATE_SUCCESS,\r\n        failure: actionTypes.GET_EXCHANGERATE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetGetExchangeRate = (): IActionCall => ({ type: actionTypes.GET_EXCHANGERATE_RESET });\r\n\r\nexport const emitInvoice = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.emitInvoice(request),\r\n    types: {\r\n        loading: actionTypes.EMIT_INVOICE,\r\n        success: actionTypes.EMIT_INVOICE_SUCCESS,\r\n        failure: actionTypes.EMIT_INVOICE_FAILURE,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetEmitInvoice = (): IActionCall => ({ type: actionTypes.EMIT_INVOICE_RESET });\r\n\r\nexport const cardCreate = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.cardCreate(request),\r\n    types: {\r\n        failure: actionTypes.CARD_CREATE_FAILURE,\r\n        loading: actionTypes.CARD_CREATE,\r\n        success: actionTypes.CARD_CREATE_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetCardCreate = (): IActionCall => ({ type: actionTypes.CARD_CREATE_RESET });\r\n\r\nexport const cardDelete = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.cardDelete(request),\r\n    types: {\r\n        failure: actionTypes.CARD_DELETE_FAILURE,\r\n        loading: actionTypes.CARD_DELETE,\r\n        success: actionTypes.CARD_DELETE_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetCardDelete = (): IActionCall => ({ type: actionTypes.CARD_DELETE_RESET });\r\n\r\nexport const cardGet = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.cardGet(request),\r\n    types: {\r\n        failure: actionTypes.CARD_GET_FAILURE,\r\n        loading: actionTypes.CARD_GET,\r\n        success: actionTypes.CARD_GET_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetCardGet = (): IActionCall => ({ type: actionTypes.CARD_GET_RESET });\r\n\r\nexport const reportPdf = (request: any): IActionCall => ({\r\n    callAPI: () => CulqiService.reportPdf(request),\r\n    types: {\r\n        failure: actionTypes.DRAW_REPORTPDF_FAILURE,\r\n        loading: actionTypes.DRAW_REPORTPDF,\r\n        success: actionTypes.DRAW_REPORTPDF_SUCCESS,\r\n    },\r\n    type: null,\r\n});\r\n\r\nexport const resetReportPdf = (): IActionCall => ({ type: actionTypes.DRAW_REPORTPDF_RESET });","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z\"\n}), 'AttachMoney');\n\nexports.default = _default;","import AttachMoneyIcon from '@material-ui/icons/AttachMoney';\r\n\r\nimport { apiUrls } from 'common/constants';\r\nimport { Button } from '@material-ui/core';\r\nimport { charge, resetCharge, subscribe, resetSubscribe, balance, resetBalance, paymentOrder, resetPaymentOrder } from 'store/culqi/actions'\r\nimport { CulqiProvider, Culqi } from 'react-culqi';\r\nimport { Dictionary } from '@types';\r\nimport { FC, useEffect, useState } from 'react';\r\nimport { langKeys } from 'lang/keys';\r\nimport { showBackdrop, showSnackbar } from 'store/popus/actions';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useSelector } from 'hooks';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst globalpublickey = apiUrls.CULQIKEY;\r\n\r\ninterface CulqiOptionsProps {\r\n    buttontext?: string;\r\n    desctext?: string;\r\n    logo?: string;\r\n    maincolor?: string;\r\n    maintext?: string;\r\n}\r\n\r\ninterface CulqiModalProps {\r\n    amount: number;\r\n    buttontitle?: string;\r\n    buyamount?: number;\r\n    callbackOnSuccess?: () => void;\r\n    comments?: string;\r\n    corpid?: number;\r\n    currency: string;\r\n    description: string;\r\n    disabled?: boolean;\r\n    interval?: string;\r\n    interval_count?: number;\r\n    invoiceid?: number;\r\n    paymentorderid?: number;\r\n    limit?: number;\r\n    metadata?: Dictionary;\r\n    options?: CulqiOptionsProps;\r\n    orgid?: number;\r\n    override?: boolean;\r\n    publickey?: string;\r\n    purchaseorder?: string;\r\n    reference?: string;\r\n    successmessage?: string;\r\n    title: string;\r\n    totalamount?: number;\r\n    totalpay?: number;\r\n    type?: \"CHARGE\" | \"SUBSCRIPTION\" | \"BALANCE\" | \"PAYMENTORDER\",\r\n}\r\n\r\nconst CulqiModal: FC<CulqiModalProps> = ({ amount, buttontitle, buyamount, callbackOnSuccess, comments, corpid = 0, currency = \"USD\", description, disabled = false, interval, interval_count, invoiceid, paymentorderid, limit, metadata, options = {}, orgid = 0, override, publickey, purchaseorder, reference, successmessage, title, totalamount, totalpay, type = \"CHARGE\" }) => {\r\n    const { t } = useTranslation();\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const culqiSelector = useSelector(state => state.culqi.request);\r\n\r\n    const [waitPay, setWaitPay] = useState(false);\r\n\r\n    const createCharge = (token: any) => {\r\n        dispatch(showBackdrop(true));\r\n        dispatch(charge({\r\n            comments,\r\n            corpid,\r\n            invoiceid,\r\n            metadata,\r\n            orgid,\r\n            override,\r\n            purchaseorder,\r\n            settings: { title, description, currency, amount },\r\n            token,\r\n        }));\r\n        setWaitPay(true);\r\n    }\r\n\r\n    const createBalance = (token: any) => {\r\n        dispatch(showBackdrop(true));\r\n        dispatch(balance({\r\n            buyamount,\r\n            comments,\r\n            corpid,\r\n            invoiceid,\r\n            metadata,\r\n            orgid,\r\n            purchaseorder,\r\n            reference,\r\n            settings: { title, description, currency, amount },\r\n            token,\r\n            totalamount,\r\n            totalpay,\r\n        }));\r\n        setWaitPay(true);\r\n    }\r\n\r\n    const createPaymentOrder = (token: any) => {\r\n        dispatch(showBackdrop(true));\r\n        dispatch(paymentOrder({\r\n            corpid,\r\n            metadata,\r\n            orgid,\r\n            paymentorderid,\r\n            settings: { title, description, currency, amount },\r\n            token,\r\n        }));\r\n        setWaitPay(true);\r\n    }\r\n\r\n    const createSubscription = (token: any) => {\r\n        dispatch(showBackdrop(true));\r\n        dispatch(subscribe({\r\n            metadata,\r\n            settings: { title, description, currency, amount, interval, interval_count, limit },\r\n            token,\r\n        }));\r\n        setWaitPay(true);\r\n    }\r\n\r\n    const onToken = (token: any) => {\r\n        switch (type) {\r\n            case 'BALANCE':\r\n                createBalance(token);\r\n                break;\r\n\r\n            case 'CHARGE':\r\n                createCharge(token);\r\n                break;\r\n\r\n            case 'PAYMENTORDER':\r\n                createPaymentOrder(token);\r\n                break;\r\n\r\n            case 'SUBSCRIPTION':\r\n                createSubscription(token);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    const onError = (error: any) => {\r\n        switch (type) {\r\n            case 'BALANCE':\r\n                dispatch(resetBalance());\r\n                break;\r\n\r\n            case 'CHARGE':\r\n                dispatch(resetCharge());\r\n                break;\r\n\r\n            case 'PAYMENTORDER':\r\n                dispatch(resetPaymentOrder());\r\n                break;\r\n\r\n            case 'SUBSCRIPTION':\r\n                dispatch(resetSubscribe());\r\n                break;\r\n        }\r\n    }\r\n\r\n    const resetRequest = () => {\r\n        switch (type) {\r\n            case 'BALANCE':\r\n                dispatch(resetBalance());\r\n                break;\r\n\r\n            case 'CHARGE':\r\n                dispatch(resetCharge());\r\n                break;\r\n\r\n            case 'PAYMENTORDER':\r\n                dispatch(resetPaymentOrder());\r\n                break;\r\n\r\n            case 'SUBSCRIPTION':\r\n                dispatch(resetSubscribe());\r\n                break;\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (waitPay) {\r\n            if (!culqiSelector.loading && !culqiSelector.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: `${successmessage ? successmessage : culqiSelector.message}` }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitPay(false);\r\n\r\n                resetRequest && resetRequest();\r\n                callbackOnSuccess && callbackOnSuccess();\r\n            }\r\n            else if (culqiSelector.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: `${culqiSelector.message ? culqiSelector.message : t(\"error_unexpected_error\")}` }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitPay(false);\r\n\r\n                resetRequest && resetRequest();\r\n            }\r\n        }\r\n    }, [culqiSelector, waitPay]);\r\n\r\n    return (\r\n        <CulqiProvider\r\n            amount={amount}\r\n            currency={currency}\r\n            description={description}\r\n            onError={onError}\r\n            onToken={onToken}\r\n            options={{\r\n                style: {\r\n                    maincolor: \"#7721AD\",\r\n                    buttontext: \"#FFFFFF\",\r\n                    maintext: \"#7721AD\",\r\n                    ...options\r\n                }\r\n            }}\r\n            publicKey={publickey || globalpublickey}\r\n            title={title}\r\n        >\r\n            <Culqi>\r\n                {({ openCulqi }: any) => {\r\n                    return (\r\n                        <Button\r\n                            color=\"primary\"\r\n                            disabled={disabled || waitPay}\r\n                            onClick={openCulqi}\r\n                            startIcon={<AttachMoneyIcon color=\"secondary\" />}\r\n                            style={{ backgroundColor: \"#55BD84\" }}\r\n                            type=\"button\"\r\n                            variant=\"contained\"\r\n                        >\r\n                            {buttontitle ? buttontitle : t(langKeys.pay)}\r\n                        </Button>\r\n                    )\r\n                }}\r\n            </Culqi>\r\n        </CulqiProvider>\r\n    );\r\n};\r\n\r\nexport default CulqiModal;","import { createContext, Component, createElement } from 'react';\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nvar CulqiContext = createContext({});\nvar Culqi = CulqiContext.Consumer;\n\nvar culqiMessages = {\n  welcome: 'checkout_bienvenido',\n  closed: 'checkout_cerrado'\n};\nvar baseCulqiUrl = 'https://checkout.culqi.com';\nvar culqiId = 'culqi-js';\nvar culqiUrl = baseCulqiUrl + \"/js/v3\";\n\nvar CulqiCheckout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(CulqiCheckout, _Component);\n\n  function CulqiCheckout() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    _this.state = {\n      amount: _this.props.amount || 0\n    };\n\n    _this.getCulqiSettings = function () {\n      var amount = _this.state.amount;\n      var _this$props = _this.props,\n          _this$props$currency = _this$props.currency,\n          currency = _this$props$currency === void 0 ? 'PEN' : _this$props$currency,\n          _this$props$descripti = _this$props.description,\n          description = _this$props$descripti === void 0 ? '' : _this$props$descripti,\n          _this$props$title = _this$props.title,\n          title = _this$props$title === void 0 ? '' : _this$props$title;\n      return {\n        amount: amount,\n        currency: currency,\n        description: description,\n        title: title\n      };\n    };\n\n    _this.initCulqi = function () {\n      var _this$props2 = _this.props,\n          publicKey = _this$props2.publicKey,\n          _this$props2$options = _this$props2.options,\n          options = _this$props2$options === void 0 ? {} : _this$props2$options;\n\n      var culqiSettings = _this.getCulqiSettings();\n\n      _this.setCulqiOptions(options);\n\n      window.Culqi.publicKey = publicKey;\n      requestAnimationFrame(function () {\n        _this.setCulqiSettings(culqiSettings);\n      }); // Patch it so it doesn't throw on browser\n\n      window.culqi = function () {};\n    };\n\n    _this.onCulqiLoad = function (e) {\n      if (window.Culqi) {\n        _this.initCulqi();\n      }\n    };\n\n    _this.onCulqiEvent = function (messageEvent) {\n      var origin = messageEvent.origin,\n          data = messageEvent.data;\n      var _this$props3 = _this.props,\n          onClose = _this$props3.onClose,\n          onError = _this$props3.onError,\n          onToken = _this$props3.onToken;\n      if (origin !== baseCulqiUrl) return;\n\n      if (typeof data === 'string' && data === culqiMessages.closed) {\n        onClose && onClose();\n\n        _this.initCulqi();\n      }\n\n      if (typeof data === 'object') {\n        var object = data.object;\n        if (!object) return;\n\n        if (object === 'token') {\n          _this.setState({\n            token: data\n          }, function () {\n            onToken && onToken(data);\n          });\n        } else if (object === 'error') {\n          _this.setState({\n            error: data\n          }, function () {\n            onError && onError(data);\n          });\n        }\n      }\n    };\n\n    _this.openCulqi = function () {\n      if (window.Culqi) {\n        window.Culqi.open();\n      }\n    };\n\n    _this.setCulqiOptions = function (userOptions) {\n      if (Object.keys(userOptions).length > 0 && window.Culqi) {\n        window.Culqi.options(userOptions);\n      }\n    };\n\n    _this.setCulqiSettings = function (settings) {\n      if (window.Culqi) {\n        window.Culqi.settings(settings);\n      }\n    };\n\n    _this.setAmount = function (amount) {\n      _this.setState({\n        amount: amount || 0\n      });\n    };\n\n    return _this;\n  }\n\n  var _proto = CulqiCheckout.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (!this.props.publicKey) return;\n    var script = document.createElement('script');\n    script.id = culqiId;\n    script.src = culqiUrl;\n    script.async = true;\n    script.onload = this.onCulqiLoad;\n    this.culqiScript = script;\n    document.body.appendChild(this.culqiScript);\n    window.addEventListener('message', this.onCulqiEvent, false);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (prevState.amount !== this.state.amount) {\n      this.setCulqiSettings(this.getCulqiSettings());\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.culqiScript) {\n      this.culqiScript.parentNode.removeChild(this.culqiScript);\n    }\n\n    window.removeEventListener('message', this.onCulqiEvent, false);\n    window.culqi = undefined;\n  };\n\n  _proto.render = function render() {\n    if (!this.props.publicKey) {\n      throw new Error('Please pass along a `publicKey` prop.');\n    }\n\n    return createElement(CulqiContext.Provider, {\n      children: this.props.children,\n      value: {\n        openCulqi: this.openCulqi,\n        setAmount: this.setAmount,\n        amount: this.state.amount,\n        token: this.state.token,\n        error: this.state.error\n      }\n    });\n  };\n\n  return CulqiCheckout;\n}(Component);\n\nexport { CulqiCheckout as CulqiProvider, Culqi };\n"],"sourceRoot":""}