{"version":3,"sources":["../node_modules/@material-ui/icons/Update.js","pages/KPIManager.tsx","../node_modules/@material-ui/icons/Clear.js","../node_modules/@material-ui/icons/Save.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","useStyles","makeStyles","theme","containerDetail","marginTop","spacing","padding","background","button","fontWeight","fontSize","textTransform","mb2","marginBottom","dataPeriod","MINUTE","HOUR","DAY","MONTH","DetailKPIManager","data","row","edit","setViewSelected","multiData","fetchData","user","useSelector","state","login","validateToken","classes","useState","waitSave","setWaitSave","executeRes","main","execute","mainAuxRes","mainAux","mainAux2Res","mainAux2","dispatch","useDispatch","t","useTranslation","pageSelected","setPageSelected","dataStatus","success","useForm","defaultValues","id","kpiname","description","status","type","sqlselect","sqlwhere","target","cautionat","alertat","taskperiod","taskinterval","taskstartdate","Date","getTime","getTimezoneOffset","toISOString","previousvalue","currentvalue","updatedate","createdate","createby","changedate","changeby","operation","register","reset","handleSubmit","setValue","getValues","errors","formState","detaildata","setDetaildata","gaugeArcs","setGaugeArcs","useEffect","Math","max","ceil","validate","length","langKeys","field_required","showBackdrop","getCollectionAux2","selKPIManager","resetMainAux","resetMainAux2","loading","error","convertLocalDate","toLocaleString","undefined","year","month","day","hour","minute","second","errormessage","code","module","kpimanager_plural","toLocaleLowerCase","showSnackbar","show","severity","message","successful_edit","successful_register","onSubmit","manageConfirmation","visible","question","confirmation_save","callback","insKPIManager","columnsHistory","useMemo","Header","accessor","NoFilter","date","openDateRangeModal","setOpenDateRangeModal","filterRangeDate","startDate","getFirstDayMonth","getDateToday","endDate","getLastDayMonth","key","dateRange","setdateRange","kpiHistoryData","setKpiHistoryData","map","waitCalc","setWaitCalc","p_success","prev","p_previousvalue","p_currentvalue","p_updatedate","error_kpi_sql","p_error","arrayBread","name","kpimanager","kpimanager_detail","style","width","display","justifyContent","breadcrumbs","handleClick","view","getCollection","title","newkpi","gap","alignItems","variant","color","startIcon","backgroundColor","onClick","back","className","save","indicatorColor","borderBottom","textColor","onChange","_","label","detail","audit","history","kpi_name","valueDefault","domainvalue","uset","prefixTranslation","optionDesc","optionValue","includes","roledesc","disabled","corpdesc","inputProps","min","step","caution_at","alert_at","period","dictToArrayKV","interval","startdate","replace","substring","component","graphic_detail","border","borderRadius","calcKPIManager","refresh","last_update","i18nKey","current","last_reading","variance","arcsLength","colors","animate","percent","formatTextValue","createdBy","creationDate","change_by","change_date","ButtonsElement","flexWrap","open","setOpen","range","onSelect","getDateCleaned","getCollectionAux","selKPIManagerHistory","kpiid","enddate","search","columns","download","filterrange","pageSizeDefault","IconOptions","onDelete","onDuplicate","onCalc","anchorEl","setAnchorEl","size","e","stopPropagation","currentTarget","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","Boolean","onClose","fill","delete","duplicate","calculate","KPIManager","mainResult","executeResult","viewSelected","rowSelected","setRowSelected","waitDuplicate","setWaitDuplicate","dataGrid","setDataGrid","mainData","isComponent","minWidth","Cell","props","cell","original","handleDelete","handleDuplicate","handleCalc","current_value","toLowerCase","toUpperCase","getMultiCollection","getValuesFromDomain","resetAllMain","successful_delete","confirmation_delete","successful_duplicate","onClickRow","titlemodule","count","handleRegister"],"mappings":"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","file":"static/js/66.33e0f83c.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z\"\n}), 'Update');\n\nexports.default = _default;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { FC, useEffect, useState } from 'react'; // we need this to make JSX compile\r\nimport { useSelector } from 'hooks';\r\nimport { useDispatch } from 'react-redux';\r\nimport Button from '@material-ui/core/Button';\r\nimport { TemplateBreadcrumbs, TitleDetail, FieldView, FieldEdit, FieldSelect, AntTab, FieldEditMulti } from 'components';\r\nimport { calcKPIManager, convertLocalDate, dictToArrayKV, getDateCleaned, getDateToday, getFirstDayMonth, getLastDayMonth, getValuesFromDomain, insKPIManager, selKPIManager, selKPIManagerHistory } from 'common/helpers';\r\nimport { Dictionary } from \"@types\";\r\nimport TableZyx from '../components/fields/table-simple';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport { Trans, useTranslation } from 'react-i18next';\r\nimport { langKeys } from 'lang/keys';\r\nimport { useForm } from 'react-hook-form';\r\nimport { getCollection, getMultiCollection, execute, resetAllMain, getCollectionAux, getCollectionAux2, resetMainAux, resetMainAux2 } from 'store/main/actions';\r\nimport { showSnackbar, showBackdrop, manageConfirmation } from 'store/popus/actions';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { Box, IconButton, ListItemIcon, Menu, MenuItem, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Tabs, Typography } from '@material-ui/core';\r\nimport { Range } from 'react-date-range';\r\nimport { DateRangePicker } from 'components';\r\nimport { CalendarIcon, DuplicateIcon } from 'icons';\r\nimport GaugeChart from 'react-gauge-chart'\r\nimport {Search as SearchIcon }  from '@material-ui/icons';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport UpdateIcon from '@material-ui/icons/Update';\r\n\r\ninterface RowSelected {\r\n    row: Dictionary | null,\r\n    edit: boolean\r\n}\r\ninterface MultiData {\r\n    data: Dictionary[];\r\n    success: boolean;\r\n}\r\ninterface DetailKPIManagerProps {\r\n    data: RowSelected;\r\n    setViewSelected: (view: string) => void;\r\n    multiData: MultiData[];\r\n    fetchData: (id?: number) => void;\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    containerDetail: {\r\n        marginTop: theme.spacing(2),\r\n        padding: theme.spacing(2),\r\n        background: '#fff',\r\n    },\r\n    button: {\r\n        padding: 12,\r\n        fontWeight: 500,\r\n        fontSize: '14px',\r\n        textTransform: 'initial'\r\n    },\r\n    mb2: {\r\n        marginBottom: theme.spacing(4),\r\n    },\r\n}));\r\n\r\nconst dataPeriod: Dictionary = {\r\n    MINUTE: 'minute',\r\n    HOUR: 'hour',\r\n    DAY: 'day',\r\n    MONTH: 'month'\r\n};\r\n\r\nconst DetailKPIManager: React.FC<DetailKPIManagerProps> = ({ data: { row, edit }, setViewSelected, multiData, fetchData }) => {\r\n    const user = useSelector(state => state.login.validateToken.user);\r\n    const classes = useStyles();\r\n    const [waitSave, setWaitSave] = useState(false);\r\n    const executeRes = useSelector(state => state.main.execute);\r\n    const mainAuxRes = useSelector(state => state.main.mainAux);\r\n    const mainAux2Res = useSelector(state => state.main.mainAux2);\r\n    const dispatch = useDispatch();\r\n    const { t } = useTranslation();\r\n    const [pageSelected, setPageSelected] = useState(0);\r\n\r\n    const dataStatus = multiData[0] && multiData[0].success ? multiData[0].data : [];\r\n\r\n    const { register, reset, handleSubmit, setValue, getValues, formState: { errors } } = useForm({\r\n        defaultValues: {\r\n            id: row?.id || 0,\r\n            kpiname: row?.kpiname || '',\r\n            description: row?.description || '',\r\n            status: row?.status || 'ACTIVO',\r\n            type: row?.type || '',\r\n            sqlselect: row?.sqlselect || '',\r\n            sqlwhere: row?.sqlwhere || '',\r\n            target: row?.target || 0,\r\n            cautionat: row?.cautionat || 0,\r\n            alertat: row?.alertat || 0,\r\n\r\n            taskperiod: row?.taskperiod || 'DAY',\r\n            taskinterval: row?.taskinterval || 1,\r\n            taskstartdate: row ? new Date(new Date(row?.taskstartdate).getTime() - new Date().getTimezoneOffset() * 60000).toISOString() : new Date().toISOString(),\r\n\r\n            previousvalue: row?.previousvalue,\r\n            currentvalue: row?.currentvalue,\r\n            updatedate: row?.updatedate,\r\n\r\n            createdate: row?.createdate,\r\n            createby: row?.createby,\r\n            changedate: row?.changedate,\r\n            changeby: row?.changeby,\r\n\r\n            operation: row && row.id ? \"EDIT\" : \"INSERT\",\r\n        }\r\n    });\r\n\r\n    const [detaildata, setDetaildata] = useState<any>({\r\n        previousvalue: row?.previousvalue,\r\n        currentvalue: row?.currentvalue,\r\n        updatedate: row?.updatedate,\r\n        target: row?.target,\r\n        cautionat: row?.cautionat,\r\n        alertat: row?.alertat\r\n    })\r\n\r\n    const [gaugeArcs, setGaugeArcs] = useState([0,0,0]);\r\n\r\n    useEffect(() => {\r\n        if (detaildata) {\r\n            if (detaildata.target <= detaildata.alertat) {\r\n                setGaugeArcs(\r\n                    [\r\n                        detaildata.cautionat / (Math.max(detaildata?.currentvalue, Math.ceil(detaildata.alertat * 1.2 / 10) * 10)),\r\n                        (detaildata.alertat - detaildata.cautionat) / (Math.max(detaildata?.currentvalue, Math.ceil(detaildata.alertat * 1.2 / 10) * 10)),\r\n                        ((Math.max(detaildata?.currentvalue, Math.ceil(detaildata.alertat * 1.2 / 10) * 10)) - detaildata.alertat) / (Math.max(detaildata?.currentvalue, Math.ceil(detaildata.alertat * 1.2 / 10) * 10)) \r\n                    ]\r\n                )\r\n            }\r\n            else {\r\n                setGaugeArcs(\r\n                    [\r\n                        detaildata.alertat / (Math.max(detaildata?.currentvalue, Math.ceil(detaildata.target * 1.2 / 10) * 10)),\r\n                        (detaildata.cautionat - detaildata.alertat) / (Math.max(detaildata?.currentvalue, Math.ceil(detaildata.target * 1.2 / 10) * 10)),\r\n                        ((Math.max(detaildata?.currentvalue, Math.ceil(detaildata.target * 1.2 / 10) * 10)) - detaildata.cautionat) / (Math.max(detaildata?.currentvalue, Math.ceil(detaildata.target * 1.2 / 10) * 10))\r\n                    ]\r\n                )\r\n            }\r\n        }\r\n    }, [detaildata])\r\n    \r\n    React.useEffect(() => {\r\n        register('kpiname', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('description', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('status', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('sqlselect', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('sqlwhere', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('taskperiod', { validate: (value) => (value && value.length) || t(langKeys.field_required) });\r\n        register('taskinterval', { validate: (value) => (value && value > 0) || t(langKeys.field_required) });\r\n        register('taskstartdate', { validate: (value: any) => (value && value.length) || t(langKeys.field_required) });\r\n    }, [edit, register]);\r\n\r\n    useEffect(() => {\r\n        if (row?.id) {\r\n            dispatch(showBackdrop(true));\r\n            dispatch(getCollectionAux2(selKPIManager(row.id)))\r\n        }\r\n        return () => {\r\n            dispatch(resetMainAux());\r\n            dispatch(resetMainAux2());\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!mainAux2Res.loading && !mainAux2Res.error && mainAux2Res.data?.length > 0) {\r\n            reset({\r\n                id: mainAux2Res.data[0]?.id || 0,\r\n                kpiname: mainAux2Res.data[0]?.kpiname || '',\r\n                description: mainAux2Res.data[0]?.description || '',\r\n                status: mainAux2Res.data[0]?.status || 'ACTIVO',\r\n                type: mainAux2Res.data[0]?.type || '',\r\n                sqlselect: mainAux2Res.data[0]?.sqlselect || '',\r\n                sqlwhere: mainAux2Res.data[0]?.sqlwhere || '',\r\n                target: mainAux2Res.data[0]?.target || 0,\r\n                cautionat: mainAux2Res.data[0]?.cautionat || 0,\r\n                alertat: mainAux2Res.data[0]?.alertat || 0,\r\n\r\n                taskperiod: mainAux2Res.data[0]?.taskperiod || 'DAY',\r\n                taskinterval: mainAux2Res.data[0]?.taskinterval || 1,\r\n                taskstartdate: mainAux2Res.data[0]?.taskstartdate ? new Date(new Date(mainAux2Res.data[0]?.taskstartdate).getTime() - new Date().getTimezoneOffset() * 60000).toISOString() : new Date().toISOString(),\r\n\r\n                previousvalue: mainAux2Res.data[0]?.previousvalue,\r\n                currentvalue: mainAux2Res.data[0]?.currentvalue,\r\n                updatedate: mainAux2Res.data[0]?.updatedate,\r\n\r\n                createdate: mainAux2Res.data[0]?.createdate,\r\n                createby: mainAux2Res.data[0]?.createby,\r\n                changedate: mainAux2Res.data[0]?.changedate,\r\n                changeby: mainAux2Res.data[0]?.changeby,\r\n\r\n                operation: mainAux2Res.data[0]?.id ? \"EDIT\" : \"INSERT\",\r\n            });\r\n            setDetaildata({\r\n                previousvalue: mainAux2Res.data[0]?.previousvalue,\r\n                currentvalue: mainAux2Res.data[0]?.currentvalue,\r\n                updatedate: convertLocalDate(mainAux2Res.data[0]?.updatedate).toLocaleString(undefined, {\r\n                    year: \"numeric\",\r\n                    month: \"2-digit\",\r\n                    day: \"2-digit\",\r\n                    hour: \"numeric\",\r\n                    minute: \"numeric\",\r\n                    second: \"numeric\"\r\n                }),\r\n                target: mainAux2Res.data[0]?.target || 0,\r\n                cautionat: mainAux2Res.data[0]?.cautionat || 0,\r\n                alertat: mainAux2Res.data[0]?.alertat || 0,\r\n            })\r\n            dispatch(showBackdrop(false));\r\n        }\r\n        else if (executeRes.error) {\r\n            dispatch(showBackdrop(false));\r\n        }\r\n    }, [mainAux2Res])\r\n\r\n    useEffect(() => {\r\n        if (waitSave) {\r\n            if (!executeRes.loading && !executeRes.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(row ? langKeys.successful_edit : langKeys.successful_register) }))\r\n                fetchData && fetchData();\r\n                dispatch(showBackdrop(false));\r\n                setViewSelected(\"view-1\")\r\n            } else if (executeRes.error) {\r\n                const errormessage = t(executeRes.code || \"error_unexpected_error\", { module: t(langKeys.kpimanager_plural).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                setWaitSave(false);\r\n                dispatch(showBackdrop(false));\r\n            }\r\n        }\r\n    }, [executeRes, waitSave])\r\n\r\n    const onSubmit = handleSubmit((data) => {\r\n        const callback = () => {\r\n            dispatch(execute(insKPIManager(data)));\r\n            dispatch(showBackdrop(true));\r\n            setWaitSave(true)\r\n        }\r\n\r\n        dispatch(manageConfirmation({\r\n            visible: true,\r\n            question: t(langKeys.confirmation_save),\r\n            callback\r\n        }))\r\n    });\r\n\r\n    const columnsHistory = React.useMemo(\r\n        () => [\r\n            {\r\n                Header: t(langKeys.value),\r\n                accessor: 'currentvalue',\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                Header: t(langKeys.date),\r\n                accessor: 'createdate',\r\n                NoFilter: true,\r\n            },\r\n        ],\r\n        []\r\n    );\r\n\r\n    const [openDateRangeModal, setOpenDateRangeModal] = useState(false);\r\n    const [filterRangeDate, ] = useState(\"month\");\r\n    const [dateRange, setdateRange] = useState<Range>({\r\n        startDate: filterRangeDate === \"month\" ? getFirstDayMonth() : getDateToday(),\r\n        endDate: filterRangeDate === \"month\" ? getLastDayMonth() : getDateToday(),\r\n        key: 'selection'\r\n    });\r\n\r\n    const [kpiHistoryData, setKpiHistoryData] = useState<any[]>([]);\r\n\r\n    const fetchDataHistory = () => {\r\n        dispatch(getCollectionAux(selKPIManagerHistory({\r\n            kpiid: row?.id,\r\n            startdate: dateRange.startDate!,\r\n            enddate: dateRange.endDate!,\r\n        })))\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!mainAuxRes.loading && mainAuxRes.data) {\r\n            setKpiHistoryData(mainAuxRes.data.map((d: any) => ({\r\n                ...d,\r\n                createdate: convertLocalDate(d?.createdate).toLocaleString(undefined, {year: \"numeric\", month: \"2-digit\", day: \"2-digit\", hour: \"numeric\", minute: \"numeric\", second: \"numeric\"}),\r\n                changedate: convertLocalDate(d?.createdate).toLocaleString(undefined, {year: \"numeric\", month: \"2-digit\", day: \"2-digit\", hour: \"numeric\", minute: \"numeric\", second: \"numeric\"}),\r\n            })));\r\n        }\r\n    }, [mainAuxRes]);\r\n\r\n    const [waitCalc, setWaitCalc] = useState(false);\r\n    const calcKPI = () => {\r\n        setWaitCalc(true);\r\n        dispatch(showBackdrop(true));\r\n        dispatch(execute(calcKPIManager(row?.id)));\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (waitCalc) {\r\n            if (!executeRes.loading && !executeRes.error && executeRes.data) {\r\n                if (executeRes.data[0].p_success) {\r\n                    setDetaildata((prev: any) => ({\r\n                        ...prev,\r\n                        previousvalue: executeRes.data[0].p_previousvalue,\r\n                        currentvalue: executeRes.data[0].p_currentvalue,\r\n                        updatedate: convertLocalDate(executeRes.data[0].p_updatedate).toLocaleString(undefined, {\r\n                            year: \"numeric\",\r\n                            month: \"2-digit\",\r\n                            day: \"2-digit\",\r\n                            hour: \"numeric\",\r\n                            minute: \"numeric\",\r\n                            second: \"numeric\"\r\n                        })\r\n                    }))\r\n                    fetchData && fetchData();\r\n                }\r\n                else {\r\n                    const errormessage = t(langKeys.error_kpi_sql, { error: executeRes.data[0].p_error })\r\n                    dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                }\r\n                setWaitCalc(false);\r\n                dispatch(showBackdrop(false));\r\n            } else if (executeRes.error) {\r\n                const errormessage = t(executeRes.code || \"error_unexpected_error\", { module: t(langKeys.kpimanager_plural).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                setWaitCalc(false);\r\n                dispatch(showBackdrop(false));\r\n            }\r\n        }\r\n    }, [executeRes, waitCalc])\r\n\r\n    const arrayBread = [\r\n        { id: \"view-1\", name: t(langKeys.kpimanager)},\r\n        { id: \"view-2\", name: t(langKeys.kpimanager_detail) }\r\n    ];\r\n    return (\r\n        <div style={{ width: '100%' }}>\r\n            <form onSubmit={onSubmit}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                    <div>\r\n                        <TemplateBreadcrumbs\r\n                            breadcrumbs={arrayBread}\r\n                            handleClick={(view) => {\r\n                                dispatch(getCollection(selKPIManager(0)));\r\n                                setViewSelected(view);\r\n                            }}\r\n                        />\r\n                        <TitleDetail\r\n                            title={row?.id ? `${row.kpiname}` : t(langKeys.newkpi)}\r\n                        />\r\n                    </div>\r\n                    <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            type=\"button\"\r\n                            color=\"primary\"\r\n                            startIcon={<ClearIcon color=\"secondary\" />}\r\n                            style={{ backgroundColor: \"#FB5F5F\" }}\r\n                            onClick={() => {\r\n                                dispatch(getCollection(selKPIManager(0)));\r\n                                setViewSelected(\"view-1\")\r\n                            }}\r\n                        >{t(langKeys.back)}</Button>\r\n                        {edit &&\r\n                            <Button\r\n                                className={classes.button}\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                type=\"button\"\r\n                                startIcon={<SaveIcon color=\"secondary\" />}\r\n                                style={{ backgroundColor: \"#55BD84\" }}\r\n                                onClick={onSubmit}\r\n                            >{t(langKeys.save)}\r\n                            </Button>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <Tabs\r\n                    value={pageSelected}\r\n                    indicatorColor=\"primary\"\r\n                    variant=\"fullWidth\"\r\n                    style={{ borderBottom: '1px solid #EBEAED', backgroundColor: '#FFF', marginTop: 8 }}\r\n                    textColor=\"primary\"\r\n                    onChange={(_, value) => setPageSelected(value)}\r\n                >\r\n                    <AntTab label={t(langKeys.detail)} />\r\n                    <AntTab label={t(langKeys.audit)} />\r\n                    <AntTab label={t(langKeys.history)} />\r\n                </Tabs>\r\n                {pageSelected === 0 && <div className={classes.containerDetail}>\r\n                    <div className=\"row-zyx\">\r\n                        {edit ?\r\n                            <FieldEdit\r\n                                label={t(langKeys.kpi_name)}\r\n                                className=\"col-4\"\r\n                                onChange={(value) => setValue('kpiname', value)}\r\n                                valueDefault={getValues(\"kpiname\")}\r\n                                error={errors?.kpiname?.message}\r\n                            />\r\n                            :\r\n                            <FieldView\r\n                                label={t(langKeys.kpiname)}\r\n                                value={row ? (row.kpiname || \"\") : \"\"}\r\n                                className=\"col-4\"\r\n                            />\r\n                        }\r\n                        {edit ?\r\n                            <FieldEdit\r\n                                label={t(langKeys.description)}\r\n                                className=\"col-4\"\r\n                                onChange={(value) => setValue('description', value)}\r\n                                valueDefault={getValues(\"description\")}\r\n                                error={errors?.description?.message}\r\n                            />\r\n                            :\r\n                            <FieldView\r\n                                label={t(langKeys.description)}\r\n                                value={row ? (row.description || \"\") : \"\"}\r\n                                className=\"col-4\"\r\n                            />\r\n                        }\r\n                        {edit ?\r\n                            <FieldSelect\r\n                                label={t(langKeys.status)}\r\n                                className=\"col-4\"\r\n                                valueDefault={getValues('status')}\r\n                                onChange={(value) => setValue('status', value ? value.domainvalue : '')}\r\n                                error={errors?.status?.message}\r\n                                data={dataStatus}\r\n                                uset={true}\r\n                                prefixTranslation=\"status_\"\r\n                                optionDesc=\"domaindesc\"\r\n                                optionValue=\"domainvalue\"\r\n                            />\r\n                            : <FieldView\r\n                                label={t(langKeys.status)}\r\n                                value={row ? (row.status || \"\") : \"\"}\r\n                                className=\"col-4\"\r\n                            />\r\n                        }\r\n                    </div>\r\n                    {['SUPERADMIN'].includes(user?.roledesc || \"\") &&\r\n                    <div className=\"row-zyx\">\r\n                        {edit ?\r\n                            (\r\n                                ['SUPERADMIN'].includes(user?.roledesc || \"\") ?\r\n                                <FieldEditMulti\r\n                                    label=\"Select\"\r\n                                    className=\"col-6\"\r\n                                    valueDefault={getValues('sqlselect')}\r\n                                    onChange={(value) => setValue('sqlselect', value)}\r\n                                    error={errors?.sqlselect?.message}\r\n                                    disabled={!['SUPERADMIN'].includes(user?.roledesc || \"\")}\r\n                                />\r\n                                :\r\n                                <FieldEditMulti\r\n                                label=\"Select\"\r\n                                    className=\"col-6\"\r\n                                    valueDefault={row ? (row.sqlselect || \"\") : user?.corpdesc}\r\n                                    disabled={true}\r\n                                />\r\n                            )\r\n                            :\r\n                            <FieldView\r\n                            label=\"Select\"\r\n                            value={row ? (row.sqlselect || \"\") : \"\"}\r\n                                className=\"col-6\"\r\n                            />\r\n                        }\r\n                        {edit ?\r\n                            (\r\n                                ['SUPERADMIN'].includes(user?.roledesc || \"\") ?\r\n                                <FieldEditMulti\r\n                                    label=\"Where\"\r\n                                    className=\"col-6\"\r\n                                    valueDefault={getValues('sqlwhere')}\r\n                                    onChange={(value) => setValue('sqlwhere', value)}\r\n                                    error={errors?.sqlwhere?.message}\r\n                                    disabled={!['SUPERADMIN'].includes(user?.roledesc || \"\")}\r\n                                />\r\n                                :\r\n                                <FieldEditMulti\r\n                                label=\"Where\"\r\n                                    className=\"col-6\"\r\n                                    valueDefault={row ? (row.sqlwhere || \"\") : user?.corpdesc}\r\n                                    disabled={true}\r\n                                />\r\n                            )\r\n                            :\r\n                            <FieldView\r\n                            label=\"Where\"\r\n                            value={row ? (row.sqlwhere || \"\") : \"\"}\r\n                                className=\"col-6\"\r\n                            />\r\n                        }\r\n                    </div>}\r\n                    <div className=\"row-zyx\">\r\n                        {edit ?\r\n                            <FieldEdit\r\n                                label={t(langKeys.target)}\r\n                                className=\"col-4\"\r\n                                valueDefault={getValues('target')}\r\n                                onChange={(value) => setValue('target', value)}\r\n                                error={errors?.target?.message}\r\n                                type=\"number\"\r\n                                inputProps={{ min: 0, step: 1 }}\r\n                            />\r\n                            :\r\n                            <FieldView\r\n                                label={t(langKeys.target)}\r\n                                value={row ? (row.target || \"\") : \"\"}\r\n                                className=\"col-4\"\r\n                            />\r\n                        }\r\n                        {edit ?\r\n                            <FieldEdit\r\n                                label={t(langKeys.caution_at)}\r\n                                className=\"col-4\"\r\n                                valueDefault={getValues('cautionat')}\r\n                                onChange={(value) => setValue('cautionat', value)}\r\n                                error={errors?.cautionat?.message}\r\n                                type=\"number\"\r\n                                inputProps={{ min: 0, step: 1 }}\r\n                            />\r\n                            :\r\n                            <FieldView\r\n                                label={t(langKeys.caution_at)}\r\n                                value={row ? (row.cautionat || \"\") : \"\"}\r\n                                className=\"col-4\"\r\n                            />\r\n                        }\r\n                        {edit ?\r\n                            <FieldEdit\r\n                                label={t(langKeys.alert_at)}\r\n                                className=\"col-4\"\r\n                                valueDefault={getValues('alertat')}\r\n                                onChange={(value) => setValue('alertat', value)}\r\n                                error={errors?.alertat?.message}\r\n                                type=\"number\"\r\n                                inputProps={{ min: 0, step: 1 }}\r\n                            />\r\n                            :\r\n                            <FieldView\r\n                                label={t(langKeys.alert_at)}\r\n                                value={row ? (row.alertat || \"\") : \"\"}\r\n                                className=\"col-4\"\r\n                            />\r\n                        }\r\n                    </div>\r\n                    <div className=\"row-zyx\">\r\n                        {edit ?\r\n                            <FieldSelect\r\n                                uset={true}\r\n                                label={t(langKeys.period)}\r\n                                className=\"col-4\"\r\n                                valueDefault={getValues('taskperiod')}\r\n                                onChange={(data) => setValue('taskperiod', data?.key || '')}\r\n                                error={errors?.taskperiod?.message}\r\n                                data={dictToArrayKV(dataPeriod)}\r\n                                optionDesc=\"value\"\r\n                                optionValue=\"key\"\r\n                            />\r\n                            :\r\n                            <FieldView\r\n                                label={t(langKeys.period)}\r\n                                value={t(dataPeriod[row?.period]) || \"\"}\r\n                                className=\"col-12\"\r\n                            />\r\n                        }\r\n                        {edit ?\r\n                            <FieldEdit\r\n                                label={t(langKeys.interval)}\r\n                                className=\"col-4\"\r\n                                type=\"number\"\r\n                                valueDefault={getValues('taskinterval')}\r\n                                onChange={(value) => setValue('taskinterval', value)}\r\n                                error={errors?.taskinterval?.message}\r\n                                inputProps={{ min: 0, step: 1 }}\r\n                            />\r\n                            :\r\n                            <FieldView\r\n                                label={t(langKeys.interval)}\r\n                                value={row ? (row.taskinterval || 1) : 1}\r\n                                className=\"col-4\"\r\n                            />\r\n                        }\r\n                        {edit ?\r\n                            <FieldEdit\r\n                                label={t(langKeys.startdate)}\r\n                                className=\"col-4\"\r\n                                type=\"datetime-local\"\r\n                                valueDefault={(getValues('taskstartdate') as string)?.replace(' ', 'T')?.substring(0, 16)}\r\n                                onChange={(value) => setValue('taskstartdate', value)}\r\n                                error={errors?.taskstartdate?.message}\r\n                            />\r\n                            :\r\n                            <FieldView\r\n                                label={t(langKeys.startdate)}\r\n                                value={row ? (row.taskstartdate || \"\") : \"\"}\r\n                                className=\"col-4\"\r\n                            />\r\n                        }\r\n                    </div>\r\n                    {(row && row.id) && <div className=\"row-zyx\">\r\n                        <Box style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                            <Typography variant=\"h6\" component=\"h6\">\r\n                                {t(langKeys.graphic_detail)}\r\n                            </Typography>\r\n                            <Button\r\n                                style={{ border: '1px solid #bfbfc0', borderRadius: 4, color: 'rgb(143, 146, 161)' }}\r\n                                onClick={() => calcKPI()}\r\n                            >\r\n                                {t(langKeys.refresh)}\r\n                            </Button>\r\n                        </Box>\r\n                        <Box>\r\n                            {t(langKeys.last_update)}: {detaildata?.updatedate}\r\n                        </Box>\r\n                        <TableContainer>\r\n                            <Table aria-label=\"simple table\">\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        <TableCell><Trans i18nKey={langKeys.status} /></TableCell>\r\n                                        <TableCell><Trans i18nKey={langKeys.current} /></TableCell>\r\n                                        <TableCell><Trans i18nKey={langKeys.last_reading} /></TableCell>\r\n                                        <TableCell><Trans i18nKey={langKeys.target} /></TableCell>\r\n                                        <TableCell><Trans i18nKey={langKeys.variance} /></TableCell>\r\n                                        <TableCell></TableCell>\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    <TableRow>\r\n                                        <TableCell>{row?.status}</TableCell>\r\n                                        <TableCell>{detaildata?.currentvalue}</TableCell>\r\n                                        <TableCell>{detaildata?.previousvalue}</TableCell>\r\n                                        <TableCell>{detaildata?.target}</TableCell>\r\n                                        <TableCell>{detaildata?.currentvalue - row?.target}</TableCell>\r\n                                        <TableCell>\r\n                                            <GaugeChart\r\n                                                style={{width: '150px'}}\r\n                                                id=\"gauge-chart\"\r\n                                                arcsLength={gaugeArcs}\r\n                                                colors={\r\n                                                    detaildata.target < detaildata.alertat\r\n                                                    ? ['#5BE12C', '#F5CD19', '#EA4228']\r\n                                                    : ['#EA4228', '#F5CD19', '#5BE12C']\r\n                                                }\r\n                                                textColor=\"#000000\"\r\n                                                animate={false}\r\n                                                percent={\r\n                                                    detaildata.target < detaildata.alertat\r\n                                                    ? detaildata?.currentvalue / (Math.max(detaildata?.currentvalue, Math.ceil(detaildata.alertat * 1.2 / 10) * 10))\r\n                                                    : detaildata?.currentvalue / (Math.max(detaildata?.currentvalue, Math.ceil(detaildata.target * 1.2 / 10) * 10))\r\n                                                }\r\n                                                formatTextValue={() => ``}\r\n                                            /></TableCell>\r\n                                    </TableRow>\r\n                                </TableBody>\r\n                            </Table>\r\n                        </TableContainer>\r\n                    </div>\r\n                    }\r\n                </div>\r\n                }\r\n                {pageSelected === 1 &&\r\n                    <div className={classes.containerDetail}>\r\n                        <div className=\"row-zyx\">\r\n                            <FieldView\r\n                                label={t(langKeys.createdBy)}\r\n                                value={getValues('createby')}\r\n                                className=\"col-6\"\r\n                            />\r\n                             <FieldView\r\n                                label={t(langKeys.creationDate)}\r\n                                value={row?.createdate && convertLocalDate(getValues('createdate')).toLocaleString(undefined, {\r\n                                    year: \"numeric\",\r\n                                    month: \"2-digit\",\r\n                                    day: \"2-digit\",\r\n                                    hour: \"numeric\",\r\n                                    minute: \"numeric\",\r\n                                    second: \"numeric\"\r\n                                })}\r\n                                className=\"col-6\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"row-zyx\">\r\n                        <FieldView\r\n                                label={t(langKeys.change_by)}\r\n                                value={getValues('changeby')}\r\n                                className=\"col-6\"\r\n                            />\r\n                             <FieldView\r\n                                label={t(langKeys.change_date)}\r\n                                value={row?.changedate && convertLocalDate(getValues('changedate')).toLocaleString(undefined, {\r\n                                    year: \"numeric\",\r\n                                    month: \"2-digit\",\r\n                                    day: \"2-digit\",\r\n                                    hour: \"numeric\",\r\n                                    minute: \"numeric\",\r\n                                    second: \"numeric\"\r\n                                })}\r\n                                className=\"col-6\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                }\r\n                {pageSelected === 2 &&\r\n                    <div className={classes.containerDetail}>\r\n                        <TableZyx\r\n                            ButtonsElement={() => (\r\n                                <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>\r\n                                    <DateRangePicker\r\n                                        open={openDateRangeModal}\r\n                                        setOpen={setOpenDateRangeModal}\r\n                                        range={dateRange}\r\n                                        onSelect={setdateRange}\r\n                                    >\r\n                                        <Button\r\n                                            disabled={mainAuxRes.loading}\r\n                                            style={{ border: '1px solid #bfbfc0', borderRadius: 4, color: 'rgb(143, 146, 161)' }}\r\n                                            startIcon={<CalendarIcon />}\r\n                                            onClick={() => setOpenDateRangeModal(!openDateRangeModal)}\r\n                                        >\r\n                                            {getDateCleaned(dateRange.startDate!) + \" - \" + getDateCleaned(dateRange.endDate!)}\r\n                                        </Button>\r\n                                    </DateRangePicker>\r\n                                    <Button\r\n                                        disabled={mainAuxRes.loading}\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        startIcon={<SearchIcon style={{ color: 'white' }} />}\r\n                                        style={{ backgroundColor: '#55BD84', width: 120 }}\r\n                                        onClick={() => fetchDataHistory()}\r\n                                    >\r\n                                        <Trans i18nKey={langKeys.search} />\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                            columns={columnsHistory}\r\n                            data={kpiHistoryData}\r\n                            download={true}\r\n                            filterrange={true}\r\n                            pageSizeDefault={50}\r\n                        />\r\n                    </div>\r\n                }\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst IconOptions: React.FC<{\r\n    onDelete?: (e?: any) => void;\r\n    onDuplicate?: (e?: any) => void;\r\n    onCalc?: (e?: any) => void;\r\n}> = ({ onDelete, onDuplicate, onCalc }) => {\r\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n    const { t } = useTranslation();\r\n\r\n    const handleClose = () => setAnchorEl(null);\r\n    return (\r\n        <>\r\n            <IconButton\r\n                aria-label=\"more\"\r\n                aria-controls=\"long-menu\"\r\n                aria-haspopup=\"true\"\r\n                size=\"small\"\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setAnchorEl(e.currentTarget);\r\n                }}\r\n            >\r\n                <MoreVertIcon />\r\n            </IconButton>\r\n            <Menu\r\n                id=\"menu-appbar\"\r\n                anchorEl={anchorEl}\r\n                getContentAnchorEl={null}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                open={Boolean(anchorEl)}\r\n                onClick={(e) => e.stopPropagation()}\r\n                onClose={handleClose}\r\n            >\r\n                {onDelete &&\r\n                    <MenuItem onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setAnchorEl(null);\r\n                        onDelete();\r\n                    }}>\r\n                        <ListItemIcon color=\"inherit\">\r\n                            <DeleteIcon width={18} style={{ fill: '#7721AD' }} />\r\n                        </ListItemIcon>\r\n                        {t(langKeys.delete)}\r\n                    </MenuItem>\r\n                }\r\n                {onDuplicate &&\r\n                    <MenuItem onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setAnchorEl(null);\r\n                        onDuplicate();\r\n                    }}>\r\n                        <ListItemIcon>\r\n                            <DuplicateIcon width={18} style={{ fill: '#7721AD' }} />\r\n                        </ListItemIcon>\r\n                        {t(langKeys.duplicate)}\r\n                    </MenuItem>\r\n                }\r\n                {onCalc &&\r\n                    <MenuItem onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setAnchorEl(null);\r\n                        onCalc();\r\n                    }}>\r\n                        <ListItemIcon>\r\n                            <UpdateIcon width={18} style={{ fill: '#7721AD' }} />\r\n                        </ListItemIcon>\r\n                        {t(langKeys.calculate)}\r\n                    </MenuItem>\r\n                }\r\n            </Menu>\r\n        </>\r\n    )\r\n}\r\n\r\nconst KPIManager: FC = () => {\r\n    const dispatch = useDispatch();\r\n    const { t } = useTranslation();\r\n    const mainResult = useSelector(state => state.main);\r\n    const executeResult = useSelector(state => state.main.execute);\r\n\r\n    const [viewSelected, setViewSelected] = useState(\"view-1\");\r\n    const [rowSelected, setRowSelected] = useState<RowSelected>({ row: null, edit: false });\r\n    const [waitSave, setWaitSave] = useState(false);\r\n    const [waitDuplicate, setWaitDuplicate] = useState(false);\r\n    const [waitCalc, setWaitCalc] = useState(false);\r\n    const [dataGrid, setDataGrid] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        setDataGrid(mainResult.mainData.data.map(d => (\r\n            {\r\n                ...d,\r\n                updatedate: convertLocalDate(d.updatedate).toLocaleString(undefined, {\r\n                    year: \"numeric\",\r\n                    month: \"2-digit\",\r\n                    day: \"2-digit\",\r\n                    hour: \"numeric\",\r\n                    minute: \"numeric\",\r\n                    second: \"numeric\"\r\n                })\r\n        })))\r\n    }, [mainResult.mainData.data])\r\n\r\n    const columns = React.useMemo(\r\n        () => [\r\n            {\r\n                accessor: 'id',\r\n                NoFilter: true,\r\n                isComponent: true,\r\n                minWidth: 60,\r\n                width: '1%',\r\n                Cell: (props: any) => {\r\n                    const row = props.cell.row.original;\r\n                    return (\r\n                        <IconOptions\r\n                            onDelete={() => {\r\n                                handleDelete(row);\r\n                            }}\r\n                            onDuplicate={() => {\r\n                                handleDuplicate(row);\r\n                            }}\r\n                            onCalc={() => {\r\n                                handleCalc(row)\r\n                            }}\r\n                        />\r\n                    )\r\n                }\r\n            },\r\n            {\r\n                Header: t(langKeys.kpiname),\r\n                accessor: 'kpiname',\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                Header: t(langKeys.description),\r\n                accessor: 'description',\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                Header: t(langKeys.current_value),\r\n                accessor: 'currentvalue',\r\n                type: 'number',\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                Header: t(langKeys.target),\r\n                accessor: 'target',\r\n                type: 'number',\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                Header: t(langKeys.last_update),\r\n                accessor: 'updatedate',\r\n                NoFilter: true,\r\n            },\r\n            {\r\n                Header: t(langKeys.status),\r\n                accessor: 'status',\r\n                NoFilter: true,\r\n                prefixTranslation: 'status_',\r\n                Cell: (props: any) => {\r\n                    const { status } = props.cell.row.original;\r\n                    return (t(`status_${status}`.toLowerCase()) || \"\").toUpperCase()\r\n                }\r\n            },\r\n        ],\r\n        []\r\n    );\r\n\r\n    const fetchData = () => dispatch(getCollection(selKPIManager(0)));\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        dispatch(getMultiCollection([\r\n            getValuesFromDomain(\"ESTADOGENERICO\"),\r\n        ]));\r\n        return () => {\r\n            dispatch(resetAllMain());\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (waitSave) {\r\n            if (!executeResult.loading && !executeResult.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(langKeys.successful_delete) }))\r\n                fetchData();\r\n                dispatch(showBackdrop(false));\r\n                setWaitSave(false);\r\n            } else if (executeResult.error) {\r\n                const errormessage = t(executeResult.code || \"error_unexpected_error\", { module: t(langKeys.kpimanager_plural).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitSave(false);\r\n            }\r\n        }\r\n    }, [executeResult, waitSave])\r\n\r\n    const handleRegister = () => {\r\n        setViewSelected(\"view-2\");\r\n        setRowSelected({ row: null, edit: true });\r\n    }\r\n\r\n    const handleEdit = (row: Dictionary) => {\r\n        setViewSelected(\"view-2\");\r\n        setRowSelected({ row, edit: true });\r\n    }\r\n\r\n    const handleDelete = (row: Dictionary) => {\r\n        const callback = () => {\r\n            dispatch(execute(insKPIManager({ ...row, operation: 'DELETE', status: 'ELIMINADO', id: row.id })));\r\n            dispatch(showBackdrop(true));\r\n            setWaitSave(true);\r\n        }\r\n\r\n        dispatch(manageConfirmation({\r\n            visible: true,\r\n            question: t(langKeys.confirmation_delete),\r\n            callback\r\n        }))\r\n    }\r\n\r\n    const handleDuplicate = (row: Dictionary) => {\r\n        setViewSelected(\"view-2\");\r\n        setRowSelected({ row: {\r\n            kpiname: row.kpiname,\r\n            description: row.description,\r\n            status: row.status,\r\n            type: row.type,\r\n            sqlselect: row.sqlselect,\r\n            sqlwhere: row.sqlwhere,\r\n            target: row.target,\r\n            cautionat: row.cautionat,\r\n            alertat: row.alertat,\r\n            taskperiod: row.taskperiod,\r\n            taskinterval: row.taskinterval,\r\n            taskstartdate: row.taskstartdate,\r\n        }, edit: true });\r\n    }\r\n\r\n    const handleCalc = (row: Dictionary) => {\r\n        dispatch(execute(calcKPIManager(row?.id)));\r\n        dispatch(showBackdrop(true));\r\n        setWaitCalc(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (waitDuplicate) {\r\n            if (!executeResult.loading && !executeResult.error) {\r\n                dispatch(showSnackbar({ show: true, severity: \"success\", message: t(langKeys.successful_duplicate) }))\r\n                fetchData();\r\n                dispatch(showBackdrop(false));\r\n                setWaitDuplicate(false);\r\n            } else if (executeResult.error) {\r\n                const errormessage = t(executeResult.code || \"error_unexpected_error\", { module: t(langKeys.kpimanager_plural).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitDuplicate(false);\r\n            }\r\n        }\r\n    }, [executeResult, waitDuplicate])\r\n\r\n    useEffect(() => {\r\n        if (waitCalc) {\r\n            if (!executeResult.loading && !executeResult.error && executeResult.data) {\r\n                if (executeResult.data[0].p_success) {\r\n                    fetchData && fetchData();\r\n                }\r\n                else {\r\n                    const errormessage = t(langKeys.error_kpi_sql, { error: executeResult.data[0].p_error })\r\n                    dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                }\r\n                dispatch(showBackdrop(false));\r\n                setWaitCalc(false);\r\n            } else if (executeResult.error) {\r\n                const errormessage = t(executeResult.code || \"error_unexpected_error\", { module: t(langKeys.kpimanager_plural).toLocaleLowerCase() })\r\n                dispatch(showSnackbar({ show: true, severity: \"error\", message: errormessage }))\r\n                dispatch(showBackdrop(false));\r\n                setWaitCalc(false);\r\n            }\r\n        }\r\n    }, [executeResult, waitCalc])\r\n\r\n    if (viewSelected === \"view-1\") {\r\n        return (\r\n            <TableZyx\r\n                onClickRow={handleEdit}\r\n                columns={columns}\r\n                titlemodule={t(langKeys.kpimanager_plural, { count: 2 })}\r\n                data={dataGrid}\r\n                download={true}\r\n                loading={mainResult.mainData.loading}\r\n                register={true}\r\n                handleRegister={handleRegister}\r\n            />\r\n        )\r\n    }\r\n    else if (viewSelected === \"view-2\") {\r\n        return (\r\n            <DetailKPIManager\r\n                data={rowSelected}\r\n                setViewSelected={setViewSelected}\r\n                multiData={mainResult.multiData.data}\r\n                fetchData={fetchData}\r\n            />\r\n        )\r\n    } else\r\n        return null;\r\n}\r\n\r\nexport default KPIManager;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Clear');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"\n}), 'Save');\n\nexports.default = _default;"],"sourceRoot":""}