(this["webpackJsonpclient-laraigo"]=this["webpackJsonpclient-laraigo"]||[]).push([[58],{1481:function(e,t,i){"use strict";i.r(t),i.d(t,"PaymentOrder",(function(){return v}));var n=i(20),c=i(3),r=i(171),l=i(998),s=i(209),o=i(0),a=i(8),d=i(169),u=i(40),f=i(46),p=i(25),x=i(122),j=i(83),b=i(7),m=i(44),y=i(16),O=i(2),h=Object(d.a)((function(e){var t,i;return{containerMain:{display:"flex",alignItems:"center"},back:{display:"flex",justifyContent:"center"},containerSuccess:(t={minHeight:"90vh",marginTop:20,backgroundColor:"white",display:"flex",borderRadius:8,boxShadow:"0 1px 8px 0 rgb(0 0 0 / 8%)",width:"420px",minWidth:"380px",alignItems:"center",justifyContent:"center",padding:e.spacing(3)},Object(c.a)(t,e.breakpoints.down("xs"),{width:"70vw"}),Object(c.a)(t,"flexDirection","column"),Object(c.a)(t,"flexWrap","wrap"),t),containerFinish:(i={minHeight:600,backgroundColor:"white",display:"flex",borderRadius:8,boxShadow:"0 1px 8px 0 rgb(0 0 0 / 8%)",width:"80vw",alignItems:"center",justifyContent:"center",padding:e.spacing(3)},Object(c.a)(i,e.breakpoints.down("xs"),{width:"100vw"}),Object(c.a)(i,"flexDirection","column"),i),textTitle:{border:"1px solid #7721AD",background:"#7721AD",padding:"8px",fontWeight:"bold",color:"white",overflowWrap:"break-word"},textField:{border:"1px solid #EBEAED",padding:"8px",overflowWrap:"break-word"}}})),v=function(){var e=Object(u.c)(),t=Object(x.a)().t,i=h(),c=Object(p.b)((function(e){return e.main.mainData})),d=Object(p.b)((function(e){return e.culqi.request})),v=Object(f.i)(),E=v.corpid,C=v.orgid,g=v.ordercode,w=Object(o.useState)(null),A=Object(n.a)(w,2),R=A[0],_=A[1],S=Object(o.useState)(""),D=Object(n.a)(S,2),I=D[0],N=D[1],T=Object(o.useState)(!1),B=Object(n.a)(T,2),k=B[0],q=B[1],U=Object(o.useState)(!1),F=Object(n.a)(U,2),P=F[0],L=F[1],W=(Object(o.useRef)(window.innerWidth),function(){e(Object(j.m)(Object(b.Gg)({corpid:E,orgid:C,conversationid:0,personid:0,paymentorderid:0,ordercode:g}))),q(!0)});return Object(o.useEffect)((function(){W()}),[]),Object(o.useEffect)((function(){k&&(c.loading||c.error?c.error&&(e(Object(m.e)({show:!0,severity:"error",message:t(c.code||"error_unexpected_error",{module:t(a.a.organization_plural).toLocaleLowerCase()})})),e(Object(m.d)(!1)),q(!1)):(e(Object(m.e)({show:!0,severity:"success",message:t(a.a.success)})),e(Object(m.d)(!1)),q(!1),c.data.length&&(_(c.data[0]),N(c.data[0].publickey))))}),[c,k]),Object(o.useEffect)((function(){P&&(!d.loading&&d.data?(e(Object(m.e)({show:!0,severity:"success",message:""+t(d.message||a.a.success)})),e(Object(m.d)(!1)),L(!1)):d.error&&(e(Object(m.e)({show:!0,severity:"error",message:""+t(d.message||a.a.error_cos_unexpected)})),e(Object(m.d)(!1)),L(!1)))}),[d,P]),c.loading?Object(O.jsx)("div",{className:i.back,children:Object(O.jsx)(r.a,{})}):R?"PENDING"===R.paymentstatus?Object(O.jsxs)("div",{className:i.back,children:[Object(O.jsxs)("div",{className:i.containerSuccess,children:[Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(y.vb,{style:{height:120,margin:"20px",width:"auto"}})}),Object(O.jsx)("div",{style:{fontWeight:"bold",fontSize:20,marginBottom:"20px"},children:t(a.a.paymentorder_success)}),R.ordercode&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_code)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.ordercode})})]}),R.concept&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_concept)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.concept})})]}),R.userfirstname&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_firstname)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.userfirstname})})]}),R.userlastname&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_lastname)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.userlastname})})]}),R.userphone&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_phone)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.userphone})})]}),R.usermail&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_mail)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.usermail})})]}),R.usercountry&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_country)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.usercountry})})]}),R.usercity&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_city)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.usercity})})]}),R.useraddress&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_address)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.useraddress})})]}),R.currency&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"2px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_currency)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:null===R||void 0===R?void 0:R.currency})})]}),R.totalamount&&Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",marginBottom:"20px"},children:[Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textTitle,children:t(a.a.paymentorder_totalamount)})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",flexBasis:"100%",flex:1},children:Object(O.jsx)("div",{className:i.textField,children:Object(b.jb)((null===R||void 0===R?void 0:R.totalamount)||0)})})]}),I&&R.totalamount&&Object(O.jsx)(l.a,{amount:Math.round(100*(100*R.totalamount+Number.EPSILON))/100,buttontitle:t(a.a.proceedpayment),callbackOnSuccess:W,corpid:R.corpid,currency:R.currency,description:R.concept,disabled:!1,paymentorderid:R.paymentorderid,orgid:R.orgid,publickey:I,successmessage:t(a.a.success),title:R.description,type:"PAYMENTORDER"})]}),Object(O.jsx)(s.a,{})]}):Object(O.jsx)("div",{className:i.back,children:Object(O.jsxs)("div",{className:i.containerFinish,children:[Object(O.jsx)("div",{style:{fontWeight:"bold",fontSize:20},children:t(a.a.paymentorder_paid)}),Object(O.jsx)("div",{style:{marginTop:16,textAlign:"center"},children:t(a.a.paymentorder_paid_description)})]})}):Object(O.jsx)("div",{className:i.back,children:Object(O.jsxs)("div",{className:i.containerFinish,children:[Object(O.jsx)("div",{style:{fontWeight:"bold",fontSize:20},children:t(a.a.paymentorder_notfound)}),Object(O.jsx)("div",{style:{marginTop:16,textAlign:"center"},children:t(a.a.paymentorder_notfound_description)})]})})};t.default=v},910:function(e,t,i){"use strict";i.d(t,"d",(function(){return r})),i.d(t,"m",(function(){return l})),i.d(t,"a",(function(){return s})),i.d(t,"l",(function(){return o})),i.d(t,"i",(function(){return a})),i.d(t,"n",(function(){return d})),i.d(t,"p",(function(){return u})),i.d(t,"o",(function(){return f})),i.d(t,"f",(function(){return p})),i.d(t,"e",(function(){return x})),i.d(t,"j",(function(){return j})),i.d(t,"h",(function(){return b})),i.d(t,"g",(function(){return m})),i.d(t,"b",(function(){return y})),i.d(t,"c",(function(){return O})),i.d(t,"k",(function(){return h}));var n=i(28),c=i(27),r=function(e){return{callAPI:function(){return n.f.charge(e)},types:{loading:c.a.CHARGE,success:c.a.CHARGE_SUCCESS,failure:c.a.CHARGE_FAILURE},type:null}},l=function(){return{type:c.a.CHARGE_RESET}},s=function(e){return{callAPI:function(){return n.f.balance(e)},types:{loading:c.a.BALANCE,success:c.a.BALANCE_SUCCESS,failure:c.a.BALANCE_FAILURE},type:null}},o=function(){return{type:c.a.BALANCE_RESET}},a=function(e){return{callAPI:function(){return n.f.paymentOrder(e)},types:{loading:c.a.PAYMENTORDER,success:c.a.PAYMENTORDER_SUCCESS,failure:c.a.PAYMENTORDER_FAILURE},type:null}},d=function(){return{type:c.a.PAYMENTORDER_RESET}},u=function(e){return{callAPI:function(){return n.f.subscribe(e)},types:{loading:c.a.SUBSCRIBE,success:c.a.SUBSCRIBE_SUCCESS,failure:c.a.SUBSCRIBE_FAILURE},type:null}},f=function(){return{type:c.a.SUBSCRIBE_RESET}},p=function(e){return{callAPI:function(){return n.f.createInvoice(e)},types:{loading:c.a.CREATE_INVOICE,success:c.a.CREATE_INVOICE_SUCCESS,failure:c.a.CREATE_INVOICE_FAILURE},type:null}},x=function(e){return{callAPI:function(){return n.f.createCreditNote(e)},types:{loading:c.a.CREATE_CREDITNOTE,success:c.a.CREATE_CREDITNOTE_SUCCESS,failure:c.a.CREATE_CREDITNOTE_FAILURE},type:null}},j=function(e){return{callAPI:function(){return n.f.regularizeInvoice(e)},types:{loading:c.a.REGULARIZE_INVOICE,success:c.a.REGULARIZE_INVOICE_SUCCESS,failure:c.a.REGULARIZE_INVOICE_FAILURE},type:null}},b=function(e){return{callAPI:function(){return n.f.getExchangeRate(e)},types:{loading:c.a.GET_EXCHANGERATE,success:c.a.GET_EXCHANGERATE_SUCCESS,failure:c.a.GET_EXCHANGERATE_FAILURE},type:null}},m=function(e){return{callAPI:function(){return n.f.emitInvoice(e)},types:{loading:c.a.EMIT_INVOICE,success:c.a.EMIT_INVOICE_SUCCESS,failure:c.a.EMIT_INVOICE_FAILURE},type:null}},y=function(e){return{callAPI:function(){return n.f.cardCreate(e)},types:{failure:c.a.CARD_CREATE_FAILURE,loading:c.a.CARD_CREATE,success:c.a.CARD_CREATE_SUCCESS},type:null}},O=function(e){return{callAPI:function(){return n.f.cardDelete(e)},types:{failure:c.a.CARD_DELETE_FAILURE,loading:c.a.CARD_DELETE,success:c.a.CARD_DELETE_SUCCESS},type:null}},h=function(e){return{callAPI:function(){return n.f.reportPdf(e)},types:{failure:c.a.DRAW_REPORTPDF_FAILURE,loading:c.a.DRAW_REPORTPDF,success:c.a.DRAW_REPORTPDF_SUCCESS},type:null}}},937:function(e,t,i){"use strict";var n=i(45),c=i(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(i(0)),l=(0,n(i(62)).default)(r.createElement("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"}),"AttachMoney");t.default=l},998:function(e,t,i){"use strict";var n=i(1),c=i(20),r=i(937),l=i.n(r),s=i(14),o=i(94),a=i(910),d=i(999),u=i(0),f=i(8),p=i(44),x=i(40),j=i(25),b=i(122),m=i(2),y=s.a.CULQIKEY;t.a=function(e){var t=e.amount,i=e.buttontitle,r=e.buyamount,s=e.callbackOnSuccess,O=e.comments,h=e.corpid,v=void 0===h?0:h,E=e.currency,C=void 0===E?"USD":E,g=e.description,w=e.disabled,A=void 0!==w&&w,R=e.interval,_=e.interval_count,S=e.invoiceid,D=e.paymentorderid,I=e.limit,N=e.metadata,T=e.options,B=void 0===T?{}:T,k=e.orgid,q=void 0===k?0:k,U=e.override,F=e.publickey,P=e.purchaseorder,L=e.reference,W=e.successmessage,G=e.title,M=e.totalamount,H=e.totalpay,V=e.type,Y=void 0===V?"CHARGE":V,K=Object(b.a)().t,z=Object(x.c)(),X=Object(j.b)((function(e){return e.culqi.request})),Z=Object(u.useState)(!1),J=Object(c.a)(Z,2),Q=J[0],$=J[1],ee=function(){switch(Y){case"BALANCE":z(Object(a.l)());break;case"CHARGE":z(Object(a.m)());break;case"PAYMENTORDER":z(Object(a.n)());break;case"SUBSCRIPTION":z(Object(a.o)())}};return Object(u.useEffect)((function(){Q&&(X.loading||X.error?X.error&&(z(Object(p.e)({show:!0,severity:"error",message:"".concat(X.message?X.message:K("error_unexpected_error"))})),z(Object(p.d)(!1)),$(!1),ee&&ee()):(z(Object(p.e)({show:!0,severity:"success",message:"".concat(W||X.message)})),z(Object(p.d)(!1)),$(!1),ee&&ee(),s&&s()))}),[X,Q]),Object(m.jsx)(d.b,{amount:t,currency:C,description:g,onError:function(e){switch(Y){case"BALANCE":z(Object(a.l)());break;case"CHARGE":z(Object(a.m)());break;case"PAYMENTORDER":z(Object(a.n)());break;case"SUBSCRIPTION":z(Object(a.o)())}},onToken:function(e){switch(Y){case"BALANCE":!function(e){z(Object(p.d)(!0)),z(Object(a.a)({buyamount:r,comments:O,corpid:v,invoiceid:S,metadata:N,orgid:q,purchaseorder:P,reference:L,settings:{title:G,description:g,currency:C,amount:t},token:e,totalamount:M,totalpay:H})),$(!0)}(e);break;case"CHARGE":!function(e){z(Object(p.d)(!0)),z(Object(a.d)({comments:O,corpid:v,invoiceid:S,metadata:N,orgid:q,override:U,purchaseorder:P,settings:{title:G,description:g,currency:C,amount:t},token:e})),$(!0)}(e);break;case"PAYMENTORDER":!function(e){z(Object(p.d)(!0)),z(Object(a.i)({corpid:v,metadata:N,orgid:q,paymentorderid:D,settings:{title:G,description:g,currency:C,amount:t},token:e})),$(!0)}(e);break;case"SUBSCRIPTION":!function(e){z(Object(p.d)(!0)),z(Object(a.p)({metadata:N,settings:{title:G,description:g,currency:C,amount:t,interval:R,interval_count:_,limit:I},token:e})),$(!0)}(e)}},options:{style:Object(n.a)({maincolor:"#7721AD",buttontext:"#FFFFFF",maintext:"#7721AD"},B)},publicKey:F||y,title:G,children:Object(m.jsx)(d.a,{children:function(e){var t=e.openCulqi;return Object(m.jsx)(o.a,{color:"primary",disabled:A||Q,onClick:t,startIcon:Object(m.jsx)(l.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},type:"button",variant:"contained",children:i||K(f.a.pay)})}})})}},999:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return r}));var n=i(0);var c=Object(n.createContext)({}),r=c.Consumer,l="checkout_cerrado",s="https://checkout.culqi.com",o=function(e){var t,i;function r(){for(var t,i=arguments.length,n=new Array(i),c=0;c<i;c++)n[c]=arguments[c];return(t=e.call.apply(e,[this].concat(n))||this).state={amount:t.props.amount||0},t.getCulqiSettings=function(){var e=t.state.amount,i=t.props,n=i.currency,c=void 0===n?"PEN":n,r=i.description,l=void 0===r?"":r,s=i.title;return{amount:e,currency:c,description:l,title:void 0===s?"":s}},t.initCulqi=function(){var e=t.props,i=e.publicKey,n=e.options,c=void 0===n?{}:n,r=t.getCulqiSettings();t.setCulqiOptions(c),window.Culqi.publicKey=i,requestAnimationFrame((function(){t.setCulqiSettings(r)})),window.culqi=function(){}},t.onCulqiLoad=function(e){window.Culqi&&t.initCulqi()},t.onCulqiEvent=function(e){var i=e.origin,n=e.data,c=t.props,r=c.onClose,o=c.onError,a=c.onToken;if(i===s&&("string"===typeof n&&n===l&&(r&&r(),t.initCulqi()),"object"===typeof n)){var d=n.object;if(!d)return;"token"===d?t.setState({token:n},(function(){a&&a(n)})):"error"===d&&t.setState({error:n},(function(){o&&o(n)}))}},t.openCulqi=function(){window.Culqi&&window.Culqi.open()},t.setCulqiOptions=function(e){Object.keys(e).length>0&&window.Culqi&&window.Culqi.options(e)},t.setCulqiSettings=function(e){window.Culqi&&window.Culqi.settings(e)},t.setAmount=function(e){t.setState({amount:e||0})},t}i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=r.prototype;return o.componentDidMount=function(){if(this.props.publicKey){var e=document.createElement("script");e.id="culqi-js",e.src="https://checkout.culqi.com/js/v3",e.async=!0,e.onload=this.onCulqiLoad,this.culqiScript=e,document.body.appendChild(this.culqiScript),window.addEventListener("message",this.onCulqiEvent,!1)}},o.componentDidUpdate=function(e,t){t.amount!==this.state.amount&&this.setCulqiSettings(this.getCulqiSettings())},o.componentWillUnmount=function(){this.culqiScript&&this.culqiScript.parentNode.removeChild(this.culqiScript),window.removeEventListener("message",this.onCulqiEvent,!1),window.culqi=void 0},o.render=function(){if(!this.props.publicKey)throw new Error("Please pass along a `publicKey` prop.");return Object(n.createElement)(c.Provider,{children:this.props.children,value:{openCulqi:this.openCulqi,setAmount:this.setAmount,amount:this.state.amount,token:this.state.token,error:this.state.error}})},r}(n.Component)}}]);
//# sourceMappingURL=58.b66f36f4.chunk.js.map