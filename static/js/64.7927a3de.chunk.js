(this["webpackJsonpclient-laraigo"]=this["webpackJsonpclient-laraigo"]||[]).push([[64],{1414:function(e,t,a){"use strict";a.r(t);var n=a(26),o=a(24),i=a.n(o),l=a(39),c=a(1),r=a(20),u=a(0),s=a.n(u),d=a(25),v=a(40),b=a(94),p=a(48),f=a(7),m=a(779),j=a(169),y=a(780),O=a.n(y),g=a(122),h=a(8),x=a(205),N=a(46),C=a(83),_=a(44),D=a(778),w=a.n(D),S=a(28),E=a(814),I=a(10),P=a(2),R=Object(j.a)((function(e){return{containerDetail:{marginTop:e.spacing(2),padding:e.spacing(2),background:"#fff"},button:{padding:12,fontWeight:500,fontSize:"14px",textTransform:"initial"}}})),U=function(e){var t,a,o,m,j,y,N,D,E,I,U,A,L,T,F=e.data,V=F.row,k=F.edit,M=e.setViewSelected,z=e.multiData,q=e.fetchData,Y=e.arrayBread,G=R(),B=Object(u.useState)(!1),H=Object(r.a)(B,2),K=H[0],J=H[1],W=Object(u.useState)((null===V||void 0===V?void 0:V.billbyorg)||!1),Q=Object(r.a)(W,2),X=Q[0],Z=Q[1],$=Object(u.useState)((null===V||void 0===V?void 0:V.doctype)||("PE"===(null===V||void 0===V?void 0:V.sunatcountry)?"1":"0")),ee=Object(r.a)($,2),te=ee[0],ae=ee[1],ne=z[3]&&z[3].success?z[3].data:[],oe=Object(d.b)((function(e){return e.main.execute})),ie=Object(v.c)(),le=Object(g.a)().t,ce=Object(d.b)((function(e){return e.login.validateToken.user})),re=z[0]&&z[0].success?z[0].data:[],ue=z[1]&&z[1].success?z[1].data:[],se=z[2]&&z[2].success?z[2].data:[],de=Object(d.b)((function(e){return e.signup.countryList})),ve=z[4]&&z[4].success?z[4].data:[],be=z[5]&&z[5].success?z[5].data:[],pe=Object(x.d)({defaultValues:{id:V?V.corpid:0,description:V&&V.description||"",type:V?V.type:"NINGUNO",status:(null===V||void 0===V?void 0:V.status)||"ACTIVO",logo:V?V.logo:"",logotype:V?V.logotype:"",paymentplanid:(null===V||void 0===V?void 0:V.paymentplanid)||0,billbyorg:(null===V||void 0===V?void 0:V.billbyorg)||!1,doctype:(null===V||void 0===V?void 0:V.doctype)||"",docnum:(null===V||void 0===V?void 0:V.docnum)||"",businessname:(null===V||void 0===V?void 0:V.businessname)||"",fiscaladdress:(null===V||void 0===V?void 0:V.fiscaladdress)||"",sunatcountry:(null===V||void 0===V?void 0:V.sunatcountry)||"",contactemail:(null===V||void 0===V?void 0:V.contactemail)||"",automaticpayment:(null===V||void 0===V?void 0:V.automaticpayment)||!1,automaticperiod:(null===V||void 0===V?void 0:V.automaticperiod)||!1,automaticinvoice:(null===V||void 0===V?void 0:V.automaticinvoice)||!1,contact:(null===V||void 0===V?void 0:V.contact)||"",autosendinvoice:(null===V||void 0===V?void 0:V.autosendinvoice)||!1,credittype:(null===V||void 0===V?void 0:V.credittype)||"typecredit_alcontado",operation:V?"UPDATE":"INSERT",paymentmethod:(null===V||void 0===V?void 0:V.paymentmethod)||"",companysize:null,partner:(null===V||void 0===V?void 0:V.partner)||""}}),fe=pe.register,me=pe.handleSubmit,je=pe.setValue,ye=pe.trigger,Oe=pe.getValues,ge=pe.formState.errors;s.a.useEffect((function(){fe("description",{validate:function(e){return e&&e.length||le(h.a.field_required)}}),fe("type",{validate:function(e){return e&&e.length||le(h.a.field_required)}}),fe("status",{validate:function(e){return e&&e.length||le(h.a.field_required)}}),fe("doctype",{validate:function(e){return!!X||(e&&e.length||le(h.a.field_required))}}),fe("docnum",{validate:function(e){return!!X||function(e){if(!e)return le(h.a.field_required);var t="";switch(te){case"0":return t=le(h.a.doctype_others_non_home_error),e.length>15?t:void 0;case"1":return t=le(h.a.doctype_dni_error),8!==e.length?t:void 0;case"4":return t=le(h.a.doctype_foreigners_card),e.length>12?t:void 0;case"6":return t=le(h.a.doctype_ruc_error),11!==e.length?t:void 0;case"7":return t=le(h.a.doctype_passport_error),e.length>12?t:void 0;case"11":default:return le(h.a.doctype_unknown_error)}}(e)}}),fe("businessname",{validate:function(e){return!!X||(e&&e.length||le(h.a.field_required))}}),fe("fiscaladdress",{validate:function(e){return!!X||(e&&e.length||le(h.a.field_required))}}),fe("contact",{validate:function(e){return!!X||(e&&e.length||le(h.a.field_required))}}),fe("contactemail",{validate:{hasvalue:function(e){return!!X||(e&&e.length||le(h.a.field_required))},isemail:function(e){return!!X||(/\S+@\S+\.\S+/.test(e)||le(h.a.emailverification)+"")}}}),fe("sunatcountry",{validate:function(e){return!!X||(e&&e.length||le(h.a.field_required))}}),fe("credittype",{validate:function(e){return!!X||(e&&e.length||le(h.a.field_required))}}),fe("paymentmethod",{validate:function(e){return"SUPERADMIN"!==(null===ce||void 0===ce?void 0:ce.roledesc)||(e&&e.length||le(h.a.field_required))}}),fe("paymentplanid",{validate:function(e){return e&&e>0||le(h.a.field_required)}}),fe("automaticpayment"),fe("automaticperiod"),fe("automaticinvoice"),fe("partner")}),[fe,X,te,Oe,le]),Object(u.useEffect)((function(){}),[oe,K]),Object(u.useEffect)((function(){if(K)if(oe.loading||oe.error){if(oe.error){var e=le(oe.code||"error_unexpected_error",{module:le(h.a.corporation_plural).toLocaleLowerCase()});ie(Object(_.e)({show:!0,severity:"error",message:e})),J(!1),ie(Object(_.d)(!1))}}else ie(Object(_.e)({show:!0,severity:"success",message:le(V?h.a.successful_edit:h.a.successful_register)})),q&&q(),ie(Object(_.d)(!1)),M("view-1")}),[oe,K]);var he=me((function(e){var t=function(){var t=Object(l.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ie(Object(_.d)(!0)),"object"!==typeof e.logo||!e.logo){t.next=7;break}return(a=new FormData).append("file",e.logo,e.logo.name),t.next=6,S.e.uploadFile(a);case 6:e.logo=t.sent.data.url;case 7:if("object"!==typeof e.logotype||!e.logotype){t.next=13;break}return(n=new FormData).append("file",e.logotype,e.logotype.name),t.next=12,S.e.uploadFile(n);case 12:e.logotype=t.sent.data.url;case 13:e.billbyorg&&(e=Object(c.a)(Object(c.a)({},e),{},{doctype:"",docnum:"",businessname:"",fiscaladdress:"",contact:"",contactemail:"",sunatcountry:"",autosendinvoice:!1,automaticpayment:!1,automaticperiod:!0,automaticinvoice:!0})),J(!0),ie(Object(C.c)(Object(f.Of)(e)));case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();ie(Object(_.a)({visible:!0,question:le(h.a.confirmation_save),callback:t}))})),xe=Object(u.useMemo)((function(){return de.loading?[]:de.data.sort((function(e,t){return e.description.localeCompare(t.description)}))}),[de]),Ne=Object(u.useMemo)((function(){return ne&&0!==ne.length?("PE"===Oe("sunatcountry")?ne.filter((function(e){return"0"!==e.domainvalue})):ne).sort((function(e,t){return e.domaindesc.localeCompare(t.domaindesc)})):[]}),[ne,Oe("sunatcountry")]);return Object(P.jsx)("div",{style:{width:"100%"},children:Object(P.jsxs)("form",{onSubmit:he,children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(p.L,{breadcrumbs:[].concat(Object(n.a)(Y),[{id:"view-2",name:le(h.a.corporationdetail)}]),handleClick:M}),Object(P.jsx)(p.R,{title:V?"".concat(V.description):le(h.a.newcorporation)})]}),Object(P.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[Object(P.jsx)(b.a,{variant:"contained",type:"button",color:"primary",startIcon:Object(P.jsx)(w.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){return M("view-1")},children:le(h.a.back)}),k&&Object(P.jsx)(b.a,{className:G.button,variant:"contained",color:"primary",type:"submit",startIcon:Object(P.jsx)(O.a,{color:"secondary"}),style:{backgroundColor:"#55BD84"},children:le(h.a.save)})]})]}),Object(P.jsxs)("div",{className:G.containerDetail,children:[Object(P.jsxs)("div",{className:"row-zyx",children:[k?Object(P.jsx)(p.l,{label:le(h.a.corporation),className:"col-6",valueDefault:Oe("description"),onChange:function(e){return je("description",e)},error:null===ge||void 0===ge||null===(t=ge.description)||void 0===t?void 0:t.message}):Object(P.jsx)(p.v,{label:le(h.a.corporation),value:null===V||void 0===V?void 0:V.description,className:"col-6"}),k?Object(P.jsx)(p.u,{label:le(h.a.type),className:"col-6",valueDefault:Oe("type"),onChange:function(e){return je("type",null===e||void 0===e?void 0:e.domainvalue)},error:null===ge||void 0===ge||null===(a=ge.type)||void 0===a?void 0:a.message,data:ue,uset:!0,prefixTranslation:"type_corp_",optionDesc:"domainvalue",optionValue:"domainvalue"}):Object(P.jsx)(p.v,{label:le(h.a.type),value:(null===V||void 0===V?void 0:V.type)||"",className:"col-6"})]}),Object(P.jsxs)("div",{className:"row-zyx",children:[Object(P.jsx)(p.u,{label:le(h.a.status),className:"col-6",valueDefault:Oe("status"),onChange:function(e){return je("status",null===e||void 0===e?void 0:e.domainvalue)},error:null===ge||void 0===ge||null===(o=ge.status)||void 0===o?void 0:o.message,data:re,uset:!0,prefixTranslation:"status_",optionDesc:"domainvalue",optionValue:"domainvalue"}),Object(P.jsx)(p.u,{label:le(h.a.partner),className:"col-6",valueDefault:Oe("partner"),onChange:function(e){return je("partner",(null===e||void 0===e?void 0:e.domainvalue)||"")},data:be,error:null===ge||void 0===ge||null===(m=ge.partner)||void 0===m?void 0:m.message,optionDesc:"domainvalue",optionValue:"domainvalue"})]}),Object(P.jsxs)("div",{className:"row-zyx",children:[Object(P.jsx)(p.N,{label:le(h.a.billbyorg),className:"col-6",valueDefault:Oe("billbyorg"),onChange:function(e){je("billbyorg",e),Z(e),ye("billbyorg")}}),Object(P.jsx)(p.u,{label:le(h.a.billingplan),className:"col-6",valueDefault:Oe("paymentplanid"),onChange:function(e){return je("paymentplanid",(null===e||void 0===e?void 0:e.paymentplanid)||0)},data:se,error:null===ge||void 0===ge||null===(j=ge.paymentplanid)||void 0===j?void 0:j.message,optionDesc:"plan",optionValue:"paymentplanid"})]}),"SUPERADMIN"===(null===ce||void 0===ce?void 0:ce.roledesc)&&Object(P.jsx)("div",{className:"row-zyx",children:Object(P.jsx)(p.u,{label:le(h.a.paymentmethod),className:"col-12",valueDefault:Oe("paymentmethod"),onChange:function(e){return je("paymentmethod",(null===e||void 0===e?void 0:e.value)||"")},data:[{name:le(h.a.prepaid),value:"PREPAGO"},{name:le(h.a.postpaid),value:"POSTPAGO"}],error:null===ge||void 0===ge||null===(y=ge.paymentmethod)||void 0===y?void 0:y.message,optionDesc:"name",optionValue:"value"})}),!Oe("billbyorg")&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{className:"row-zyx",children:[Object(P.jsx)(p.u,{label:le(h.a.country),className:"col-6",valueDefault:Oe("sunatcountry"),onChange:function(e){je("sunatcountry",(null===e||void 0===e?void 0:e.code)||""),je("doctype","PE"===(null===e||void 0===e?void 0:e.code)?"1":"0"),ae("PE"===(null===e||void 0===e?void 0:e.code)?"1":"0")},error:null===ge||void 0===ge||null===(N=ge.sunatcountry)||void 0===N?void 0:N.message,data:xe,optionDesc:"description",optionValue:"code"}),Object(P.jsx)(p.l,{label:le(h.a.fiscaladdress),className:"col-6",valueDefault:Oe("fiscaladdress"),onChange:function(e){return je("fiscaladdress",e)},error:null===ge||void 0===ge||null===(D=ge.fiscaladdress)||void 0===D?void 0:D.message})]}),Object(P.jsxs)("div",{className:"row-zyx",children:[Object(P.jsx)(p.u,{uset:!0,prefixTranslation:"billingfield_",label:le(h.a.docType),className:"col-6",valueDefault:te,disabled:"PE"!==Oe("sunatcountry"),onChange:function(e){je("doctype",(null===e||void 0===e?void 0:e.domainvalue)||""),ae((null===e||void 0===e?void 0:e.domainvalue)||"")},error:null===ge||void 0===ge||null===(E=ge.doctype)||void 0===E?void 0:E.message,data:Ne,optionDesc:"domaindesc",optionValue:"domainvalue"}),Object(P.jsx)(p.l,{label:le(h.a.documentnumber),className:"col-6",valueDefault:Oe("docnum"),onChange:function(e){return je("docnum",e)},error:null===ge||void 0===ge||null===(I=ge.docnum)||void 0===I?void 0:I.message})]}),Object(P.jsx)("div",{className:"row-zyx",children:Object(P.jsx)(p.l,{label:le(h.a.businessname),className:"col-6",valueDefault:Oe("businessname"),onChange:function(e){return je("businessname",e)},error:null===ge||void 0===ge||null===(U=ge.businessname)||void 0===U?void 0:U.message})}),Object(P.jsxs)("div",{className:"row-zyx",children:[Object(P.jsx)(p.l,{label:le(h.a.contactbilling),className:"col-6",valueDefault:Oe("contact"),onChange:function(e){return je("contact",e)},error:null===ge||void 0===ge||null===(A=ge.contact)||void 0===A?void 0:A.message}),Object(P.jsx)(p.l,{label:le(h.a.billingmail),className:"col-6",valueDefault:Oe("contactemail"),onChange:function(e){return je("contactemail",e)},error:null===ge||void 0===ge||null===(L=ge.contactemail)||void 0===L?void 0:L.message})]}),"SUPERADMIN"===(null===ce||void 0===ce?void 0:ce.roledesc)&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{className:"row-zyx",children:[Object(P.jsx)(p.u,{label:le(h.a.typecredit),className:"col-6",valueDefault:Oe("credittype"),onChange:function(e){je("credittype",(null===e||void 0===e?void 0:e.domainvalue)||"")},error:null===ge||void 0===ge||null===(T=ge.credittype)||void 0===T?void 0:T.message,disabled:"SUPERADMIN"!==(null===ce||void 0===ce?void 0:ce.roledesc),data:ve,uset:!0,optionDesc:"domainvalue",optionValue:"domainvalue"}),Object(P.jsx)(p.N,{label:le(h.a.autosendinvoice),className:"col-6",valueDefault:Oe("autosendinvoice"),onChange:function(e){return je("autosendinvoice",e)},disabled:"SUPERADMIN"!==(null===ce||void 0===ce?void 0:ce.roledesc)})]}),Object(P.jsxs)("div",{className:"row-zyx",children:[Object(P.jsx)(p.N,{label:le(h.a.automaticpayment),className:"col-6",valueDefault:Oe("automaticpayment"),onChange:function(e){return je("automaticpayment",e)},disabled:"SUPERADMIN"!==(null===ce||void 0===ce?void 0:ce.roledesc)}),Object(P.jsx)(p.N,{label:le(h.a.automaticperiod),className:"col-6",valueDefault:Oe("automaticperiod"),onChange:function(e){return je("automaticperiod",e)},disabled:"SUPERADMIN"!==(null===ce||void 0===ce?void 0:ce.roledesc)})]}),Object(P.jsx)("div",{className:"row-zyx",children:Object(P.jsx)(p.N,{label:le(h.a.automaticinvoice),className:"col-6",valueDefault:Oe("automaticinvoice"),onChange:function(e){return je("automaticinvoice",e)},disabled:"SUPERADMIN"!==(null===ce||void 0===ce?void 0:ce.roledesc)})})]})]})]})]})})};t.default=function(){var e=Object(N.g)(),t=Object(d.b)((function(e){return e.login.validateToken.user})),a=Object(v.c)(),n=Object(g.a)().t,o=Object(d.b)((function(e){return e.main})),i=Object(d.b)((function(e){return e.main.execute})),l=[{id:"view-0",name:n(h.a.configuration_plural)},{id:"view-1",name:n(h.a.corporation_plural)}],j=Object(u.useState)([]),y=Object(r.a)(j,2),O=y[0],x=y[1],D=Object(u.useState)("view-1"),S=Object(r.a)(D,2),R=S[0],A=S[1],L=Object(u.useState)({row:null,edit:!1}),T=Object(r.a)(L,2),F=T[0],V=T[1],k=Object(u.useState)(!1),M=Object(r.a)(k,2),z=M[0],q=M[1],Y=s.a.useMemo((function(){return[{accessor:"corpid",NoFilter:!0,isComponent:!0,minWidth:60,width:"1%",Cell:function(e){var t=e.cell.row.original;return Object(P.jsx)(p.M,{viewFunction:function(){return B(t)},deleteFunction:function(){return K(t)},editFunction:function(){return H(t)}})}},{Header:n(h.a.corporation),accessor:"description",NoFilter:!0},{Header:n(h.a.type),accessor:"typedesc",NoFilter:!0},{Header:n(h.a.billingplan),accessor:"paymentplandesc",NoFilter:!0},{Header:n(h.a.status),accessor:"statusdesc",NoFilter:!0}]}),[]),G=function(){return a(Object(C.g)(Object(f.yc)(0)))};Object(u.useEffect)((function(){return G(),a(Object(E.c)()),a(Object(C.p)([Object(f.Ke)("ESTADOGENERICO"),Object(f.Ke)("TIPOCORP"),Object(f.Md)(),Object(f.Le)("BILLINGDOCUMENTTYPE","_DOCUMENT",1,0),Object(f.Ke)("TYPECREDIT"),Object(f.Ke)("TYPEPARTNER")])),function(){a(Object(C.t)())}}),[]),Object(u.useEffect)((function(){if(z)if(i.loading||i.error){if(i.error){var e=n(i.code||"error_unexpected_error",{module:n(h.a.corporation_plural).toLocaleLowerCase()});a(Object(_.e)({show:!0,severity:"error",message:e})),a(Object(_.d)(!1)),q(!1)}}else a(Object(_.e)({show:!0,severity:"success",message:n(h.a.successful_delete)})),G(),a(Object(_.d)(!1)),q(!1)}),[i,z]),Object(u.useEffect)((function(){x(o.mainData.data.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{typedesc:(n("type_corp_".concat(e.type).toLowerCase())||"").toUpperCase(),statusdesc:(n("status_".concat(e.status).toLowerCase())||"").toUpperCase()})})))}),[o.mainData.data]);var B=function(e){A("view-2"),V({row:e,edit:!1})},H=function(e){A("view-2"),V({row:e,edit:!0})},K=function(e){a(Object(_.a)({visible:!0,question:n(h.a.confirmation_delete),callback:function(){a(Object(C.c)(Object(f.Of)(Object(c.a)(Object(c.a)({},e),{},{operation:"DELETE",status:"ELIMINADO",id:e.corpid})))),a(Object(_.d)(!0)),q(!0)}}))};function J(t){"view-0"!==t?A(t):e.push(I.a.CONFIGURATION)}return"view-1"===R?Object(P.jsxs)("div",{style:{width:"100%"},children:[Object(P.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:Object(P.jsx)(p.L,{breadcrumbs:l,handleClick:J})}),Object(P.jsx)(m.f,{columns:Y,titlemodule:n(h.a.corporation_plural,{count:2}),onClickRow:H,data:O,ButtonsElement:function(){return Object(P.jsx)(b.a,{disabled:o.mainData.loading,variant:"contained",type:"button",color:"primary",startIcon:Object(P.jsx)(w.a,{color:"secondary"}),style:{backgroundColor:"#FB5F5F"},onClick:function(){return e.push(I.a.CONFIGURATION)},children:n(h.a.back)})},download:!0,loading:o.mainData.loading,register:["SUPERADMIN"].includes((null===t||void 0===t?void 0:t.roledesc)||""),handleRegister:function(){A("view-2"),V({row:null,edit:!0})}})]}):"view-2"===R?Object(P.jsx)(U,{data:F,setViewSelected:J,multiData:o.multiData.data,fetchData:G,arrayBread:l}):null}},778:function(e,t,a){"use strict";var n=a(45),o=a(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(0)),l=(0,n(a(62)).default)(i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.default=l},780:function(e,t,a){"use strict";var n=a(45),o=a(61);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(0)),l=(0,n(a(62)).default)(i.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.default=l},814:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return u}));var n=a(28),o=a(47),i=function(e){return{callAPI:function(){return n.d.execSub(e)},types:{loading:o.a.SIGNUP,success:o.a.SIGNUP_SUCCESS,failure:o.a.SIGNUP_FAILURE},type:null}},l=function(e){return{callAPI:function(){return n.d.validateNewUser(e)},types:{loading:o.a.ISVALID,success:o.a.ISVALID_SUCCESS,failure:o.a.ISVALID_FAILURE},type:null}},c=function(e){return{callAPI:function(){return n.d.vrfplan(e)},types:{loading:o.a.VERIFYPLAN,success:o.a.VERIFYPLAN_SUCCESS,failure:o.a.VERIFYPLAN_FAILURE},type:null}},r=function(){return{callAPI:function(){return n.d.getCurrencyList()},types:{loading:o.a.CURRENCYLIST,success:o.a.CURRENCYLIST_SUCCESS,failure:o.a.CURRENCYLIST_FAILURE},type:null}},u=function(){return{callAPI:function(){return n.d.getCountryList()},types:{loading:o.a.COUNTRYLIST,success:o.a.COUNTRYLIST_SUCCESS,failure:o.a.COUNTRYLIST_FAILURE},type:null}}}}]);
//# sourceMappingURL=64.7927a3de.chunk.js.map